{"version":3,"sources":["kendo.spreadsheet.js"],"names":["f","define","$","parseFloat","parseInt","parseColor","color","nothrow","m","ret","_Color","toLowerCase","namedColorRegexp","exec","_RGB","Color","namedColors","match","_Bytes","Error","hex","n","width","pad","toString","length","hue2rgb","p","q","t","i","_HSV","_HSL","value","re","processor","parts","channels","this","formats","arguments","resolveColor","process","r","g","b","normalizeByte","prototype","toHex","padDigit","charAt","substr","replace","isNaN","brightness","round","Math","percBrightness","sqrt","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","hasOwnProperty","push","RegExp","join","kendo","Class","extend","toHSV","toRGB","toBytes","toCss","toCssRgba","rgb","a","toFixed","toDisplay","support","browser","msie","version","equals","c","diff","c2","NaN","c1","pow","clone","init","h","s","min","max","v","delta","toHSL","d","l","floor","fromBytes","fromRGB","fromHSV","fromHSL","window","jQuery","amd","a1","a2","a3","undefined","triggerEvent","self","type","_value","trigger","relative","array","element","pos","Array","slice","call","indexOf","preventDefault","ev","bind","callback","obj","apply","ui","Widget","KEYS","keys","BACKGROUNDCOLOR","ITEMSELECTEDCLASS","SIMPLEPALETTE","WEBPALETTE","APPLY_CANCEL","cancel","NS","CLICK_NS","KEYDOWN_NS","isIE8","ColorSelector","options","ariaId","that","fn","_tabIndex","attr","_ariaId","_standalone","_triggerSelect","_triggerChange","name","events","_updateUI","opacity","enable","wrapper","remove","append","_onEnable","_select","nohooks","prev","destroy","off","find","noop","_selectOnHide","_cancel","ColorPalette","colors","tileSize","height","palette","columns","split","isArray","map","x","_selectedID","guid","addClass","_template","id","on","currentTarget","css","_keydown","test","focus","removeAttr","e","selected","items","current","filter","get","keyCode","LEFT","RIGHT","DOWN","UP","ENTER","ESC","_current","ex","item","removeClass","each","template","FlatColorPicker","_hueElements","_selectedColor","_colorAsText","_sliders","_hsvArea","val","input","autoupdate","setTimeout","end","_getHSV","_applyIEFilter","_hueSlider","_opacitySlider","_hsvRect","_hsvHandle","buttons","preview","messages","track","url","currentStyle","backgroundImage","style","hueChange","opacityChange","kendoSlider","tickPlacement","showButtons","slide","change","data","update","y","offset","dx","left","dy","top","rw","rh","_svChange","hsvRect","hsvHandle","_hsvEvents","UserEvents","global","press","getOffset","location","start","move","handle","prop","shiftKey","hue","ctrlKey","F2","select","rect","handlePosition","position","dontChangeInput","ColorPicker","content","label","accesskey","hide","after","is","appendTo","closest","add","click","open","isDefaultPrevented","toggle","_popup","_selector","innerWrapper","children","icon","toolIcon","close","ARIATemplate","_getPopup","_isInputTypeColor","el","tagName","formattedValue","_ariaTemplate","key","visible","selectorType","selector","popup","document","body","kendoPopup","anchor","adjustSize","activate","plugin","numChar","colIndex","letter","String","fromCharCode","ref","rowIndex","$ref","filterRowIndex","frozenRows","freezePane","rowSplit","toWidth","px","toHeight","convertColor","$0","$1","substring","toUpperCase","borderStyle","alias","borderSideTemplate","result","size","borderTemplate","border","right","bottom","inflate","rows","mergedCells","sorted","ctx","rowData","rowsByIndex","indexRows","row","index","_source","cells","sortByIndex","fillCells","sort","cell","rowSpan","colSpan","cellIndex","ri","nextRow","cellData","EMPTY_CELL","insertCell","spanCell","insertCellAt","appendCell","startIndex","SPAN_CELL","RELS","CORE","APP","CONTENT_TYPES","WORKBOOK","WORKSHEET","WORKBOOK_RELS","WORKSHEET_RELS","SHARED_STRINGS","STYLES","DATE_EPOCH","Date","Worksheet","sharedStrings","styles","borders","_strings","_styles","_borders","relsToXML","hyperlinks","toXML","mergeCells","_readCells","from","to","frozenColumns","colSplit","defaults","showGridLines","_lookupString","indexes","uniqueCount","count","_lookupStyle","json","stringify","inArray","_lookupBorder","j","_cell","column","displayValue","borderLeft","borderRight","borderTop","borderBottom","bold","background","italic","underline","fontFamily","fontName","fontSize","format","textAlign","hAlign","verticalAlign","vAlign","wrap","borderId","autoWidth","getTime","getTimezoneOffset","date","MS_PER_MINUTE","MS_PER_DAY","formula","defaultFormats","General","0","0.00","#,##0","#,##0.00","0%","0.00%","0.00E+00","# ?/?","# ??/??","mm-dd-yy","d-mmm-yy","d-mmm","mmm-yy","h:mm AM/PM","h:mm:ss AM/PM","h:mm","h:mm:ss","m/d/yy h:mm","#,##0 ;(#,##0)","#,##0 ;[Red](#,##0)","#,##0.00;(#,##0.00)","#,##0.00;[Red](#,##0.00)","mm:ss","[h]:mm:ss","mmss.0","##0.0E+0","@","[$-404]e/m/d","m/d/yy","t0","t0.00","t#,##0","t#,##0.00","t0%","t0.00%","t# ?/?","t# ??/??","Workbook","_sheets","sheets","proxy","toDataURL","zip","docProps","sheetCount","rels","xl","xlRels","worksheets","sheetRels","idx","sheet","sheetName","relsXml","hasFont","fonts","fills","JSZip","folder","file","creator","lastModifiedBy","created","toJSON","modified","definedNames","localSheetId","title","parseJSON","fontId","fillId","numFmtId","generate","compression","ooxml","ExcelExporter","dataSource","transport","_trimColumns","allColumns","_leafColumns","_prepareColumn","grep","hidden","DataSource","constructor","page","allPages","pageSize","total","group","aggregate","_data","_isServerGrouped","create","field","concat","workbook","Deferred","fetch","then","_columns","_rows","_freezePane","_filter","resolve","view","promise","values","dataItem","text","groupHeaderTemplate","groupFooterTemplate","footerTemplate","filterable","depth","_depth","_dataRow","level","li","dataCells","ci","_hierarchical","aggregates","_dataRows","unshift","_footer","dataItems","footer","_isColumnVisible","_visibleColumns","_headerRow","groups","headers","_prependHeaderRows","headerRows","_prepareHeaderRows","parentCell","parentRow","childRow","totalColSpan","_headerDepth","temp","locked","hierarchy","ExcelMixin","proto","excel","saveAsExcel","proxyURL","fileName","exporter","book","saveAs","dataURI","forceProxy","defined","UNDEFINED","precision","power","math","limitValue","rad","degrees","DEG_TO_RAD","deg","radians","isNumber","valueOrDefault","defaultValue","sqr","objectKey","object","hashKey","str","hash","charCodeAt","hashObject","arrayLimits","arr","MAX_NUM","MIN_NUM","arrayMin","arrayMax","sparseArrayMin","sparseArrayLimits","sparseArrayMax","isFinite","last","first","second","renderTemplate","useWithBlock","paramName","renderAttr","renderAllAttr","attrs","output","renderStyle","renderSize","renderPos","toHyphens","isTransparent","arabicToRoman","literals",1,10,100,2,20,200,3,30,300,4,40,400,5,50,500,6,60,600,7,70,700,8,80,800,9,90,900,1000,"roman","shift","romanToArabic","digits","memoize","cache","Object","ucs2decode","string","extra","counter","ucs2encode","deepExtend","PI","Number","MAX_VALUE","now","util","drawing","dataviz","zeroSize","baseline","measureText","measureBox","TextMetrics","measure","loadFonts","promises","font","load","logToConsole","Promise","all","doc","LRUCache","_size","_length","_map","put","lru","entry","_head","_tail","newer","older","defaultMeasureBox","_cache","_initOptions","baselineMarkerSize","box","styleKey","cacheKey","cachedResult","baselineMarker","_baselineMarker","cloneNode","appendChild","offsetWidth","offsetHeight","offsetTop","parentNode","removeChild","encodeBase64","chr1","chr2","chr3","enc1","enc2","enc3","enc4","encodeUTF8","KEY_STR","ObserversMixin","observers","_observers","addObserver","removeObserver","splice","methodName","event","observer","_suspended","optionsChange","geometryChange","suspend","resume","_observerField","mixins","transform","matrix","Transformation","toMatrix","isFunction","ellipseExtremeAngles","center","rx","ry","extremeX","extremeY","atan2","bboxStartAngle","angle","defineAccessors","fields","capitalized","setAccessor","getAccessor","elipseAngle","swipe","alpha","abs","calculateAngle","cx","cy","cos","sin","normalizeArcParameters","x1","y1","x2","y2","largeArc","cx1","cy1","x21","y21","rx2","ry2","k","yk2","Point","startAngle","endAngle","solveCubic","solveQuadratic","y3","z1","z2","Q","ComplexNumber","b3a","nthRoot","numberSign","multiplyConstant","negate","multiply","isReal","real","PRECISION","toCubicPolynomial","points","calculateCurveAt","t1","curveIntersectionsCount","point","bbox","rayIntersection","intersectsRay","polynomial","roots","bottomRight","lineIntersectionsCount","intersects","minX","maxX","minY","maxY","inRange","lineIntersection","p0","p1","p2","p3","s1x","s2x","s1y","s2y","nx","ny","tolerance","closeOrLess","isOutOfEndPoint","endPoint","controlPoint","rotatedPoint","transformCopy","rotate","hasRootsInRange","rootField","range","intersection","squareRoot","Size","Rect","Circle","Arc","Matrix","PI_DIV_2","other","origin","translate","translateWith","scale","scaleX","scaleY","scaleCopy","transformation","mx","distanceTo","toArray","doRound","separator","arg0","arg1","pt","minPoint","maxPoint","ZERO","setOrigin","setSize","getOrigin","getSize","topLeft","topRight","bottomLeft","tl","tr","br","bl","fromPoints","expand","expandCopy","containsPoint","_isOnPath","rectOuter","rectInner","union","intersect","radius","setCenter","setRadius","getCenter","pointAt","_pointAt","currentPointX","currentPointY","currentPoint","extremeAngles","inCircle","pointDistance","radiusX","radiusY","anticlockwise","MAX_INTERVAL","radian","curvePoints","nextAngle","dir","currentAngle","interval","_arcInterval","intervalAngle","subIntervalsCount","ceil","subIntervalAngle","_intervalCurvePoints","cp1","cp2","arc","currentAngleX","currentAngleY","oldStart","p1Derivative","_derivativeAt","p2Derivative","inAngleRange","distance","angleRad","pointRadius","startPoint","arcParameters","multiplyCopy","invert","det","unit","IDENTITY","_matrix","_optionsChange","img","cNumber","addConstant","nthR","geometry","eventCoordinates","touch","pageX","clientX","pageY","clientY","BaseNode","OptionsStore","SurfaceFactory","SurfaceTooltip","TOOLTIP_TEMPLATE","TOOLTIP_CLOSE_TEMPLATE","Surface","_click","_handler","_mouseenter","_mouseleave","_mousemove","_visual","Group","_enableTracking","tooltip","draw","clear","hideTooltip","_tooltip","exportVisual","_resize","eventTarget","node","domNode","initialTouch","target","_kendoNode","parent","srcElement","showTooltip","shape","show","suspendTracking","_suspendedTracking","resumeTracking","surface","originalEvent","_elementOffset","paddingLeft","paddingTop","_surfacePoint","coord","childNodes","observe","insertAt","removeSelf","invalidate","childrenChange","action","prefix","member","_wrap","getter","set","composite","_set","path","_clear","setter","_items","register","order","preferred","navigator","userAgent","_tooltipOptions","Popup","animation","copyAnchorStyles","collision","_openPopupHandler","_openPopup","_bindEvents","showOn","autoHide","hideDelay","showAfter","_showHandler","_showEvent","_surfaceLeaveHandler","_surfaceLeave","_mouseleaveHandler","_mousemoveHandler","_hideClick","unbind","clearTimeout","_timeout","shared","_tooltipShape","_updateContent","html","_position","elementSize","tooltipOffset","surfaceOffset","_offset","_show","_showTimeout","delay","_autoHide","_measure","_closeButton","prependTo","outerWidth","outerHeight","_popupRelatedTarget","relatedTarget","DASH_ARRAYS","dot","dash","longdash","dashdot","longdashdot","longdashdotdot","GRADIENT","IDENTITY_MATRIX_HASH","Paintable","fill","stroke","newFill","nodeType","Traversable","childrenField","traverse","child","Measurable","strokeWidth","combinedMatrix","currentTransform","matrixHash","_bboxCache","_matrixHash","_bbox","elementsBoundingBox","elements","applyTransform","boundingBox","elementBoundingBox","rawBBox","elementsClippedBoundingBox","clippedBBox","defineGeometryAccessors","names","geometryAccessor","fieldName","definePointAccessors","pointAccessor","defineOptionsAccessors","optionsAccessor","generateDefinitionId","defId","align","alignment","alignElements","stack","stackElements","getStackElements","vStack","wrapElements","vWrap","axis","otherAxis","sizeField","startElement","elementIdx","stacks","getStacks","translateToPoint","fit","rectSize","maxSize","stackSize","addElementToStack","stackAxis","previousBBox","alignStart","START","END","transofrm","ElementsArray","Text","GeometryElementsArray","Segment","Path","MultiPath","Image","GradientStop","StopsArray","Gradient","LinearGradient","RadialGradient","Layout","pop","HORIZONTAL","Element","clip","parentTransform","parentMatrix","elementTransform","elementMatrix","_clippedBBox","_hasFill","_containsPoint","_hasStroke","_splice","_change","_add","_remove","howMany","_clearObserver","_setObserver","_reparent","insert","removeAt","newParent","metrics","_geometry","toPath","moveTo","curveTo","controlIn","controlOut","bboxTo","toSegment","segmentAnchor","toSegmentAnchor","_curveBoundingBox","_lineBoundingBox","extremesX","_curveExtremesFor","extremesY","xLimits","yLimits","extremes","_curveExtremes","_calculateCurveAt","x3","x4","t2","_intersectionsTo","segment","intersectionsCount","_isOnCurveTo","endSegment","p4","rotation","rotatedPoints","_isOnLineTo","_isOnPathTo","isOnPath","segments","lineJoin","lineTo","lastSegment","_addArcSegments","arcTo","closed","previous","segmentBox","fromRect","fromArc","paths","src","_rect","arg","stop","stops","_createStops","_userSpace","userSpace","addStop","removeStop","_radius","_fallbackFill","fallbackFill","_defaults","_fieldMap","alignContent","justifyContent","alignItems","spacing","orientation","lineSpacing","_initMap","fieldMap","groupsSizeField","groupAxis","groupsAxis","reflow","groupOptions","groupsSize","groupStart","groupOrigin","elementOrigin","elementStart","groupBox","groupIdx","scaledStart","scaledSize","newStart","_initGroups","lineSize","bboxes","_newGroup","addGroup","_addToGroup","parseParameters","parameters","SPLIT_REGEX","number","toLineParamaters","isVertical","insertPosition","reflectionPoint","quadraticToCubicControlPoints","third","trim","SEGMENT_REGEX","MOVE","CLOSE","PathParser","parse","previousCommand","multiPath","params","closePath","command","isRelative","ShapeMap","lastControlIn","cubicControlPoints","zIndexComparer","_zIndex","LEVEL_STEP","MAX_LEVEL","QuadRoot","shapes","_quadNode","pointShapes","QuadNode","inBounds","nodeRect","nodeBottomRight","inserted","_initChildren","childIdx","shapeIdx","halfWidth","halfHeight","ShapesQuadTree","ROOT_SIZE","initRoots","rootMap","root","rootElements","pointShape","sectorRoot","assignZindex","levelWeight","zIndex","parents","bboxChange","_insertShape","elementsArray","_insert","rootSize","sectors","getSectors","inRoot","bottomX","bottomY","alignToScreen","ctm","getScreenCTM","baseUrl","base","getElementsByTagName","href","hashIndex","refUrl","exportGroup","exportRoot","svg","RootNode","SVG_NS","render","exportSVG","raw","isDefinition","decodeEntities","_element","innerHTML","textContent","innerText","DefinitionMap","BUTT","NONE","SOLID","SPACE","TRANSFORM","_root","renderSVG","_rootElement","firstElementChild","attachTo","resize","viewBox","setAttribute","visual","Node","definitions","clearDefinitions","childNode","nodeMap","createDefinitions","domElement","container","createElement","firstChild","insertBefore","setElement","childElement","nodes","renderChildren","updateDefinition","allAttr","allCss","removeAttribute","mapTransform","renderTransform","transformChange","mapStyle","cursor","renderOpacity","definition","hasDefinitions","definitionChange","renderDefinitions","mapDefinitions","defs","DefinitionNode","definitionMap","addDefinitions","removeDefinitions","createDefinition","ClipNode","LinearGradientNode","RadialGradientNode","addDefinition","mapItem","removeDefinition","GroupNode","PathNode","renderData","mapFill","mapStroke","attributeMap","fill.opacity","stroke.color","stroke.width","stroke.opacity","printPath","segmentType","currentType","printPoints","segmentStart","segmentEnd","renderLinecap","dashType","renderDashType","renderStroke","dashArray","lineCap","renderFill","ArcNode","MultiPathNode","CircleNode","TextNode","encode","htmlEncode","setY","renderContent","ImageNode","mapPosition","mapSource","renderPosition","renderSource","GradientStopNode","renderOffset","GradientNode","loadStops","stopNode","mapCoordinates","renderCoordinates","mapSpace","RectNode","testFragment","testContainer","hasParser","DOMParser","namespaceURI","parser","chartDoc","parseFromString","importedDoc","adoptNode","documentElement","implementation","hasFeature","_exportGroup","exportImage","cors","display","image","always","addGradientStops","gradient","addColorStop","FRAME_DELAY","canvas","_searchTree","defer","rootElement","loadingStates","loading","when","done","_invalidate","reject","fail","_mouseTrackHandler","_trackMouse","currentShape","_currentShape","initClip","clearClip","setClip","beginPath","renderPoints","setTransform","loadElements","setOpacity","globalAlpha","renderTo","save","restore","getContext","invalidateHandler","throttle","animationFrame","clearRect","setLineDash","setLineCap","setLineJoin","setFill","setStroke","hasFill","setGradientFill","fillStyle","createLinearGradient","createRadialGradient","strokeStyle","lineWidth","mozDash","webkitLineDash","seg","prevSeg","prevOut","bezierCurveTo","fillText","strokeText","onLoad","onError","crossOrigin","complete","onload","onerror","state","drawImage","enableVML","namespaces","kvml","stylesheet","styleSheets","createStyleSheet","addRule","createElementVML","className","COORDINATE_MULTIPLE","fillField","stopColor","baseColor","baseOpacity","blendColors","overlay","overlayColor","blendChannel","EMPTY_CLIP","COORDINATE_SIZE","TRANSFORM_PRECISION","empty","attachReference","combinedTransform","currentOpacity","setStyle","mapOpacityTo","multiplier","ClipObserver","ObserverNode","clipRect","clipBBox","_attachTo","frag","createDocumentFragment","refreshTransform","refreshOpacity","StrokeNode","FillNode","mapGradient","mapFillColor","mapLinearGradient","supportVML","mapRadialGradient","addColors","focusx","focusy","stopColors","colorsField","color2","TransformNode","refresh","transformOrigin","ShapeNode","createFillNode","createTransformNode","setCoordsize","PathDataNode","setPathData","pathData","createDataNode","MultiPathDataNode","CircleTransformNode","originX","originY","diameter","ArcDataNode","TextPathDataNode","TextPathNode","setString","ImagePathDataNode","ImageFillNode","setSrc","sx","sy","ax","ay","rawbbox","rawcenter","fillOrigin","fillSize","RectDataNode","vml","getXY","thing","drawDOM","doOne","getBoundingClientRect","nodeInfo","_clipbox","geo","_stackingContext","_avoidLinks","avoidLinks","renderElement","makeTemplate","cloneNodes","$el","$clone","nextSibling","handlePageBreaks","forceBreak","pageWidth","pageHeight","margin","doPageBreak","next","whenImagesAreActuallyLoaded","pages","splitElement","copy","makePage","forEach","pageNum","totalPages","cacheImages","keepTogether","jqel","adjust","isFirst","fall","getComputedStyle","bottomPadding","getPropertyValue","bottomBorder","saveAdjust","breakAtElement","fallsOnMargin","splitText","firstInParent","table","colgroup","thead","grid","gridHead","repeatHeaders","querySelector","createRange","setStartBefore","setEndBefore","extractContents","boxSizing","padding","overflow","pageClassName","available","len","nextnode","selectNodeContents","findEOP","setEnd","endOffset","ownerDocument","_destructive","paddingRight","beforePageBreak","pdf","defineFont","getFontFaces","forcePageBreak","hasPaperSize","paperSize","paperOptions","getPaperOptions","def","hasMargin","multiPage","_ignoreMargin","progress","canceled","doStylesheet","ss","rules","cssRules","addRules","findFonts","rule","splitProperty","reduce","getFontURL","cssText","styleSheet","family","getCounter","getAllCounters","getPrototypeOf","reverse","incCounter","inc","resetCounter","doCounters","pending","images","querySelectorAll","IMAGE_CACHE","urls","dive","parseBackgroundImage","bg","alphaNumeral","pushNodeInfo","decoration","createsStackingContext","popNodeInfo","updateClipbox","emptyClipbox","cb","pseudoElt","webkit","mozilla","opera","pleaseSetPropertyValue","important","setProperty","getBorder","side","saveStyle","func","getBorderRadius","sanitizeRadius","getContentBox","innerBox","wt","wr","wb","wl","getTransform","radiansToDegrees","parseAngle","num","setClipping","clipPath","addArcToPath","adjustBorderRadiusForBox","rTL","rTR","rBR","rBL","tl_x","tl_y","tr_x","tr_y","br_x","br_y","bl_x","bl_y","elementRoundBox","bt","bb","pr","pb","pl","roundBox","rTL0","rTR0","rBR0","rBL0","tmp","formatCounter","romanNumeral","evalPseudoElementContent","displayCounter","getAttribute","getCssText","_renderWithPseudoElements","pseudo","kind","place","psel","KENDO_PSEUDO_ELEMENT","fake","saveClass","_renderElement","adjustBoxes","boxes","tableBorderLeft","tableBorderTop","tableBox","firstCell","firstCellBox","drawEdge","Wtop","Wleft","Wright","rl","rr","drawRoundCorner","edge","drawBackground","_pdfLink","backgroundColor","drawOneBackground","backgroundRepeat","backgroundPosition","backgroundOrigin","backgroundSize","drawBackgroundImage","img_width","img_height","renderBG","rewX","rewY","repeatX","aspect_ratio","orgBox","gradientRenderer","drawBullet","_drawBullet","bullet","listStylePosition","elementIndex","listStyleType","lineHeight","disc","circle","square","drawOneBox","isLast","inv","shouldDrawLeft","shouldDrawRight","innerbox","getClientRects","clipit","isFormField","maybeRenderWidget","renderContents","pxlen","scaledAngle","implicit","atan","percent","console","log","widget","widgetInstance","exportDOMVisual","renderImage","zIndexSort","sa","sb","za","zb","pa","getSelectedOption","selectedOptions","selectedIndex","renderCheckbox","checked","renderFormField","option","tag","whiteSpace","multiple","scrollLeft","scrollTop","blocks","floats","inline","positioned","floating","renderText","actuallyGetRangeBoundingRect","rectangles","chrome","Infinity","prevLineBottom","doChunk","found","cc","code","indent","origStart","search","setStart","isJustified","findEOL","eol","estimateLineLength","startOffset","drawText","TextRect","decorate","line","ypos","textOverflow","saveTextOverflow","groupInStackingContext","main","_dom_zIndex","counterIncrement","visibility","counterReset","mmul","b1","d1","e1","f1","b2","d2","e2","f2","_pdfRect","skip_ws","tok_whitespace","read","token","read_stop","tok_length","tok_percent","read_linear_gradient","propName","to1","to2","tok_popen","tok_angle","tok_comma","tok_keyword","tok_pclose","read_url","tok_content","tok","orig","cache1","tok_linear_gradient","tok_url","cache2","looking_at","in_paren","in_string","Animation","anim","duration","easing","setup","step","play","finish","abort","loop","wallTime","time","easingPos","_stopped","AnimationFactory","makeOutput","out","PDFValue","beforeRender","renderArray","isDate","renderDate","writeString","write","PDFDictionary","indentLevel","BinaryStream","writeData","withIndent","NL","stream","wrapObject","renderValue","renderFull","getOption","PAPER_SIZE","a4","unitsToPoints","PDFDocument","defval","catalog","pageTree","objcount","objects","attach","FONTS","IMAGES","GRAD_COL_FUNCTIONS","GRAD_OPC_FUNCTIONS","GRAD_COL","GRAD_OPC","PDFCatalog","PDFPageTree","setPages","addPage","props","contentWidth","contentHeight","PDFStream","Contents","Parent","MediaBox","PDFPage","_content","xrefOffset","zeropad","Root","Info","Producer","PDFString","Title","Author","Subject","Keywords","Creator","CreationDate","loadBinary","cont","error","req","XMLHttpRequest","HAS_TYPED_ARRAYS","responseType","status","Uint8Array","response","VBArray","responseBody","send","loadFont","FONT_CACHE","TTFFont","loadImage","_load","_onload","_onerror","reader","imgdata","hasAlpha","rawbytes","blob","FileReader","PDFJpegImage","URL","revokeObjectURL","bloburl","readAsArrayBuffer","getImageData","writeByte","PDFRawImage","writeBase64","xhr","createObjectURL","manyLoader","loadOne","ch","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","mm2pt","mm","cm2pt","cm","in2pt","inch","in","defclass","Ctor","Base","_","PDFName_cache","PDFName","asStream","Type","Subtype","Width","Height","BitsPerComponent","ColorSpace","Filter","_resourceName","RESOURCE_COUNTER","mask","SMask","makeHash","cacheColorGradientFunction","r1","g1","r2","g2","FunctionType","Domain","Range","N","C0","C1","cacheOpacityGradientFunction","makeGradientFunctions","assemble","funcs","Functions","Bounds","offsets","Encode","cur","prevColor","curColor","opacities","cacheColorGradient","isRadial","coords","shading","ShadingType","Coords","Function","Extend","cacheOpacityGradient","AIS","CA","ca","S","G","FormType","BBox","CS","I","Resources","ExtGState","a0","Shading","s0","cacheGradient","eof","readByte","ensure","readShort","writeShort","w","readShort_","writeShort_","readLong","writeLong","readLong_","writeLong_","readFixed","writeFixed","readFixed_","writeFixed_","times","readString","buffer","bytes","skip","nbytes","saveExcursion","base64","atob","BASE64","decode","unquote","parseFontDef","fontdef","variant","mkFamily","FONT_MAPPINGS","fontAlias","isIdentityMatrix","PDFHexString","PDFStandardFont","PDFFont","PDFToUnicodeCmap","keyStr","a5","a6","a7","a8","a9","a10","b0","b3","b4","b5","b6","b7","b8","b9","b10","c0","c3","c4","c5","c6","c7","c8","c9","c10","executive","folio","legal","tabloid","Times-Roman","Times-Bold","Times-Italic","Times-BoldItalic","Helvetica","Helvetica-Bold","Helvetica-Oblique","Helvetica-BoldOblique","Courier","Courier-Bold","Courier-Oblique","Courier-BoldOblique","Symbol","ZapfDingbats","loadImages","getFont","getImage","getOpacityGS","forStroke","gs","_opacityGSCache","dict","txt","esc","escape","compress","pako","deflate","Length","pagesObj","Pages","Kids","Count","pageObj","BaseFont","encodeText","head","Encoding","_pdf","_font","_sub","makeSubset","psName","xMin","yMin","xMax","yMax","italicAngle","post","ascent","descent","lineGap","capHeight","os2","xHeight","stemV","familyClass","isSerif","isScript","flags","isFixedPitch","getTextWidth","glyphId","codeMap","cmap","widthOfGlyph","descendant","unimap","unimapStream","sub","fontStream","Length1","descriptor","FontName","FontBBox","Flags","StemV","ItalicAngle","Ascent","Descent","CapHeight","XHeight","FontFile2","ncid2ogid","firstChar","lastChar","charWidths","chunk","gid","CIDSystemInfo","Registry","Ordering","Supplement","FontDescriptor","FirstChar","LastChar","DW","W","CIDToGIDMap","_makeCidToGidMap","DescendantFonts","subset","ToUnicode","cidToGidMap","unicode","_rcount","_textMode","_fontResources","_gsResources","_xResources","_patResources","_shResources","_opacity","_annotations","_fontSize","_contextStack","ProcSet","Font","XObject","Pattern","Annots","_out","beginText","endText","_requireTextMode","_requireFont","setFont","setTextLeading","setTextRenderingMode","mode","showText","requestedWidth","outputWidth","showTextNL","addLink","uri","ll","_toPage","ur","Border","A","URI","setStrokeColor","setFillOpacity","setStrokeOpacity","setFillColor","sname","oname","setDashPattern","dashPhase","setLineWidth","setMitterLimit","mitterLimit","_context","bezier","bezier1","bezier2","ellipse","_X","_Y","nop","clipStroke","closeStroke","fillStroke","comment","serif","serif|bold","serif|italic","serif|bold|italic","sans-serif","sans-serif|bold","sans-serif|italic","sans-serif|bold|italic","monospace","monospace|bold","monospace|italic","monospace|bold|italic","zapfdingbats","zapfdingbats|bold","zapfdingbats|italic","zapfdingbats|bold|italic","Document","TEXT_RENDERING_MODE","fillAndStroke","invisible","fillAndClip","strokeAndClip","fillStrokeClip","sortedKeys","Directory","tables","scalerType","tableCount","searchRange","entrySelector","rangeShift","checksum","deftable","methods","rawData","nextSubsetTag","subsetTag","Subfont","unicodes","ogid2ngid","ngid2ogid","nextGid","numFonts","contents","HeadTable","LocaTable","HheaTable","MaxpTable","HmtxTable","GlyfTable","NameTable","PostTable","CmapTable","OS2Table","PDF","readTable","directoryLength","headOffset","tableData","sum","adjustment","maxpow2","LN2","revision","checkSumAdjustment","magicNumber","unitsPerEm","macStyle","lowestRecPPEM","fontDirectionHint","indexToLocFormat","glyphDataFormat","offsetOf","lengthOf","needsLongFormat","advanceWidthMax","minLeftSideBearing","minRightSideBearing","xMaxExtent","caretSlopeRise","caretSlopeRun","caretOffset","metricDataFormat","numOfLongHorMetrics","ids","numGlyphs","maxPoints","maxContours","maxComponentPoints","maxComponentContours","maxZones","maxTwilightPoints","maxStorage","maxFunctionDefs","maxInstructionDefs","maxStackElements","maxSizeOfInstructions","maxComponentElements","maxComponentDepth","glyphIds","hhea","lsbCount","advance","lsb","maxp","leftSideBearings","forGlyph","SimpleGlyph","CompoundGlyph","idOffsets","MORE_COMPONENTS","ARG_1_AND_2_ARE_WORDS","WE_HAVE_A_TWO_BY_TWO","WE_HAVE_AN_X_AND_Y_SCALE","WE_HAVE_A_SCALE","compound","old2new","glyphFor","loca","numberOfContours","glyph","glyphs","oldIds","NameEntry","platformID","platformSpecificID","languageID","nameID","stringOffset","nameRecords","strings","rec","postscriptEntry","postscriptName","strTable","list","strCount","POSTSCRIPT_GLYPHS","numberOfGlyphs","limit","underlinePosition","underlineThickness","minMemType42","maxMemType42","minMemType1","maxMemType1","glyphNameIndex","mapping","CmapEntry","segCount","endCode","startCode","idDelta","idRangeOffset","ngroups","endCharCode","glyphCode","language","renderCharmap","new_gid","charcode","segCountX2","deltas","rangeOffsets","startGlyph","codes","startCodes","endCodes","averageCharWidth","weightClass","widthClass","ySubscriptXSize","ySubscriptYSize","ySubscriptXOffset","ySubscriptYOffset","ySuperscriptXSize","ySuperscriptYSize","ySuperscriptXOffset","ySuperscriptYOffset","yStrikeoutSize","yStrikeoutPosition","panose","charRange","vendorID","selection","firstCharIndex","lastCharIndex","winAscent","winDescent","codePageRange","defaultChar","breakChar","maxContext","use","old_gid","glyphsFor","glyf","new_gid_ids","old_gid_ids","hmtx","OS/2","directory","cid","doIt","drawPage","addMargin","optimize","landscape","drawElement","producer","author","subject","keywords","dispatch","toBlob","Blob","filename","safari","dataURL","handlers","handler","_pdfDebug","setStrokeOptions","setFillOptions","drawPath","drawMultiPath","drawCircle","drawArc","drawGroup","drawRect","DASH_PATTERNS","LINE_CAP","LINE_JOIN","_drawPath","shouldDraw","maybeGradient","maybeFillStroke","maybeDrawRect","isRect","sz","exportPDF","newShape","changed","optArray","opt","withClipping","saveclipbox","clipbox","savematrix","inClipbox","currentBox","dashDot","longDash","longDashDot","longDashDotDot","solid","butt","miter","bevel","toStream","PDFMixin","saveAsPDF","_drawPDF","_drawPDFShadow","args","proxyTarget","err","pageNumber","notify","settings","drawOptions","shadow","before","UndoRedoStack","Observable","currentCommandIndex","undo","canUndo","redo","canRedo","CODE","UCS2","callbacks","readChar","croak","msg","readWhile","pred","readAsciiWhile","STRING","skipWhitespace","isWhitespace","eat","isDigit","isHexDigit","isNameStart","isName","xmlComment","END_COMMENT","xmlTag","QUESTION_MARK","xmlDecl","START_COMMENT","xmlName","xmlAttrs","END_SHORT_TAG","GREATER_THAN","xmlContent","END_TAG","START_CDATA","END_CDATA","LESS_THAN","AMPERSAND","xmlEntity","xmlString","quote","QUOTE","APOSTROPHE","SHARP","LOWERCASE_X","UPPERCASE_X","ENTITIES","SEMICOLON","END_DECLARATION","$tag","EQUAL","what","arg2","exit","EXIT","amp","lt","gt","quot","apos","nbsp","parseXML","copyToClipboard","textarea","execCommand","Command","TargetValueCommand","PropertyChangeCommand","ApplyFilterCommand","DeleteCommand","AddCommand","spreadsheet","_workbook","_property","property","_state","_setRange","_range","setState","getState","_forEachCell","_ref","toRangeRef","_target","ColumnWidthCommand","columnWidth","RowHeightCommand","rowHeight","HyperlinkCommand","_link","link","_prevLink","_hasSetValue","GridLinesChangeCommand","skipHiddenCells","ClearContentCommand","clearContent","EditCommand","rejectState","validationState","message","reason","_adjustRowHeight","_getValidationState","ex1","calc","ParseError","ex2","TextWrapCommand","forEachRow","_rowHeight","AdjustDecimalsCommand","_decimals","decimals","formatting","batch","forEachCell","col","adjustDecimals","BorderChangeCommand","_type","_style","noBorders","allBorders","leftBorder","leftColumn","rightBorder","rightColumn","topBorder","topRow","bottomRow","outsideBorders","insideBorders","insideHorizontalBorders","insideVerticalBorders","MergeCellCommand","activeCell","unmerge","merge","horizontally","vertically","forEachColumn","FreezePanesCommand","_topLeft","panes","unfreeze","PasteCommand","_clipboard","clipboard","activeSheet","pasteRef","canPaste","menuInvoked","paste","pasteOnMerged","AdjustRowHeightCommand","ToolbarPasteCommand","_view","CopyCommand","canCopy","multiSelection","ToolbarCopyCommand","CutCommand","cut","AutoFillCommand","_origin","fillFrom","FillError","ToolbarCutCommand","FilterCommand","hasFilter","intersectingMerged","SortCommand","ascending","expandRange","_sheetRef","clearFilter","filterRule","exists","valueFilter","ValueFilter","customFilter","CustomFilter","eq","ClearFilterCommand","HideLineCommand","setAxisState","getAxisState","axisManager","hideSelectedRows","hideSelectedColumns","UnHideLineCommand","unhideSelectedRows","unhideSelectedColumns","DeleteRowCommand","deleteSelectedRows","DeleteColumnCommand","deleteSelectedColumns","AddColumnCommand","addColumnLeft","addColumnRight","AddRowCommand","canAddRow","addRowAbove","addRowBelow","EditValidationCommand","validation","OpenCommand","fromFile","SaveAsCommand","extension","classNames","FormulaBar","formulaInput","FormulaInput","isOpenParen","isCloseParen","isMatchingParen","touches","begin","knownFunction","runtime","FUNCS","isEqualToken","tok1","tok2","ns","KEY_NAMES","PRIVATE_FORMULA_CHECK","listWrapper",27,37,39,35,36,32,"autoScale","_highlightedRefs","_staticTokens","_formulaSource","_formulaList","_keyup","_blur","_input","_focus","_paste","filterOperator","scalePadding","minLength","enableEditing","toggleClass","getPos","lookup","lookupNode","nodeValue","div","sel","getSelection","focusNode","focusOffset","anchorNode","anchorOffset","collapsed","setPos","differ","startContainer","endContainer","currentRange","eiv","getRangeAt","removeAllRanges","addRange","home","formulaSource","StaticList","insertAfter","autoBind","selectable","_formulaListChange","dataValueField","activeToken","completion","tokenCtx","_tokenContext","_mute","nextToken","_replaceAt","_focusId","_isFormula","_navigated","_move","_keyDownTimeout","_syntaxHighlight","focusFirst","_focusTimeout","clipboardData","getData","pressed","focusNext","focusPrev","focusLast","TAB","PAGEUP","PAGEDOWN","tokens","tokenize","_sync","_editorToSync","isActive","_textContainer","computedStyles","getComputedStyles","_span","_cellTooltip","toggleTooltip","_activeElement","operator","rectangle","canInsertRef","isKeyboardAction","_canInsertRef","afterPoint","canReplace","canInsertBetween","strictMode","refAtPoint","simplify","newValue","rest","syncWith","iehandler","eventName","highlightedRefs","refClasses","Pane","series","refIndex","parens","active","cls","colorClass","_setStaticTokens","insertNewline","Mac","isAlphaNum","keyName","EventListener",13,38,33,34,46,113,"platform","_handlers","_observer","keyDownProxy","keyDown","mouseProxy","mouse","threshold","_pressLocation","handleEvent","rightClick","which","button","catchAllHandler","eventKey","mod","metaKey","altKey","passThrough","skew","NilNode","RangeTreeNode","heir","intersecting","ranges","tree","RangeTree","RangeList","Iterator","SparseRangeList","findrange","firstRange","lastRange","rangeValue","rangeStart","rangeEnd","expandedValues","rangeIndex","sortedIndices","valueComparer","indices","comparer","sourceStart","sourceEnd","targetStart","iterator","unique","at","lastRangeStart","ValueRange","toExcelFormat","Property","JsonProperty","ValueProperty","dst","JSON","validations","dateToNumber","culture","calendar","patterns","PropertyBag","specs","sortable","serializable","depends","cellCount","properties","lists","spec","fromJSON","si","iterators","forEachProperty","ALL_PROPERTIES","columnName","displaySheet","displayRef","rel","aa","Ref","NULL","NameRef","CellRef","RangeRef","UnionRef","hasSheet","_hasSheet","setSheet","absolute","print","isCell","toRow","toColumn","rangeAt","nextRangeIndex","previousRangeIndex","reference","refs1","refs2","single","refs","replaceAt","forEachColumnIndex","forEachAxisIndex","forEachRowIndex","method","valid","trow","tcol","arow","acol","forRow","endSheet","normalize","_containsRange","_containsCell","contains","some","_intersectRange","a_left","a_top","a_right","a_bottom","b_left","b_top","b_right","b_bottom","rr1","rc1","rr2","rc2","changes","relTL","relBR","collapse","startRow","endRow","startCol","endCol","topLeftRow","topLeftCol","bottomRightRow","bottomRightCol","cols","u","theRef","newRefs","NULLREF","SHEETREF","FIRSTREF","AutoFillCalculator","_grid","rectIsVertical","startRect","endRect","autoFillDest","quadrant","pivot","opposite","cornerResult","expanding","lower","further","EdgeNavigator","SheetNavigator","rangeGetter","prevLeft","prevVisible","nextRight","nextVisible","nextLeft","prevRight","boundary","_sheet","autoFillCalculator","colEdge","columnRange","rowEdge","rowRange","_viewPortHeight","unionWithMerged","leftCol","rightCol","selectionIncludesMergedCells","_mergedCells","setSelectionValue","selectAll","addToExisting","refForMode","rowRef","colRef","startSelection","startAutoFill","completeSelection","selectForContextMenu","modifySelection","scrollInto","newSelection","direction","determineDirection","viewPortHeight","originalSelection","currentOriginalSelectionRange","prevPage","nextPage","firstVisible","lastVisible","updateCurrentSelectionRange","moveActiveCell","originalActiveCell","navigateInSelection","currentNavigationRange","selTopLeft","selBottomRight","nextNavigationRange","previousNavigationRange","shouldSkip","singleCellSelection","extendSelection","resizeAutoFill","isMerged","forEachMergedCell","merged","hint","_autoFillOrigin","dest","punch","_previewFillFrom","updateAutoFill","currentSelectionRange","leftMode","rightMode","topMode","bottomMode","originalSelect","selectionRangeIndex","bottomCol","AxisManager","forEachSelectedColumn","layout","recalc","forEachSelectedRow","includesHiddenColumns","includesHidden","includesHiddenRows","selectionIncludesHiddenColumns","selectionIncludesHiddenRows","deleteColumn","deleteRow","hasRight","hasLeft","hideColumn","_count","isHiddenColumn","hasBottom","hasTop","hideRow","isHiddenRow","unhideColumn","unhideRow","insertColumn","rowCount","canInsertRow","insertRow","newState","foreign","origRef","setStateData","getSourceRef","stripStyle","borderObject","cellState","parseHTML","tbody","td","rowspan","colspan","blankCell","address","parseTSV","Clipboard","iframe","_external","_uid","external","isExternal","intersectsMerged","plain","destination","originActiveCell","rowDelta","colDelta","_isInternal","triggerChange","contentWindow","internalHTML","internalPlain","partition","predicate","looksLikeANumber","getTextHeight","font-size","word-break","white-space","PROPERTIES","complement","skipHiddenRows","skipHiddenCols","_normalize","noTrigger","_get","_resizedRef","_border","_collapsedBorder","collapsedBorderTop","collapsedBorderRight","collapsedBorderBottom","collapsedBorderLeft","existingFormat","compile","editorChange","isInEditMode","numberToDate","__","_validation","_merge","mergedRef","vi","_properties","setProp","propValue","clearAll","contentsOnly","formatOnly","clearFormat","isSortable","_sortBy","isFilterable","clearFilters","_filterBy","propertyName","dr","dc","maxHeight","cellRange","totalWidth","hasValue","flag","CalcError","argmax","compileArgumentChecks","functionName","comp","allowError","arrayArgs","cond","force","canBeArrayArg","hasArrayArgs","typeCheck","forced","haveForced","forceNum","withErrorHandling","makeSyncFunction","check","doit","xargs","arrays","makeAsyncFunction","makeCallback","defineFunction","kendoSpreadsheetArgs","argsAsync","dateToJulianDays","julianDaysToDate","jd","year","month","day","ord","ORDINAL_ADD_DAYS","isLeapYear","yr","daysInYear","daysInMonth","mo","DAYS_IN_MONTH","unpackDate","serial","BASE_DATE","packDate","unpackTime","ms","hours","minutes","seconds","frac","MS_IN_DAY","MS_IN_HOUR","MS_IN_MIN","milliseconds","serialToDate","packTime","hh","dateToSerial","getHours","getMinutes","getSeconds","getMilliseconds","getFullYear","getMonth","getDate","parseDate","binaryCompare","exports","Context","Formula","NUMBER_OR_ZERO","ARGS_NUMERIC","ARGS_ANYVALUE","resolveCells","getRefData","_resolve","onFormula","context","formulas","getRefCells","cellValues","fname","bool","asMatrix","isRange","hiddenInfo","includeEmpty","eachRow","eachCol","mapRow","mapCol","transpose","va","vb","adds","sign","determinant","C","L","inverse","imax","augment","printer","absrefs","onReady","lcsheet","parentContext","reset","renameSheet","oldSheetName","newSheetName","affectedSheet","operation","formulaRow","formulaCol","formulaSheet","formulaMoves","newFormulaRow","newFormulaCol","co","th","comatrix","thmatrix","elmatrix","defineAlias","kendoSpreadsheetAliases","compileValidation","validationHandler","parsedFromDate","parsedToDate","dataType","TRANSPOSE_FORMAT","DATE_FORMAT","fromIsDateValue","parseFormula","toIsDateValue","validationComparers","custom","comparerType","valueToCompare","toValue","allowNulls","_getListData","Validation","tooltipMessageTemplate","tooltipTitleTemplate","messageTemplate","titleTemplate","_formatMessages","fromFormula","toFormula","_setMessages","tooltipTitle","tooltipMessage","cube","_getOptions","compareValue","compareFormat","calculateFromCallBack","greaterThan","lessThan","between","equalTo","notEqualTo","greaterThanOrEqualTo","lessThanOrEqualTo","notBetween","Selection","Sheet","_activeCell","currentOriginalNavigationRange","expanded","changeActiveCell","_reinit","columnCount","headerHeight","headerWidth","Axis","_frozenRows","_frozenColumns","_suspendChanges","_showGridLines","Grid","_sorter","Sorter","_viewSelection","_editSelection","_formulaSelections","_selectionState","_inEdit","_navigator","_axisManager","_name","_sheetName","accessor","_field","suspendChanges","setDataSource","dataSourceBinder","SheetDataSourceBinder","columnIndex","unhide","_copyRange","sourceRangeRef","targetRef","nextRefTopLeft","nextRefBottomRight","nextIndex","nextBottomIndex","targetIndex","_adjustReferences","_forFormulas","_forValidations","adjustNames","nextRef","isEnabledRow","isEnabledColumn","numRows","numColumns","parseReference","forEachFilterHeader","columnRef","startCellIndex","endCellIndex","startResizing","initialPosition","_initialPosition","_resizeInProgress","_autoFillInProgress","_autoFillDest","_autoFillPunch","_autoFillHint","_autoFillDirection","autoFillRef","autoFillPunch","autoFillInProgress","resizingInProgress","completeResizing","hintPosition","resizeHintPosition","resizeHandlePosition","_resizeHandlePosition","_resizeHintPosition","removeResizeHandle","positionResizeHandle","_selectionInProgress","operatingRange","selectionInProgress","expandedRef","selectionState","isAxis","trims","activeCellSelection","selectedHeaders","allCols","allRows","rowSelection","colSelection","rowState","colState","isInEdit","_setFormulaSelections","_viewActiveCell","positions","viewSelection","_sort","activeCellRef","_compileFormula","_compileValidation","_refreshFilter","_refresh","cellRefIndex","resetFormulas","resetValidations","revalidate","cellRef","_copyValuesInRange","suspended","sortBy","prepare","matches","filterColumn","filterRef","_clearFilter","ALL_REASONS","currentRef","DOT","EMPTYCHAR","sheetsBarClassNames","SheetsBar","sheetsBarWrapper","sheetsBarSheetsWrapper","sheetsBarActive","sheetsBarInactive","sheetsBarAdd","sheetsBarRemove","sheetsBarItems","sheetsBarEditor","sheetsBarScrollable","sheetsBarNext","sheetsBarPrev","sheetsBarKItem","sheetsBarKActive","sheetsBarKTextbox","sheetsBarKLink","sheetsBarKIcon","sheetsBarKFontIcon","sheetsBarKButton","sheetsBarKButtonBare","sheetsBarKArrowW","sheetsBarKArrowE","sheetsBarKReset","sheetsBarKIconX","sheetsBarKSprite","sheetsBarKIconPlus","sheetsBarHintWrapper","sheetsBarKResetItems","_tree","dom","Tree","_addButton","_createSheetsWrapper","_toggleScrollEvents","_createSortable","_sortable","_onSheetReorderStart","_onSheetReorderEnd","_onSheetRemove","_onSheetSelect","_createEditor","_onAddSelect","scrollable","_editor","_renderSheets","_selectedIndex","_onEditorKeydown","_onEditorBlur","_destroyEditor","_onSheetRename","renderSheets","wrapperOffsetWidth","sheetsGroupScrollWidth","sheetsWrapper","scrollPrevButton","scrollNextButton","gapWidth","addButton","addButtonWidth","scrollPrevButtonWidth","sheetsGroup","scrollNextButtonRight","_isRtl","isRtl","_renderHtml","_scrollableAllowed","_sheetsWrapper","_sheetsGroup","marginLeft","scrollWidth","_scrollableModeActive","_nowScrollingSheets","marginRight","_toggleScrollButtons","ul","_scrollSheetsByDelta","renderScrollButtons","isSelectedSheet","elementContent","deleteIcon","sheetElements","maxlength","baseButtonClass","childrenElements","Sortable","ignore","draggable","oldIndex","newIndex","removedSheetName","selectedSheetText","_scrollSheetsToItem","isAddButton","sheetIndex","currentScrollOffset","itemWidth","itemOffset","sheetsGroupWidth","sheetsGroupPadding","itemPosition","animate","scrLeft","getcol","getrow","noThrow","OUT","TokenStream","addReference","peek","parseExpression","commas","maybeBinary","maybeIntersect","parseAtom","parseSymbol","upper","TRUE","FALSE","parseFuncall","fixReference","exp","parseArray","op","maybePercent","my_prec","his_prec","OPERATORS","ast","makePrinter","prec","withParens","needParens","parenthesize","makeClosure","toCPS","cps","cpsAtom","cpsUnary","cpsBinary","cpsFunc","cpsLambda","cpsMatrix","cpsIf","makeContinuation","thenK","gensym","elseK","vars","cpsAnd","cpsOr","isMatrix","GENSYM","makeFormula","js","jsArray","FORMULA_CACHE","identity","readNext","ahead","refRange3D","refCell3D","refSheetRange","refSheetCell","refRange","refCell","funcall","toCell","forEditor","fixCell","space","addPos","RawTokenStream","InputStream","startToken","endToken","isIdStart","isId","isOpChar","isPunc","readNumber","has_dot","symbol","getRC","negative","readSymbol","lookingAt","readEscaped","readSheetName","readOperator","readPunc","EOF","forward","escaped","getNumberRegexp","comma","NUMBER_FORMAT_RX","repeat","FORMAT_PARSERS","registerFormatParser","ops","numberFormat","currency","rxnum","rxcur","suffix","has_currency","readExcel","deferred","readWorkbook","readStrings","relationships","readRelationships","theme","readTheme","byType","readStyles","enter","relId","dim","SEL_SHEET","byId","sheetDimensions","SEL_VIEW","activeTab","integer","SEL_DEFINED_NAME","vbProcedure","defineName","recalcSheets","loadSheets","ready","insertSheet","queueSheet","readSheet","defaultColWidth","toColWidth","defaultRowHeight","toRowHeight","SEL_ROW","maximumDigitWidth","fraction","pts","formulaRange","nCols","prevCellRef","relsFile","styleIndex","acRef","SEL_CELL","applyStyle","SEL_MERGE","SEL_COL","ht","SEL_SELECTION","SEL_PANE","xSplit","ySplit","SEL_SHEET_VIEW","SEL_HYPERLINK","leave","SEL_VALUE","SEL_STRING","SEL_FORMULA","setFormat","formatCode","setBorder","BORDER_WIDTHS","shouldSet","applyName","xf","inlineStyles","xfId","namedStyles","numFmts","DEFAULT_FORMATS","part","files","asUint8Array","SEL_SHARED_STRING","SEL_TEXT","entries","Id","Target","getXf","addBool","pivotButton","quotePrefix","getColor","themeColor","tint","toCSSColor","indexed","INDEXED_COLORS","colorScheme","SEL_NUM_FMT","SEL_FONT","SEL_FILL","patternType","SEL_BORDER","SEL_NAMED_STYLE","SEL_INLINE_STYLE","horizontal","vertical","wrapText","swap","scheme","SEL_SCHEME_SYSCLR","SEL_SCHEME_RGBCLR","none","thin","medium","dashed","dotted","thick","double","hair","mediumDashed","mediumDashDot","dashDotDot","mediumDashDotDot","slantDashDot",11,12,14,15,16,17,18,19,21,22,45,47,48,49,"_readSheet","_readStrings","_readStyles","_readTheme","_readWorkbook","sheetParamsFromJSON","or","_sheetsSearchCache","undoRedoStack","_onUndoRedo","FormulaContext","_validationContext","ValidationFormulaContext","_names","_sheetChange","_sheetCommandRequest","_inputForRef","execute","commandOptions","editActiveCell","sheetByName","moveSheetToIndex","toIndex","fromIndex","sheetSelection","insertIndex","getUniqueSheetName","sheetNameSuffix","sheetByIndex","removeSheet","newSheet","_clearSheets","undefineName","nameValue","area","states","currentFormula","_formulaContextRefresh","toActionSelector","selectors","alphaNumRegExp","ACTIONS","ENTRY_ACTIONS","CONTAINER_EVENTS","CLIPBOARD_EVENTS","EDITOR_EVENTS","FORMULABAR_EVENTS","FORMULAINPUT_EVENTS","SELECTION_MODES","COMPOSITE_UNAVAILABLE_ACTION_SELECTORS","UNHIDE_ACTION_SELECTORS","ACTION_KEYS","SHIFT_ACTION_KEYS","ENTRY_ACTION_KEYS","Controller","up","down","ctrl+left","ctrl+right","ctrl+up","ctrl+down","ctrl+home","ctrl+end","pageup","pagedown","tab","shift+tab","shift+enter","delete","backspace","shift+:alphanum",":alphanum","ctrl+:alphanum","alt+ctrl+:alphanum",":edit","wheel","*+mousedown","contextmenu","*+mousedrag","*+mouseup","*+dblclick","mousemove","*+pageup","*+pagedown","mouseup","*+cut","*+paste","*+copy","alt+enter","rowheader","columnheader","topcorner","autofill","clipboardElement","cellContextMenu","rowHeaderContextMenu","colHeaderContextMenu","scroller","tabstrip","sheetsbar","editor","onEditorChange","onEditorActivate","onEditorDeactivate","onEditorUpdate","onScroll","listener","_enableEditorEvents","onSheetBarSelect","onSheetBarReorder","onSheetBarRename","onSheetBarRemove","onContextMenuSelect","onCommandRequest","onDialogRequest","keyListener","barKeyListener","barElement","inputKeyListener","cellElement","_execute","closeHandler","editorClose","enableEditor","_lastCommandRequest","showError","openDialog","_activeTooltip","clientHeight","isEditorDisabled","onWheel","deltaX","deltaY","deltaMode","scrollWith","onAction","onPageUp","scrollDown","onPageDown","onEntryAction","shouldPrevent","disabled","activeCellRectangle","onShiftAction","appendSelection","onMouseMove","objectAt","onMouseDown","pane","originFrame","_selectionMode","deactivate","openFilterMenu","onContextMenu","menu","isComposite","showUnhide","showUnmerge","prevent","constrainResize","resizeHandle","onMouseDrag","frame","startAutoScroll","selectToLocation","onMouseUp","stopAutoScroll","activeEditor","onDblClick","onCut","detach","clipBoardValue","onPaste","hasHTML","hasPlainText","DOMStringList","types","onCopy","scrollRight","coordinates","cellLocation","lastKnownCellLocation","autoScroll","_autoScrollTarget","boundaries","scrollStep","finalLocation","viewObject","_scrollInterval","setInterval","clearInterval","filterMenu","createFilterMenu","openFor","onEditorBarFocus","onEditorCellFocus","onEditorEsc","onEditorBlur","isFiltered","onEditorAction","onEditorShiftAction","deactivateEditor","viewEditor","isEditorDeactivateBound","one","focusLastActive","enableClipboard","executeRequest","executeCommand","executeDialog","additionalOptions","pdfExport","excelExport","selectElementContents","cellBefore","trs","cellAbove","prevRow","cellBorder","asURL","drawCell","collection","hBorders","vBorders","showGrid","maybeLink","textDecoration","defaultBorder","shouldDrawCell","fontStyle","fontWeight","wordBreak","__dataType","paneClassNames","addCell","sibling","borderRightColor","borderBottomColor","borderLeftColor","borderTopColor","within","RESIZE_HANDLE_WIDTH","viewClassNames","HtmlTable","CELL_CONTEXT_MENU","ROW_HEADER_CONTEXT_MENU","COL_HEADER_CONTEXT_MENU","VIEW_CONTENTS","View","fixedContainer","editContainer","viewSize","cellEditor","barEditor","topCorner","filterHeadersWrapper","filterRange","filterButton","filterButtonActive","horizontalResize","verticalResize","iconFilterDefault","sheetsBar","errors","openUnsupported","shiftingNonblankCells","filterRangeContainingMerges","sortRangeContainingMerges","validationError","tabs","_height","_width","addColumn","addRow","toDomTree","ContextMenu","contextMenuConfig","scrollbar","_chrome","_dialogs","_formulaInput","clipboardContents","SheetEditor","_sheetsbar","clientWidth","isClipboardDeactivated","tabstripHeight","formulaBarHeight","formulaBar","sheetsBarHeight","quickAccessAdjust","toolbar","_tabstrip","TabStrip","dataTextField","dataContentField","toolbarOptions","_executeCommand","cellRectangle","_rectangle","boundingRectangle","isColumnResizer","handleWidth","_headerWidth","isRowResizer","_headerHeight","isFilterIcon","filterIconRect","isAutoFill","frozen","selecting","paneAt","containingPane","theGrid","refreshTools","totalHeight","_pane","_destroyFilterMenu","_filterMenu","FilterMenu","selectClipBoardContents","scrollIntoView","willScroll","scrollBoundaries","scrollBottom","_destroyDialog","dialog","dialogs","errorMessages","registered","sender","_filterMenuColumn","resizeDirection","renderResizeHint","renderClipboardContents","resizeHint","resizeHintVertical","resizeHintHandle","resizeHintMarker","selectionView","primaryMergedCells","secondaryMergedCells","rangeDimensions","mergedCell","vaxis","haxis","rowHeader","columnHeader","mergedCellsWrapper","selectionWrapper","autoFillWrapper","columnResizeHandle","rowResizeHandle","selectionHighlight","isVisible","paneClasses","_currentView","_currentRect","_selectedHeaders","renderSelection","renderAutoFill","renderEditorSelection","renderFilterHeaders","hasRowHeader","rowOffset","headerClassName","hasColumnHeader","columnOffset","renderResizeHandle","itemSelection","allHeaders","doLayout","forScreen","xCoords","yCoords","hb","BUTTON_SIZE","BUTTON_OFFSET","Rectangle","filtered","classes","_addDiv","selections","activeCellClasses","selectionClasses","activeFormulaColor","_activeFormulaColor","_directionClasses","_addTable","cssClass","autoFillRectangle","toDiv","activeFormulaSelection","colorClasses","cellClasses","mergedCellLeft","mergedCellTop","PaneGrid","PaneAxis","rangeRef","headerSize","hasHeader","paneSegment","_viewSize","widthCompensation","heightCompensation","_hidden","scrollBarSize","firstHidden","lastHidden","endIndex","startSegment","lastPage","_pixelValues","_axis","_start","quarter","sameYear","today","setFullYear","sameMonth","firstDayOfMonth","setMonth","sameWeek","firstWeek","secondWeek","dayOfWeek","_values","_dates","_blanks","blanks","dates","_logic","logic","criteria","_criteria","expression","Query","filterExpr","filters","_matches","criterionValue","criterionType","valueType","TopFilter","DynamicFilter","_predicate","_average","aboveAverage","belowAverage","tomorrow","addDays","isToday","yesterday","nextWeek","thisWeek","lastWeek","nextMonth","thisMonth","lastMonth","nextQuarter","thisQuarter","lastQuarter","nextYear","thisYear","lastYear","yearToDate","cultures","months","_lists","ascendingComparer","descendingComparer","typeA","typeB","localeCompare","maybeColor","RX_COLORS","maybeCondition","RX_CONDITION","readFormat","maybeFraction","sep","decimal","decimalPart","am","pm","readSection","sections","haveConditional","sec","printSection","printToken","fmt","padLeft","adjusted","restart","compileFormatPart","checkComma","scaleCount","hasDate","hasTime","hasAmpm","percentCount","separeThousands","declen","intFormat","decFormat","condition","preamble","CACHE","TEXT","calendars","standard","days","namesAbbr","ampm","fraclen","eltime","formatInt","iv","chf","formatDec","span","textAndColor","_cosh","_sinh","_tanh","_gcd","_lcm","forIFS","chunks","parseCriteria","COL","_avg","numbers","_var_sp","divisor","avg","_stdev_sp","_percentrank","exc","nlt","ngt","_covariance","_percentile","rank","_percentile_inc","_percentile_exc","fetchValuesForAggregate","opt_ignore_hidden_rows","opt_ignore_errors","opt_use_aggregates","fetchValues","_binom_dist","cumulative","_combinations","weeksInYear","_days_360","Hyperlink","numericPredicate","descending","ARGS_COUNTIFS","ARGS_SUMIFS","ARGS_SUMIF","ARGS_PERCENTRANK","_fact","AGGREGATE_FUNCS","RX_NON_PRINTABLE","mult","prod","coef","seen","m1","sumRange","nth","res","discard","bins","asc","variance","stddev","significance","fact","funcId","ignoreHidden","s2","approx","resultCol","areanum","cmp","resultRow","fw","dow","wk","holidays","random","rom","radix","minLen","dec","noCommas","newText","oldText","valueIfError","makeComparator","lc","compLT","compLTE","compGT","compGTE","compNE","compEQ","RXCACHE","ERF","an","f_abs","ERFC","GAMMALN","cof","ser","GAMMA","pi","BETALN","BETA","gamma_inc","g_series","g_contfrac","ap","gln","MAX_IT","EPS","FP_MIN","aj","bj","GAMMA_DIST","GAMMA_INV","M","ab","NORM_S_DIST","NORM_S_INV","plow","phigh","NORM_DIST","NORM_INV","betastd_pdf","betastd_cdf","beta_lentz","m2","del","qab","qap","qam","betastd_inv","BETADIST","BETA_DIST","cdf","BETA_INV","chisq_left","cds","chisq_right","chisq_left_inv","chisq_right_inv","chisq_test","obsv","expect","eij","expon","poisson","lnf","Fdist","Fdist_right","Finv_right","Finv","_mean","me","_var_sq","Ftest","arr1","arr2","n1","n2","va1","va2","fisher","fisherinv","Tdist","Tdist_right","Tdist_2tail","Tdist_inv","Tdist_2tail_inv","Tdist_test","gr1","gr2","tail","t_st","df","md","v1","v2","u1","u2","q1","q2","confidence_t","confidence_norm","gauss","z","phi","lognorm_dist","lognorm_inv","prob","x_","p_","lw","slope","y_","my","intercept","pearson","s1","s3","rsq","steyx","forecast","_mat_mean","Mat","_mat_devsq","mean","sq","linest","Y","X","konst","stats","Xt","B","line_1","Y1","y_y1","mp","SSreg","SSresid","line_5","R2","degfre","err_est","line_3","F_sta","line_4","SCP","line_2","logest","trend","growth","new_X","root_newton","guess","max_it","eps","f_d","FV","rate","nper","pmt","pv","h1","h2","PV","fv","PMT","NPER","RATE","xfd","IPMT","per","ipmt","PPMT","CUMPRINC","tn","ts","te","monthlyPayment","remainingBalanceAtStart","remainingBalanceAtEnd","CUMIPMT","cip","NPV","flows","npv","IRR","npv1","EFFECT","nominal_rate","npery","NOMINAL","effect_rate","XNPV","XIRR","ISPMT","DB","cost","salvage","life","period","db","DDB","factor","prior","dep","SLN","SYD","VDB","no_switch","_getGDA","gda","oldValue","interest","_interVDB","life1","term","remValue","intEnd","lia","vdb","nowLia","intStart","_edate","_daysBetween","basis","_borderCoupons","settlement","maturity","freq","sett","periods","_borderCoupons_fw","COUPDAYBS","frequency","COUPDAYS","settl","matur","COUPDAYSNC","COUPPCD","COUPNCD","COUPNUM","mat","ACCRINTM","issue","par","year_days","ACCRINT","_numCoupons","annual","brace","prev1","next1","nrc","accr","DISC","redemption","INTRATE","investment","RECEIVED","discount","PRICE","yld","beg_settl","settl_end","beg_end","den","yf","PRICEDISC","dsm","COUPS_ARGS","ac","withPreventDefault","BORDER_TYPES","BORDER_PALETTE_MESSAGES","ColorChooser","BorderPalette","borderPalette","customColor","_resetButton","_colorPalette","_customColorPalette","_customColorButton","resetButton","resetColor","customColorButton","colorPalette","flatColorPicker","class","kendoColorPalette","viewModel","kendoWindow","resizable","maximizable","modal","kendoFlatColorPicker","observable","_borderTypePalette","_borderColorPalette","colorChooser","_colorChange","ToolBar","MESSAGES","defaultTools","toolDefaults","SpreadsheetToolBar","DropDownTool","PopupTool","OverflowDialogButton","ColorPickerButton","FONT_SIZES","DEFAULT_FONT_SIZE","FontSize","FontSizeButton","FONT_FAMILIES","DEFAULT_FONT_FAMILY","FontFamily","FontFamilyButton","Format","FormatButton","BorderChangeTool","BorderChangeButton","AlignmentTool","AlignmentButton","MergeTool","MergeButton","FreezeTool","FreezeButton","Sort","SortButton","FilterButton","Open","alignmentButtons","justtifyLeft","justifyCenter","justifyRight","justifyFull","alignTop","alignMiddle","alignBottom","colorPicker","formatTypes","automatic","financial","dateTime","moreFormats","formatDecreaseDecimal","formatIncreaseDecimal","freeze","freezeButtons","freezePanes","freezeRows","freezeColumns","mergeButtons","mergeHorizontally","mergeVertically","quickAccess","exportAs","toggleGridlines","sortAsc","sortDesc","sortButtons","sortSheetAsc","sortSheetDesc","sortRangeAsc","sortRangeDesc","textColor","textWrap","hyperlink","iconClass","dialogName","togglable","formatCells","_expandTools","tools","toolbarName","handleClick","_addSeparators","expandTool","toolName","isPlainObject","spriteCssClass","typeDefaults","splitButton","tool","attributes","menuButtons","commandType","setToggle","_tools","_getItem","instance","Item","dropDownList","kendoDropDownList","addUidAttr","addOverflowAttr","_open","data-command","data-property","listWidth","ddl","_listWidth","popupName","registerComponent","ToolBarButton","_dialogName","OverflowButton","iconName","comboBox","kendoComboBox","_valueChange","fontSizes","sizes","defaultSize","fontFamilies","defaultFont","_revertTitle","setOptions","dataValuePrimitive","valueTemplate","sample","_borderPalette","_action","_commandPalette","_title","_reset","_quickAccessButtons","quickAccessToolBar","toolbars","contentElements","_toolbar","buttonTemplate","tabGroup","uniqueBy","ObservableObject","registry","SpreadsheetDialog","FormatCellsViewModel","FormatCellsDialog","MessageDialog","FontFamilyDialog","FontSizeDialog","BordersDialog","ColorPickerDialog","CustomColorDialog","AlignmentDialog","MergeDialog","FreezeDialog","ValidationViewModel","ValidationDialog","ExportAsDialog","ModifyMergedDialog","OverflowDialog","UseKeyboardDialog","UnsupportedSelectionDialog","HyperlinkDialog","okText","formatCellsDialog","categories","fontFamilyDialog","fontSizeDialog","bordersDialog","alignmentDialog","mergeDialog","freezeDialog","validationDialog","hintMessage","hintTitle","any","comparers","comparerMessages","labels","onInvalidData","rejectInput","showWarning","showHint","ignoreBlank","placeholders","typeTitle","typeMessage","exportAsDialog","saveAsType","exportArea","margins","guidelines","modifyMergedDialog","errorMessage","overflowDialog","useKeyboardDialog","forCopy","forCut","forPaste","unsupportedSelectionDialog","linkDialog","removeLink","dialogClass","autoFocus","_dialog","_onDialogClose","_onDialogActivate","_onDialogDeactivate","useCategory","category","formatCurrency","currencies","allFormats","useFirstFormat","info","_currency","iso","convert","categoryFilter","pattern","abbr","defaultOptions","_generateFormats","calendarPatterns","currenciesFrom","numberFormats","dateFormats","currencyFilter","roleSelector","description","messageId","_list","_colorPicker","ValidationCellsViewModel","criterion","setHintMessageTemplate","shouldBuild","buildMessages","hintTitleTemplate","hintMessageTemplate","setComparers","defaultHintTitle","text_comparers","defaultComparers","defaultHintMessage","isAny","showToForNumber","showTo","showToForDate","isText","isList","isCustom","showRemove","fromValidationObject","useCustomMessages","toValidationObject","errorTemplate","validatable","Validator","validateOnBlur","validate","fileFormats","fitWidth","areas","paperSizes","hCenter","vCenter","model","stopPropagation","o","_normalizeColumns","_dataSource","_header","_boundRowsCount","_sheetChangeHandler","_sheetInsertRow","_sheetDeleteRow","getters","_skipRebind","record","valueIndex","colValueIndex","_changeHandler","getterIdx","distinctValues","query","itemVisible","anyVisibleChildren","hasVisibleChildren","HierarchicalDataSource","uncheckAll","hasChildren","flattenOperators","operators","FILTERMENU_MESSAGES","Details","templates","FilterMenuViewModel","FilterMenuController","details","detailsSummary","detailsContent","iconCollapse","iconExpand","iconSearch","textbox","filterByCondition","filterByValue","valuesTreeViewWrapper","actionButtons","_summary","_toggle","_icon","_container","fx","sortAscending","sortDescending","addToCurrent","operatorNone","and","doesnotcontain","startswith","endswith","neq","gte","lte","binders","spreadsheetFilterValue","Binder","bindings","binding","menuItem","valuesChange","valuesDataSource","lastIndexOf","appendToSearch","valueSelect","hasActiveSearch","filterValues","operatorChange","isNone","isString","valuesTree","filterType","topValue","filterForColumn","allFilters","columnFilters","_filterInit","_filterByCondition","_filterByValue","_actionButtons","valuesTreeView","_active","activeFilter","kendoMenu","_appendTemplate","compiledTemplate","_detailToggle","not","isExpanded","activeContainer","hasClass","notEqual","oldRect","newRect","barInput","cellInput","_triggerUpdate","lastActive","activeElement","inputType","linearRegression","findSeries","findStep","forEachSeries","formatType","getType","lst","findStringList","stringLists","strl","MSG_INCOMPATIBLE","MSG_NO_DIRECTION","MSG_READ_ONLY","srcRange","srcIdx","destRange","distributeCoords","heights","curr","getMergedCells","primary","secondary","scaleFactor","boxWidth","boxHeight","rowHeights","colWidths","maxRow","maxCol","nonEmpty","relrow","relcol","cw","emptyCells","orlast","normalOrder","drawLayout","endbottom","endright","GUIDELINE_WIDTH","ncols","nrows","r2d2","vtrans","rect_left","rect_top","rect_width","rect_height","makeFontDef","lines","text_height","lineBreak","htrans","paper","Spreadsheet","_controller","_autoRefresh","_bindWorkbookEvents","_resizeHandler","_workbookChange","autoRefresh","_workbookExcelExport","_workbookExcelImport","_initProgress","kendoProgressBar","chunkCount","_workbookPdfExport"],"mappings":"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","file":"kendo.spreadsheet.min.js","sourcesContent":["/** \r\n * Kendo UI v2016.2.714 (http://www.telerik.com/kendo-ui)                                                                                                                                               \r\n * Copyright 2016 Telerik AD. All rights reserved.                                                                                                                                                      \r\n *                                                                                                                                                                                                      \r\n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \r\n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \r\n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n\r\n*/\r\n(function (f, define) {\r\n    define('kendo.color', ['kendo.core'], f);\r\n}(function () {\r\n    var __meta__ = {\r\n        id: 'color',\r\n        name: 'Color utils',\r\n        category: 'framework',\r\n        advanced: true,\r\n        description: 'Color utilities used across components',\r\n        depends: ['core']\r\n    };\r\n    (function ($, parseFloat, parseInt) {\r\n        var Color = function (value) {\r\n            var color = this, formats = Color.formats, re, processor, parts, i, channels;\r\n            if (arguments.length === 1) {\r\n                value = color.resolveColor(value);\r\n                for (i = 0; i < formats.length; i++) {\r\n                    re = formats[i].re;\r\n                    processor = formats[i].process;\r\n                    parts = re.exec(value);\r\n                    if (parts) {\r\n                        channels = processor(parts);\r\n                        color.r = channels[0];\r\n                        color.g = channels[1];\r\n                        color.b = channels[2];\r\n                    }\r\n                }\r\n            } else {\r\n                color.r = arguments[0];\r\n                color.g = arguments[1];\r\n                color.b = arguments[2];\r\n            }\r\n            color.r = color.normalizeByte(color.r);\r\n            color.g = color.normalizeByte(color.g);\r\n            color.b = color.normalizeByte(color.b);\r\n        };\r\n        Color.prototype = {\r\n            toHex: function () {\r\n                var color = this, pad = color.padDigit, r = color.r.toString(16), g = color.g.toString(16), b = color.b.toString(16);\r\n                return '#' + pad(r) + pad(g) + pad(b);\r\n            },\r\n            resolveColor: function (value) {\r\n                value = value || 'black';\r\n                if (value.charAt(0) == '#') {\r\n                    value = value.substr(1, 6);\r\n                }\r\n                value = value.replace(/ /g, '');\r\n                value = value.toLowerCase();\r\n                value = Color.namedColors[value] || value;\r\n                return value;\r\n            },\r\n            normalizeByte: function (value) {\r\n                return value < 0 || isNaN(value) ? 0 : value > 255 ? 255 : value;\r\n            },\r\n            padDigit: function (value) {\r\n                return value.length === 1 ? '0' + value : value;\r\n            },\r\n            brightness: function (value) {\r\n                var color = this, round = Math.round;\r\n                color.r = round(color.normalizeByte(color.r * value));\r\n                color.g = round(color.normalizeByte(color.g * value));\r\n                color.b = round(color.normalizeByte(color.b * value));\r\n                return color;\r\n            },\r\n            percBrightness: function () {\r\n                var color = this;\r\n                return Math.sqrt(0.241 * color.r * color.r + 0.691 * color.g * color.g + 0.068 * color.b * color.b);\r\n            }\r\n        };\r\n        Color.formats = [\r\n            {\r\n                re: /^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/,\r\n                process: function (parts) {\r\n                    return [\r\n                        parseInt(parts[1], 10),\r\n                        parseInt(parts[2], 10),\r\n                        parseInt(parts[3], 10)\r\n                    ];\r\n                }\r\n            },\r\n            {\r\n                re: /^(\\w{2})(\\w{2})(\\w{2})$/,\r\n                process: function (parts) {\r\n                    return [\r\n                        parseInt(parts[1], 16),\r\n                        parseInt(parts[2], 16),\r\n                        parseInt(parts[3], 16)\r\n                    ];\r\n                }\r\n            },\r\n            {\r\n                re: /^(\\w{1})(\\w{1})(\\w{1})$/,\r\n                process: function (parts) {\r\n                    return [\r\n                        parseInt(parts[1] + parts[1], 16),\r\n                        parseInt(parts[2] + parts[2], 16),\r\n                        parseInt(parts[3] + parts[3], 16)\r\n                    ];\r\n                }\r\n            }\r\n        ];\r\n        Color.namedColors = {\r\n            aliceblue: 'f0f8ff',\r\n            antiquewhite: 'faebd7',\r\n            aqua: '00ffff',\r\n            aquamarine: '7fffd4',\r\n            azure: 'f0ffff',\r\n            beige: 'f5f5dc',\r\n            bisque: 'ffe4c4',\r\n            black: '000000',\r\n            blanchedalmond: 'ffebcd',\r\n            blue: '0000ff',\r\n            blueviolet: '8a2be2',\r\n            brown: 'a52a2a',\r\n            burlywood: 'deb887',\r\n            cadetblue: '5f9ea0',\r\n            chartreuse: '7fff00',\r\n            chocolate: 'd2691e',\r\n            coral: 'ff7f50',\r\n            cornflowerblue: '6495ed',\r\n            cornsilk: 'fff8dc',\r\n            crimson: 'dc143c',\r\n            cyan: '00ffff',\r\n            darkblue: '00008b',\r\n            darkcyan: '008b8b',\r\n            darkgoldenrod: 'b8860b',\r\n            darkgray: 'a9a9a9',\r\n            darkgrey: 'a9a9a9',\r\n            darkgreen: '006400',\r\n            darkkhaki: 'bdb76b',\r\n            darkmagenta: '8b008b',\r\n            darkolivegreen: '556b2f',\r\n            darkorange: 'ff8c00',\r\n            darkorchid: '9932cc',\r\n            darkred: '8b0000',\r\n            darksalmon: 'e9967a',\r\n            darkseagreen: '8fbc8f',\r\n            darkslateblue: '483d8b',\r\n            darkslategray: '2f4f4f',\r\n            darkslategrey: '2f4f4f',\r\n            darkturquoise: '00ced1',\r\n            darkviolet: '9400d3',\r\n            deeppink: 'ff1493',\r\n            deepskyblue: '00bfff',\r\n            dimgray: '696969',\r\n            dimgrey: '696969',\r\n            dodgerblue: '1e90ff',\r\n            firebrick: 'b22222',\r\n            floralwhite: 'fffaf0',\r\n            forestgreen: '228b22',\r\n            fuchsia: 'ff00ff',\r\n            gainsboro: 'dcdcdc',\r\n            ghostwhite: 'f8f8ff',\r\n            gold: 'ffd700',\r\n            goldenrod: 'daa520',\r\n            gray: '808080',\r\n            grey: '808080',\r\n            green: '008000',\r\n            greenyellow: 'adff2f',\r\n            honeydew: 'f0fff0',\r\n            hotpink: 'ff69b4',\r\n            indianred: 'cd5c5c',\r\n            indigo: '4b0082',\r\n            ivory: 'fffff0',\r\n            khaki: 'f0e68c',\r\n            lavender: 'e6e6fa',\r\n            lavenderblush: 'fff0f5',\r\n            lawngreen: '7cfc00',\r\n            lemonchiffon: 'fffacd',\r\n            lightblue: 'add8e6',\r\n            lightcoral: 'f08080',\r\n            lightcyan: 'e0ffff',\r\n            lightgoldenrodyellow: 'fafad2',\r\n            lightgray: 'd3d3d3',\r\n            lightgrey: 'd3d3d3',\r\n            lightgreen: '90ee90',\r\n            lightpink: 'ffb6c1',\r\n            lightsalmon: 'ffa07a',\r\n            lightseagreen: '20b2aa',\r\n            lightskyblue: '87cefa',\r\n            lightslategray: '778899',\r\n            lightslategrey: '778899',\r\n            lightsteelblue: 'b0c4de',\r\n            lightyellow: 'ffffe0',\r\n            lime: '00ff00',\r\n            limegreen: '32cd32',\r\n            linen: 'faf0e6',\r\n            magenta: 'ff00ff',\r\n            maroon: '800000',\r\n            mediumaquamarine: '66cdaa',\r\n            mediumblue: '0000cd',\r\n            mediumorchid: 'ba55d3',\r\n            mediumpurple: '9370d8',\r\n            mediumseagreen: '3cb371',\r\n            mediumslateblue: '7b68ee',\r\n            mediumspringgreen: '00fa9a',\r\n            mediumturquoise: '48d1cc',\r\n            mediumvioletred: 'c71585',\r\n            midnightblue: '191970',\r\n            mintcream: 'f5fffa',\r\n            mistyrose: 'ffe4e1',\r\n            moccasin: 'ffe4b5',\r\n            navajowhite: 'ffdead',\r\n            navy: '000080',\r\n            oldlace: 'fdf5e6',\r\n            olive: '808000',\r\n            olivedrab: '6b8e23',\r\n            orange: 'ffa500',\r\n            orangered: 'ff4500',\r\n            orchid: 'da70d6',\r\n            palegoldenrod: 'eee8aa',\r\n            palegreen: '98fb98',\r\n            paleturquoise: 'afeeee',\r\n            palevioletred: 'd87093',\r\n            papayawhip: 'ffefd5',\r\n            peachpuff: 'ffdab9',\r\n            peru: 'cd853f',\r\n            pink: 'ffc0cb',\r\n            plum: 'dda0dd',\r\n            powderblue: 'b0e0e6',\r\n            purple: '800080',\r\n            red: 'ff0000',\r\n            rosybrown: 'bc8f8f',\r\n            royalblue: '4169e1',\r\n            saddlebrown: '8b4513',\r\n            salmon: 'fa8072',\r\n            sandybrown: 'f4a460',\r\n            seagreen: '2e8b57',\r\n            seashell: 'fff5ee',\r\n            sienna: 'a0522d',\r\n            silver: 'c0c0c0',\r\n            skyblue: '87ceeb',\r\n            slateblue: '6a5acd',\r\n            slategray: '708090',\r\n            slategrey: '708090',\r\n            snow: 'fffafa',\r\n            springgreen: '00ff7f',\r\n            steelblue: '4682b4',\r\n            tan: 'd2b48c',\r\n            teal: '008080',\r\n            thistle: 'd8bfd8',\r\n            tomato: 'ff6347',\r\n            turquoise: '40e0d0',\r\n            violet: 'ee82ee',\r\n            wheat: 'f5deb3',\r\n            white: 'ffffff',\r\n            whitesmoke: 'f5f5f5',\r\n            yellow: 'ffff00',\r\n            yellowgreen: '9acd32'\r\n        };\r\n        var namedColorRegexp = ['transparent'];\r\n        for (var i in Color.namedColors) {\r\n            if (Color.namedColors.hasOwnProperty(i)) {\r\n                namedColorRegexp.push(i);\r\n            }\r\n        }\r\n        namedColorRegexp = new RegExp('^(' + namedColorRegexp.join('|') + ')(\\\\W|$)', 'i');\r\n        function parseColor(color, nothrow) {\r\n            var m, ret;\r\n            if (color == null || color == 'none') {\r\n                return null;\r\n            }\r\n            if (color instanceof _Color) {\r\n                return color;\r\n            }\r\n            color = color.toLowerCase();\r\n            if (m = namedColorRegexp.exec(color)) {\r\n                if (m[1] == 'transparent') {\r\n                    color = new _RGB(1, 1, 1, 0);\r\n                } else {\r\n                    color = parseColor(Color.namedColors[m[1]], nothrow);\r\n                }\r\n                color.match = [m[1]];\r\n                return color;\r\n            }\r\n            if (m = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\\b/i.exec(color)) {\r\n                ret = new _Bytes(parseInt(m[1], 16), parseInt(m[2], 16), parseInt(m[3], 16), 1);\r\n            } else if (m = /^#?([0-9a-f])([0-9a-f])([0-9a-f])\\b/i.exec(color)) {\r\n                ret = new _Bytes(parseInt(m[1] + m[1], 16), parseInt(m[2] + m[2], 16), parseInt(m[3] + m[3], 16), 1);\r\n            } else if (m = /^rgb\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/.exec(color)) {\r\n                ret = new _Bytes(parseInt(m[1], 10), parseInt(m[2], 10), parseInt(m[3], 10), 1);\r\n            } else if (m = /^rgba\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9.]+)\\s*\\)/.exec(color)) {\r\n                ret = new _Bytes(parseInt(m[1], 10), parseInt(m[2], 10), parseInt(m[3], 10), parseFloat(m[4]));\r\n            } else if (m = /^rgb\\(\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*\\)/.exec(color)) {\r\n                ret = new _RGB(parseFloat(m[1]) / 100, parseFloat(m[2]) / 100, parseFloat(m[3]) / 100, 1);\r\n            } else if (m = /^rgba\\(\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9]*\\.?[0-9]+)%\\s*,\\s*([0-9.]+)\\s*\\)/.exec(color)) {\r\n                ret = new _RGB(parseFloat(m[1]) / 100, parseFloat(m[2]) / 100, parseFloat(m[3]) / 100, parseFloat(m[4]));\r\n            }\r\n            if (ret) {\r\n                ret.match = m;\r\n            } else if (!nothrow) {\r\n                throw new Error('Cannot parse color: ' + color);\r\n            }\r\n            return ret;\r\n        }\r\n        function hex(n, width, pad) {\r\n            if (!pad) {\r\n                pad = '0';\r\n            }\r\n            n = n.toString(16);\r\n            while (width > n.length) {\r\n                n = '0' + n;\r\n            }\r\n            return n;\r\n        }\r\n        function hue2rgb(p, q, t) {\r\n            if (t < 0) {\r\n                t += 1;\r\n            }\r\n            if (t > 1) {\r\n                t -= 1;\r\n            }\r\n            if (t < 1 / 6) {\r\n                return p + (q - p) * 6 * t;\r\n            }\r\n            if (t < 1 / 2) {\r\n                return q;\r\n            }\r\n            if (t < 2 / 3) {\r\n                return p + (q - p) * (2 / 3 - t) * 6;\r\n            }\r\n            return p;\r\n        }\r\n        var _Color = kendo.Class.extend({\r\n            toHSV: function () {\r\n                return this;\r\n            },\r\n            toRGB: function () {\r\n                return this;\r\n            },\r\n            toHex: function () {\r\n                return this.toBytes().toHex();\r\n            },\r\n            toBytes: function () {\r\n                return this;\r\n            },\r\n            toCss: function () {\r\n                return '#' + this.toHex();\r\n            },\r\n            toCssRgba: function () {\r\n                var rgb = this.toBytes();\r\n                return 'rgba(' + rgb.r + ', ' + rgb.g + ', ' + rgb.b + ', ' + parseFloat((+this.a).toFixed(3)) + ')';\r\n            },\r\n            toDisplay: function () {\r\n                if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n                    return this.toCss();\r\n                }\r\n                return this.toCssRgba();\r\n            },\r\n            equals: function (c) {\r\n                return c === this || c !== null && this.toCssRgba() == parseColor(c).toCssRgba();\r\n            },\r\n            diff: function (c2) {\r\n                if (c2 == null) {\r\n                    return NaN;\r\n                }\r\n                var c1 = this.toBytes();\r\n                c2 = c2.toBytes();\r\n                return Math.sqrt(Math.pow((c1.r - c2.r) * 0.3, 2) + Math.pow((c1.g - c2.g) * 0.59, 2) + Math.pow((c1.b - c2.b) * 0.11, 2));\r\n            },\r\n            clone: function () {\r\n                var c = this.toBytes();\r\n                if (c === this) {\r\n                    c = new _Bytes(c.r, c.g, c.b, c.a);\r\n                }\r\n                return c;\r\n            }\r\n        });\r\n        var _RGB = _Color.extend({\r\n            init: function (r, g, b, a) {\r\n                this.r = r;\r\n                this.g = g;\r\n                this.b = b;\r\n                this.a = a;\r\n            },\r\n            toHSV: function () {\r\n                var min, max, delta, h, s, v;\r\n                var r = this.r, g = this.g, b = this.b;\r\n                min = Math.min(r, g, b);\r\n                max = Math.max(r, g, b);\r\n                v = max;\r\n                delta = max - min;\r\n                if (delta === 0) {\r\n                    return new _HSV(0, 0, v, this.a);\r\n                }\r\n                if (max !== 0) {\r\n                    s = delta / max;\r\n                    if (r == max) {\r\n                        h = (g - b) / delta;\r\n                    } else if (g == max) {\r\n                        h = 2 + (b - r) / delta;\r\n                    } else {\r\n                        h = 4 + (r - g) / delta;\r\n                    }\r\n                    h *= 60;\r\n                    if (h < 0) {\r\n                        h += 360;\r\n                    }\r\n                } else {\r\n                    s = 0;\r\n                    h = -1;\r\n                }\r\n                return new _HSV(h, s, v, this.a);\r\n            },\r\n            toHSL: function () {\r\n                var r = this.r, g = this.g, b = this.b;\r\n                var max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n                var h, s, l = (max + min) / 2;\r\n                if (max == min) {\r\n                    h = s = 0;\r\n                } else {\r\n                    var d = max - min;\r\n                    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n                    switch (max) {\r\n                    case r:\r\n                        h = (g - b) / d + (g < b ? 6 : 0);\r\n                        break;\r\n                    case g:\r\n                        h = (b - r) / d + 2;\r\n                        break;\r\n                    case b:\r\n                        h = (r - g) / d + 4;\r\n                        break;\r\n                    }\r\n                    h *= 60;\r\n                    s *= 100;\r\n                    l *= 100;\r\n                }\r\n                return new _HSL(h, s, l, this.a);\r\n            },\r\n            toBytes: function () {\r\n                return new _Bytes(this.r * 255, this.g * 255, this.b * 255, this.a);\r\n            }\r\n        });\r\n        var _Bytes = _RGB.extend({\r\n            init: function (r, g, b, a) {\r\n                this.r = Math.round(r);\r\n                this.g = Math.round(g);\r\n                this.b = Math.round(b);\r\n                this.a = a;\r\n            },\r\n            toRGB: function () {\r\n                return new _RGB(this.r / 255, this.g / 255, this.b / 255, this.a);\r\n            },\r\n            toHSV: function () {\r\n                return this.toRGB().toHSV();\r\n            },\r\n            toHSL: function () {\r\n                return this.toRGB().toHSL();\r\n            },\r\n            toHex: function () {\r\n                return hex(this.r, 2) + hex(this.g, 2) + hex(this.b, 2);\r\n            },\r\n            toBytes: function () {\r\n                return this;\r\n            }\r\n        });\r\n        var _HSV = _Color.extend({\r\n            init: function (h, s, v, a) {\r\n                this.h = h;\r\n                this.s = s;\r\n                this.v = v;\r\n                this.a = a;\r\n            },\r\n            toRGB: function () {\r\n                var h = this.h, s = this.s, v = this.v;\r\n                var i, r, g, b, f, p, q, t;\r\n                if (s === 0) {\r\n                    r = g = b = v;\r\n                } else {\r\n                    h /= 60;\r\n                    i = Math.floor(h);\r\n                    f = h - i;\r\n                    p = v * (1 - s);\r\n                    q = v * (1 - s * f);\r\n                    t = v * (1 - s * (1 - f));\r\n                    switch (i) {\r\n                    case 0:\r\n                        r = v;\r\n                        g = t;\r\n                        b = p;\r\n                        break;\r\n                    case 1:\r\n                        r = q;\r\n                        g = v;\r\n                        b = p;\r\n                        break;\r\n                    case 2:\r\n                        r = p;\r\n                        g = v;\r\n                        b = t;\r\n                        break;\r\n                    case 3:\r\n                        r = p;\r\n                        g = q;\r\n                        b = v;\r\n                        break;\r\n                    case 4:\r\n                        r = t;\r\n                        g = p;\r\n                        b = v;\r\n                        break;\r\n                    default:\r\n                        r = v;\r\n                        g = p;\r\n                        b = q;\r\n                        break;\r\n                    }\r\n                }\r\n                return new _RGB(r, g, b, this.a);\r\n            },\r\n            toHSL: function () {\r\n                return this.toRGB().toHSL();\r\n            },\r\n            toBytes: function () {\r\n                return this.toRGB().toBytes();\r\n            }\r\n        });\r\n        var _HSL = _Color.extend({\r\n            init: function (h, s, l, a) {\r\n                this.h = h;\r\n                this.s = s;\r\n                this.l = l;\r\n                this.a = a;\r\n            },\r\n            toRGB: function () {\r\n                var h = this.h, s = this.s, l = this.l;\r\n                var r, g, b;\r\n                if (s === 0) {\r\n                    r = g = b = l;\r\n                } else {\r\n                    h /= 360;\r\n                    s /= 100;\r\n                    l /= 100;\r\n                    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n                    var p = 2 * l - q;\r\n                    r = hue2rgb(p, q, h + 1 / 3);\r\n                    g = hue2rgb(p, q, h);\r\n                    b = hue2rgb(p, q, h - 1 / 3);\r\n                }\r\n                return new _RGB(r, g, b, this.a);\r\n            },\r\n            toHSV: function () {\r\n                return this.toRGB().toHSV();\r\n            },\r\n            toBytes: function () {\r\n                return this.toRGB().toBytes();\r\n            }\r\n        });\r\n        Color.fromBytes = function (r, g, b, a) {\r\n            return new _Bytes(r, g, b, a != null ? a : 1);\r\n        };\r\n        Color.fromRGB = function (r, g, b, a) {\r\n            return new _RGB(r, g, b, a != null ? a : 1);\r\n        };\r\n        Color.fromHSV = function (h, s, v, a) {\r\n            return new _HSV(h, s, v, a != null ? a : 1);\r\n        };\r\n        Color.fromHSL = function (h, s, l, a) {\r\n            return new _HSL(h, s, l, a != null ? a : 1);\r\n        };\r\n        kendo.Color = Color;\r\n        kendo.parseColor = parseColor;\r\n    }(window.kendo.jQuery, parseFloat, parseInt));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\n/** \r\n * Kendo UI v2016.2.714 (http://www.telerik.com/kendo-ui)                                                                                                                                               \r\n * Copyright 2016 Telerik AD. All rights reserved.                                                                                                                                                      \r\n *                                                                                                                                                                                                      \r\n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \r\n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \r\n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n\r\n*/\r\n(function (f, define) {\r\n    define('kendo.colorpicker', [\r\n        'kendo.core',\r\n        'kendo.color',\r\n        'kendo.popup',\r\n        'kendo.slider',\r\n        'kendo.userevents'\r\n    ], f);\r\n}(function () {\r\n    var __meta__ = {\r\n        id: 'colorpicker',\r\n        name: 'Color tools',\r\n        category: 'web',\r\n        description: 'Color selection widgets',\r\n        depends: [\r\n            'core',\r\n            'color',\r\n            'popup',\r\n            'slider',\r\n            'userevents'\r\n        ]\r\n    };\r\n    (function ($, parseInt, undefined) {\r\n        var kendo = window.kendo, ui = kendo.ui, Widget = ui.Widget, parseColor = kendo.parseColor, Color = kendo.Color, KEYS = kendo.keys, BACKGROUNDCOLOR = 'background-color', ITEMSELECTEDCLASS = 'k-state-selected', SIMPLEPALETTE = '000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7', WEBPALETTE = 'FFFFFF,FFCCFF,FF99FF,FF66FF,FF33FF,FF00FF,CCFFFF,CCCCFF,CC99FF,CC66FF,CC33FF,CC00FF,99FFFF,99CCFF,9999FF,9966FF,9933FF,9900FF,FFFFCC,FFCCCC,FF99CC,FF66CC,FF33CC,FF00CC,CCFFCC,CCCCCC,CC99CC,CC66CC,CC33CC,CC00CC,99FFCC,99CCCC,9999CC,9966CC,9933CC,9900CC,FFFF99,FFCC99,FF9999,FF6699,FF3399,FF0099,CCFF99,CCCC99,CC9999,CC6699,CC3399,CC0099,99FF99,99CC99,999999,996699,993399,990099,FFFF66,FFCC66,FF9966,FF6666,FF3366,FF0066,CCFF66,CCCC66,CC9966,CC6666,CC3366,CC0066,99FF66,99CC66,999966,996666,993366,990066,FFFF33,FFCC33,FF9933,FF6633,FF3333,FF0033,CCFF33,CCCC33,CC9933,CC6633,CC3333,CC0033,99FF33,99CC33,999933,996633,993333,990033,FFFF00,FFCC00,FF9900,FF6600,FF3300,FF0000,CCFF00,CCCC00,CC9900,CC6600,CC3300,CC0000,99FF00,99CC00,999900,996600,993300,990000,66FFFF,66CCFF,6699FF,6666FF,6633FF,6600FF,33FFFF,33CCFF,3399FF,3366FF,3333FF,3300FF,00FFFF,00CCFF,0099FF,0066FF,0033FF,0000FF,66FFCC,66CCCC,6699CC,6666CC,6633CC,6600CC,33FFCC,33CCCC,3399CC,3366CC,3333CC,3300CC,00FFCC,00CCCC,0099CC,0066CC,0033CC,0000CC,66FF99,66CC99,669999,666699,663399,660099,33FF99,33CC99,339999,336699,333399,330099,00FF99,00CC99,009999,006699,003399,000099,66FF66,66CC66,669966,666666,663366,660066,33FF66,33CC66,339966,336666,333366,330066,00FF66,00CC66,009966,006666,003366,000066,66FF33,66CC33,669933,666633,663333,660033,33FF33,33CC33,339933,336633,333333,330033,00FF33,00CC33,009933,006633,003333,000033,66FF00,66CC00,669900,666600,663300,660000,33FF00,33CC00,339900,336600,333300,330000,00FF00,00CC00,009900,006600,003300,000000', APPLY_CANCEL = {\r\n                apply: 'Apply',\r\n                cancel: 'Cancel'\r\n            }, NS = '.kendoColorTools', CLICK_NS = 'click' + NS, KEYDOWN_NS = 'keydown' + NS, browser = kendo.support.browser, isIE8 = browser.msie && browser.version < 9;\r\n        var ColorSelector = Widget.extend({\r\n            init: function (element, options) {\r\n                var that = this, ariaId;\r\n                Widget.fn.init.call(that, element, options);\r\n                element = that.element;\r\n                options = that.options;\r\n                that._value = options.value = parseColor(options.value);\r\n                that._tabIndex = element.attr('tabIndex') || 0;\r\n                ariaId = that._ariaId = options.ariaId;\r\n                if (ariaId) {\r\n                    element.attr('aria-labelledby', ariaId);\r\n                }\r\n                if (options._standalone) {\r\n                    that._triggerSelect = that._triggerChange;\r\n                }\r\n            },\r\n            options: {\r\n                name: 'ColorSelector',\r\n                value: null,\r\n                _standalone: true\r\n            },\r\n            events: [\r\n                'change',\r\n                'select',\r\n                'cancel'\r\n            ],\r\n            color: function (value) {\r\n                if (value !== undefined) {\r\n                    this._value = parseColor(value);\r\n                    this._updateUI(this._value);\r\n                }\r\n                return this._value;\r\n            },\r\n            value: function (color) {\r\n                color = this.color(color);\r\n                if (color) {\r\n                    if (this.options.opacity) {\r\n                        color = color.toCssRgba();\r\n                    } else {\r\n                        color = color.toCss();\r\n                    }\r\n                }\r\n                return color || null;\r\n            },\r\n            enable: function (enable) {\r\n                if (arguments.length === 0) {\r\n                    enable = true;\r\n                }\r\n                $('.k-disabled-overlay', this.wrapper).remove();\r\n                if (!enable) {\r\n                    this.wrapper.append('<div class=\\'k-disabled-overlay\\'></div>');\r\n                }\r\n                this._onEnable(enable);\r\n            },\r\n            _select: function (color, nohooks) {\r\n                var prev = this._value;\r\n                color = this.color(color);\r\n                if (!nohooks) {\r\n                    this.element.trigger('change');\r\n                    if (!color.equals(prev)) {\r\n                        this.trigger('change', { value: this.value() });\r\n                    } else if (!this._standalone) {\r\n                        this.trigger('cancel');\r\n                    }\r\n                }\r\n            },\r\n            _triggerSelect: function (color) {\r\n                triggerEvent(this, 'select', color);\r\n            },\r\n            _triggerChange: function (color) {\r\n                triggerEvent(this, 'change', color);\r\n            },\r\n            destroy: function () {\r\n                if (this.element) {\r\n                    this.element.off(NS);\r\n                }\r\n                if (this.wrapper) {\r\n                    this.wrapper.off(NS).find('*').off(NS);\r\n                }\r\n                this.wrapper = null;\r\n                Widget.fn.destroy.call(this);\r\n            },\r\n            _updateUI: $.noop,\r\n            _selectOnHide: function () {\r\n                return null;\r\n            },\r\n            _cancel: function () {\r\n                this.trigger('cancel');\r\n            }\r\n        });\r\n        function triggerEvent(self, type, color) {\r\n            color = parseColor(color);\r\n            if (color && !color.equals(self.color())) {\r\n                if (type == 'change') {\r\n                    self._value = color;\r\n                }\r\n                if (color.a != 1) {\r\n                    color = color.toCssRgba();\r\n                } else {\r\n                    color = color.toCss();\r\n                }\r\n                self.trigger(type, { value: color });\r\n            }\r\n        }\r\n        var ColorPalette = ColorSelector.extend({\r\n            init: function (element, options) {\r\n                var that = this;\r\n                ColorSelector.fn.init.call(that, element, options);\r\n                element = that.wrapper = that.element;\r\n                options = that.options;\r\n                var colors = options.palette;\r\n                if (colors == 'websafe') {\r\n                    colors = WEBPALETTE;\r\n                    options.columns = 18;\r\n                } else if (colors == 'basic') {\r\n                    colors = SIMPLEPALETTE;\r\n                }\r\n                if (typeof colors == 'string') {\r\n                    colors = colors.split(',');\r\n                }\r\n                if ($.isArray(colors)) {\r\n                    colors = $.map(colors, function (x) {\r\n                        return parseColor(x);\r\n                    });\r\n                }\r\n                that._selectedID = (options.ariaId || kendo.guid()) + '_selected';\r\n                element.addClass('k-widget k-colorpalette').attr('role', 'grid').attr('aria-readonly', 'true').append($(that._template({\r\n                    colors: colors,\r\n                    columns: options.columns,\r\n                    tileSize: options.tileSize,\r\n                    value: that._value,\r\n                    id: options.ariaId\r\n                }))).on(CLICK_NS, '.k-item', function (ev) {\r\n                    that._select($(ev.currentTarget).css(BACKGROUNDCOLOR));\r\n                }).attr('tabIndex', that._tabIndex).on(KEYDOWN_NS, bind(that._keydown, that));\r\n                var tileSize = options.tileSize, width, height;\r\n                if (tileSize) {\r\n                    if (/number|string/.test(typeof tileSize)) {\r\n                        width = height = parseFloat(tileSize);\r\n                    } else if (typeof tileSize == 'object') {\r\n                        width = parseFloat(tileSize.width);\r\n                        height = parseFloat(tileSize.height);\r\n                    } else {\r\n                        throw new Error('Unsupported value for the \\'tileSize\\' argument');\r\n                    }\r\n                    element.find('.k-item').css({\r\n                        width: width,\r\n                        height: height\r\n                    });\r\n                }\r\n            },\r\n            focus: function () {\r\n                this.wrapper.focus();\r\n            },\r\n            options: {\r\n                name: 'ColorPalette',\r\n                columns: 10,\r\n                tileSize: null,\r\n                palette: 'basic'\r\n            },\r\n            _onEnable: function (enable) {\r\n                if (enable) {\r\n                    this.wrapper.attr('tabIndex', this._tabIndex);\r\n                } else {\r\n                    this.wrapper.removeAttr('tabIndex');\r\n                }\r\n            },\r\n            _keydown: function (e) {\r\n                var selected, wrapper = this.wrapper, items = wrapper.find('.k-item'), current = items.filter('.' + ITEMSELECTEDCLASS).get(0), keyCode = e.keyCode;\r\n                if (keyCode == KEYS.LEFT) {\r\n                    selected = relative(items, current, -1);\r\n                } else if (keyCode == KEYS.RIGHT) {\r\n                    selected = relative(items, current, 1);\r\n                } else if (keyCode == KEYS.DOWN) {\r\n                    selected = relative(items, current, this.options.columns);\r\n                } else if (keyCode == KEYS.UP) {\r\n                    selected = relative(items, current, -this.options.columns);\r\n                } else if (keyCode == KEYS.ENTER) {\r\n                    preventDefault(e);\r\n                    if (current) {\r\n                        this._select($(current).css(BACKGROUNDCOLOR));\r\n                    }\r\n                } else if (keyCode == KEYS.ESC) {\r\n                    this._cancel();\r\n                }\r\n                if (selected) {\r\n                    preventDefault(e);\r\n                    this._current(selected);\r\n                    try {\r\n                        var color = parseColor(selected.css(BACKGROUNDCOLOR));\r\n                        this._triggerSelect(color);\r\n                    } catch (ex) {\r\n                    }\r\n                }\r\n            },\r\n            _current: function (item) {\r\n                this.wrapper.find('.' + ITEMSELECTEDCLASS).removeClass(ITEMSELECTEDCLASS).attr('aria-selected', false).removeAttr('id');\r\n                $(item).addClass(ITEMSELECTEDCLASS).attr('aria-selected', true).attr('id', this._selectedID);\r\n                this.element.removeAttr('aria-activedescendant').attr('aria-activedescendant', this._selectedID);\r\n            },\r\n            _updateUI: function (color) {\r\n                var item = null;\r\n                this.wrapper.find('.k-item').each(function () {\r\n                    var c = parseColor($(this).css(BACKGROUNDCOLOR));\r\n                    if (c && c.equals(color)) {\r\n                        item = this;\r\n                        return false;\r\n                    }\r\n                });\r\n                this._current(item);\r\n            },\r\n            _template: kendo.template('<table class=\"k-palette k-reset\" role=\"presentation\"><tr role=\"row\">' + '# for (var i = 0; i < colors.length; ++i) { #' + '# var selected = colors[i].equals(value); #' + '# if (i && i % columns == 0) { # </tr><tr role=\"row\"> # } #' + '<td role=\"gridcell\" unselectable=\"on\" style=\"background-color:#= colors[i].toCss() #\"' + '#= selected ? \" aria-selected=true\" : \"\" # ' + '#=(id && i === 0) ? \"id=\\\\\"\"+id+\"\\\\\" \" : \"\" # ' + 'class=\"k-item#= selected ? \" ' + ITEMSELECTEDCLASS + '\" : \"\" #\" ' + 'aria-label=\"#= colors[i].toCss() #\"></td>' + '# } #' + '</tr></table>')\r\n        });\r\n        var FlatColorPicker = ColorSelector.extend({\r\n            init: function (element, options) {\r\n                var that = this;\r\n                ColorSelector.fn.init.call(that, element, options);\r\n                options = that.options;\r\n                element = that.element;\r\n                that.wrapper = element.addClass('k-widget k-flatcolorpicker').append(that._template(options));\r\n                that._hueElements = $('.k-hsv-rectangle, .k-transparency-slider .k-slider-track', element);\r\n                that._selectedColor = $('.k-selected-color-display', element);\r\n                that._colorAsText = $('input.k-color-value', element);\r\n                that._sliders();\r\n                that._hsvArea();\r\n                that._updateUI(that._value || parseColor('#f00'));\r\n                element.find('input.k-color-value').on(KEYDOWN_NS, function (ev) {\r\n                    var input = this;\r\n                    if (ev.keyCode == KEYS.ENTER) {\r\n                        try {\r\n                            var color = parseColor(input.value);\r\n                            var val = that.color();\r\n                            that._select(color, color.equals(val));\r\n                        } catch (ex) {\r\n                            $(input).addClass('k-state-error');\r\n                        }\r\n                    } else if (that.options.autoupdate) {\r\n                        setTimeout(function () {\r\n                            var color = parseColor(input.value, true);\r\n                            if (color) {\r\n                                that._updateUI(color, true);\r\n                            }\r\n                        }, 10);\r\n                    }\r\n                }).end().on(CLICK_NS, '.k-controls button.apply', function () {\r\n                    that._select(that._getHSV());\r\n                }).on(CLICK_NS, '.k-controls button.cancel', function () {\r\n                    that._updateUI(that.color());\r\n                    that._cancel();\r\n                });\r\n                if (isIE8) {\r\n                    that._applyIEFilter();\r\n                }\r\n            },\r\n            destroy: function () {\r\n                this._hueSlider.destroy();\r\n                if (this._opacitySlider) {\r\n                    this._opacitySlider.destroy();\r\n                }\r\n                this._hueSlider = this._opacitySlider = this._hsvRect = this._hsvHandle = this._hueElements = this._selectedColor = this._colorAsText = null;\r\n                ColorSelector.fn.destroy.call(this);\r\n            },\r\n            options: {\r\n                name: 'FlatColorPicker',\r\n                opacity: false,\r\n                buttons: false,\r\n                input: true,\r\n                preview: true,\r\n                autoupdate: true,\r\n                messages: APPLY_CANCEL\r\n            },\r\n            _applyIEFilter: function () {\r\n                var track = this.element.find('.k-hue-slider .k-slider-track')[0], url = track.currentStyle.backgroundImage;\r\n                url = url.replace(/^url\\([\\'\\\"]?|[\\'\\\"]?\\)$/g, '');\r\n                track.style.filter = 'progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\\'' + url + '\\', sizingMethod=\\'scale\\')';\r\n            },\r\n            _sliders: function () {\r\n                var that = this, element = that.element;\r\n                function hueChange(e) {\r\n                    that._updateUI(that._getHSV(e.value, null, null, null));\r\n                }\r\n                that._hueSlider = element.find('.k-hue-slider').kendoSlider({\r\n                    min: 0,\r\n                    max: 359,\r\n                    tickPlacement: 'none',\r\n                    showButtons: false,\r\n                    slide: hueChange,\r\n                    change: hueChange\r\n                }).data('kendoSlider');\r\n                function opacityChange(e) {\r\n                    that._updateUI(that._getHSV(null, null, null, e.value / 100));\r\n                }\r\n                that._opacitySlider = element.find('.k-transparency-slider').kendoSlider({\r\n                    min: 0,\r\n                    max: 100,\r\n                    tickPlacement: 'none',\r\n                    showButtons: false,\r\n                    slide: opacityChange,\r\n                    change: opacityChange\r\n                }).data('kendoSlider');\r\n            },\r\n            _hsvArea: function () {\r\n                var that = this, element = that.element, hsvRect = element.find('.k-hsv-rectangle'), hsvHandle = hsvRect.find('.k-draghandle').attr('tabIndex', 0).on(KEYDOWN_NS, bind(that._keydown, that));\r\n                function update(x, y) {\r\n                    var offset = this.offset, dx = x - offset.left, dy = y - offset.top, rw = this.width, rh = this.height;\r\n                    dx = dx < 0 ? 0 : dx > rw ? rw : dx;\r\n                    dy = dy < 0 ? 0 : dy > rh ? rh : dy;\r\n                    that._svChange(dx / rw, 1 - dy / rh);\r\n                }\r\n                that._hsvEvents = new kendo.UserEvents(hsvRect, {\r\n                    global: true,\r\n                    press: function (e) {\r\n                        this.offset = kendo.getOffset(hsvRect);\r\n                        this.width = hsvRect.width();\r\n                        this.height = hsvRect.height();\r\n                        hsvHandle.focus();\r\n                        update.call(this, e.x.location, e.y.location);\r\n                    },\r\n                    start: function () {\r\n                        hsvRect.addClass('k-dragging');\r\n                        hsvHandle.focus();\r\n                    },\r\n                    move: function (e) {\r\n                        e.preventDefault();\r\n                        update.call(this, e.x.location, e.y.location);\r\n                    },\r\n                    end: function () {\r\n                        hsvRect.removeClass('k-dragging');\r\n                    }\r\n                });\r\n                that._hsvRect = hsvRect;\r\n                that._hsvHandle = hsvHandle;\r\n            },\r\n            _onEnable: function (enable) {\r\n                this._hueSlider.enable(enable);\r\n                if (this._opacitySlider) {\r\n                    this._opacitySlider.enable(enable);\r\n                }\r\n                this.wrapper.find('input').attr('disabled', !enable);\r\n                var handle = this._hsvRect.find('.k-draghandle');\r\n                if (enable) {\r\n                    handle.attr('tabIndex', this._tabIndex);\r\n                } else {\r\n                    handle.removeAttr('tabIndex');\r\n                }\r\n            },\r\n            _keydown: function (ev) {\r\n                var that = this;\r\n                function move(prop, d) {\r\n                    var c = that._getHSV();\r\n                    c[prop] += d * (ev.shiftKey ? 0.01 : 0.05);\r\n                    if (c[prop] < 0) {\r\n                        c[prop] = 0;\r\n                    }\r\n                    if (c[prop] > 1) {\r\n                        c[prop] = 1;\r\n                    }\r\n                    that._updateUI(c);\r\n                    preventDefault(ev);\r\n                }\r\n                function hue(d) {\r\n                    var c = that._getHSV();\r\n                    c.h += d * (ev.shiftKey ? 1 : 5);\r\n                    if (c.h < 0) {\r\n                        c.h = 0;\r\n                    }\r\n                    if (c.h > 359) {\r\n                        c.h = 359;\r\n                    }\r\n                    that._updateUI(c);\r\n                    preventDefault(ev);\r\n                }\r\n                switch (ev.keyCode) {\r\n                case KEYS.LEFT:\r\n                    if (ev.ctrlKey) {\r\n                        hue(-1);\r\n                    } else {\r\n                        move('s', -1);\r\n                    }\r\n                    break;\r\n                case KEYS.RIGHT:\r\n                    if (ev.ctrlKey) {\r\n                        hue(1);\r\n                    } else {\r\n                        move('s', 1);\r\n                    }\r\n                    break;\r\n                case KEYS.UP:\r\n                    move(ev.ctrlKey && that._opacitySlider ? 'a' : 'v', 1);\r\n                    break;\r\n                case KEYS.DOWN:\r\n                    move(ev.ctrlKey && that._opacitySlider ? 'a' : 'v', -1);\r\n                    break;\r\n                case KEYS.ENTER:\r\n                    that._select(that._getHSV());\r\n                    break;\r\n                case KEYS.F2:\r\n                    that.wrapper.find('input.k-color-value').focus().select();\r\n                    break;\r\n                case KEYS.ESC:\r\n                    that._cancel();\r\n                    break;\r\n                }\r\n            },\r\n            focus: function () {\r\n                this._hsvHandle.focus();\r\n            },\r\n            _getHSV: function (h, s, v, a) {\r\n                var rect = this._hsvRect, width = rect.width(), height = rect.height(), handlePosition = this._hsvHandle.position();\r\n                if (h == null) {\r\n                    h = this._hueSlider.value();\r\n                }\r\n                if (s == null) {\r\n                    s = handlePosition.left / width;\r\n                }\r\n                if (v == null) {\r\n                    v = 1 - handlePosition.top / height;\r\n                }\r\n                if (a == null) {\r\n                    a = this._opacitySlider ? this._opacitySlider.value() / 100 : 1;\r\n                }\r\n                return Color.fromHSV(h, s, v, a);\r\n            },\r\n            _svChange: function (s, v) {\r\n                var color = this._getHSV(null, s, v, null);\r\n                this._updateUI(color);\r\n            },\r\n            _updateUI: function (color, dontChangeInput) {\r\n                var that = this, rect = that._hsvRect;\r\n                if (!color) {\r\n                    return;\r\n                }\r\n                this._colorAsText.removeClass('k-state-error');\r\n                that._selectedColor.css(BACKGROUNDCOLOR, color.toDisplay());\r\n                if (!dontChangeInput) {\r\n                    that._colorAsText.val(that._opacitySlider ? color.toCssRgba() : color.toCss());\r\n                }\r\n                that._triggerSelect(color);\r\n                color = color.toHSV();\r\n                that._hsvHandle.css({\r\n                    left: color.s * rect.width() + 'px',\r\n                    top: (1 - color.v) * rect.height() + 'px'\r\n                });\r\n                that._hueElements.css(BACKGROUNDCOLOR, Color.fromHSV(color.h, 1, 1, 1).toCss());\r\n                that._hueSlider.value(color.h);\r\n                if (that._opacitySlider) {\r\n                    that._opacitySlider.value(100 * color.a);\r\n                }\r\n            },\r\n            _selectOnHide: function () {\r\n                return this.options.buttons ? null : this._getHSV();\r\n            },\r\n            _template: kendo.template('# if (preview) { #' + '<div class=\"k-selected-color\"><div class=\"k-selected-color-display\"><input class=\"k-color-value\" #= !data.input ? \\'style=\"visibility: hidden;\"\\' : \"\" #></div></div>' + '# } #' + '<div class=\"k-hsv-rectangle\"><div class=\"k-hsv-gradient\"></div><div class=\"k-draghandle\"></div></div>' + '<input class=\"k-hue-slider\" />' + '# if (opacity) { #' + '<input class=\"k-transparency-slider\" />' + '# } #' + '# if (buttons) { #' + '<div unselectable=\"on\" class=\"k-controls\"><button class=\"k-button k-primary apply\">#: messages.apply #</button> <button class=\"k-button cancel\">#: messages.cancel #</button></div>' + '# } #')\r\n        });\r\n        function relative(array, element, delta) {\r\n            array = Array.prototype.slice.call(array);\r\n            var n = array.length;\r\n            var pos = array.indexOf(element);\r\n            if (pos < 0) {\r\n                return delta < 0 ? array[n - 1] : array[0];\r\n            }\r\n            pos += delta;\r\n            if (pos < 0) {\r\n                pos += n;\r\n            } else {\r\n                pos %= n;\r\n            }\r\n            return array[pos];\r\n        }\r\n        var ColorPicker = Widget.extend({\r\n            init: function (element, options) {\r\n                var that = this;\r\n                Widget.fn.init.call(that, element, options);\r\n                options = that.options;\r\n                element = that.element;\r\n                var value = element.attr('value') || element.val();\r\n                if (value) {\r\n                    value = parseColor(value, true);\r\n                } else {\r\n                    value = parseColor(options.value, true);\r\n                }\r\n                that._value = options.value = value;\r\n                var content = that.wrapper = $(that._template(options));\r\n                element.hide().after(content);\r\n                if (element.is('input')) {\r\n                    element.appendTo(content);\r\n                    var label = element.closest('label');\r\n                    var id = element.attr('id');\r\n                    if (id) {\r\n                        label = label.add('label[for=\"' + id + '\"]');\r\n                    }\r\n                    label.click(function (ev) {\r\n                        that.open();\r\n                        ev.preventDefault();\r\n                    });\r\n                }\r\n                that._tabIndex = element.attr('tabIndex') || 0;\r\n                that.enable(!element.attr('disabled'));\r\n                var accesskey = element.attr('accesskey');\r\n                if (accesskey) {\r\n                    element.attr('accesskey', null);\r\n                    content.attr('accesskey', accesskey);\r\n                }\r\n                that.bind('activate', function (ev) {\r\n                    if (!ev.isDefaultPrevented()) {\r\n                        that.toggle();\r\n                    }\r\n                });\r\n                that._updateUI(value);\r\n            },\r\n            destroy: function () {\r\n                this.wrapper.off(NS).find('*').off(NS);\r\n                if (this._popup) {\r\n                    this._selector.destroy();\r\n                    this._popup.destroy();\r\n                }\r\n                this._selector = this._popup = this.wrapper = null;\r\n                Widget.fn.destroy.call(this);\r\n            },\r\n            enable: function (enable) {\r\n                var that = this, wrapper = that.wrapper, innerWrapper = wrapper.children('.k-picker-wrap'), icon = innerWrapper.find('.k-select');\r\n                if (arguments.length === 0) {\r\n                    enable = true;\r\n                }\r\n                that.element.attr('disabled', !enable);\r\n                wrapper.attr('aria-disabled', !enable);\r\n                icon.off(NS).on('mousedown' + NS, preventDefault);\r\n                wrapper.addClass('k-state-disabled').removeAttr('tabIndex').add('*', wrapper).off(NS);\r\n                if (enable) {\r\n                    wrapper.removeClass('k-state-disabled').attr('tabIndex', that._tabIndex).on('mouseenter' + NS, function () {\r\n                        innerWrapper.addClass('k-state-hover');\r\n                    }).on('mouseleave' + NS, function () {\r\n                        innerWrapper.removeClass('k-state-hover');\r\n                    }).on('focus' + NS, function () {\r\n                        innerWrapper.addClass('k-state-focused');\r\n                    }).on('blur' + NS, function () {\r\n                        innerWrapper.removeClass('k-state-focused');\r\n                    }).on(KEYDOWN_NS, bind(that._keydown, that)).on(CLICK_NS, '.k-select', bind(that.toggle, that)).on(CLICK_NS, that.options.toolIcon ? '.k-tool-icon' : '.k-selected-color', function () {\r\n                        that.trigger('activate');\r\n                    });\r\n                } else {\r\n                    that.close();\r\n                }\r\n            },\r\n            _template: kendo.template('<span role=\"textbox\" aria-haspopup=\"true\" class=\"k-widget k-colorpicker k-header\">' + '<span class=\"k-picker-wrap k-state-default\">' + '# if (toolIcon) { #' + '<span class=\"k-tool-icon #= toolIcon #\">' + '<span class=\"k-selected-color\"></span>' + '</span>' + '# } else { #' + '<span class=\"k-selected-color\"></span>' + '# } #' + '<span class=\"k-select\" unselectable=\"on\">' + '<span class=\"k-icon k-i-arrow-s\" unselectable=\"on\"></span>' + '</span>' + '</span>' + '</span>'),\r\n            options: {\r\n                name: 'ColorPicker',\r\n                palette: null,\r\n                columns: 10,\r\n                toolIcon: null,\r\n                value: null,\r\n                messages: APPLY_CANCEL,\r\n                opacity: false,\r\n                buttons: true,\r\n                preview: true,\r\n                ARIATemplate: 'Current selected color is #=data || \"\"#'\r\n            },\r\n            events: [\r\n                'activate',\r\n                'change',\r\n                'select',\r\n                'open',\r\n                'close'\r\n            ],\r\n            open: function () {\r\n                if (!this.element.prop('disabled')) {\r\n                    this._getPopup().open();\r\n                }\r\n            },\r\n            close: function () {\r\n                this._getPopup().close();\r\n            },\r\n            toggle: function () {\r\n                if (!this.element.prop('disabled')) {\r\n                    this._getPopup().toggle();\r\n                }\r\n            },\r\n            color: ColorSelector.fn.color,\r\n            value: ColorSelector.fn.value,\r\n            _select: ColorSelector.fn._select,\r\n            _triggerSelect: ColorSelector.fn._triggerSelect,\r\n            _isInputTypeColor: function () {\r\n                var el = this.element[0];\r\n                return /^input$/i.test(el.tagName) && /^color$/i.test(el.type);\r\n            },\r\n            _updateUI: function (value) {\r\n                var formattedValue = '';\r\n                if (value) {\r\n                    if (this._isInputTypeColor() || value.a == 1) {\r\n                        formattedValue = value.toCss();\r\n                    } else {\r\n                        formattedValue = value.toCssRgba();\r\n                    }\r\n                    this.element.val(formattedValue);\r\n                }\r\n                if (!this._ariaTemplate) {\r\n                    this._ariaTemplate = kendo.template(this.options.ARIATemplate);\r\n                }\r\n                this.wrapper.attr('aria-label', this._ariaTemplate(formattedValue));\r\n                this._triggerSelect(value);\r\n                this.wrapper.find('.k-selected-color').css(BACKGROUNDCOLOR, value ? value.toDisplay() : 'transparent');\r\n            },\r\n            _keydown: function (ev) {\r\n                var key = ev.keyCode;\r\n                if (this._getPopup().visible()) {\r\n                    if (key == KEYS.ESC) {\r\n                        this._selector._cancel();\r\n                    } else {\r\n                        this._selector._keydown(ev);\r\n                    }\r\n                    preventDefault(ev);\r\n                } else if (key == KEYS.ENTER || key == KEYS.DOWN) {\r\n                    this.open();\r\n                    preventDefault(ev);\r\n                }\r\n            },\r\n            _getPopup: function () {\r\n                var that = this, popup = that._popup;\r\n                if (!popup) {\r\n                    var options = that.options;\r\n                    var selectorType;\r\n                    if (options.palette) {\r\n                        selectorType = ColorPalette;\r\n                    } else {\r\n                        selectorType = FlatColorPicker;\r\n                    }\r\n                    options._standalone = false;\r\n                    delete options.select;\r\n                    delete options.change;\r\n                    delete options.cancel;\r\n                    var id = kendo.guid();\r\n                    var selector = that._selector = new selectorType($('<div id=\"' + id + '\"/>').appendTo(document.body), options);\r\n                    that.wrapper.attr('aria-owns', id);\r\n                    that._popup = popup = selector.wrapper.kendoPopup({\r\n                        anchor: that.wrapper,\r\n                        adjustSize: {\r\n                            width: 5,\r\n                            height: 0\r\n                        }\r\n                    }).data('kendoPopup');\r\n                    selector.bind({\r\n                        select: function (ev) {\r\n                            that._updateUI(parseColor(ev.value));\r\n                        },\r\n                        change: function () {\r\n                            that._select(selector.color());\r\n                            that.close();\r\n                        },\r\n                        cancel: function () {\r\n                            that.close();\r\n                        }\r\n                    });\r\n                    popup.bind({\r\n                        close: function (ev) {\r\n                            if (that.trigger('close')) {\r\n                                ev.preventDefault();\r\n                                return;\r\n                            }\r\n                            that.wrapper.children('.k-picker-wrap').removeClass('k-state-focused');\r\n                            var color = selector._selectOnHide();\r\n                            if (!color) {\r\n                                setTimeout(function () {\r\n                                    if (that.wrapper) {\r\n                                        that.wrapper.focus();\r\n                                    }\r\n                                });\r\n                                that._updateUI(that.color());\r\n                            } else {\r\n                                that._select(color);\r\n                            }\r\n                        },\r\n                        open: function (ev) {\r\n                            if (that.trigger('open')) {\r\n                                ev.preventDefault();\r\n                            } else {\r\n                                that.wrapper.children('.k-picker-wrap').addClass('k-state-focused');\r\n                            }\r\n                        },\r\n                        activate: function () {\r\n                            selector._select(that.color(), true);\r\n                            selector.focus();\r\n                            that.wrapper.children('.k-picker-wrap').addClass('k-state-focused');\r\n                        }\r\n                    });\r\n                }\r\n                return popup;\r\n            }\r\n        });\r\n        function preventDefault(ev) {\r\n            ev.preventDefault();\r\n        }\r\n        function bind(callback, obj) {\r\n            return function () {\r\n                return callback.apply(obj, arguments);\r\n            };\r\n        }\r\n        ui.plugin(ColorPalette);\r\n        ui.plugin(FlatColorPicker);\r\n        ui.plugin(ColorPicker);\r\n    }(jQuery, parseInt));\r\n    return window.kendo;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\n/** \r\n * Kendo UI v2016.2.714 (http://www.telerik.com/kendo-ui)                                                                                                                                               \r\n * Copyright 2016 Telerik AD. All rights reserved.                                                                                                                                                      \r\n *                                                                                                                                                                                                      \r\n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \r\n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \r\n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n\r\n*/\r\n(function (f, define) {\r\n    define('kendo.ooxml', ['kendo.core'], f);\r\n}(function () {\r\n    var __meta__ = {\r\n        id: 'ooxml',\r\n        name: 'XLSX generation',\r\n        category: 'framework',\r\n        advanced: true,\r\n        depends: ['core']\r\n    };\r\n    (function ($, kendo) {\r\n        var RELS = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\r\\n' + '<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">' + '<Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties\" Target=\"docProps/app.xml\"/>' + '<Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties\" Target=\"docProps/core.xml\"/>' + '<Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument\" Target=\"xl/workbook.xml\"/>' + '</Relationships>';\r\n        var CORE = kendo.template('<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\r\\n' + '<cp:coreProperties xmlns:cp=\"http://schemas.openxmlformats.org/package/2006/metadata/core-properties\" ' + 'xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:dcterms=\"http://purl.org/dc/terms/\" ' + 'xmlns:dcmitype=\"http://purl.org/dc/dcmitype/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">' + '<dc:creator>${creator}</dc:creator>' + '<cp:lastModifiedBy>${lastModifiedBy}</cp:lastModifiedBy>' + '<dcterms:created xsi:type=\"dcterms:W3CDTF\">${created}</dcterms:created>' + '<dcterms:modified xsi:type=\"dcterms:W3CDTF\">${modified}</dcterms:modified>' + '</cp:coreProperties>');\r\n        var APP = kendo.template('<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\r\\n' + '<Properties xmlns=\"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties\" xmlns:vt=\"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes\">' + '<Application>Microsoft Excel</Application>' + '<DocSecurity>0</DocSecurity>' + '<ScaleCrop>false</ScaleCrop>' + '<HeadingPairs>' + '<vt:vector size=\"2\" baseType=\"variant\">' + '<vt:variant>' + '<vt:lpstr>Worksheets</vt:lpstr>' + '</vt:variant>' + '<vt:variant>' + '<vt:i4>${sheets.length}</vt:i4>' + '</vt:variant>' + '</vt:vector>' + '</HeadingPairs>' + '<TitlesOfParts>' + '<vt:vector size=\"${sheets.length}\" baseType=\"lpstr\">' + '# for (var idx = 0; idx < sheets.length; idx++) { #' + '# if (sheets[idx].options.title) { #' + '<vt:lpstr>${sheets[idx].options.title}</vt:lpstr>' + '# } else { #' + '<vt:lpstr>Sheet${idx+1}</vt:lpstr>' + '# } #' + '# } #' + '</vt:vector>' + '</TitlesOfParts>' + '<LinksUpToDate>false</LinksUpToDate>' + '<SharedDoc>false</SharedDoc>' + '<HyperlinksChanged>false</HyperlinksChanged>' + '<AppVersion>14.0300</AppVersion>' + '</Properties>');\r\n        var CONTENT_TYPES = kendo.template('<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\r\\n' + '<Types xmlns=\"http://schemas.openxmlformats.org/package/2006/content-types\">' + '<Default Extension=\"rels\" ContentType=\"application/vnd.openxmlformats-package.relationships+xml\" />' + '<Default Extension=\"xml\" ContentType=\"application/xml\" />' + '<Override PartName=\"/xl/workbook.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml\" />' + '<Override PartName=\"/xl/styles.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml\"/>' + '<Override PartName=\"/xl/sharedStrings.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml\"/>' + '# for (var idx = 1; idx <= count; idx++) { #' + '<Override PartName=\"/xl/worksheets/sheet${idx}.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\" />' + '# } #' + '<Override PartName=\"/docProps/core.xml\" ContentType=\"application/vnd.openxmlformats-package.core-properties+xml\" />' + '<Override PartName=\"/docProps/app.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.extended-properties+xml\" />' + '</Types>');\r\n        var WORKBOOK = kendo.template('<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\r\\n' + '<workbook xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">' + '<fileVersion appName=\"xl\" lastEdited=\"5\" lowestEdited=\"5\" rupBuild=\"9303\" />' + '<workbookPr defaultThemeVersion=\"124226\" />' + '<bookViews>' + '<workbookView xWindow=\"240\" yWindow=\"45\" windowWidth=\"18195\" windowHeight=\"7995\" />' + '</bookViews>' + '<sheets>' + '# for (var idx = 0; idx < sheets.length; idx++) { #' + '# var options = sheets[idx].options; #' + '# var name = options.name || options.title #' + '# if (name) { #' + '<sheet name=\"${name}\" sheetId=\"${idx+1}\" r:id=\"rId${idx+1}\" />' + '# } else { #' + '<sheet name=\"Sheet${idx+1}\" sheetId=\"${idx+1}\" r:id=\"rId${idx+1}\" />' + '# } #' + '# } #' + '</sheets>' + '# if (definedNames.length) { #' + '<definedNames>' + ' # for (var di = 0; di < definedNames.length; di++) { #' + '<definedName name=\"_xlnm._FilterDatabase\" hidden=\"1\" localSheetId=\"${definedNames[di].localSheetId}\">' + '${definedNames[di].name}!$${definedNames[di].from}:$${definedNames[di].to}' + '</definedName>' + ' # } #' + '</definedNames>' + '# } #' + '<calcPr calcId=\"145621\" />' + '</workbook>');\r\n        var WORKSHEET = kendo.template('<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\r\\n' + '<worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\" mc:Ignorable=\"x14ac\">' + '<dimension ref=\"A1\" />' + '<sheetViews>' + '<sheetView #if(index==0) {# tabSelected=\"1\" #}# workbookViewId=\"0\" #if (showGridLines === false) {# showGridLines=\"0\" #}#>' + '# if (frozenRows || frozenColumns) { #' + '<pane state=\"frozen\"' + '# if (frozenColumns) { #' + ' xSplit=\"${frozenColumns}\"' + '# } #' + '# if (frozenRows) { #' + ' ySplit=\"${frozenRows}\"' + '# } #' + ' topLeftCell=\"${String.fromCharCode(65 + (frozenColumns || 0))}${(frozenRows || 0)+1}\"' + '/>' + '# } #' + '</sheetView>' + '</sheetViews>' + '<sheetFormatPr x14ac:dyDescent=\"0.25\" defaultRowHeight=\"#= defaults.rowHeight ? defaults.rowHeight * 0.75 : 15 #\" ' + '# if (defaults.columnWidth) { # defaultColWidth=\"#= kendo.ooxml.toWidth(defaults.columnWidth) #\" # } #' + ' />' + '# if (columns && columns.length > 0) { #' + '<cols>' + '# for (var ci = 0; ci < columns.length; ci++) { #' + '# var column = columns[ci]; #' + '# var columnIndex = typeof column.index === \"number\" ? column.index + 1 : (ci + 1); #' + '# if (column.width === 0) { #' + '<col min=\"${columnIndex}\" max=\"${columnIndex}\" hidden=\"1\" customWidth=\"1\" />' + '# } else if (column.width) { #' + '<col min=\"${columnIndex}\" max=\"${columnIndex}\" customWidth=\"1\"' + '# if (column.autoWidth) { #' + ' width=\"${((column.width*7+5)/7*256)/256}\" bestFit=\"1\"' + '# } else { #' + ' width=\"#= kendo.ooxml.toWidth(column.width) #\" ' + '# } #' + '/>' + '# } #' + '# } #' + '</cols>' + '# } #' + '<sheetData>' + '# for (var ri = 0; ri < data.length; ri++) { #' + '# var row = data[ri]; #' + '# var rowIndex = typeof row.index === \"number\" ? row.index + 1 : (ri + 1); #' + '<row r=\"${rowIndex}\" x14ac:dyDescent=\"0.25\" ' + '# if (row.height) { # ht=\"#= kendo.ooxml.toHeight(row.height) #\" customHeight=\"1\" # } #' + ' >' + '# for (var ci = 0; ci < row.data.length; ci++) { #' + '# var cell = row.data[ci];#' + '<c r=\"#=cell.ref#\"# if (cell.style) { # s=\"#=cell.style#\" # } ## if (cell.type) { # t=\"#=cell.type#\"# } #>' + '# if (cell.formula != null) { #' + '<f>${cell.formula}</f>' + '# } #' + '# if (cell.value != null) { #' + '<v>${cell.value}</v>' + '# } #' + '</c>' + '# } #' + '</row>' + '# } #' + '</sheetData>' + '# if (hyperlinks.length) { #' + '<hyperlinks>' + '# for (var hi = 0; hi < hyperlinks.length; hi++) { #' + '<hyperlink ref=\"${hyperlinks[hi].ref}\" r:id=\"rId${hi}\"/>' + '# } #' + '</hyperlinks>' + '# } #' + '# if (filter) { #' + '<autoFilter ref=\"${filter.from}:${filter.to}\"/>' + '# } #' + '# if (mergeCells.length) { #' + '<mergeCells count=\"${mergeCells.length}\">' + '# for (var ci = 0; ci < mergeCells.length; ci++) { #' + '<mergeCell ref=\"${mergeCells[ci]}\"/>' + '# } #' + '</mergeCells>' + '# } #' + '<pageMargins left=\"0.7\" right=\"0.7\" top=\"0.75\" bottom=\"0.75\" header=\"0.3\" footer=\"0.3\" />' + '</worksheet>');\r\n        var WORKBOOK_RELS = kendo.template('<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\r\\n' + '<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">' + '# for (var idx = 1; idx <= count; idx++) { #' + '<Relationship Id=\"rId${idx}\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet\" Target=\"worksheets/sheet${idx}.xml\" />' + '# } #' + '<Relationship Id=\"rId${count+1}\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles\" Target=\"styles.xml\" />' + '<Relationship Id=\"rId${count+2}\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings\" Target=\"sharedStrings.xml\" />' + '</Relationships>');\r\n        var WORKSHEET_RELS = kendo.template('<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\r\\n' + '<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">' + '# for (var i = 0; i < hyperlinks.length; i++) { #' + '<Relationship Id=\"rId${i}\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink\" Target=\"${hyperlinks[i].target}\" TargetMode=\"External\" />' + '# } #' + '</Relationships>');\r\n        var SHARED_STRINGS = kendo.template('<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\\r\\n' + '<sst xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" count=\"${count}\" uniqueCount=\"${uniqueCount}\">' + '# for (var index in indexes) { #' + '<si><t>${index.substring(1)}</t></si>' + '# } #' + '</sst>');\r\n        var STYLES = kendo.template('<?xml version=\"1.0\" encoding=\"UTF-8\"?>' + '<styleSheet' + ' xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\"' + ' xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\"' + ' mc:Ignorable=\"x14ac\"' + ' xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\">' + '<numFmts count=\"${formats.length}\">' + '# for (var fi = 0; fi < formats.length; fi++) { #' + '# var format = formats[fi]; #' + '<numFmt formatCode=\"${format.format}\" numFmtId=\"${165+fi}\" />' + '# } #' + '</numFmts>' + '<fonts count=\"${fonts.length+1}\" x14ac:knownFonts=\"1\">' + '<font>' + '<sz val=\"11\" />' + '<color theme=\"1\" />' + '<name val=\"Calibri\" />' + '<family val=\"2\" />' + '<scheme val=\"minor\" />' + '</font>' + '# for (var fi = 0; fi < fonts.length; fi++) { #' + '# var font = fonts[fi]; #' + '<font>' + '# if (font.fontSize) { #' + '<sz val=\"${font.fontSize}\" />' + '# } else { #' + '<sz val=\"11\" />' + '# } #' + '# if (font.bold) { #' + '<b/>' + '# } #' + '# if (font.italic) { #' + '<i/>' + '# } #' + '# if (font.underline) { #' + '<u/>' + '# } #' + '# if (font.color) { #' + '<color rgb=\"${font.color}\" />' + '# } else { #' + '<color theme=\"1\" />' + '# } #' + '# if (font.fontFamily) { #' + '<name val=\"${font.fontFamily}\" />' + '<family val=\"2\" />' + '# } else { #' + '<name val=\"Calibri\" />' + '<family val=\"2\" />' + '<scheme val=\"minor\" />' + '# } #' + '</font>' + '# } #' + '</fonts>' + '<fills count=\"${fills.length+2}\">' + '<fill><patternFill patternType=\"none\"/></fill>' + '<fill><patternFill patternType=\"gray125\"/></fill>' + '# for (var fi = 0; fi < fills.length; fi++) { #' + '# var fill = fills[fi]; #' + '# if (fill.background) { #' + '<fill>' + '<patternFill patternType=\"solid\">' + '<fgColor rgb=\"${fill.background}\"/>' + '</patternFill>' + '</fill>' + '# } #' + '# } #' + '</fills>' + '<borders count=\"${borders.length+1}\">' + '<border><left/><right/><top/><bottom/><diagonal/></border>' + '# for (var bi = 0; bi < borders.length; bi++) { #' + '#= kendo.ooxml.borderTemplate(borders[bi]) #' + '# } #' + '</borders>' + '<cellStyleXfs count=\"1\">' + '<xf borderId=\"0\" fillId=\"0\" fontId=\"0\" />' + '</cellStyleXfs>' + '<cellXfs count=\"${styles.length+1}\">' + '<xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\" xfId=\"0\"/>' + '# for (var si = 0; si < styles.length; si++) { #' + '# var style = styles[si]; #' + '<xf xfId=\"0\"' + '# if (style.fontId) { #' + ' fontId=\"${style.fontId}\" applyFont=\"1\"' + '# } #' + '# if (style.fillId) { #' + ' fillId=\"${style.fillId}\" applyFill=\"1\"' + '# } #' + '# if (style.numFmtId) { #' + ' numFmtId=\"${style.numFmtId}\" applyNumberFormat=\"1\"' + '# } #' + '# if (style.textAlign || style.verticalAlign || style.wrap) { #' + ' applyAlignment=\"1\"' + '# } #' + '# if (style.borderId) { #' + ' borderId=\"${style.borderId}\" applyBorder=\"1\"' + '# } #' + '>' + '# if (style.textAlign || style.verticalAlign || style.wrap) { #' + '<alignment' + '# if (style.textAlign) { #' + ' horizontal=\"${style.textAlign}\"' + '# } #' + '# if (style.verticalAlign) { #' + ' vertical=\"${style.verticalAlign}\"' + '# } #' + '# if (style.wrap) { #' + ' wrapText=\"1\"' + '# } #' + '/>' + '# } #' + '</xf>' + '# } #' + '</cellXfs>' + '<cellStyles count=\"1\">' + '<cellStyle name=\"Normal\" xfId=\"0\" builtinId=\"0\"/>' + '</cellStyles>' + '<dxfs count=\"0\" />' + '<tableStyles count=\"0\" defaultTableStyle=\"TableStyleMedium2\" defaultPivotStyle=\"PivotStyleMedium9\" />' + '</styleSheet>');\r\n        function numChar(colIndex) {\r\n            var letter = Math.floor(colIndex / 26) - 1;\r\n            return (letter >= 0 ? numChar(letter) : '') + String.fromCharCode(65 + colIndex % 26);\r\n        }\r\n        function ref(rowIndex, colIndex) {\r\n            return numChar(colIndex) + (rowIndex + 1);\r\n        }\r\n        function $ref(rowIndex, colIndex) {\r\n            return numChar(colIndex) + '$' + (rowIndex + 1);\r\n        }\r\n        function filterRowIndex(options) {\r\n            var frozenRows = options.frozenRows || (options.freezePane || {}).rowSplit || 1;\r\n            return frozenRows - 1;\r\n        }\r\n        function toWidth(px) {\r\n            return (px / 7 * 100 + 0.5) / 100;\r\n        }\r\n        function toHeight(px) {\r\n            return px * 0.75;\r\n        }\r\n        var DATE_EPOCH = new Date(1900, 0, 0);\r\n        var Worksheet = kendo.Class.extend({\r\n            init: function (options, sharedStrings, styles, borders) {\r\n                this.options = options;\r\n                this._strings = sharedStrings;\r\n                this._styles = styles;\r\n                this._borders = borders;\r\n            },\r\n            relsToXML: function () {\r\n                var hyperlinks = this.options.hyperlinks || [];\r\n                if (!hyperlinks.length) {\r\n                    return '';\r\n                }\r\n                return WORKSHEET_RELS({ hyperlinks: hyperlinks });\r\n            },\r\n            toXML: function (index) {\r\n                var mergeCells = this.options.mergedCells || [];\r\n                var rows = this.options.rows || [];\r\n                var data = inflate(rows, mergeCells);\r\n                this._readCells(data);\r\n                var filter = this.options.filter;\r\n                if (filter && typeof filter.from === 'number' && typeof filter.to === 'number') {\r\n                    filter = {\r\n                        from: ref(filterRowIndex(this.options), filter.from),\r\n                        to: ref(filterRowIndex(this.options), filter.to)\r\n                    };\r\n                }\r\n                var freezePane = this.options.freezePane || {};\r\n                return WORKSHEET({\r\n                    frozenColumns: this.options.frozenColumns || freezePane.colSplit,\r\n                    frozenRows: this.options.frozenRows || freezePane.rowSplit,\r\n                    columns: this.options.columns,\r\n                    defaults: this.options.defaults || {},\r\n                    data: data,\r\n                    index: index,\r\n                    mergeCells: mergeCells,\r\n                    filter: filter,\r\n                    showGridLines: this.options.showGridLines,\r\n                    hyperlinks: this.options.hyperlinks || []\r\n                });\r\n            },\r\n            _lookupString: function (value) {\r\n                var key = '$' + value;\r\n                var index = this._strings.indexes[key];\r\n                if (index !== undefined) {\r\n                    value = index;\r\n                } else {\r\n                    value = this._strings.indexes[key] = this._strings.uniqueCount;\r\n                    this._strings.uniqueCount++;\r\n                }\r\n                this._strings.count++;\r\n                return value;\r\n            },\r\n            _lookupStyle: function (style) {\r\n                var json = kendo.stringify(style);\r\n                if (json == '{}') {\r\n                    return 0;\r\n                }\r\n                var index = $.inArray(json, this._styles);\r\n                if (index < 0) {\r\n                    index = this._styles.push(json) - 1;\r\n                }\r\n                return index + 1;\r\n            },\r\n            _lookupBorder: function (border) {\r\n                var json = kendo.stringify(border);\r\n                if (json == '{}') {\r\n                    return;\r\n                }\r\n                var index = $.inArray(json, this._borders);\r\n                if (index < 0) {\r\n                    index = this._borders.push(json) - 1;\r\n                }\r\n                return index + 1;\r\n            },\r\n            _readCells: function (rowData) {\r\n                for (var i = 0; i < rowData.length; i++) {\r\n                    var row = rowData[i];\r\n                    var cells = row.cells;\r\n                    row.data = [];\r\n                    for (var j = 0; j < cells.length; j++) {\r\n                        var cellData = this._cell(cells[j], row.index, j);\r\n                        if (cellData) {\r\n                            row.data.push(cellData);\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            _cell: function (data, rowIndex, cellIndex) {\r\n                if (!data || data === EMPTY_CELL) {\r\n                    return null;\r\n                }\r\n                var value = data.value;\r\n                var border = {};\r\n                if (data.borderLeft) {\r\n                    border.left = data.borderLeft;\r\n                }\r\n                if (data.borderRight) {\r\n                    border.right = data.borderRight;\r\n                }\r\n                if (data.borderTop) {\r\n                    border.top = data.borderTop;\r\n                }\r\n                if (data.borderBottom) {\r\n                    border.bottom = data.borderBottom;\r\n                }\r\n                border = this._lookupBorder(border);\r\n                var style = {\r\n                    bold: data.bold,\r\n                    color: data.color,\r\n                    background: data.background,\r\n                    italic: data.italic,\r\n                    underline: data.underline,\r\n                    fontFamily: data.fontFamily || data.fontName,\r\n                    fontSize: data.fontSize,\r\n                    format: data.format,\r\n                    textAlign: data.textAlign || data.hAlign,\r\n                    verticalAlign: data.verticalAlign || data.vAlign,\r\n                    wrap: data.wrap,\r\n                    borderId: border\r\n                };\r\n                var columns = this.options.columns || [];\r\n                var column = columns[cellIndex];\r\n                var type = typeof value;\r\n                if (column && column.autoWidth) {\r\n                    var displayValue = value;\r\n                    if (type === 'number') {\r\n                        displayValue = kendo.toString(value, data.format);\r\n                    }\r\n                    column.width = Math.max(column.width || 0, (displayValue + '').length);\r\n                }\r\n                if (type === 'string') {\r\n                    value = this._lookupString(value);\r\n                    type = 's';\r\n                } else if (type === 'number') {\r\n                    type = 'n';\r\n                } else if (type === 'boolean') {\r\n                    type = 'b';\r\n                    value = +value;\r\n                } else if (value && value.getTime) {\r\n                    type = null;\r\n                    var offset = (value.getTimezoneOffset() - DATE_EPOCH.getTimezoneOffset()) * kendo.date.MS_PER_MINUTE;\r\n                    value = (value - DATE_EPOCH - offset) / kendo.date.MS_PER_DAY + 1;\r\n                    if (!style.format) {\r\n                        style.format = 'mm-dd-yy';\r\n                    }\r\n                } else {\r\n                    type = null;\r\n                    value = null;\r\n                }\r\n                style = this._lookupStyle(style);\r\n                return {\r\n                    value: value,\r\n                    formula: data.formula,\r\n                    type: type,\r\n                    style: style,\r\n                    ref: ref(rowIndex, cellIndex)\r\n                };\r\n            }\r\n        });\r\n        var defaultFormats = {\r\n            'General': 0,\r\n            '0': 1,\r\n            '0.00': 2,\r\n            '#,##0': 3,\r\n            '#,##0.00': 4,\r\n            '0%': 9,\r\n            '0.00%': 10,\r\n            '0.00E+00': 11,\r\n            '# ?/?': 12,\r\n            '# ??/??': 13,\r\n            'mm-dd-yy': 14,\r\n            'd-mmm-yy': 15,\r\n            'd-mmm': 16,\r\n            'mmm-yy': 17,\r\n            'h:mm AM/PM': 18,\r\n            'h:mm:ss AM/PM': 19,\r\n            'h:mm': 20,\r\n            'h:mm:ss': 21,\r\n            'm/d/yy h:mm': 22,\r\n            '#,##0 ;(#,##0)': 37,\r\n            '#,##0 ;[Red](#,##0)': 38,\r\n            '#,##0.00;(#,##0.00)': 39,\r\n            '#,##0.00;[Red](#,##0.00)': 40,\r\n            'mm:ss': 45,\r\n            '[h]:mm:ss': 46,\r\n            'mmss.0': 47,\r\n            '##0.0E+0': 48,\r\n            '@': 49,\r\n            '[$-404]e/m/d': 27,\r\n            'm/d/yy': 30,\r\n            't0': 59,\r\n            't0.00': 60,\r\n            't#,##0': 61,\r\n            't#,##0.00': 62,\r\n            't0%': 67,\r\n            't0.00%': 68,\r\n            't# ?/?': 69,\r\n            't# ??/??': 70\r\n        };\r\n        function convertColor(color) {\r\n            if (color.length < 6) {\r\n                color = color.replace(/(\\w)/g, function ($0, $1) {\r\n                    return $1 + $1;\r\n                });\r\n            }\r\n            color = color.substring(1).toUpperCase();\r\n            if (color.length < 8) {\r\n                color = 'FF' + color;\r\n            }\r\n            return color;\r\n        }\r\n        var Workbook = kendo.Class.extend({\r\n            init: function (options) {\r\n                this.options = options || {};\r\n                this._strings = {\r\n                    indexes: {},\r\n                    count: 0,\r\n                    uniqueCount: 0\r\n                };\r\n                this._styles = [];\r\n                this._borders = [];\r\n                this._sheets = $.map(this.options.sheets || [], $.proxy(function (options) {\r\n                    options.defaults = this.options;\r\n                    return new Worksheet(options, this._strings, this._styles, this._borders);\r\n                }, this));\r\n            },\r\n            toDataURL: function () {\r\n                if (typeof JSZip === 'undefined') {\r\n                    throw new Error('JSZip not found. Check http://docs.telerik.com/kendo-ui/framework/excel/introduction#requirements for more details.');\r\n                }\r\n                var zip = new JSZip();\r\n                var docProps = zip.folder('docProps');\r\n                docProps.file('core.xml', CORE({\r\n                    creator: this.options.creator || 'Kendo UI',\r\n                    lastModifiedBy: this.options.creator || 'Kendo UI',\r\n                    created: this.options.date || new Date().toJSON(),\r\n                    modified: this.options.date || new Date().toJSON()\r\n                }));\r\n                var sheetCount = this._sheets.length;\r\n                docProps.file('app.xml', APP({ sheets: this._sheets }));\r\n                var rels = zip.folder('_rels');\r\n                rels.file('.rels', RELS);\r\n                var xl = zip.folder('xl');\r\n                var xlRels = xl.folder('_rels');\r\n                xlRels.file('workbook.xml.rels', WORKBOOK_RELS({ count: sheetCount }));\r\n                xl.file('workbook.xml', WORKBOOK({\r\n                    sheets: this._sheets,\r\n                    definedNames: $.map(this._sheets, function (sheet, index) {\r\n                        var options = sheet.options;\r\n                        var filter = options.filter;\r\n                        if (filter && typeof filter.from !== 'undefined' && typeof filter.to !== 'undefined') {\r\n                            return {\r\n                                localSheetId: index,\r\n                                name: options.name || options.title || 'Sheet' + (index + 1),\r\n                                from: $ref(filterRowIndex(options), filter.from),\r\n                                to: $ref(filterRowIndex(options), filter.to)\r\n                            };\r\n                        }\r\n                    })\r\n                }));\r\n                var worksheets = xl.folder('worksheets');\r\n                var sheetRels = worksheets.folder('_rels');\r\n                for (var idx = 0; idx < sheetCount; idx++) {\r\n                    var sheet = this._sheets[idx];\r\n                    var sheetName = kendo.format('sheet{0}.xml', idx + 1);\r\n                    var relsXml = sheet.relsToXML();\r\n                    if (relsXml) {\r\n                        sheetRels.file(sheetName + '.rels', relsXml);\r\n                    }\r\n                    worksheets.file(sheetName, sheet.toXML(idx));\r\n                }\r\n                var borders = $.map(this._borders, $.parseJSON);\r\n                var styles = $.map(this._styles, $.parseJSON);\r\n                var hasFont = function (style) {\r\n                    return style.underline || style.bold || style.italic || style.color || style.fontFamily || style.fontSize;\r\n                };\r\n                var fonts = $.map(styles, function (style) {\r\n                    if (style.color) {\r\n                        style.color = convertColor(style.color);\r\n                    }\r\n                    if (hasFont(style)) {\r\n                        return style;\r\n                    }\r\n                });\r\n                var formats = $.map(styles, function (style) {\r\n                    if (style.format && defaultFormats[style.format] === undefined) {\r\n                        return style;\r\n                    }\r\n                });\r\n                var fills = $.map(styles, function (style) {\r\n                    if (style.background) {\r\n                        style.background = convertColor(style.background);\r\n                        return style;\r\n                    }\r\n                });\r\n                xl.file('styles.xml', STYLES({\r\n                    fonts: fonts,\r\n                    fills: fills,\r\n                    formats: formats,\r\n                    borders: borders,\r\n                    styles: $.map(styles, function (style) {\r\n                        var result = {};\r\n                        if (hasFont(style)) {\r\n                            result.fontId = $.inArray(style, fonts) + 1;\r\n                        }\r\n                        if (style.background) {\r\n                            result.fillId = $.inArray(style, fills) + 2;\r\n                        }\r\n                        result.textAlign = style.textAlign;\r\n                        result.verticalAlign = style.verticalAlign;\r\n                        result.wrap = style.wrap;\r\n                        result.borderId = style.borderId;\r\n                        if (style.format) {\r\n                            if (defaultFormats[style.format] !== undefined) {\r\n                                result.numFmtId = defaultFormats[style.format];\r\n                            } else {\r\n                                result.numFmtId = 165 + $.inArray(style, formats);\r\n                            }\r\n                        }\r\n                        return result;\r\n                    })\r\n                }));\r\n                xl.file('sharedStrings.xml', SHARED_STRINGS(this._strings));\r\n                zip.file('[Content_Types].xml', CONTENT_TYPES({ count: sheetCount }));\r\n                return 'data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,' + zip.generate({ compression: 'DEFLATE' });\r\n            }\r\n        });\r\n        function borderStyle(width) {\r\n            var alias = 'thin';\r\n            if (width === 2) {\r\n                alias = 'medium';\r\n            } else if (width === 3) {\r\n                alias = 'thick';\r\n            }\r\n            return alias;\r\n        }\r\n        function borderSideTemplate(name, style) {\r\n            var result = '';\r\n            if (style && style.size) {\r\n                result += '<' + name + ' style=\"' + borderStyle(style.size) + '\">';\r\n                if (style.color) {\r\n                    result += '<color rgb=\"' + convertColor(style.color) + '\"/>';\r\n                }\r\n                result += '</' + name + '>';\r\n            }\r\n            return result;\r\n        }\r\n        function borderTemplate(border) {\r\n            return '<border>' + borderSideTemplate('left', border.left) + borderSideTemplate('right', border.right) + borderSideTemplate('top', border.top) + borderSideTemplate('bottom', border.bottom) + '</border>';\r\n        }\r\n        var SPAN_CELL = {};\r\n        var EMPTY_CELL = {};\r\n        function inflate(rows, mergedCells) {\r\n            var rowData = [];\r\n            var rowsByIndex = [];\r\n            indexRows(rows, function (row, index) {\r\n                var data = {\r\n                    _source: row,\r\n                    index: index,\r\n                    height: row.height,\r\n                    cells: []\r\n                };\r\n                rowData.push(data);\r\n                rowsByIndex[index] = data;\r\n            });\r\n            var sorted = sortByIndex(rowData).slice(0);\r\n            var ctx = {\r\n                rowData: rowData,\r\n                rowsByIndex: rowsByIndex,\r\n                mergedCells: mergedCells\r\n            };\r\n            for (var i = 0; i < sorted.length; i++) {\r\n                fillCells(sorted[i], ctx);\r\n                delete sorted[i]._source;\r\n            }\r\n            return sortByIndex(rowData);\r\n        }\r\n        function indexRows(rows, callback) {\r\n            for (var i = 0; i < rows.length; i++) {\r\n                var row = rows[i];\r\n                if (!row) {\r\n                    continue;\r\n                }\r\n                var index = row.index;\r\n                if (typeof index !== 'number') {\r\n                    index = i;\r\n                }\r\n                callback(row, index);\r\n            }\r\n        }\r\n        function sortByIndex(items) {\r\n            return items.sort(function (a, b) {\r\n                return a.index - b.index;\r\n            });\r\n        }\r\n        function fillCells(data, ctx) {\r\n            var row = data._source;\r\n            var rowIndex = data.index;\r\n            var cells = row.cells;\r\n            var cellData = data.cells;\r\n            for (var i = 0; i < cells.length; i++) {\r\n                var cell = cells[i] || EMPTY_CELL;\r\n                var rowSpan = cell.rowSpan || 1;\r\n                var colSpan = cell.colSpan || 1;\r\n                var cellIndex = insertCell(cellData, cell);\r\n                spanCell(cellData, cellIndex, colSpan);\r\n                if (rowSpan > 1 || colSpan > 1) {\r\n                    ctx.mergedCells.push(ref(rowIndex, cellIndex) + ':' + ref(rowIndex + rowSpan - 1, cellIndex + colSpan - 1));\r\n                }\r\n                if (rowSpan > 1) {\r\n                    for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\r\n                        var nextRow = ctx.rowsByIndex[ri];\r\n                        if (!nextRow) {\r\n                            nextRow = ctx.rowsByIndex[ri] = {\r\n                                index: ri,\r\n                                cells: []\r\n                            };\r\n                            ctx.rowData.push(nextRow);\r\n                        }\r\n                        spanCell(nextRow.cells, cellIndex - 1, colSpan + 1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        function insertCell(data, cell) {\r\n            var index;\r\n            if (typeof cell.index === 'number') {\r\n                index = cell.index;\r\n                insertCellAt(data, cell, cell.index);\r\n            } else {\r\n                index = appendCell(data, cell);\r\n            }\r\n            return index;\r\n        }\r\n        function insertCellAt(data, cell, index) {\r\n            data[index] = cell;\r\n        }\r\n        function appendCell(data, cell) {\r\n            var index = data.length;\r\n            for (var i = 0; i < data.length + 1; i++) {\r\n                if (!data[i]) {\r\n                    data[i] = cell;\r\n                    index = i;\r\n                    break;\r\n                }\r\n            }\r\n            return index;\r\n        }\r\n        function spanCell(cellData, startIndex, colSpan) {\r\n            for (var i = 1; i < colSpan; i++) {\r\n                insertCellAt(cellData, SPAN_CELL, startIndex + i);\r\n            }\r\n        }\r\n        kendo.ooxml = {\r\n            Workbook: Workbook,\r\n            Worksheet: Worksheet,\r\n            toWidth: toWidth,\r\n            toHeight: toHeight,\r\n            borderTemplate: borderTemplate\r\n        };\r\n    }(kendo.jQuery, kendo));\r\n    return kendo;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\n/** \r\n * Kendo UI v2016.2.714 (http://www.telerik.com/kendo-ui)                                                                                                                                               \r\n * Copyright 2016 Telerik AD. All rights reserved.                                                                                                                                                      \r\n *                                                                                                                                                                                                      \r\n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \r\n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \r\n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n\r\n*/\r\n(function (f, define) {\r\n    define('kendo.excel', [\r\n        'kendo.core',\r\n        'kendo.data',\r\n        'kendo.ooxml'\r\n    ], f);\r\n}(function () {\r\n    var __meta__ = {\r\n        id: 'excel',\r\n        name: 'Excel export',\r\n        category: 'framework',\r\n        advanced: true,\r\n        mixin: true,\r\n        depends: [\r\n            'data',\r\n            'ooxml'\r\n        ]\r\n    };\r\n    (function ($, kendo) {\r\n        kendo.ExcelExporter = kendo.Class.extend({\r\n            init: function (options) {\r\n                options.columns = this._trimColumns(options.columns || []);\r\n                this.allColumns = $.map(this._leafColumns(options.columns || []), this._prepareColumn);\r\n                this.columns = $.grep(this.allColumns, function (column) {\r\n                    return !column.hidden;\r\n                });\r\n                this.options = options;\r\n                var dataSource = options.dataSource;\r\n                if (dataSource instanceof kendo.data.DataSource) {\r\n                    this.dataSource = new dataSource.constructor($.extend({}, dataSource.options, {\r\n                        page: options.allPages ? 0 : dataSource.page(),\r\n                        filter: dataSource.filter(),\r\n                        pageSize: options.allPages ? dataSource.total() : dataSource.pageSize(),\r\n                        sort: dataSource.sort(),\r\n                        group: dataSource.group(),\r\n                        aggregate: dataSource.aggregate()\r\n                    }));\r\n                    var data = dataSource.data();\r\n                    if (data.length > 0) {\r\n                        this.dataSource._data = data;\r\n                        var transport = this.dataSource.transport;\r\n                        if (dataSource._isServerGrouped() && transport.options && transport.options.data) {\r\n                            transport.options.data = null;\r\n                        }\r\n                    }\r\n                } else {\r\n                    this.dataSource = kendo.data.DataSource.create(dataSource);\r\n                }\r\n            },\r\n            _trimColumns: function (columns) {\r\n                var that = this;\r\n                return $.grep(columns, function (column) {\r\n                    var result = !!column.field;\r\n                    if (!result && column.columns) {\r\n                        result = that._trimColumns(column.columns).length > 0;\r\n                    }\r\n                    return result;\r\n                });\r\n            },\r\n            _leafColumns: function (columns) {\r\n                var result = [];\r\n                for (var idx = 0; idx < columns.length; idx++) {\r\n                    if (!columns[idx].columns) {\r\n                        result.push(columns[idx]);\r\n                        continue;\r\n                    }\r\n                    result = result.concat(this._leafColumns(columns[idx].columns));\r\n                }\r\n                return result;\r\n            },\r\n            workbook: function () {\r\n                return $.Deferred($.proxy(function (d) {\r\n                    this.dataSource.fetch().then($.proxy(function () {\r\n                        var workbook = {\r\n                            sheets: [{\r\n                                    columns: this._columns(),\r\n                                    rows: this._rows(),\r\n                                    freezePane: this._freezePane(),\r\n                                    filter: this._filter()\r\n                                }]\r\n                        };\r\n                        d.resolve(workbook, this.dataSource.view());\r\n                    }, this));\r\n                }, this)).promise();\r\n            },\r\n            _prepareColumn: function (column) {\r\n                if (!column.field) {\r\n                    return;\r\n                }\r\n                var value = function (dataItem) {\r\n                    return dataItem.get(column.field);\r\n                };\r\n                var values = null;\r\n                if (column.values) {\r\n                    values = {};\r\n                    $.each(column.values, function () {\r\n                        values[this.value] = this.text;\r\n                    });\r\n                    value = function (dataItem) {\r\n                        return values[dataItem.get(column.field)];\r\n                    };\r\n                }\r\n                return $.extend({}, column, {\r\n                    value: value,\r\n                    values: values,\r\n                    groupHeaderTemplate: kendo.template(column.groupHeaderTemplate || '#= title #: #= value #'),\r\n                    groupFooterTemplate: column.groupFooterTemplate ? kendo.template(column.groupFooterTemplate) : null,\r\n                    footerTemplate: column.footerTemplate ? kendo.template(column.footerTemplate) : null\r\n                });\r\n            },\r\n            _filter: function () {\r\n                if (!this.options.filterable) {\r\n                    return null;\r\n                }\r\n                var depth = this._depth();\r\n                return {\r\n                    from: depth,\r\n                    to: depth + this.columns.length - 1\r\n                };\r\n            },\r\n            _dataRow: function (dataItem, level, depth) {\r\n                if (this._hierarchical()) {\r\n                    level = this.dataSource.level(dataItem) + 1;\r\n                }\r\n                var cells = [];\r\n                for (var li = 0; li < level; li++) {\r\n                    cells[li] = {\r\n                        background: '#dfdfdf',\r\n                        color: '#333'\r\n                    };\r\n                }\r\n                if (depth && dataItem.items) {\r\n                    var column = $.grep(this.allColumns, function (column) {\r\n                        return column.field == dataItem.field;\r\n                    })[0];\r\n                    var title = column && column.title ? column.title : dataItem.field;\r\n                    var template = column ? column.groupHeaderTemplate : null;\r\n                    var value = title + ': ' + dataItem.value;\r\n                    var group = $.extend({\r\n                        title: title,\r\n                        field: dataItem.field,\r\n                        value: column && column.values ? column.values[dataItem.value] : dataItem.value,\r\n                        aggregates: dataItem.aggregates\r\n                    }, dataItem.aggregates[dataItem.field]);\r\n                    if (template) {\r\n                        value = template(group);\r\n                    }\r\n                    cells.push({\r\n                        value: value,\r\n                        background: '#dfdfdf',\r\n                        color: '#333',\r\n                        colSpan: this.columns.length + depth - level\r\n                    });\r\n                    var rows = this._dataRows(dataItem.items, level + 1);\r\n                    rows.unshift({\r\n                        type: 'group-header',\r\n                        cells: cells\r\n                    });\r\n                    return rows.concat(this._footer(dataItem));\r\n                } else {\r\n                    var dataCells = [];\r\n                    for (var ci = 0; ci < this.columns.length; ci++) {\r\n                        dataCells[ci] = this._cell(dataItem, this.columns[ci]);\r\n                    }\r\n                    if (this._hierarchical()) {\r\n                        dataCells[0].colSpan = depth - level + 1;\r\n                    }\r\n                    return [{\r\n                            type: 'data',\r\n                            cells: cells.concat(dataCells)\r\n                        }];\r\n                }\r\n            },\r\n            _dataRows: function (dataItems, level) {\r\n                var depth = this._depth();\r\n                var rows = [];\r\n                for (var i = 0; i < dataItems.length; i++) {\r\n                    rows.push.apply(rows, this._dataRow(dataItems[i], level, depth));\r\n                }\r\n                return rows;\r\n            },\r\n            _footer: function (dataItem) {\r\n                var rows = [];\r\n                var footer = false;\r\n                var cells = $.map(this.columns, $.proxy(function (column) {\r\n                    if (column.groupFooterTemplate) {\r\n                        footer = true;\r\n                        return {\r\n                            background: '#dfdfdf',\r\n                            color: '#333',\r\n                            value: column.groupFooterTemplate($.extend({}, this.dataSource.aggregates(), dataItem.aggregates, dataItem.aggregates[column.field]))\r\n                        };\r\n                    } else {\r\n                        return {\r\n                            background: '#dfdfdf',\r\n                            color: '#333'\r\n                        };\r\n                    }\r\n                }, this));\r\n                if (footer) {\r\n                    rows.push({\r\n                        type: 'group-footer',\r\n                        cells: $.map(new Array(this.dataSource.group().length), function () {\r\n                            return {\r\n                                background: '#dfdfdf',\r\n                                color: '#333'\r\n                            };\r\n                        }).concat(cells)\r\n                    });\r\n                }\r\n                return rows;\r\n            },\r\n            _isColumnVisible: function (column) {\r\n                return this._visibleColumns([column]).length > 0 && (column.field || column.columns);\r\n            },\r\n            _visibleColumns: function (columns) {\r\n                var that = this;\r\n                return $.grep(columns, function (column) {\r\n                    var result = !column.hidden;\r\n                    if (result && column.columns) {\r\n                        result = that._visibleColumns(column.columns).length > 0;\r\n                    }\r\n                    return result;\r\n                });\r\n            },\r\n            _headerRow: function (row, groups) {\r\n                var headers = $.map(row.cells, function (cell) {\r\n                    return {\r\n                        background: '#7a7a7a',\r\n                        color: '#fff',\r\n                        value: cell.title,\r\n                        colSpan: cell.colSpan > 1 ? cell.colSpan : 1,\r\n                        rowSpan: row.rowSpan > 1 && !cell.colSpan ? row.rowSpan : 1\r\n                    };\r\n                });\r\n                if (this._hierarchical()) {\r\n                    headers[0].colSpan = this._depth() + 1;\r\n                }\r\n                return {\r\n                    type: 'header',\r\n                    cells: $.map(new Array(groups.length), function () {\r\n                        return {\r\n                            background: '#7a7a7a',\r\n                            color: '#fff'\r\n                        };\r\n                    }).concat(headers)\r\n                };\r\n            },\r\n            _prependHeaderRows: function (rows) {\r\n                var groups = this.dataSource.group();\r\n                var headerRows = [{\r\n                        rowSpan: 1,\r\n                        cells: [],\r\n                        index: 0\r\n                    }];\r\n                this._prepareHeaderRows(headerRows, this.options.columns);\r\n                for (var idx = headerRows.length - 1; idx >= 0; idx--) {\r\n                    rows.unshift(this._headerRow(headerRows[idx], groups));\r\n                }\r\n            },\r\n            _prepareHeaderRows: function (rows, columns, parentCell, parentRow) {\r\n                var row = parentRow || rows[rows.length - 1];\r\n                var childRow = rows[row.index + 1];\r\n                var totalColSpan = 0;\r\n                var column;\r\n                var cell;\r\n                for (var idx = 0; idx < columns.length; idx++) {\r\n                    column = columns[idx];\r\n                    if (this._isColumnVisible(column)) {\r\n                        cell = {\r\n                            title: column.title || column.field,\r\n                            colSpan: 0\r\n                        };\r\n                        row.cells.push(cell);\r\n                        if (column.columns && column.columns.length) {\r\n                            if (!childRow) {\r\n                                childRow = {\r\n                                    rowSpan: 0,\r\n                                    cells: [],\r\n                                    index: rows.length\r\n                                };\r\n                                rows.push(childRow);\r\n                            }\r\n                            cell.colSpan = this._trimColumns(this._visibleColumns(column.columns)).length;\r\n                            this._prepareHeaderRows(rows, column.columns, cell, childRow);\r\n                            totalColSpan += cell.colSpan - 1;\r\n                            row.rowSpan = rows.length - row.index;\r\n                        }\r\n                    }\r\n                }\r\n                if (parentCell) {\r\n                    parentCell.colSpan += totalColSpan;\r\n                }\r\n            },\r\n            _rows: function () {\r\n                var groups = this.dataSource.group();\r\n                var rows = this._dataRows(this.dataSource.view(), 0);\r\n                if (this.columns.length) {\r\n                    this._prependHeaderRows(rows);\r\n                    var footer = false;\r\n                    var cells = $.map(this.columns, $.proxy(function (column) {\r\n                        if (column.footerTemplate) {\r\n                            footer = true;\r\n                            var aggregates = this.dataSource.aggregates();\r\n                            return {\r\n                                background: '#dfdfdf',\r\n                                color: '#333',\r\n                                value: column.footerTemplate($.extend({}, aggregates, aggregates[column.field]))\r\n                            };\r\n                        } else {\r\n                            return {\r\n                                background: '#dfdfdf',\r\n                                color: '#333'\r\n                            };\r\n                        }\r\n                    }, this));\r\n                    if (footer) {\r\n                        rows.push({\r\n                            type: 'footer',\r\n                            cells: $.map(new Array(groups.length), function () {\r\n                                return {\r\n                                    background: '#dfdfdf',\r\n                                    color: '#333'\r\n                                };\r\n                            }).concat(cells)\r\n                        });\r\n                    }\r\n                }\r\n                return rows;\r\n            },\r\n            _headerDepth: function (columns) {\r\n                var result = 1;\r\n                var max = 0;\r\n                for (var idx = 0; idx < columns.length; idx++) {\r\n                    if (columns[idx].columns) {\r\n                        var temp = this._headerDepth(columns[idx].columns);\r\n                        if (temp > max) {\r\n                            max = temp;\r\n                        }\r\n                    }\r\n                }\r\n                return result + max;\r\n            },\r\n            _freezePane: function () {\r\n                var columns = this._visibleColumns(this.options.columns || []);\r\n                var colSplit = this._visibleColumns(this._trimColumns(this._leafColumns($.grep(columns, function (column) {\r\n                    return column.locked;\r\n                })))).length;\r\n                return {\r\n                    rowSplit: this._headerDepth(columns),\r\n                    colSplit: colSplit ? colSplit + this.dataSource.group().length : 0\r\n                };\r\n            },\r\n            _cell: function (dataItem, column) {\r\n                return { value: column.value(dataItem) };\r\n            },\r\n            _hierarchical: function () {\r\n                return this.options.hierarchy && this.dataSource.level;\r\n            },\r\n            _depth: function () {\r\n                var dataSource = this.dataSource;\r\n                var depth = 0;\r\n                var view, i, level;\r\n                if (this._hierarchical()) {\r\n                    view = dataSource.view();\r\n                    for (i = 0; i < view.length; i++) {\r\n                        level = dataSource.level(view[i]);\r\n                        if (level > depth) {\r\n                            depth = level;\r\n                        }\r\n                    }\r\n                    depth++;\r\n                } else {\r\n                    depth = dataSource.group().length;\r\n                }\r\n                return depth;\r\n            },\r\n            _columns: function () {\r\n                var depth = this._depth();\r\n                var columns = $.map(new Array(depth), function () {\r\n                    return { width: 20 };\r\n                });\r\n                return columns.concat($.map(this.columns, function (column) {\r\n                    return {\r\n                        width: parseInt(column.width, 10),\r\n                        autoWidth: column.width ? false : true\r\n                    };\r\n                }));\r\n            }\r\n        });\r\n        kendo.ExcelMixin = {\r\n            extend: function (proto) {\r\n                proto.events.push('excelExport');\r\n                proto.options.excel = $.extend(proto.options.excel, this.options);\r\n                proto.saveAsExcel = this.saveAsExcel;\r\n            },\r\n            options: {\r\n                proxyURL: '',\r\n                allPages: false,\r\n                filterable: false,\r\n                fileName: 'Export.xlsx'\r\n            },\r\n            saveAsExcel: function () {\r\n                var excel = this.options.excel || {};\r\n                var exporter = new kendo.ExcelExporter({\r\n                    columns: this.columns,\r\n                    dataSource: this.dataSource,\r\n                    allPages: excel.allPages,\r\n                    filterable: excel.filterable,\r\n                    hierarchy: excel.hierarchy\r\n                });\r\n                exporter.workbook().then($.proxy(function (book, data) {\r\n                    if (!this.trigger('excelExport', {\r\n                            workbook: book,\r\n                            data: data\r\n                        })) {\r\n                        var workbook = new kendo.ooxml.Workbook(book);\r\n                        kendo.saveAs({\r\n                            dataURI: workbook.toDataURL(),\r\n                            fileName: book.fileName || excel.fileName,\r\n                            proxyURL: excel.proxyURL,\r\n                            forceProxy: excel.forceProxy\r\n                        });\r\n                    }\r\n                }, this));\r\n            }\r\n        };\r\n    }(kendo.jQuery, kendo));\r\n    return kendo;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\n/** \r\n * Kendo UI v2016.2.714 (http://www.telerik.com/kendo-ui)                                                                                                                                               \r\n * Copyright 2016 Telerik AD. All rights reserved.                                                                                                                                                      \r\n *                                                                                                                                                                                                      \r\n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \r\n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \r\n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n\r\n*/\r\n(function (f, define) {\r\n    define('util/main', ['kendo.core'], f);\r\n}(function () {\r\n    (function () {\r\n        var math = Math, kendo = window.kendo, deepExtend = kendo.deepExtend;\r\n        var DEG_TO_RAD = math.PI / 180, MAX_NUM = Number.MAX_VALUE, MIN_NUM = -Number.MAX_VALUE, UNDEFINED = 'undefined';\r\n        function defined(value) {\r\n            return typeof value !== UNDEFINED;\r\n        }\r\n        function round(value, precision) {\r\n            var power = pow(precision);\r\n            return math.round(value * power) / power;\r\n        }\r\n        function pow(p) {\r\n            if (p) {\r\n                return math.pow(10, p);\r\n            } else {\r\n                return 1;\r\n            }\r\n        }\r\n        function limitValue(value, min, max) {\r\n            return math.max(math.min(value, max), min);\r\n        }\r\n        function rad(degrees) {\r\n            return degrees * DEG_TO_RAD;\r\n        }\r\n        function deg(radians) {\r\n            return radians / DEG_TO_RAD;\r\n        }\r\n        function isNumber(val) {\r\n            return typeof val === 'number' && !isNaN(val);\r\n        }\r\n        function valueOrDefault(value, defaultValue) {\r\n            return defined(value) ? value : defaultValue;\r\n        }\r\n        function sqr(value) {\r\n            return value * value;\r\n        }\r\n        function objectKey(object) {\r\n            var parts = [];\r\n            for (var key in object) {\r\n                parts.push(key + object[key]);\r\n            }\r\n            return parts.sort().join('');\r\n        }\r\n        function hashKey(str) {\r\n            var hash = 2166136261;\r\n            for (var i = 0; i < str.length; ++i) {\r\n                hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\r\n                hash ^= str.charCodeAt(i);\r\n            }\r\n            return hash >>> 0;\r\n        }\r\n        function hashObject(object) {\r\n            return hashKey(objectKey(object));\r\n        }\r\n        var now = Date.now;\r\n        if (!now) {\r\n            now = function () {\r\n                return new Date().getTime();\r\n            };\r\n        }\r\n        function arrayLimits(arr) {\r\n            var length = arr.length, i, min = MAX_NUM, max = MIN_NUM;\r\n            for (i = 0; i < length; i++) {\r\n                max = math.max(max, arr[i]);\r\n                min = math.min(min, arr[i]);\r\n            }\r\n            return {\r\n                min: min,\r\n                max: max\r\n            };\r\n        }\r\n        function arrayMin(arr) {\r\n            return arrayLimits(arr).min;\r\n        }\r\n        function arrayMax(arr) {\r\n            return arrayLimits(arr).max;\r\n        }\r\n        function sparseArrayMin(arr) {\r\n            return sparseArrayLimits(arr).min;\r\n        }\r\n        function sparseArrayMax(arr) {\r\n            return sparseArrayLimits(arr).max;\r\n        }\r\n        function sparseArrayLimits(arr) {\r\n            var min = MAX_NUM, max = MIN_NUM;\r\n            for (var i = 0, length = arr.length; i < length; i++) {\r\n                var n = arr[i];\r\n                if (n !== null && isFinite(n)) {\r\n                    min = math.min(min, n);\r\n                    max = math.max(max, n);\r\n                }\r\n            }\r\n            return {\r\n                min: min === MAX_NUM ? undefined : min,\r\n                max: max === MIN_NUM ? undefined : max\r\n            };\r\n        }\r\n        function last(array) {\r\n            if (array) {\r\n                return array[array.length - 1];\r\n            }\r\n        }\r\n        function append(first, second) {\r\n            first.push.apply(first, second);\r\n            return first;\r\n        }\r\n        function renderTemplate(text) {\r\n            return kendo.template(text, {\r\n                useWithBlock: false,\r\n                paramName: 'd'\r\n            });\r\n        }\r\n        function renderAttr(name, value) {\r\n            return defined(value) && value !== null ? ' ' + name + '=\\'' + value + '\\' ' : '';\r\n        }\r\n        function renderAllAttr(attrs) {\r\n            var output = '';\r\n            for (var i = 0; i < attrs.length; i++) {\r\n                output += renderAttr(attrs[i][0], attrs[i][1]);\r\n            }\r\n            return output;\r\n        }\r\n        function renderStyle(attrs) {\r\n            var output = '';\r\n            for (var i = 0; i < attrs.length; i++) {\r\n                var value = attrs[i][1];\r\n                if (defined(value)) {\r\n                    output += attrs[i][0] + ':' + value + ';';\r\n                }\r\n            }\r\n            if (output !== '') {\r\n                return output;\r\n            }\r\n        }\r\n        function renderSize(size) {\r\n            if (typeof size !== 'string') {\r\n                size += 'px';\r\n            }\r\n            return size;\r\n        }\r\n        function renderPos(pos) {\r\n            var result = [];\r\n            if (pos) {\r\n                var parts = kendo.toHyphens(pos).split('-');\r\n                for (var i = 0; i < parts.length; i++) {\r\n                    result.push('k-pos-' + parts[i]);\r\n                }\r\n            }\r\n            return result.join(' ');\r\n        }\r\n        function isTransparent(color) {\r\n            return color === '' || color === null || color === 'none' || color === 'transparent' || !defined(color);\r\n        }\r\n        function arabicToRoman(n) {\r\n            var literals = {\r\n                1: 'i',\r\n                10: 'x',\r\n                100: 'c',\r\n                2: 'ii',\r\n                20: 'xx',\r\n                200: 'cc',\r\n                3: 'iii',\r\n                30: 'xxx',\r\n                300: 'ccc',\r\n                4: 'iv',\r\n                40: 'xl',\r\n                400: 'cd',\r\n                5: 'v',\r\n                50: 'l',\r\n                500: 'd',\r\n                6: 'vi',\r\n                60: 'lx',\r\n                600: 'dc',\r\n                7: 'vii',\r\n                70: 'lxx',\r\n                700: 'dcc',\r\n                8: 'viii',\r\n                80: 'lxxx',\r\n                800: 'dccc',\r\n                9: 'ix',\r\n                90: 'xc',\r\n                900: 'cm',\r\n                1000: 'm'\r\n            };\r\n            var values = [\r\n                1000,\r\n                900,\r\n                800,\r\n                700,\r\n                600,\r\n                500,\r\n                400,\r\n                300,\r\n                200,\r\n                100,\r\n                90,\r\n                80,\r\n                70,\r\n                60,\r\n                50,\r\n                40,\r\n                30,\r\n                20,\r\n                10,\r\n                9,\r\n                8,\r\n                7,\r\n                6,\r\n                5,\r\n                4,\r\n                3,\r\n                2,\r\n                1\r\n            ];\r\n            var roman = '';\r\n            while (n > 0) {\r\n                if (n < values[0]) {\r\n                    values.shift();\r\n                } else {\r\n                    roman += literals[values[0]];\r\n                    n -= values[0];\r\n                }\r\n            }\r\n            return roman;\r\n        }\r\n        function romanToArabic(r) {\r\n            r = r.toLowerCase();\r\n            var digits = {\r\n                i: 1,\r\n                v: 5,\r\n                x: 10,\r\n                l: 50,\r\n                c: 100,\r\n                d: 500,\r\n                m: 1000\r\n            };\r\n            var value = 0, prev = 0;\r\n            for (var i = 0; i < r.length; ++i) {\r\n                var v = digits[r.charAt(i)];\r\n                if (!v) {\r\n                    return null;\r\n                }\r\n                value += v;\r\n                if (v > prev) {\r\n                    value -= 2 * prev;\r\n                }\r\n                prev = v;\r\n            }\r\n            return value;\r\n        }\r\n        function memoize(f) {\r\n            var cache = Object.create(null);\r\n            return function () {\r\n                var id = '';\r\n                for (var i = arguments.length; --i >= 0;) {\r\n                    id += ':' + arguments[i];\r\n                }\r\n                if (id in cache) {\r\n                    return cache[id];\r\n                }\r\n                return f.apply(this, arguments);\r\n            };\r\n        }\r\n        function ucs2decode(string) {\r\n            var output = [], counter = 0, length = string.length, value, extra;\r\n            while (counter < length) {\r\n                value = string.charCodeAt(counter++);\r\n                if (value >= 55296 && value <= 56319 && counter < length) {\r\n                    extra = string.charCodeAt(counter++);\r\n                    if ((extra & 64512) == 56320) {\r\n                        output.push(((value & 1023) << 10) + (extra & 1023) + 65536);\r\n                    } else {\r\n                        output.push(value);\r\n                        counter--;\r\n                    }\r\n                } else {\r\n                    output.push(value);\r\n                }\r\n            }\r\n            return output;\r\n        }\r\n        function ucs2encode(array) {\r\n            return array.map(function (value) {\r\n                var output = '';\r\n                if (value > 65535) {\r\n                    value -= 65536;\r\n                    output += String.fromCharCode(value >>> 10 & 1023 | 55296);\r\n                    value = 56320 | value & 1023;\r\n                }\r\n                output += String.fromCharCode(value);\r\n                return output;\r\n            }).join('');\r\n        }\r\n        deepExtend(kendo, {\r\n            util: {\r\n                MAX_NUM: MAX_NUM,\r\n                MIN_NUM: MIN_NUM,\r\n                append: append,\r\n                arrayLimits: arrayLimits,\r\n                arrayMin: arrayMin,\r\n                arrayMax: arrayMax,\r\n                defined: defined,\r\n                deg: deg,\r\n                hashKey: hashKey,\r\n                hashObject: hashObject,\r\n                isNumber: isNumber,\r\n                isTransparent: isTransparent,\r\n                last: last,\r\n                limitValue: limitValue,\r\n                now: now,\r\n                objectKey: objectKey,\r\n                round: round,\r\n                rad: rad,\r\n                renderAttr: renderAttr,\r\n                renderAllAttr: renderAllAttr,\r\n                renderPos: renderPos,\r\n                renderSize: renderSize,\r\n                renderStyle: renderStyle,\r\n                renderTemplate: renderTemplate,\r\n                sparseArrayLimits: sparseArrayLimits,\r\n                sparseArrayMin: sparseArrayMin,\r\n                sparseArrayMax: sparseArrayMax,\r\n                sqr: sqr,\r\n                valueOrDefault: valueOrDefault,\r\n                romanToArabic: romanToArabic,\r\n                arabicToRoman: arabicToRoman,\r\n                memoize: memoize,\r\n                ucs2encode: ucs2encode,\r\n                ucs2decode: ucs2decode\r\n            }\r\n        });\r\n        kendo.drawing.util = kendo.util;\r\n        kendo.dataviz.util = kendo.util;\r\n    }());\r\n    return window.kendo;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('util/text-metrics', [\r\n        'kendo.core',\r\n        'util/main'\r\n    ], f);\r\n}(function () {\r\n    (function ($) {\r\n        var doc = document, kendo = window.kendo, Class = kendo.Class, util = kendo.util, defined = util.defined;\r\n        var LRUCache = Class.extend({\r\n            init: function (size) {\r\n                this._size = size;\r\n                this._length = 0;\r\n                this._map = {};\r\n            },\r\n            put: function (key, value) {\r\n                var lru = this, map = lru._map, entry = {\r\n                        key: key,\r\n                        value: value\r\n                    };\r\n                map[key] = entry;\r\n                if (!lru._head) {\r\n                    lru._head = lru._tail = entry;\r\n                } else {\r\n                    lru._tail.newer = entry;\r\n                    entry.older = lru._tail;\r\n                    lru._tail = entry;\r\n                }\r\n                if (lru._length >= lru._size) {\r\n                    map[lru._head.key] = null;\r\n                    lru._head = lru._head.newer;\r\n                    lru._head.older = null;\r\n                } else {\r\n                    lru._length++;\r\n                }\r\n            },\r\n            get: function (key) {\r\n                var lru = this, entry = lru._map[key];\r\n                if (entry) {\r\n                    if (entry === lru._head && entry !== lru._tail) {\r\n                        lru._head = entry.newer;\r\n                        lru._head.older = null;\r\n                    }\r\n                    if (entry !== lru._tail) {\r\n                        if (entry.older) {\r\n                            entry.older.newer = entry.newer;\r\n                            entry.newer.older = entry.older;\r\n                        }\r\n                        entry.older = lru._tail;\r\n                        entry.newer = null;\r\n                        lru._tail.newer = entry;\r\n                        lru._tail = entry;\r\n                    }\r\n                    return entry.value;\r\n                }\r\n            }\r\n        });\r\n        var defaultMeasureBox = $('<div style=\\'position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;' + 'padding: 0 !important; margin: 0 !important; border: 0 !important;' + 'line-height: normal !important; visibility: hidden !important; white-space: nowrap!important;\\' />')[0];\r\n        function zeroSize() {\r\n            return {\r\n                width: 0,\r\n                height: 0,\r\n                baseline: 0\r\n            };\r\n        }\r\n        var TextMetrics = Class.extend({\r\n            init: function (options) {\r\n                this._cache = new LRUCache(1000);\r\n                this._initOptions(options);\r\n            },\r\n            options: { baselineMarkerSize: 1 },\r\n            measure: function (text, style, box) {\r\n                if (!text) {\r\n                    return zeroSize();\r\n                }\r\n                var styleKey = util.objectKey(style), cacheKey = util.hashKey(text + styleKey), cachedResult = this._cache.get(cacheKey);\r\n                if (cachedResult) {\r\n                    return cachedResult;\r\n                }\r\n                var size = zeroSize();\r\n                var measureBox = box ? box : defaultMeasureBox;\r\n                var baselineMarker = this._baselineMarker().cloneNode(false);\r\n                for (var key in style) {\r\n                    var value = style[key];\r\n                    if (defined(value)) {\r\n                        measureBox.style[key] = value;\r\n                    }\r\n                }\r\n                $(measureBox).text(text);\r\n                measureBox.appendChild(baselineMarker);\r\n                doc.body.appendChild(measureBox);\r\n                if ((text + '').length) {\r\n                    size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\r\n                    size.height = measureBox.offsetHeight;\r\n                    size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\r\n                }\r\n                if (size.width > 0 && size.height > 0) {\r\n                    this._cache.put(cacheKey, size);\r\n                }\r\n                measureBox.parentNode.removeChild(measureBox);\r\n                return size;\r\n            },\r\n            _baselineMarker: function () {\r\n                return $('<div class=\\'k-baseline-marker\\' ' + 'style=\\'display: inline-block; vertical-align: baseline;' + 'width: ' + this.options.baselineMarkerSize + 'px; height: ' + this.options.baselineMarkerSize + 'px;' + 'overflow: hidden;\\' />')[0];\r\n            }\r\n        });\r\n        TextMetrics.current = new TextMetrics();\r\n        function measureText(text, style, measureBox) {\r\n            return TextMetrics.current.measure(text, style, measureBox);\r\n        }\r\n        function loadFonts(fonts, callback) {\r\n            var promises = [];\r\n            if (fonts.length > 0 && document.fonts) {\r\n                try {\r\n                    promises = fonts.map(function (font) {\r\n                        return document.fonts.load(font);\r\n                    });\r\n                } catch (e) {\r\n                    kendo.logToConsole(e);\r\n                }\r\n                Promise.all(promises).then(callback, callback);\r\n            } else {\r\n                callback();\r\n            }\r\n        }\r\n        kendo.util.TextMetrics = TextMetrics;\r\n        kendo.util.LRUCache = LRUCache;\r\n        kendo.util.loadFonts = loadFonts;\r\n        kendo.util.measureText = measureText;\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('util/base64', ['util/main'], f);\r\n}(function () {\r\n    (function () {\r\n        var kendo = window.kendo, deepExtend = kendo.deepExtend, fromCharCode = String.fromCharCode;\r\n        var KEY_STR = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\r\n        function encodeBase64(input) {\r\n            var output = '';\r\n            var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n            var i = 0;\r\n            input = encodeUTF8(input);\r\n            while (i < input.length) {\r\n                chr1 = input.charCodeAt(i++);\r\n                chr2 = input.charCodeAt(i++);\r\n                chr3 = input.charCodeAt(i++);\r\n                enc1 = chr1 >> 2;\r\n                enc2 = (chr1 & 3) << 4 | chr2 >> 4;\r\n                enc3 = (chr2 & 15) << 2 | chr3 >> 6;\r\n                enc4 = chr3 & 63;\r\n                if (isNaN(chr2)) {\r\n                    enc3 = enc4 = 64;\r\n                } else if (isNaN(chr3)) {\r\n                    enc4 = 64;\r\n                }\r\n                output = output + KEY_STR.charAt(enc1) + KEY_STR.charAt(enc2) + KEY_STR.charAt(enc3) + KEY_STR.charAt(enc4);\r\n            }\r\n            return output;\r\n        }\r\n        function encodeUTF8(input) {\r\n            var output = '';\r\n            for (var i = 0; i < input.length; i++) {\r\n                var c = input.charCodeAt(i);\r\n                if (c < 128) {\r\n                    output += fromCharCode(c);\r\n                } else if (c < 2048) {\r\n                    output += fromCharCode(192 | c >>> 6);\r\n                    output += fromCharCode(128 | c & 63);\r\n                } else if (c < 65536) {\r\n                    output += fromCharCode(224 | c >>> 12);\r\n                    output += fromCharCode(128 | c >>> 6 & 63);\r\n                    output += fromCharCode(128 | c & 63);\r\n                }\r\n            }\r\n            return output;\r\n        }\r\n        deepExtend(kendo.util, {\r\n            encodeBase64: encodeBase64,\r\n            encodeUTF8: encodeUTF8\r\n        });\r\n    }());\r\n    return window.kendo;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('mixins/observers', ['kendo.core'], f);\r\n}(function () {\r\n    (function ($) {\r\n        var math = Math, kendo = window.kendo, deepExtend = kendo.deepExtend, inArray = $.inArray;\r\n        var ObserversMixin = {\r\n            observers: function () {\r\n                this._observers = this._observers || [];\r\n                return this._observers;\r\n            },\r\n            addObserver: function (element) {\r\n                if (!this._observers) {\r\n                    this._observers = [element];\r\n                } else {\r\n                    this._observers.push(element);\r\n                }\r\n                return this;\r\n            },\r\n            removeObserver: function (element) {\r\n                var observers = this.observers();\r\n                var index = inArray(element, observers);\r\n                if (index != -1) {\r\n                    observers.splice(index, 1);\r\n                }\r\n                return this;\r\n            },\r\n            trigger: function (methodName, event) {\r\n                var observers = this._observers;\r\n                var observer;\r\n                var idx;\r\n                if (observers && !this._suspended) {\r\n                    for (idx = 0; idx < observers.length; idx++) {\r\n                        observer = observers[idx];\r\n                        if (observer[methodName]) {\r\n                            observer[methodName](event);\r\n                        }\r\n                    }\r\n                }\r\n                return this;\r\n            },\r\n            optionsChange: function (e) {\r\n                e = e || {};\r\n                e.element = this;\r\n                this.trigger('optionsChange', e);\r\n            },\r\n            geometryChange: function () {\r\n                this.trigger('geometryChange', { element: this });\r\n            },\r\n            suspend: function () {\r\n                this._suspended = (this._suspended || 0) + 1;\r\n                return this;\r\n            },\r\n            resume: function () {\r\n                this._suspended = math.max((this._suspended || 0) - 1, 0);\r\n                return this;\r\n            },\r\n            _observerField: function (field, value) {\r\n                if (this[field]) {\r\n                    this[field].removeObserver(this);\r\n                }\r\n                this[field] = value;\r\n                value.addObserver(this);\r\n            }\r\n        };\r\n        deepExtend(kendo, { mixins: { ObserversMixin: ObserversMixin } });\r\n    }(window.kendo.jQuery));\r\n    return window.kendo;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('drawing/geometry', [\r\n        'util/main',\r\n        'mixins/observers'\r\n    ], f);\r\n}(function () {\r\n    (function () {\r\n        var math = Math, pow = math.pow, kendo = window.kendo, Class = kendo.Class, deepExtend = kendo.deepExtend, ObserversMixin = kendo.mixins.ObserversMixin, util = kendo.util, defined = util.defined, rad = util.rad, deg = util.deg, round = util.round;\r\n        var PI_DIV_2 = math.PI / 2, MIN_NUM = util.MIN_NUM, MAX_NUM = util.MAX_NUM, PRECISION = 10;\r\n        var Point = Class.extend({\r\n            init: function (x, y) {\r\n                this.x = x || 0;\r\n                this.y = y || 0;\r\n            },\r\n            equals: function (other) {\r\n                return other && other.x === this.x && other.y === this.y;\r\n            },\r\n            clone: function () {\r\n                return new Point(this.x, this.y);\r\n            },\r\n            rotate: function (angle, origin) {\r\n                return this.transform(transform().rotate(angle, origin));\r\n            },\r\n            translate: function (x, y) {\r\n                this.x += x;\r\n                this.y += y;\r\n                this.geometryChange();\r\n                return this;\r\n            },\r\n            translateWith: function (point) {\r\n                return this.translate(point.x, point.y);\r\n            },\r\n            move: function (x, y) {\r\n                this.x = this.y = 0;\r\n                return this.translate(x, y);\r\n            },\r\n            scale: function (scaleX, scaleY) {\r\n                if (!defined(scaleY)) {\r\n                    scaleY = scaleX;\r\n                }\r\n                this.x *= scaleX;\r\n                this.y *= scaleY;\r\n                this.geometryChange();\r\n                return this;\r\n            },\r\n            scaleCopy: function (scaleX, scaleY) {\r\n                return this.clone().scale(scaleX, scaleY);\r\n            },\r\n            transform: function (transformation) {\r\n                var mx = toMatrix(transformation), x = this.x, y = this.y;\r\n                this.x = mx.a * x + mx.c * y + mx.e;\r\n                this.y = mx.b * x + mx.d * y + mx.f;\r\n                this.geometryChange();\r\n                return this;\r\n            },\r\n            transformCopy: function (transformation) {\r\n                var point = this.clone();\r\n                if (transformation) {\r\n                    point.transform(transformation);\r\n                }\r\n                return point;\r\n            },\r\n            distanceTo: function (point) {\r\n                var dx = this.x - point.x;\r\n                var dy = this.y - point.y;\r\n                return math.sqrt(dx * dx + dy * dy);\r\n            },\r\n            round: function (digits) {\r\n                this.x = round(this.x, digits);\r\n                this.y = round(this.y, digits);\r\n                this.geometryChange();\r\n                return this;\r\n            },\r\n            toArray: function (digits) {\r\n                var doRound = defined(digits);\r\n                var x = doRound ? round(this.x, digits) : this.x;\r\n                var y = doRound ? round(this.y, digits) : this.y;\r\n                return [\r\n                    x,\r\n                    y\r\n                ];\r\n            }\r\n        });\r\n        defineAccessors(Point.fn, [\r\n            'x',\r\n            'y'\r\n        ]);\r\n        deepExtend(Point.fn, ObserversMixin);\r\n        Point.fn.toString = function (digits, separator) {\r\n            var x = this.x, y = this.y;\r\n            if (defined(digits)) {\r\n                x = round(x, digits);\r\n                y = round(y, digits);\r\n            }\r\n            separator = separator || ' ';\r\n            return x + separator + y;\r\n        };\r\n        Point.create = function (arg0, arg1) {\r\n            if (defined(arg0)) {\r\n                if (arg0 instanceof Point) {\r\n                    return arg0;\r\n                } else if (arguments.length === 1 && arg0.length === 2) {\r\n                    return new Point(arg0[0], arg0[1]);\r\n                } else {\r\n                    return new Point(arg0, arg1);\r\n                }\r\n            }\r\n        };\r\n        Point.min = function () {\r\n            var minX = util.MAX_NUM;\r\n            var minY = util.MAX_NUM;\r\n            for (var i = 0; i < arguments.length; i++) {\r\n                var pt = arguments[i];\r\n                minX = math.min(pt.x, minX);\r\n                minY = math.min(pt.y, minY);\r\n            }\r\n            return new Point(minX, minY);\r\n        };\r\n        Point.max = function () {\r\n            var maxX = util.MIN_NUM;\r\n            var maxY = util.MIN_NUM;\r\n            for (var i = 0; i < arguments.length; i++) {\r\n                var pt = arguments[i];\r\n                maxX = math.max(pt.x, maxX);\r\n                maxY = math.max(pt.y, maxY);\r\n            }\r\n            return new Point(maxX, maxY);\r\n        };\r\n        Point.minPoint = function () {\r\n            return new Point(MIN_NUM, MIN_NUM);\r\n        };\r\n        Point.maxPoint = function () {\r\n            return new Point(MAX_NUM, MAX_NUM);\r\n        };\r\n        Point.ZERO = new Point(0, 0);\r\n        var Size = Class.extend({\r\n            init: function (width, height) {\r\n                this.width = width || 0;\r\n                this.height = height || 0;\r\n            },\r\n            equals: function (other) {\r\n                return other && other.width === this.width && other.height === this.height;\r\n            },\r\n            clone: function () {\r\n                return new Size(this.width, this.height);\r\n            },\r\n            toArray: function (digits) {\r\n                var doRound = defined(digits);\r\n                var width = doRound ? round(this.width, digits) : this.width;\r\n                var height = doRound ? round(this.height, digits) : this.height;\r\n                return [\r\n                    width,\r\n                    height\r\n                ];\r\n            }\r\n        });\r\n        defineAccessors(Size.fn, [\r\n            'width',\r\n            'height'\r\n        ]);\r\n        deepExtend(Size.fn, ObserversMixin);\r\n        Size.create = function (arg0, arg1) {\r\n            if (defined(arg0)) {\r\n                if (arg0 instanceof Size) {\r\n                    return arg0;\r\n                } else if (arguments.length === 1 && arg0.length === 2) {\r\n                    return new Size(arg0[0], arg0[1]);\r\n                } else {\r\n                    return new Size(arg0, arg1);\r\n                }\r\n            }\r\n        };\r\n        Size.ZERO = new Size(0, 0);\r\n        var Rect = Class.extend({\r\n            init: function (origin, size) {\r\n                this.setOrigin(origin || new Point());\r\n                this.setSize(size || new Size());\r\n            },\r\n            clone: function () {\r\n                return new Rect(this.origin.clone(), this.size.clone());\r\n            },\r\n            equals: function (other) {\r\n                return other && other.origin.equals(this.origin) && other.size.equals(this.size);\r\n            },\r\n            setOrigin: function (value) {\r\n                this._observerField('origin', Point.create(value));\r\n                this.geometryChange();\r\n                return this;\r\n            },\r\n            getOrigin: function () {\r\n                return this.origin;\r\n            },\r\n            setSize: function (value) {\r\n                this._observerField('size', Size.create(value));\r\n                this.geometryChange();\r\n                return this;\r\n            },\r\n            getSize: function () {\r\n                return this.size;\r\n            },\r\n            width: function () {\r\n                return this.size.width;\r\n            },\r\n            height: function () {\r\n                return this.size.height;\r\n            },\r\n            topLeft: function () {\r\n                return this.origin.clone();\r\n            },\r\n            bottomRight: function () {\r\n                return this.origin.clone().translate(this.width(), this.height());\r\n            },\r\n            topRight: function () {\r\n                return this.origin.clone().translate(this.width(), 0);\r\n            },\r\n            bottomLeft: function () {\r\n                return this.origin.clone().translate(0, this.height());\r\n            },\r\n            center: function () {\r\n                return this.origin.clone().translate(this.width() / 2, this.height() / 2);\r\n            },\r\n            bbox: function (matrix) {\r\n                var tl = this.topLeft().transformCopy(matrix);\r\n                var tr = this.topRight().transformCopy(matrix);\r\n                var br = this.bottomRight().transformCopy(matrix);\r\n                var bl = this.bottomLeft().transformCopy(matrix);\r\n                return Rect.fromPoints(tl, tr, br, bl);\r\n            },\r\n            transformCopy: function (m) {\r\n                return Rect.fromPoints(this.topLeft().transform(m), this.bottomRight().transform(m));\r\n            },\r\n            expand: function (x, y) {\r\n                if (!defined(y)) {\r\n                    y = x;\r\n                }\r\n                this.size.width += 2 * x;\r\n                this.size.height += 2 * y;\r\n                this.origin.translate(-x, -y);\r\n                return this;\r\n            },\r\n            expandCopy: function (x, y) {\r\n                return this.clone().expand(x, y);\r\n            },\r\n            containsPoint: function (point) {\r\n                var origin = this.origin;\r\n                var bottomRight = this.bottomRight();\r\n                return !(point.x < origin.x || point.y < origin.y || bottomRight.x < point.x || bottomRight.y < point.y);\r\n            },\r\n            _isOnPath: function (point, width) {\r\n                var rectOuter = this.expandCopy(width, width);\r\n                var rectInner = this.expandCopy(-width, -width);\r\n                return rectOuter.containsPoint(point) && !rectInner.containsPoint(point);\r\n            }\r\n        });\r\n        deepExtend(Rect.fn, ObserversMixin);\r\n        Rect.fromPoints = function () {\r\n            var topLeft = Point.min.apply(this, arguments);\r\n            var bottomRight = Point.max.apply(this, arguments);\r\n            var size = new Size(bottomRight.x - topLeft.x, bottomRight.y - topLeft.y);\r\n            return new Rect(topLeft, size);\r\n        };\r\n        Rect.union = function (a, b) {\r\n            return Rect.fromPoints(Point.min(a.topLeft(), b.topLeft()), Point.max(a.bottomRight(), b.bottomRight()));\r\n        };\r\n        Rect.intersect = function (a, b) {\r\n            a = {\r\n                left: a.topLeft().x,\r\n                top: a.topLeft().y,\r\n                right: a.bottomRight().x,\r\n                bottom: a.bottomRight().y\r\n            };\r\n            b = {\r\n                left: b.topLeft().x,\r\n                top: b.topLeft().y,\r\n                right: b.bottomRight().x,\r\n                bottom: b.bottomRight().y\r\n            };\r\n            if (a.left <= b.right && b.left <= a.right && a.top <= b.bottom && b.top <= a.bottom) {\r\n                return Rect.fromPoints(new Point(math.max(a.left, b.left), math.max(a.top, b.top)), new Point(math.min(a.right, b.right), math.min(a.bottom, b.bottom)));\r\n            }\r\n        };\r\n        var Circle = Class.extend({\r\n            init: function (center, radius) {\r\n                this.setCenter(center || new Point());\r\n                this.setRadius(radius || 0);\r\n            },\r\n            setCenter: function (value) {\r\n                this._observerField('center', Point.create(value));\r\n                this.geometryChange();\r\n                return this;\r\n            },\r\n            getCenter: function () {\r\n                return this.center;\r\n            },\r\n            equals: function (other) {\r\n                return other && other.center.equals(this.center) && other.radius === this.radius;\r\n            },\r\n            clone: function () {\r\n                return new Circle(this.center.clone(), this.radius);\r\n            },\r\n            pointAt: function (angle) {\r\n                return this._pointAt(rad(angle));\r\n            },\r\n            bbox: function (matrix) {\r\n                var minPoint = Point.maxPoint();\r\n                var maxPoint = Point.minPoint();\r\n                var extremeAngles = ellipseExtremeAngles(this.center, this.radius, this.radius, matrix);\r\n                for (var i = 0; i < 4; i++) {\r\n                    var currentPointX = this._pointAt(extremeAngles.x + i * PI_DIV_2).transformCopy(matrix);\r\n                    var currentPointY = this._pointAt(extremeAngles.y + i * PI_DIV_2).transformCopy(matrix);\r\n                    var currentPoint = new Point(currentPointX.x, currentPointY.y);\r\n                    minPoint = Point.min(minPoint, currentPoint);\r\n                    maxPoint = Point.max(maxPoint, currentPoint);\r\n                }\r\n                return Rect.fromPoints(minPoint, maxPoint);\r\n            },\r\n            _pointAt: function (angle) {\r\n                var c = this.center;\r\n                var r = this.radius;\r\n                return new Point(c.x - r * math.cos(angle), c.y - r * math.sin(angle));\r\n            },\r\n            containsPoint: function (point) {\r\n                var center = this.center;\r\n                var inCircle = math.pow(point.x - center.x, 2) + math.pow(point.y - center.y, 2) <= math.pow(this.radius, 2);\r\n                return inCircle;\r\n            },\r\n            _isOnPath: function (point, width) {\r\n                var center = this.center;\r\n                var radius = this.radius;\r\n                var pointDistance = center.distanceTo(point);\r\n                return radius - width <= pointDistance && pointDistance <= radius + width;\r\n            }\r\n        });\r\n        defineAccessors(Circle.fn, ['radius']);\r\n        deepExtend(Circle.fn, ObserversMixin);\r\n        var Arc = Class.extend({\r\n            init: function (center, options) {\r\n                this.setCenter(center || new Point());\r\n                options = options || {};\r\n                this.radiusX = options.radiusX;\r\n                this.radiusY = options.radiusY || options.radiusX;\r\n                this.startAngle = options.startAngle;\r\n                this.endAngle = options.endAngle;\r\n                this.anticlockwise = options.anticlockwise || false;\r\n            },\r\n            clone: function () {\r\n                return new Arc(this.center, {\r\n                    radiusX: this.radiusX,\r\n                    radiusY: this.radiusY,\r\n                    startAngle: this.startAngle,\r\n                    endAngle: this.endAngle,\r\n                    anticlockwise: this.anticlockwise\r\n                });\r\n            },\r\n            setCenter: function (value) {\r\n                this._observerField('center', Point.create(value));\r\n                this.geometryChange();\r\n                return this;\r\n            },\r\n            getCenter: function () {\r\n                return this.center;\r\n            },\r\n            MAX_INTERVAL: 45,\r\n            pointAt: function (angle) {\r\n                var center = this.center;\r\n                var radian = rad(angle);\r\n                return new Point(center.x + this.radiusX * math.cos(radian), center.y + this.radiusY * math.sin(radian));\r\n            },\r\n            curvePoints: function () {\r\n                var startAngle = this.startAngle;\r\n                var dir = this.anticlockwise ? -1 : 1;\r\n                var curvePoints = [this.pointAt(startAngle)];\r\n                var currentAngle = startAngle;\r\n                var interval = this._arcInterval();\r\n                var intervalAngle = interval.endAngle - interval.startAngle;\r\n                var subIntervalsCount = math.ceil(intervalAngle / this.MAX_INTERVAL);\r\n                var subIntervalAngle = intervalAngle / subIntervalsCount;\r\n                for (var i = 1; i <= subIntervalsCount; i++) {\r\n                    var nextAngle = currentAngle + dir * subIntervalAngle;\r\n                    var points = this._intervalCurvePoints(currentAngle, nextAngle);\r\n                    curvePoints.push(points.cp1, points.cp2, points.p2);\r\n                    currentAngle = nextAngle;\r\n                }\r\n                return curvePoints;\r\n            },\r\n            bbox: function (matrix) {\r\n                var arc = this;\r\n                var interval = arc._arcInterval();\r\n                var startAngle = interval.startAngle;\r\n                var endAngle = interval.endAngle;\r\n                var extremeAngles = ellipseExtremeAngles(this.center, this.radiusX, this.radiusY, matrix);\r\n                var extremeX = deg(extremeAngles.x);\r\n                var extremeY = deg(extremeAngles.y);\r\n                var currentPoint = arc.pointAt(startAngle).transformCopy(matrix);\r\n                var endPoint = arc.pointAt(endAngle).transformCopy(matrix);\r\n                var minPoint = Point.min(currentPoint, endPoint);\r\n                var maxPoint = Point.max(currentPoint, endPoint);\r\n                var currentAngleX = bboxStartAngle(extremeX, startAngle);\r\n                var currentAngleY = bboxStartAngle(extremeY, startAngle);\r\n                while (currentAngleX < endAngle || currentAngleY < endAngle) {\r\n                    var currentPointX;\r\n                    if (currentAngleX < endAngle) {\r\n                        currentPointX = arc.pointAt(currentAngleX).transformCopy(matrix);\r\n                        currentAngleX += 90;\r\n                    }\r\n                    var currentPointY;\r\n                    if (currentAngleY < endAngle) {\r\n                        currentPointY = arc.pointAt(currentAngleY).transformCopy(matrix);\r\n                        currentAngleY += 90;\r\n                    }\r\n                    currentPoint = new Point(currentPointX.x, currentPointY.y);\r\n                    minPoint = Point.min(minPoint, currentPoint);\r\n                    maxPoint = Point.max(maxPoint, currentPoint);\r\n                }\r\n                return Rect.fromPoints(minPoint, maxPoint);\r\n            },\r\n            _arcInterval: function () {\r\n                var startAngle = this.startAngle;\r\n                var endAngle = this.endAngle;\r\n                var anticlockwise = this.anticlockwise;\r\n                if (anticlockwise) {\r\n                    var oldStart = startAngle;\r\n                    startAngle = endAngle;\r\n                    endAngle = oldStart;\r\n                }\r\n                if (startAngle > endAngle || anticlockwise && startAngle === endAngle) {\r\n                    endAngle += 360;\r\n                }\r\n                return {\r\n                    startAngle: startAngle,\r\n                    endAngle: endAngle\r\n                };\r\n            },\r\n            _intervalCurvePoints: function (startAngle, endAngle) {\r\n                var arc = this;\r\n                var p1 = arc.pointAt(startAngle);\r\n                var p2 = arc.pointAt(endAngle);\r\n                var p1Derivative = arc._derivativeAt(startAngle);\r\n                var p2Derivative = arc._derivativeAt(endAngle);\r\n                var t = (rad(endAngle) - rad(startAngle)) / 3;\r\n                var cp1 = new Point(p1.x + t * p1Derivative.x, p1.y + t * p1Derivative.y);\r\n                var cp2 = new Point(p2.x - t * p2Derivative.x, p2.y - t * p2Derivative.y);\r\n                return {\r\n                    p1: p1,\r\n                    cp1: cp1,\r\n                    cp2: cp2,\r\n                    p2: p2\r\n                };\r\n            },\r\n            _derivativeAt: function (angle) {\r\n                var arc = this;\r\n                var radian = rad(angle);\r\n                return new Point(-arc.radiusX * math.sin(radian), arc.radiusY * math.cos(radian));\r\n            },\r\n            containsPoint: function (point) {\r\n                var interval = this._arcInterval();\r\n                var intervalAngle = interval.endAngle - interval.startAngle;\r\n                var center = this.center;\r\n                var distance = center.distanceTo(point);\r\n                var angleRad = math.atan2(point.y - center.y, point.x - center.x);\r\n                var pointRadius = this.radiusX * this.radiusY / math.sqrt(math.pow(this.radiusX, 2) * math.pow(math.sin(angleRad), 2) + math.pow(this.radiusY, 2) * math.pow(math.cos(angleRad), 2));\r\n                var startPoint = this.pointAt(this.startAngle).round(PRECISION);\r\n                var endPoint = this.pointAt(this.endAngle).round(PRECISION);\r\n                var intersection = lineIntersection(center, point.round(PRECISION), startPoint, endPoint);\r\n                var containsPoint;\r\n                if (intervalAngle < 180) {\r\n                    containsPoint = intersection && closeOrLess(center.distanceTo(intersection), distance) && closeOrLess(distance, pointRadius);\r\n                } else {\r\n                    var angle = calculateAngle(center.x, center.y, this.radiusX, this.radiusY, point.x, point.y);\r\n                    if (angle != 360) {\r\n                        angle = (360 + angle) % 360;\r\n                    }\r\n                    var inAngleRange = interval.startAngle <= angle && angle <= interval.endAngle;\r\n                    containsPoint = inAngleRange && closeOrLess(distance, pointRadius) || !inAngleRange && (!intersection || intersection.equals(point));\r\n                }\r\n                return containsPoint;\r\n            },\r\n            _isOnPath: function (point, width) {\r\n                var interval = this._arcInterval();\r\n                var center = this.center;\r\n                var angle = calculateAngle(center.x, center.y, this.radiusX, this.radiusY, point.x, point.y);\r\n                if (angle != 360) {\r\n                    angle = (360 + angle) % 360;\r\n                }\r\n                var inAngleRange = interval.startAngle <= angle && angle <= interval.endAngle;\r\n                return inAngleRange && this.pointAt(angle).distanceTo(point) <= width;\r\n            }\r\n        });\r\n        defineAccessors(Arc.fn, [\r\n            'radiusX',\r\n            'radiusY',\r\n            'startAngle',\r\n            'endAngle',\r\n            'anticlockwise'\r\n        ]);\r\n        deepExtend(Arc.fn, ObserversMixin);\r\n        Arc.fromPoints = function (start, end, rx, ry, largeArc, swipe) {\r\n            var arcParameters = normalizeArcParameters(start.x, start.y, end.x, end.y, rx, ry, largeArc, swipe);\r\n            return new Arc(arcParameters.center, {\r\n                startAngle: arcParameters.startAngle,\r\n                endAngle: arcParameters.endAngle,\r\n                radiusX: rx,\r\n                radiusY: ry,\r\n                anticlockwise: swipe === 0\r\n            });\r\n        };\r\n        var Matrix = Class.extend({\r\n            init: function (a, b, c, d, e, f) {\r\n                this.a = a || 0;\r\n                this.b = b || 0;\r\n                this.c = c || 0;\r\n                this.d = d || 0;\r\n                this.e = e || 0;\r\n                this.f = f || 0;\r\n            },\r\n            multiplyCopy: function (m) {\r\n                return new Matrix(this.a * m.a + this.c * m.b, this.b * m.a + this.d * m.b, this.a * m.c + this.c * m.d, this.b * m.c + this.d * m.d, this.a * m.e + this.c * m.f + this.e, this.b * m.e + this.d * m.f + this.f);\r\n            },\r\n            invert: function () {\r\n                var a = this.a, b = this.b;\r\n                var d = this.c, e = this.d;\r\n                var g = this.e, h = this.f;\r\n                var det = a * e - b * d;\r\n                if (det === 0) {\r\n                    return null;\r\n                }\r\n                return new Matrix(e / det, -b / det, -d / det, a / det, (d * h - e * g) / det, (b * g - a * h) / det);\r\n            },\r\n            clone: function () {\r\n                return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);\r\n            },\r\n            equals: function (other) {\r\n                if (!other) {\r\n                    return false;\r\n                }\r\n                return this.a === other.a && this.b === other.b && this.c === other.c && this.d === other.d && this.e === other.e && this.f === other.f;\r\n            },\r\n            round: function (precision) {\r\n                this.a = round(this.a, precision);\r\n                this.b = round(this.b, precision);\r\n                this.c = round(this.c, precision);\r\n                this.d = round(this.d, precision);\r\n                this.e = round(this.e, precision);\r\n                this.f = round(this.f, precision);\r\n                return this;\r\n            },\r\n            toArray: function (precision) {\r\n                var arr = [\r\n                    this.a,\r\n                    this.b,\r\n                    this.c,\r\n                    this.d,\r\n                    this.e,\r\n                    this.f\r\n                ];\r\n                if (defined(precision)) {\r\n                    for (var i = 0; i < arr.length; i++) {\r\n                        arr[i] = round(arr[i], precision);\r\n                    }\r\n                }\r\n                return arr;\r\n            }\r\n        });\r\n        Matrix.fn.toString = function (precision, separator) {\r\n            return this.toArray(precision).join(separator || ',');\r\n        };\r\n        Matrix.translate = function (x, y) {\r\n            return new Matrix(1, 0, 0, 1, x, y);\r\n        };\r\n        Matrix.unit = function () {\r\n            return new Matrix(1, 0, 0, 1, 0, 0);\r\n        };\r\n        Matrix.rotate = function (angle, x, y) {\r\n            var m = new Matrix();\r\n            m.a = math.cos(rad(angle));\r\n            m.b = math.sin(rad(angle));\r\n            m.c = -m.b;\r\n            m.d = m.a;\r\n            m.e = x - x * m.a + y * m.b || 0;\r\n            m.f = y - y * m.a - x * m.b || 0;\r\n            return m;\r\n        };\r\n        Matrix.scale = function (scaleX, scaleY) {\r\n            return new Matrix(scaleX, 0, 0, scaleY, 0, 0);\r\n        };\r\n        Matrix.IDENTITY = Matrix.unit();\r\n        var Transformation = Class.extend({\r\n            init: function (matrix) {\r\n                this._matrix = matrix || Matrix.unit();\r\n            },\r\n            clone: function () {\r\n                return new Transformation(this._matrix.clone());\r\n            },\r\n            equals: function (other) {\r\n                return other && other._matrix.equals(this._matrix);\r\n            },\r\n            _optionsChange: function () {\r\n                this.optionsChange({\r\n                    field: 'transform',\r\n                    value: this\r\n                });\r\n            },\r\n            translate: function (x, y) {\r\n                this._matrix = this._matrix.multiplyCopy(Matrix.translate(x, y));\r\n                this._optionsChange();\r\n                return this;\r\n            },\r\n            scale: function (scaleX, scaleY, origin) {\r\n                if (!defined(scaleY)) {\r\n                    scaleY = scaleX;\r\n                }\r\n                if (origin) {\r\n                    origin = Point.create(origin);\r\n                    this._matrix = this._matrix.multiplyCopy(Matrix.translate(origin.x, origin.y));\r\n                }\r\n                this._matrix = this._matrix.multiplyCopy(Matrix.scale(scaleX, scaleY));\r\n                if (origin) {\r\n                    this._matrix = this._matrix.multiplyCopy(Matrix.translate(-origin.x, -origin.y));\r\n                }\r\n                this._optionsChange();\r\n                return this;\r\n            },\r\n            rotate: function (angle, origin) {\r\n                origin = Point.create(origin) || Point.ZERO;\r\n                this._matrix = this._matrix.multiplyCopy(Matrix.rotate(angle, origin.x, origin.y));\r\n                this._optionsChange();\r\n                return this;\r\n            },\r\n            multiply: function (transformation) {\r\n                var matrix = toMatrix(transformation);\r\n                this._matrix = this._matrix.multiplyCopy(matrix);\r\n                this._optionsChange();\r\n                return this;\r\n            },\r\n            matrix: function (matrix) {\r\n                if (matrix) {\r\n                    this._matrix = matrix;\r\n                    this._optionsChange();\r\n                    return this;\r\n                } else {\r\n                    return this._matrix;\r\n                }\r\n            }\r\n        });\r\n        deepExtend(Transformation.fn, ObserversMixin);\r\n        function transform(matrix) {\r\n            if (matrix === null) {\r\n                return null;\r\n            }\r\n            if (matrix instanceof Transformation) {\r\n                return matrix;\r\n            }\r\n            return new Transformation(matrix);\r\n        }\r\n        function toMatrix(value) {\r\n            if (value && kendo.isFunction(value.matrix)) {\r\n                return value.matrix();\r\n            }\r\n            return value;\r\n        }\r\n        function ellipseExtremeAngles(center, rx, ry, matrix) {\r\n            var extremeX = 0, extremeY = 0;\r\n            if (matrix) {\r\n                extremeX = math.atan2(matrix.c * ry, matrix.a * rx);\r\n                if (matrix.b !== 0) {\r\n                    extremeY = math.atan2(matrix.d * ry, matrix.b * rx);\r\n                }\r\n            }\r\n            return {\r\n                x: extremeX,\r\n                y: extremeY\r\n            };\r\n        }\r\n        function bboxStartAngle(angle, start) {\r\n            while (angle < start) {\r\n                angle += 90;\r\n            }\r\n            return angle;\r\n        }\r\n        function defineAccessors(fn, fields) {\r\n            for (var i = 0; i < fields.length; i++) {\r\n                var name = fields[i];\r\n                var capitalized = name.charAt(0).toUpperCase() + name.substring(1, name.length);\r\n                fn['set' + capitalized] = setAccessor(name);\r\n                fn['get' + capitalized] = getAccessor(name);\r\n            }\r\n        }\r\n        function setAccessor(field) {\r\n            return function (value) {\r\n                if (this[field] !== value) {\r\n                    this[field] = value;\r\n                    this.geometryChange();\r\n                }\r\n                return this;\r\n            };\r\n        }\r\n        function getAccessor(field) {\r\n            return function () {\r\n                return this[field];\r\n            };\r\n        }\r\n        function elipseAngle(start, end, swipe) {\r\n            if (start > end) {\r\n                end += 360;\r\n            }\r\n            var alpha = math.abs(end - start);\r\n            if (!swipe) {\r\n                alpha = 360 - alpha;\r\n            }\r\n            return alpha;\r\n        }\r\n        function calculateAngle(cx, cy, rx, ry, x, y) {\r\n            var cos = round((x - cx) / rx, 3);\r\n            var sin = round((y - cy) / ry, 3);\r\n            return round(deg(math.atan2(sin, cos)));\r\n        }\r\n        function normalizeArcParameters(x1, y1, x2, y2, rx, ry, largeArc, swipe) {\r\n            var cx, cy;\r\n            var cx1, cy1;\r\n            var a, b, c, sqrt;\r\n            if (y1 !== y2) {\r\n                var x21 = x2 - x1;\r\n                var y21 = y2 - y1;\r\n                var rx2 = pow(rx, 2), ry2 = pow(ry, 2);\r\n                var k = (ry2 * x21 * (x1 + x2) + rx2 * y21 * (y1 + y2)) / (2 * rx2 * y21);\r\n                var yk2 = k - y2;\r\n                var l = -(x21 * ry2) / (rx2 * y21);\r\n                a = 1 / rx2 + pow(l, 2) / ry2;\r\n                b = 2 * (l * yk2 / ry2 - x2 / rx2);\r\n                c = pow(x2, 2) / rx2 + pow(yk2, 2) / ry2 - 1;\r\n                sqrt = math.sqrt(pow(b, 2) - 4 * a * c);\r\n                cx = (-b - sqrt) / (2 * a);\r\n                cy = k + l * cx;\r\n                cx1 = (-b + sqrt) / (2 * a);\r\n                cy1 = k + l * cx1;\r\n            } else if (x1 !== x2) {\r\n                b = -2 * y2;\r\n                c = pow((x2 - x1) * ry / (2 * rx), 2) + pow(y2, 2) - pow(ry, 2);\r\n                sqrt = math.sqrt(pow(b, 2) - 4 * c);\r\n                cx = cx1 = (x1 + x2) / 2;\r\n                cy = (-b - sqrt) / 2;\r\n                cy1 = (-b + sqrt) / 2;\r\n            } else {\r\n                return false;\r\n            }\r\n            var start = calculateAngle(cx, cy, rx, ry, x1, y1);\r\n            var end = calculateAngle(cx, cy, rx, ry, x2, y2);\r\n            var alpha = elipseAngle(start, end, swipe);\r\n            if (largeArc && alpha <= 180 || !largeArc && alpha > 180) {\r\n                cx = cx1;\r\n                cy = cy1;\r\n                start = calculateAngle(cx, cy, rx, ry, x1, y1);\r\n                end = calculateAngle(cx, cy, rx, ry, x2, y2);\r\n            }\r\n            return {\r\n                center: new Point(cx, cy),\r\n                startAngle: start,\r\n                endAngle: end\r\n            };\r\n        }\r\n        var ComplexNumber = function (real, img) {\r\n            this.real = real || 0;\r\n            this.img = img || 0;\r\n        };\r\n        ComplexNumber.fn = ComplexNumber.prototype = {\r\n            add: function (cNumber) {\r\n                return new ComplexNumber(round(this.real + cNumber.real, PRECISION), round(this.img + cNumber.img, PRECISION));\r\n            },\r\n            addConstant: function (value) {\r\n                return new ComplexNumber(this.real + value, this.img);\r\n            },\r\n            negate: function () {\r\n                return new ComplexNumber(-this.real, -this.img);\r\n            },\r\n            multiply: function (cNumber) {\r\n                return new ComplexNumber(this.real * cNumber.real - this.img * cNumber.img, this.real * cNumber.img + this.img * cNumber.real);\r\n            },\r\n            multiplyConstant: function (value) {\r\n                return new ComplexNumber(this.real * value, this.img * value);\r\n            },\r\n            nthRoot: function (n) {\r\n                var rad = math.atan2(this.img, this.real), r = math.sqrt(math.pow(this.img, 2) + math.pow(this.real, 2)), nthR = math.pow(r, 1 / n);\r\n                return new ComplexNumber(nthR * math.cos(rad / n), nthR * math.sin(rad / n));\r\n            },\r\n            equals: function (cNumber) {\r\n                return this.real === cNumber.real && this.img === cNumber.img;\r\n            },\r\n            isReal: function () {\r\n                return this.img === 0;\r\n            }\r\n        };\r\n        function solveCubic(a, b, c, d) {\r\n            if (a === 0) {\r\n                return solveQuadratic(b, c, d);\r\n            }\r\n            var p = (3 * a * c - math.pow(b, 2)) / (3 * math.pow(a, 2)), q = (2 * math.pow(b, 3) - 9 * a * b * c + 27 * math.pow(a, 2) * d) / (27 * math.pow(a, 3)), Q = math.pow(p / 3, 3) + math.pow(q / 2, 2), i = new ComplexNumber(0, 1), b3a = -b / (3 * a), x1, x2, y1, y2, y3, result = [], z1, z2;\r\n            if (Q < 0) {\r\n                x1 = new ComplexNumber(-q / 2, math.sqrt(-Q)).nthRoot(3);\r\n                x2 = new ComplexNumber(-q / 2, -math.sqrt(-Q)).nthRoot(3);\r\n            } else {\r\n                x1 = -q / 2 + math.sqrt(Q);\r\n                x1 = new ComplexNumber(numberSign(x1) * math.pow(math.abs(x1), 1 / 3));\r\n                x2 = -q / 2 - math.sqrt(Q);\r\n                x2 = new ComplexNumber(numberSign(x2) * math.pow(math.abs(x2), 1 / 3));\r\n            }\r\n            y1 = x1.add(x2);\r\n            z1 = x1.add(x2).multiplyConstant(-1 / 2);\r\n            z2 = x1.add(x2.negate()).multiplyConstant(math.sqrt(3) / 2);\r\n            y2 = z1.add(i.multiply(z2));\r\n            y3 = z1.add(i.negate().multiply(z2));\r\n            if (y1.isReal()) {\r\n                result.push(round(y1.real + b3a, PRECISION));\r\n            }\r\n            if (y2.isReal()) {\r\n                result.push(round(y2.real + b3a, PRECISION));\r\n            }\r\n            if (y3.isReal()) {\r\n                result.push(round(y3.real + b3a, PRECISION));\r\n            }\r\n            return result;\r\n        }\r\n        function toCubicPolynomial(points, field) {\r\n            return [\r\n                -points[0][field] + 3 * points[1][field] - 3 * points[2][field] + points[3][field],\r\n                3 * (points[0][field] - 2 * points[1][field] + points[2][field]),\r\n                3 * (-points[0][field] + points[1][field]),\r\n                points[0][field]\r\n            ];\r\n        }\r\n        function calculateCurveAt(t, field, points) {\r\n            var t1 = 1 - t;\r\n            return math.pow(t1, 3) * points[0][field] + 3 * math.pow(t1, 2) * t * points[1][field] + 3 * math.pow(t, 2) * t1 * points[2][field] + math.pow(t, 3) * points[3][field];\r\n        }\r\n        function curveIntersectionsCount(points, point, bbox) {\r\n            var polynomial = toCubicPolynomial(points, 'x');\r\n            var roots = solveCubic(polynomial[0], polynomial[1], polynomial[2], polynomial[3] - point.x);\r\n            var count = 0;\r\n            var rayIntersection;\r\n            var intersectsRay;\r\n            for (var i = 0; i < roots.length; i++) {\r\n                rayIntersection = calculateCurveAt(roots[i], 'y', points);\r\n                intersectsRay = close(rayIntersection, point.y) || rayIntersection > point.y;\r\n                if (intersectsRay && ((roots[i] === 0 || roots[i] === 1) && bbox.bottomRight().x > point.x || 0 < roots[i] && roots[i] < 1)) {\r\n                    count++;\r\n                }\r\n            }\r\n            return count;\r\n        }\r\n        function lineIntersectionsCount(a, b, point) {\r\n            var intersects;\r\n            if (a.x != b.x) {\r\n                var minX = math.min(a.x, b.x), maxX = math.max(a.x, b.x), minY = math.min(a.y, b.y), maxY = math.max(a.y, b.y), inRange = minX <= point.x && point.x < maxX;\r\n                if (minY == maxY) {\r\n                    intersects = point.y <= minY && inRange;\r\n                } else {\r\n                    intersects = inRange && (maxY - minY) * ((a.x - b.x) * (a.y - b.y) > 0 ? point.x - minX : maxX - point.x) / (maxX - minX) + minY - point.y >= 0;\r\n                }\r\n            }\r\n            return intersects ? 1 : 0;\r\n        }\r\n        function lineIntersection(p0, p1, p2, p3) {\r\n            var s1x = p1.x - p0.x;\r\n            var s2x = p3.x - p2.x;\r\n            var s1y = p1.y - p0.y;\r\n            var s2y = p3.y - p2.y;\r\n            var nx = p0.x - p2.x;\r\n            var ny = p0.y - p2.y;\r\n            var d = s1x * s2y - s2x * s1y;\r\n            var s = (s1x * ny - s1y * nx) / d;\r\n            var t = (s2x * ny - s2y * nx) / d;\r\n            if (s >= 0 && s <= 1 && t >= 0 && t <= 1) {\r\n                return new Point(p0.x + t * s1x, p0.y + t * s1y);\r\n            }\r\n        }\r\n        function close(a, b, tolerance) {\r\n            return round(math.abs(a - b), tolerance || PRECISION) === 0;\r\n        }\r\n        function closeOrLess(a, b, tolerance) {\r\n            return a < b || close(a, b, tolerance);\r\n        }\r\n        function numberSign(x) {\r\n            return x < 0 ? -1 : 1;\r\n        }\r\n        function isOutOfEndPoint(endPoint, controlPoint, point) {\r\n            var angle = util.deg(math.atan2(controlPoint.y - endPoint.y, controlPoint.x - endPoint.x));\r\n            var rotatedPoint = point.transformCopy(transform().rotate(-angle, endPoint));\r\n            return rotatedPoint.x < endPoint.x;\r\n        }\r\n        function hasRootsInRange(points, point, field, rootField, range) {\r\n            var polynomial = toCubicPolynomial(points, rootField);\r\n            var roots = solveCubic(polynomial[0], polynomial[1], polynomial[2], polynomial[3] - point[rootField]);\r\n            var intersection;\r\n            for (var idx = 0; idx < roots.length; idx++) {\r\n                if (0 <= roots[idx] && roots[idx] <= 1) {\r\n                    intersection = calculateCurveAt(roots[idx], field, points);\r\n                    if (math.abs(intersection - point[field]) <= range) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        function solveQuadratic(a, b, c) {\r\n            var squareRoot = math.sqrt(math.pow(b, 2) - 4 * a * c);\r\n            return [\r\n                (-b + squareRoot) / (2 * a),\r\n                (-b - squareRoot) / (2 * a)\r\n            ];\r\n        }\r\n        deepExtend(kendo, {\r\n            geometry: {\r\n                Arc: Arc,\r\n                Circle: Circle,\r\n                curveIntersectionsCount: curveIntersectionsCount,\r\n                lineIntersectionsCount: lineIntersectionsCount,\r\n                Matrix: Matrix,\r\n                Point: Point,\r\n                Rect: Rect,\r\n                Size: Size,\r\n                Transformation: Transformation,\r\n                transform: transform,\r\n                toMatrix: toMatrix,\r\n                isOutOfEndPoint: isOutOfEndPoint,\r\n                hasRootsInRange: hasRootsInRange\r\n            }\r\n        });\r\n        kendo.dataviz.geometry = kendo.geometry;\r\n    }());\r\n    return window.kendo;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('drawing/core', [\r\n        'drawing/geometry',\r\n        'kendo.popup'\r\n    ], f);\r\n}(function () {\r\n    (function ($) {\r\n        var noop = $.noop, toString = Object.prototype.toString, kendo = window.kendo, Class = kendo.Class, Widget = kendo.ui.Widget, deepExtend = kendo.deepExtend, util = kendo.util, defined = util.defined, limitValue = util.limitValue, g = kendo.geometry, proxy = $.proxy, NS = '.kendo', TOOLTIP_TEMPLATE = '<div class=\"k-tooltip\">' + '<div class=\"k-tooltip-content\"></div>' + '</div>', TOOLTIP_CLOSE_TEMPLATE = '<div class=\"k-tooltip-button\"><a href=\"\\\\#\" class=\"k-icon k-i-close\">close</a></div>';\r\n        var Surface = Widget.extend({\r\n            init: function (element, options) {\r\n                this.options = deepExtend({}, this.options, options);\r\n                Widget.fn.init.call(this, element, this.options);\r\n                this._click = this._handler('click');\r\n                this._mouseenter = this._handler('mouseenter');\r\n                this._mouseleave = this._handler('mouseleave');\r\n                this._mousemove = this._handler('mousemove');\r\n                this._visual = new kendo.drawing.Group();\r\n                if (this.options.width) {\r\n                    this.element.css('width', this.options.width);\r\n                }\r\n                if (this.options.height) {\r\n                    this.element.css('height', this.options.height);\r\n                }\r\n                this._enableTracking();\r\n            },\r\n            options: {\r\n                name: 'Surface',\r\n                tooltip: {}\r\n            },\r\n            events: [\r\n                'click',\r\n                'mouseenter',\r\n                'mouseleave',\r\n                'mousemove',\r\n                'resize',\r\n                'tooltipOpen',\r\n                'tooltipClose'\r\n            ],\r\n            draw: function (element) {\r\n                this._visual.children.push(element);\r\n            },\r\n            clear: function () {\r\n                this._visual.children = [];\r\n                this.hideTooltip();\r\n            },\r\n            destroy: function () {\r\n                this._visual = null;\r\n                if (this._tooltip) {\r\n                    this._tooltip.destroy();\r\n                    delete this._tooltip;\r\n                }\r\n                Widget.fn.destroy.call(this);\r\n            },\r\n            exportVisual: function () {\r\n                return this._visual;\r\n            },\r\n            getSize: function () {\r\n                return {\r\n                    width: this.element.width(),\r\n                    height: this.element.height()\r\n                };\r\n            },\r\n            setSize: function (size) {\r\n                this.element.css({\r\n                    width: size.width,\r\n                    height: size.height\r\n                });\r\n                this._size = size;\r\n                this._resize();\r\n            },\r\n            eventTarget: function (e) {\r\n                var domNode = $(e.touch ? e.touch.initialTouch : e.target);\r\n                var node;\r\n                while (!node && domNode.length > 0) {\r\n                    node = domNode[0]._kendoNode;\r\n                    if (domNode.is(this.element) || domNode.length === 0) {\r\n                        break;\r\n                    }\r\n                    domNode = domNode.parent();\r\n                }\r\n                if (node) {\r\n                    return node.srcElement;\r\n                }\r\n            },\r\n            showTooltip: function (shape, options) {\r\n                if (this._tooltip) {\r\n                    this._tooltip.show(shape, options);\r\n                }\r\n            },\r\n            hideTooltip: function () {\r\n                if (this._tooltip) {\r\n                    this._tooltip.hide();\r\n                }\r\n            },\r\n            suspendTracking: function () {\r\n                this._suspendedTracking = true;\r\n                this.hideTooltip();\r\n            },\r\n            resumeTracking: function () {\r\n                this._suspendedTracking = false;\r\n            },\r\n            _resize: noop,\r\n            _handler: function (event) {\r\n                var surface = this;\r\n                return function (e) {\r\n                    var node = surface.eventTarget(e);\r\n                    if (node && !surface._suspendedTracking) {\r\n                        surface.trigger(event, {\r\n                            element: node,\r\n                            originalEvent: e,\r\n                            type: event\r\n                        });\r\n                    }\r\n                };\r\n            },\r\n            _enableTracking: function () {\r\n                this._tooltip = new SurfaceTooltip(this, this.options.tooltip || {});\r\n            },\r\n            _elementOffset: function () {\r\n                var element = this.element;\r\n                var offset = element.offset();\r\n                var paddingLeft = parseInt(element.css('paddingLeft'), 10);\r\n                var paddingTop = parseInt(element.css('paddingTop'), 10);\r\n                return {\r\n                    left: offset.left + paddingLeft,\r\n                    top: offset.top + paddingTop\r\n                };\r\n            },\r\n            _surfacePoint: function (event) {\r\n                var offset = this._elementOffset();\r\n                var coord = eventCoordinates(event);\r\n                var x = coord.x - offset.left;\r\n                var y = coord.y - offset.top;\r\n                return new g.Point(x, y);\r\n            }\r\n        });\r\n        kendo.ui.plugin(Surface);\r\n        Surface.create = function (element, options) {\r\n            return SurfaceFactory.current.create(element, options);\r\n        };\r\n        var BaseNode = Class.extend({\r\n            init: function (srcElement) {\r\n                this.childNodes = [];\r\n                this.parent = null;\r\n                if (srcElement) {\r\n                    this.srcElement = srcElement;\r\n                    this.observe();\r\n                }\r\n            },\r\n            destroy: function () {\r\n                if (this.srcElement) {\r\n                    this.srcElement.removeObserver(this);\r\n                }\r\n                var children = this.childNodes;\r\n                for (var i = 0; i < children.length; i++) {\r\n                    this.childNodes[i].destroy();\r\n                }\r\n                this.parent = null;\r\n            },\r\n            load: noop,\r\n            observe: function () {\r\n                if (this.srcElement) {\r\n                    this.srcElement.addObserver(this);\r\n                }\r\n            },\r\n            append: function (node) {\r\n                this.childNodes.push(node);\r\n                node.parent = this;\r\n            },\r\n            insertAt: function (node, pos) {\r\n                this.childNodes.splice(pos, 0, node);\r\n                node.parent = this;\r\n            },\r\n            remove: function (index, count) {\r\n                var end = index + count;\r\n                for (var i = index; i < end; i++) {\r\n                    this.childNodes[i].removeSelf();\r\n                }\r\n                this.childNodes.splice(index, count);\r\n            },\r\n            removeSelf: function () {\r\n                this.clear();\r\n                this.destroy();\r\n            },\r\n            clear: function () {\r\n                this.remove(0, this.childNodes.length);\r\n            },\r\n            invalidate: function () {\r\n                if (this.parent) {\r\n                    this.parent.invalidate();\r\n                }\r\n            },\r\n            geometryChange: function () {\r\n                this.invalidate();\r\n            },\r\n            optionsChange: function () {\r\n                this.invalidate();\r\n            },\r\n            childrenChange: function (e) {\r\n                if (e.action === 'add') {\r\n                    this.load(e.items, e.index);\r\n                } else if (e.action === 'remove') {\r\n                    this.remove(e.index, e.items.length);\r\n                }\r\n                this.invalidate();\r\n            }\r\n        });\r\n        var OptionsStore = Class.extend({\r\n            init: function (options, prefix) {\r\n                var field, member;\r\n                this.prefix = prefix || '';\r\n                for (field in options) {\r\n                    member = options[field];\r\n                    member = this._wrap(member, field);\r\n                    this[field] = member;\r\n                }\r\n            },\r\n            get: function (field) {\r\n                return kendo.getter(field, true)(this);\r\n            },\r\n            set: function (field, value) {\r\n                var current = kendo.getter(field, true)(this);\r\n                if (current !== value) {\r\n                    var composite = this._set(field, this._wrap(value, field));\r\n                    if (!composite) {\r\n                        this.optionsChange({\r\n                            field: this.prefix + field,\r\n                            value: value\r\n                        });\r\n                    }\r\n                }\r\n            },\r\n            _set: function (field, value) {\r\n                var composite = field.indexOf('.') >= 0;\r\n                if (composite) {\r\n                    var parts = field.split('.'), path = '', obj;\r\n                    while (parts.length > 1) {\r\n                        path += parts.shift();\r\n                        obj = kendo.getter(path, true)(this);\r\n                        if (!obj) {\r\n                            obj = new OptionsStore({}, path + '.');\r\n                            obj.addObserver(this);\r\n                            this[path] = obj;\r\n                        }\r\n                        if (obj instanceof OptionsStore) {\r\n                            obj.set(parts.join('.'), value);\r\n                            return composite;\r\n                        }\r\n                        path += '.';\r\n                    }\r\n                }\r\n                this._clear(field);\r\n                kendo.setter(field)(this, value);\r\n                return composite;\r\n            },\r\n            _clear: function (field) {\r\n                var current = kendo.getter(field, true)(this);\r\n                if (current && current.removeObserver) {\r\n                    current.removeObserver(this);\r\n                }\r\n            },\r\n            _wrap: function (object, field) {\r\n                var type = toString.call(object);\r\n                if (object !== null && defined(object) && type === '[object Object]') {\r\n                    if (!(object instanceof OptionsStore) && !(object instanceof Class)) {\r\n                        object = new OptionsStore(object, this.prefix + field + '.');\r\n                    }\r\n                    object.addObserver(this);\r\n                }\r\n                return object;\r\n            }\r\n        });\r\n        deepExtend(OptionsStore.fn, kendo.mixins.ObserversMixin);\r\n        var SurfaceFactory = function () {\r\n            this._items = [];\r\n        };\r\n        SurfaceFactory.prototype = {\r\n            register: function (name, type, order) {\r\n                var items = this._items, first = items[0], entry = {\r\n                        name: name,\r\n                        type: type,\r\n                        order: order\r\n                    };\r\n                if (!first || order < first.order) {\r\n                    items.unshift(entry);\r\n                } else {\r\n                    items.push(entry);\r\n                }\r\n            },\r\n            create: function (element, options) {\r\n                var items = this._items, match = items[0];\r\n                if (options && options.type) {\r\n                    var preferred = options.type.toLowerCase();\r\n                    for (var i = 0; i < items.length; i++) {\r\n                        if (items[i].name === preferred) {\r\n                            match = items[i];\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if (match) {\r\n                    return new match.type(element, options);\r\n                }\r\n                kendo.logToConsole('Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\\n' + '- The browser does not support SVG, VML and Canvas. User agent: ' + navigator.userAgent + '\\n' + '- The Kendo UI scripts are not fully loaded');\r\n            }\r\n        };\r\n        SurfaceFactory.current = new SurfaceFactory();\r\n        var SurfaceTooltip = Class.extend({\r\n            init: function (surface, options) {\r\n                this.element = $(TOOLTIP_TEMPLATE);\r\n                this.content = this.element.children('.k-tooltip-content');\r\n                options = options || {};\r\n                this.options = deepExtend({}, this.options, this._tooltipOptions(options));\r\n                this.popup = new kendo.ui.Popup(this.element, {\r\n                    appendTo: options.appendTo,\r\n                    animation: options.animation,\r\n                    copyAnchorStyles: false,\r\n                    collision: 'fit fit'\r\n                });\r\n                this._openPopupHandler = $.proxy(this._openPopup, this);\r\n                this.surface = surface;\r\n                this._bindEvents();\r\n            },\r\n            options: {\r\n                position: 'top',\r\n                showOn: 'mouseenter',\r\n                offset: 7,\r\n                autoHide: true,\r\n                hideDelay: 0,\r\n                showAfter: 100\r\n            },\r\n            _bindEvents: function () {\r\n                this._showHandler = proxy(this._showEvent, this);\r\n                this._surfaceLeaveHandler = proxy(this._surfaceLeave, this);\r\n                this._mouseleaveHandler = proxy(this._mouseleave, this);\r\n                this._mousemoveHandler = proxy(this._mousemove, this);\r\n                this.surface.bind('click', this._showHandler);\r\n                this.surface.bind('mouseenter', this._showHandler);\r\n                this.surface.bind('mouseleave', this._mouseleaveHandler);\r\n                this.surface.bind('mousemove', this._mousemoveHandler);\r\n                this.surface.element.on('mouseleave' + NS, this._surfaceLeaveHandler);\r\n                this.element.on('click' + NS, '.k-tooltip-button', proxy(this._hideClick, this));\r\n            },\r\n            destroy: function () {\r\n                var popup = this.popup;\r\n                this.surface.unbind('click', this._showHandler);\r\n                this.surface.unbind('mouseenter', this._showHandler);\r\n                this.surface.unbind('mouseleave', this._mouseleaveHandler);\r\n                this.surface.unbind('mousemove', this._mousemoveHandler);\r\n                this.surface.element.off('mouseleave' + NS, this._surfaceLeaveHandler);\r\n                this.element.off('click' + NS);\r\n                if (popup) {\r\n                    popup.destroy();\r\n                    delete this.popup;\r\n                }\r\n                clearTimeout(this._timeout);\r\n                delete this.popup;\r\n                delete this.element;\r\n                delete this.content;\r\n                delete this.surface;\r\n            },\r\n            _tooltipOptions: function (options) {\r\n                options = options || {};\r\n                return {\r\n                    position: options.position,\r\n                    showOn: options.showOn,\r\n                    offset: options.offset,\r\n                    autoHide: options.autoHide,\r\n                    width: options.width,\r\n                    height: options.height,\r\n                    content: options.content,\r\n                    shared: options.shared,\r\n                    hideDelay: options.hideDelay,\r\n                    showAfter: options.showAfter\r\n                };\r\n            },\r\n            _tooltipShape: function (shape) {\r\n                while (shape && !shape.options.tooltip) {\r\n                    shape = shape.parent;\r\n                }\r\n                return shape;\r\n            },\r\n            _updateContent: function (target, shape, options) {\r\n                var content = options.content;\r\n                if (kendo.isFunction(content)) {\r\n                    content = content({\r\n                        element: shape,\r\n                        target: target\r\n                    });\r\n                }\r\n                if (content) {\r\n                    this.content.html(content);\r\n                    return true;\r\n                }\r\n            },\r\n            _position: function (shape, options, elementSize, event) {\r\n                var position = options.position;\r\n                var tooltipOffset = options.offset || 0;\r\n                var surface = this.surface;\r\n                var offset = surface._elementOffset();\r\n                var size = surface.getSize();\r\n                var surfaceOffset = surface._offset;\r\n                var bbox = shape.bbox();\r\n                var width = elementSize.width;\r\n                var height = elementSize.height;\r\n                var left = 0, top = 0;\r\n                bbox.origin.translate(offset.left, offset.top);\r\n                if (surfaceOffset) {\r\n                    bbox.origin.translate(-surfaceOffset.x, -surfaceOffset.y);\r\n                }\r\n                if (position == 'cursor' && event) {\r\n                    var coord = eventCoordinates(event);\r\n                    left = coord.x - width / 2;\r\n                    top = coord.y - height - tooltipOffset;\r\n                } else if (position == 'left') {\r\n                    left = bbox.origin.x - width - tooltipOffset;\r\n                    top = bbox.center().y - height / 2;\r\n                } else if (position == 'right') {\r\n                    left = bbox.bottomRight().x + tooltipOffset;\r\n                    top = bbox.center().y - height / 2;\r\n                } else if (position == 'bottom') {\r\n                    left = bbox.center().x - width / 2;\r\n                    top = bbox.bottomRight().y + tooltipOffset;\r\n                } else {\r\n                    left = bbox.center().x - width / 2;\r\n                    top = bbox.origin.y - height - tooltipOffset;\r\n                }\r\n                return {\r\n                    left: limitValue(left, offset.left, offset.left + size.width),\r\n                    top: limitValue(top, offset.top, offset.top + size.height)\r\n                };\r\n            },\r\n            show: function (shape, options) {\r\n                this._show(shape, shape, deepExtend({}, this.options, this._tooltipOptions(shape.options.tooltip), options));\r\n            },\r\n            hide: function () {\r\n                var current = this._current;\r\n                delete this._current;\r\n                clearTimeout(this._showTimeout);\r\n                if (this.popup.visible() && current && !this.surface.trigger('tooltipClose', {\r\n                        element: current.shape,\r\n                        target: current.target,\r\n                        popup: this.popup\r\n                    })) {\r\n                    this.popup.close();\r\n                }\r\n            },\r\n            _hideClick: function (e) {\r\n                e.preventDefault();\r\n                this.hide();\r\n            },\r\n            _show: function (target, shape, options, event, delay) {\r\n                var current = this._current;\r\n                clearTimeout(this._timeout);\r\n                if (current && (current.shape === shape && options.shared || current.target === target)) {\r\n                    return;\r\n                }\r\n                clearTimeout(this._showTimeout);\r\n                if (!this.surface.trigger('tooltipOpen', {\r\n                        element: shape,\r\n                        target: target,\r\n                        popup: this.popup\r\n                    }) && this._updateContent(target, shape, options)) {\r\n                    this._autoHide(options);\r\n                    var elementSize = this._measure(options);\r\n                    var popup = this.popup;\r\n                    if (popup.visible()) {\r\n                        popup.close(true);\r\n                    }\r\n                    this._current = {\r\n                        options: options,\r\n                        elementSize: elementSize,\r\n                        shape: shape,\r\n                        target: target,\r\n                        position: this._position(options.shared ? shape : target, options, elementSize, event)\r\n                    };\r\n                    if (delay) {\r\n                        this._showTimeout = setTimeout(this._openPopupHandler, options.showAfter || 0);\r\n                    } else {\r\n                        this._openPopup();\r\n                    }\r\n                }\r\n            },\r\n            _openPopup: function () {\r\n                var current = this._current;\r\n                var position = current.position;\r\n                this.popup.open(position.left, position.top);\r\n            },\r\n            _autoHide: function (options) {\r\n                if (options.autoHide && this._closeButton) {\r\n                    this.element.removeClass('k-tooltip-closable');\r\n                    this._closeButton.remove();\r\n                    delete this._closeButton;\r\n                }\r\n                if (!options.autoHide && !this._closeButton) {\r\n                    this.element.addClass('k-tooltip-closable');\r\n                    this._closeButton = $(TOOLTIP_CLOSE_TEMPLATE).prependTo(this.element);\r\n                }\r\n            },\r\n            _showEvent: function (e) {\r\n                var shape = this._tooltipShape(e.element);\r\n                if (shape) {\r\n                    var options = deepExtend({}, this.options, this._tooltipOptions(shape.options.tooltip));\r\n                    if (options && options.showOn == e.type) {\r\n                        this._show(e.element, shape, options, e.originalEvent, true);\r\n                    }\r\n                }\r\n            },\r\n            _measure: function (options) {\r\n                var width, height;\r\n                this.element.css({\r\n                    width: 'auto',\r\n                    height: 'auto'\r\n                });\r\n                var visible = this.popup.visible();\r\n                if (!visible) {\r\n                    this.popup.wrapper.show();\r\n                }\r\n                this.element.css({\r\n                    width: defined(options.width) ? options.width : 'auto',\r\n                    height: defined(options.height) ? options.height : 'auto'\r\n                });\r\n                width = this.element.outerWidth();\r\n                height = this.element.outerHeight();\r\n                if (!visible) {\r\n                    this.popup.wrapper.hide();\r\n                }\r\n                return {\r\n                    width: width,\r\n                    height: height\r\n                };\r\n            },\r\n            _mouseleave: function (e) {\r\n                if (!this._popupRelatedTarget(e.originalEvent)) {\r\n                    var tooltip = this;\r\n                    var current = tooltip._current;\r\n                    if (current && current.options.autoHide) {\r\n                        tooltip._timeout = setTimeout(function () {\r\n                            clearTimeout(tooltip._showTimeout);\r\n                            tooltip.hide();\r\n                        }, current.options.hideDelay || 0);\r\n                    }\r\n                }\r\n            },\r\n            _mousemove: function (e) {\r\n                var current = this._current;\r\n                if (current && e.element) {\r\n                    var options = current.options;\r\n                    if (options.position == 'cursor') {\r\n                        var position = this._position(e.element, options, current.elementSize, e.originalEvent);\r\n                        current.position = position;\r\n                        this.popup.wrapper.css({\r\n                            left: position.left,\r\n                            top: position.top\r\n                        });\r\n                    }\r\n                }\r\n            },\r\n            _surfaceLeave: function (e) {\r\n                if (!this._popupRelatedTarget(e)) {\r\n                    clearTimeout(this._showTimeout);\r\n                    this.hide();\r\n                }\r\n            },\r\n            _popupRelatedTarget: function (e) {\r\n                return e.relatedTarget && $(e.relatedTarget).closest(this.popup.wrapper).length;\r\n            }\r\n        });\r\n        function eventCoordinates(event) {\r\n            var x, y;\r\n            if (event.touch) {\r\n                x = event.x.location;\r\n                y = event.y.location;\r\n            } else {\r\n                x = event.pageX || event.clientX || 0;\r\n                y = event.pageY || event.clientY || 0;\r\n            }\r\n            return {\r\n                x: x,\r\n                y: y\r\n            };\r\n        }\r\n        deepExtend(kendo, {\r\n            drawing: {\r\n                DASH_ARRAYS: {\r\n                    dot: [\r\n                        1.5,\r\n                        3.5\r\n                    ],\r\n                    dash: [\r\n                        4,\r\n                        3.5\r\n                    ],\r\n                    longdash: [\r\n                        8,\r\n                        3.5\r\n                    ],\r\n                    dashdot: [\r\n                        3.5,\r\n                        3.5,\r\n                        1.5,\r\n                        3.5\r\n                    ],\r\n                    longdashdot: [\r\n                        8,\r\n                        3.5,\r\n                        1.5,\r\n                        3.5\r\n                    ],\r\n                    longdashdotdot: [\r\n                        8,\r\n                        3.5,\r\n                        1.5,\r\n                        3.5,\r\n                        1.5,\r\n                        3.5\r\n                    ]\r\n                },\r\n                Color: kendo.Color,\r\n                BaseNode: BaseNode,\r\n                OptionsStore: OptionsStore,\r\n                Surface: Surface,\r\n                SurfaceFactory: SurfaceFactory,\r\n                SurfaceTooltip: SurfaceTooltip\r\n            }\r\n        });\r\n        kendo.dataviz.drawing = kendo.drawing;\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('drawing/mixins', ['drawing/core'], f);\r\n}(function () {\r\n    (function () {\r\n        var kendo = window.kendo, deepExtend = kendo.deepExtend, defined = kendo.util.defined, g = kendo.geometry;\r\n        var GRADIENT = 'gradient';\r\n        var IDENTITY_MATRIX_HASH = g.Matrix.IDENTITY.toString();\r\n        var Paintable = {\r\n            extend: function (proto) {\r\n                proto.fill = this.fill;\r\n                proto.stroke = this.stroke;\r\n            },\r\n            fill: function (color, opacity) {\r\n                var options = this.options;\r\n                if (defined(color)) {\r\n                    if (color && color.nodeType != GRADIENT) {\r\n                        var newFill = { color: color };\r\n                        if (defined(opacity)) {\r\n                            newFill.opacity = opacity;\r\n                        }\r\n                        options.set('fill', newFill);\r\n                    } else {\r\n                        options.set('fill', color);\r\n                    }\r\n                    return this;\r\n                } else {\r\n                    return options.get('fill');\r\n                }\r\n            },\r\n            stroke: function (color, width, opacity) {\r\n                if (defined(color)) {\r\n                    this.options.set('stroke.color', color);\r\n                    if (defined(width)) {\r\n                        this.options.set('stroke.width', width);\r\n                    }\r\n                    if (defined(opacity)) {\r\n                        this.options.set('stroke.opacity', opacity);\r\n                    }\r\n                    return this;\r\n                } else {\r\n                    return this.options.get('stroke');\r\n                }\r\n            }\r\n        };\r\n        var Traversable = {\r\n            extend: function (proto, childrenField) {\r\n                proto.traverse = function (callback) {\r\n                    var children = this[childrenField];\r\n                    for (var i = 0; i < children.length; i++) {\r\n                        var child = children[i];\r\n                        if (child.traverse) {\r\n                            child.traverse(callback);\r\n                        } else {\r\n                            callback(child);\r\n                        }\r\n                    }\r\n                    return this;\r\n                };\r\n            }\r\n        };\r\n        var Measurable = {\r\n            extend: function (proto) {\r\n                proto.bbox = this.bbox;\r\n                proto.geometryChange = this.geometryChange;\r\n            },\r\n            bbox: function (transformation) {\r\n                var combinedMatrix = g.toMatrix(this.currentTransform(transformation));\r\n                var matrixHash = combinedMatrix ? combinedMatrix.toString() : IDENTITY_MATRIX_HASH;\r\n                var bbox;\r\n                if (this._bboxCache && this._matrixHash == matrixHash) {\r\n                    bbox = this._bboxCache.clone();\r\n                } else {\r\n                    bbox = this._bbox(combinedMatrix);\r\n                    this._bboxCache = bbox ? bbox.clone() : null;\r\n                    this._matrixHash = matrixHash;\r\n                }\r\n                var strokeWidth = this.options.get('stroke.width');\r\n                if (strokeWidth && bbox) {\r\n                    bbox.expand(strokeWidth / 2);\r\n                }\r\n                return bbox;\r\n            },\r\n            geometryChange: function () {\r\n                delete this._bboxCache;\r\n                this.trigger('geometryChange', { element: this });\r\n            }\r\n        };\r\n        deepExtend(kendo.drawing, {\r\n            mixins: {\r\n                Paintable: Paintable,\r\n                Traversable: Traversable,\r\n                Measurable: Measurable\r\n            }\r\n        });\r\n    }());\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('drawing/shapes', [\r\n        'drawing/core',\r\n        'drawing/mixins',\r\n        'util/text-metrics',\r\n        'mixins/observers'\r\n    ], f);\r\n}(function () {\r\n    (function ($) {\r\n        var kendo = window.kendo, Class = kendo.Class, deepExtend = kendo.deepExtend, g = kendo.geometry, Point = g.Point, Size = g.Size, Matrix = g.Matrix, toMatrix = g.toMatrix, drawing = kendo.drawing, OptionsStore = drawing.OptionsStore, math = Math, pow = math.pow, util = kendo.util, append = util.append, arrayLimits = util.arrayLimits, defined = util.defined, last = util.last, valueOrDefault = util.valueOrDefault, ObserversMixin = kendo.mixins.ObserversMixin, inArray = $.inArray, push = [].push, pop = [].pop, splice = [].splice, shift = [].shift, slice = [].slice, unshift = [].unshift, defId = 1, START = 'start', END = 'end', HORIZONTAL = 'horizontal';\r\n        var Element = Class.extend({\r\n            nodeType: 'Element',\r\n            init: function (options) {\r\n                this._initOptions(options);\r\n            },\r\n            _initOptions: function (options) {\r\n                options = options || {};\r\n                var transform = options.transform;\r\n                var clip = options.clip;\r\n                if (transform) {\r\n                    options.transform = g.transform(transform);\r\n                }\r\n                if (clip && !clip.id) {\r\n                    clip.id = generateDefinitionId();\r\n                }\r\n                this.options = new OptionsStore(options);\r\n                this.options.addObserver(this);\r\n            },\r\n            transform: function (transform) {\r\n                if (defined(transform)) {\r\n                    this.options.set('transform', g.transform(transform));\r\n                } else {\r\n                    return this.options.get('transform');\r\n                }\r\n            },\r\n            parentTransform: function () {\r\n                var element = this, transformation, parentMatrix;\r\n                while (element.parent) {\r\n                    element = element.parent;\r\n                    transformation = element.transform();\r\n                    if (transformation) {\r\n                        parentMatrix = transformation.matrix().multiplyCopy(parentMatrix || Matrix.unit());\r\n                    }\r\n                }\r\n                if (parentMatrix) {\r\n                    return g.transform(parentMatrix);\r\n                }\r\n            },\r\n            currentTransform: function (parentTransform) {\r\n                var elementTransform = this.transform(), elementMatrix = toMatrix(elementTransform), parentMatrix, combinedMatrix;\r\n                if (!defined(parentTransform)) {\r\n                    parentTransform = this.parentTransform();\r\n                }\r\n                parentMatrix = toMatrix(parentTransform);\r\n                if (elementMatrix && parentMatrix) {\r\n                    combinedMatrix = parentMatrix.multiplyCopy(elementMatrix);\r\n                } else {\r\n                    combinedMatrix = elementMatrix || parentMatrix;\r\n                }\r\n                if (combinedMatrix) {\r\n                    return g.transform(combinedMatrix);\r\n                }\r\n            },\r\n            visible: function (visible) {\r\n                if (defined(visible)) {\r\n                    this.options.set('visible', visible);\r\n                    return this;\r\n                } else {\r\n                    return this.options.get('visible') !== false;\r\n                }\r\n            },\r\n            clip: function (clip) {\r\n                var options = this.options;\r\n                if (defined(clip)) {\r\n                    if (clip && !clip.id) {\r\n                        clip.id = generateDefinitionId();\r\n                    }\r\n                    options.set('clip', clip);\r\n                    return this;\r\n                } else {\r\n                    return options.get('clip');\r\n                }\r\n            },\r\n            opacity: function (value) {\r\n                if (defined(value)) {\r\n                    this.options.set('opacity', value);\r\n                    return this;\r\n                } else {\r\n                    return valueOrDefault(this.options.get('opacity'), 1);\r\n                }\r\n            },\r\n            clippedBBox: function (transformation) {\r\n                var box = this._clippedBBox(transformation);\r\n                if (box) {\r\n                    var clip = this.clip();\r\n                    return clip ? g.Rect.intersect(box, clip.bbox(transformation)) : box;\r\n                }\r\n            },\r\n            containsPoint: function (point, parentTransform) {\r\n                if (this.visible()) {\r\n                    var transform = this.currentTransform(parentTransform);\r\n                    if (transform) {\r\n                        point = point.transformCopy(transform.matrix().invert());\r\n                    }\r\n                    return this._hasFill() && this._containsPoint(point) || this._isOnPath && this._hasStroke() && this._isOnPath(point);\r\n                }\r\n                return false;\r\n            },\r\n            _hasFill: function () {\r\n                var fill = this.options.fill;\r\n                return fill && !util.isTransparent(fill.color);\r\n            },\r\n            _hasStroke: function () {\r\n                var stroke = this.options.stroke;\r\n                return stroke && stroke.width > 0 && !util.isTransparent(stroke.color);\r\n            },\r\n            _clippedBBox: function (transformation) {\r\n                return this.bbox(transformation);\r\n            }\r\n        });\r\n        deepExtend(Element.fn, ObserversMixin);\r\n        var ElementsArray = Class.extend({\r\n            init: function (array) {\r\n                array = array || [];\r\n                this.length = 0;\r\n                this._splice(0, array.length, array);\r\n            },\r\n            elements: function (elements) {\r\n                if (elements) {\r\n                    this._splice(0, this.length, elements);\r\n                    this._change();\r\n                    return this;\r\n                } else {\r\n                    return this.slice(0);\r\n                }\r\n            },\r\n            push: function () {\r\n                var elements = arguments;\r\n                var result = push.apply(this, elements);\r\n                this._add(elements);\r\n                return result;\r\n            },\r\n            slice: slice,\r\n            pop: function () {\r\n                var length = this.length;\r\n                var result = pop.apply(this);\r\n                if (length) {\r\n                    this._remove([result]);\r\n                }\r\n                return result;\r\n            },\r\n            splice: function (index, howMany) {\r\n                var elements = slice.call(arguments, 2);\r\n                var result = this._splice(index, howMany, elements);\r\n                this._change();\r\n                return result;\r\n            },\r\n            shift: function () {\r\n                var length = this.length;\r\n                var result = shift.apply(this);\r\n                if (length) {\r\n                    this._remove([result]);\r\n                }\r\n                return result;\r\n            },\r\n            unshift: function () {\r\n                var elements = arguments;\r\n                var result = unshift.apply(this, elements);\r\n                this._add(elements);\r\n                return result;\r\n            },\r\n            indexOf: function (element) {\r\n                var that = this;\r\n                var idx;\r\n                var length;\r\n                for (idx = 0, length = that.length; idx < length; idx++) {\r\n                    if (that[idx] === element) {\r\n                        return idx;\r\n                    }\r\n                }\r\n                return -1;\r\n            },\r\n            _splice: function (index, howMany, elements) {\r\n                var result = splice.apply(this, [\r\n                    index,\r\n                    howMany\r\n                ].concat(elements));\r\n                this._clearObserver(result);\r\n                this._setObserver(elements);\r\n                return result;\r\n            },\r\n            _add: function (elements) {\r\n                this._setObserver(elements);\r\n                this._change();\r\n            },\r\n            _remove: function (elements) {\r\n                this._clearObserver(elements);\r\n                this._change();\r\n            },\r\n            _setObserver: function (elements) {\r\n                for (var idx = 0; idx < elements.length; idx++) {\r\n                    elements[idx].addObserver(this);\r\n                }\r\n            },\r\n            _clearObserver: function (elements) {\r\n                for (var idx = 0; idx < elements.length; idx++) {\r\n                    elements[idx].removeObserver(this);\r\n                }\r\n            },\r\n            _change: function () {\r\n            }\r\n        });\r\n        deepExtend(ElementsArray.fn, ObserversMixin);\r\n        var Group = Element.extend({\r\n            nodeType: 'Group',\r\n            init: function (options) {\r\n                Element.fn.init.call(this, options);\r\n                this.children = [];\r\n            },\r\n            childrenChange: function (action, items, index) {\r\n                this.trigger('childrenChange', {\r\n                    action: action,\r\n                    items: items,\r\n                    index: index\r\n                });\r\n            },\r\n            append: function () {\r\n                append(this.children, arguments);\r\n                this._reparent(arguments, this);\r\n                this.childrenChange('add', arguments);\r\n                return this;\r\n            },\r\n            insert: function (index, element) {\r\n                this.children.splice(index, 0, element);\r\n                element.parent = this;\r\n                this.childrenChange('add', [element], index);\r\n                return this;\r\n            },\r\n            insertAt: function (element, index) {\r\n                return this.insert(index, element);\r\n            },\r\n            remove: function (element) {\r\n                var index = inArray(element, this.children);\r\n                if (index >= 0) {\r\n                    this.children.splice(index, 1);\r\n                    element.parent = null;\r\n                    this.childrenChange('remove', [element], index);\r\n                }\r\n                return this;\r\n            },\r\n            removeAt: function (index) {\r\n                if (0 <= index && index < this.children.length) {\r\n                    var element = this.children[index];\r\n                    this.children.splice(index, 1);\r\n                    element.parent = null;\r\n                    this.childrenChange('remove', [element], index);\r\n                }\r\n                return this;\r\n            },\r\n            clear: function () {\r\n                var items = this.children;\r\n                this.children = [];\r\n                this._reparent(items, null);\r\n                this.childrenChange('remove', items, 0);\r\n                return this;\r\n            },\r\n            bbox: function (transformation) {\r\n                return elementsBoundingBox(this.children, true, this.currentTransform(transformation));\r\n            },\r\n            rawBBox: function () {\r\n                return elementsBoundingBox(this.children, false);\r\n            },\r\n            _clippedBBox: function (transformation) {\r\n                return elementsClippedBoundingBox(this.children, this.currentTransform(transformation));\r\n            },\r\n            currentTransform: function (transformation) {\r\n                return Element.fn.currentTransform.call(this, transformation) || null;\r\n            },\r\n            containsPoint: function (point, parentTransform) {\r\n                if (this.visible()) {\r\n                    var children = this.children;\r\n                    var transform = this.currentTransform(parentTransform);\r\n                    for (var idx = 0; idx < children.length; idx++) {\r\n                        if (children[idx].containsPoint(point, transform)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            _reparent: function (elements, newParent) {\r\n                for (var i = 0; i < elements.length; i++) {\r\n                    var child = elements[i];\r\n                    var parent = child.parent;\r\n                    if (parent && parent != this && parent.remove) {\r\n                        parent.remove(child);\r\n                    }\r\n                    child.parent = newParent;\r\n                }\r\n            }\r\n        });\r\n        drawing.mixins.Traversable.extend(Group.fn, 'children');\r\n        var Text = Element.extend({\r\n            nodeType: 'Text',\r\n            init: function (content, position, options) {\r\n                Element.fn.init.call(this, options);\r\n                this.content(content);\r\n                this.position(position || new g.Point());\r\n                if (!this.options.font) {\r\n                    this.options.font = '12px sans-serif';\r\n                }\r\n                if (!defined(this.options.fill)) {\r\n                    this.fill('#000');\r\n                }\r\n            },\r\n            content: function (value) {\r\n                if (defined(value)) {\r\n                    this.options.set('content', value);\r\n                    return this;\r\n                } else {\r\n                    return this.options.get('content');\r\n                }\r\n            },\r\n            measure: function () {\r\n                var metrics = util.measureText(this.content(), { font: this.options.get('font') });\r\n                return metrics;\r\n            },\r\n            rect: function () {\r\n                var size = this.measure();\r\n                var pos = this.position().clone();\r\n                return new g.Rect(pos, [\r\n                    size.width,\r\n                    size.height\r\n                ]);\r\n            },\r\n            bbox: function (transformation) {\r\n                var combinedMatrix = toMatrix(this.currentTransform(transformation));\r\n                return this.rect().bbox(combinedMatrix);\r\n            },\r\n            rawBBox: function () {\r\n                return this.rect().bbox();\r\n            },\r\n            _containsPoint: function (point) {\r\n                return this.rect().containsPoint(point);\r\n            }\r\n        });\r\n        drawing.mixins.Paintable.extend(Text.fn);\r\n        definePointAccessors(Text.fn, ['position']);\r\n        var Circle = Element.extend({\r\n            nodeType: 'Circle',\r\n            init: function (geometry, options) {\r\n                Element.fn.init.call(this, options);\r\n                this.geometry(geometry || new g.Circle());\r\n                if (!defined(this.options.stroke)) {\r\n                    this.stroke('#000');\r\n                }\r\n            },\r\n            _bbox: function (matrix) {\r\n                return this._geometry.bbox(matrix);\r\n            },\r\n            rawBBox: function () {\r\n                return this._geometry.bbox();\r\n            },\r\n            _containsPoint: function (point) {\r\n                return this.geometry().containsPoint(point);\r\n            },\r\n            _isOnPath: function (point) {\r\n                return this.geometry()._isOnPath(point, this.options.stroke.width / 2);\r\n            }\r\n        });\r\n        drawing.mixins.Paintable.extend(Circle.fn);\r\n        drawing.mixins.Measurable.extend(Circle.fn);\r\n        defineGeometryAccessors(Circle.fn, ['geometry']);\r\n        var Arc = Element.extend({\r\n            nodeType: 'Arc',\r\n            init: function (geometry, options) {\r\n                Element.fn.init.call(this, options);\r\n                this.geometry(geometry || new g.Arc());\r\n                if (!defined(this.options.stroke)) {\r\n                    this.stroke('#000');\r\n                }\r\n            },\r\n            _bbox: function (matrix) {\r\n                return this._geometry.bbox(matrix);\r\n            },\r\n            rawBBox: function () {\r\n                return this.geometry().bbox();\r\n            },\r\n            toPath: function () {\r\n                var path = new Path();\r\n                var curvePoints = this.geometry().curvePoints();\r\n                if (curvePoints.length > 0) {\r\n                    path.moveTo(curvePoints[0].x, curvePoints[0].y);\r\n                    for (var i = 1; i < curvePoints.length; i += 3) {\r\n                        path.curveTo(curvePoints[i], curvePoints[i + 1], curvePoints[i + 2]);\r\n                    }\r\n                }\r\n                return path;\r\n            },\r\n            _containsPoint: function (point) {\r\n                return this.geometry().containsPoint(point);\r\n            },\r\n            _isOnPath: function (point) {\r\n                return this.geometry()._isOnPath(point, this.options.stroke.width / 2);\r\n            }\r\n        });\r\n        drawing.mixins.Paintable.extend(Arc.fn);\r\n        drawing.mixins.Measurable.extend(Arc.fn);\r\n        defineGeometryAccessors(Arc.fn, ['geometry']);\r\n        var GeometryElementsArray = ElementsArray.extend({\r\n            _change: function () {\r\n                this.geometryChange();\r\n            }\r\n        });\r\n        var Segment = Class.extend({\r\n            init: function (anchor, controlIn, controlOut) {\r\n                this.anchor(anchor || new Point());\r\n                this.controlIn(controlIn);\r\n                this.controlOut(controlOut);\r\n            },\r\n            bboxTo: function (toSegment, matrix) {\r\n                var rect;\r\n                var segmentAnchor = this.anchor().transformCopy(matrix);\r\n                var toSegmentAnchor = toSegment.anchor().transformCopy(matrix);\r\n                if (this.controlOut() && toSegment.controlIn()) {\r\n                    rect = this._curveBoundingBox(segmentAnchor, this.controlOut().transformCopy(matrix), toSegment.controlIn().transformCopy(matrix), toSegmentAnchor);\r\n                } else {\r\n                    rect = this._lineBoundingBox(segmentAnchor, toSegmentAnchor);\r\n                }\r\n                return rect;\r\n            },\r\n            _lineBoundingBox: function (p1, p2) {\r\n                return g.Rect.fromPoints(p1, p2);\r\n            },\r\n            _curveBoundingBox: function (p1, cp1, cp2, p2) {\r\n                var points = [\r\n                        p1,\r\n                        cp1,\r\n                        cp2,\r\n                        p2\r\n                    ], extremesX = this._curveExtremesFor(points, 'x'), extremesY = this._curveExtremesFor(points, 'y'), xLimits = arrayLimits([\r\n                        extremesX.min,\r\n                        extremesX.max,\r\n                        p1.x,\r\n                        p2.x\r\n                    ]), yLimits = arrayLimits([\r\n                        extremesY.min,\r\n                        extremesY.max,\r\n                        p1.y,\r\n                        p2.y\r\n                    ]);\r\n                return g.Rect.fromPoints(new Point(xLimits.min, yLimits.min), new Point(xLimits.max, yLimits.max));\r\n            },\r\n            _curveExtremesFor: function (points, field) {\r\n                var extremes = this._curveExtremes(points[0][field], points[1][field], points[2][field], points[3][field]);\r\n                return {\r\n                    min: this._calculateCurveAt(extremes.min, field, points),\r\n                    max: this._calculateCurveAt(extremes.max, field, points)\r\n                };\r\n            },\r\n            _calculateCurveAt: function (t, field, points) {\r\n                var t1 = 1 - t;\r\n                return pow(t1, 3) * points[0][field] + 3 * pow(t1, 2) * t * points[1][field] + 3 * pow(t, 2) * t1 * points[2][field] + pow(t, 3) * points[3][field];\r\n            },\r\n            _curveExtremes: function (x1, x2, x3, x4) {\r\n                var a = x1 - 3 * x2 + 3 * x3 - x4;\r\n                var b = -2 * (x1 - 2 * x2 + x3);\r\n                var c = x1 - x2;\r\n                var sqrt = math.sqrt(b * b - 4 * a * c);\r\n                var t1 = 0;\r\n                var t2 = 1;\r\n                if (a === 0) {\r\n                    if (b !== 0) {\r\n                        t1 = t2 = -c / b;\r\n                    }\r\n                } else if (!isNaN(sqrt)) {\r\n                    t1 = (-b + sqrt) / (2 * a);\r\n                    t2 = (-b - sqrt) / (2 * a);\r\n                }\r\n                var min = math.max(math.min(t1, t2), 0);\r\n                if (min < 0 || min > 1) {\r\n                    min = 0;\r\n                }\r\n                var max = math.min(math.max(t1, t2), 1);\r\n                if (max > 1 || max < 0) {\r\n                    max = 1;\r\n                }\r\n                return {\r\n                    min: min,\r\n                    max: max\r\n                };\r\n            },\r\n            _intersectionsTo: function (segment, point) {\r\n                var intersectionsCount;\r\n                if (this.controlOut() && segment.controlIn()) {\r\n                    intersectionsCount = g.curveIntersectionsCount([\r\n                        this.anchor(),\r\n                        this.controlOut(),\r\n                        segment.controlIn(),\r\n                        segment.anchor()\r\n                    ], point, this.bboxTo(segment));\r\n                } else {\r\n                    intersectionsCount = g.lineIntersectionsCount(this.anchor(), segment.anchor(), point);\r\n                }\r\n                return intersectionsCount;\r\n            },\r\n            _isOnCurveTo: function (segment, point, width, endSegment) {\r\n                var bbox = this.bboxTo(segment).expand(width, width);\r\n                if (bbox.containsPoint(point)) {\r\n                    var p1 = this.anchor();\r\n                    var p2 = this.controlOut();\r\n                    var p3 = segment.controlIn();\r\n                    var p4 = segment.anchor();\r\n                    if (endSegment == 'start' && p1.distanceTo(point) <= width) {\r\n                        return !g.isOutOfEndPoint(p1, p2, point);\r\n                    } else if (endSegment == 'end' && p4.distanceTo(point) <= width) {\r\n                        return !g.isOutOfEndPoint(p4, p3, point);\r\n                    }\r\n                    var hasRootsInRange = g.hasRootsInRange;\r\n                    var points = [\r\n                        p1,\r\n                        p2,\r\n                        p3,\r\n                        p4\r\n                    ];\r\n                    if (hasRootsInRange(points, point, 'x', 'y', width) || hasRootsInRange(points, point, 'y', 'x', width)) {\r\n                        return true;\r\n                    }\r\n                    var rotation = g.transform().rotate(45, point);\r\n                    var rotatedPoints = [\r\n                        p1.transformCopy(rotation),\r\n                        p2.transformCopy(rotation),\r\n                        p3.transformCopy(rotation),\r\n                        p4.transformCopy(rotation)\r\n                    ];\r\n                    return hasRootsInRange(rotatedPoints, point, 'x', 'y', width) || hasRootsInRange(rotatedPoints, point, 'y', 'x', width);\r\n                }\r\n            },\r\n            _isOnLineTo: function (segment, point, width) {\r\n                var p1 = this.anchor();\r\n                var p2 = segment.anchor();\r\n                var angle = util.deg(math.atan2(p2.y - p1.y, p2.x - p1.x));\r\n                var rect = new g.Rect([\r\n                    p1.x,\r\n                    p1.y - width / 2\r\n                ], [\r\n                    p1.distanceTo(p2),\r\n                    width\r\n                ]);\r\n                return rect.containsPoint(point.transformCopy(g.transform().rotate(-angle, p1)));\r\n            },\r\n            _isOnPathTo: function (segment, point, width, endSegment) {\r\n                var isOnPath;\r\n                if (this.controlOut() && segment.controlIn()) {\r\n                    isOnPath = this._isOnCurveTo(segment, point, width / 2, endSegment);\r\n                } else {\r\n                    isOnPath = this._isOnLineTo(segment, point, width);\r\n                }\r\n                return isOnPath;\r\n            }\r\n        });\r\n        definePointAccessors(Segment.fn, [\r\n            'anchor',\r\n            'controlIn',\r\n            'controlOut'\r\n        ]);\r\n        deepExtend(Segment.fn, ObserversMixin);\r\n        var Path = Element.extend({\r\n            nodeType: 'Path',\r\n            init: function (options) {\r\n                Element.fn.init.call(this, options);\r\n                this.segments = new GeometryElementsArray();\r\n                this.segments.addObserver(this);\r\n                if (!defined(this.options.stroke)) {\r\n                    this.stroke('#000');\r\n                    if (!defined(this.options.stroke.lineJoin)) {\r\n                        this.options.set('stroke.lineJoin', 'miter');\r\n                    }\r\n                }\r\n            },\r\n            moveTo: function (x, y) {\r\n                this.suspend();\r\n                this.segments.elements([]);\r\n                this.resume();\r\n                this.lineTo(x, y);\r\n                return this;\r\n            },\r\n            lineTo: function (x, y) {\r\n                var point = defined(y) ? new Point(x, y) : x, segment = new Segment(point);\r\n                this.segments.push(segment);\r\n                return this;\r\n            },\r\n            curveTo: function (controlOut, controlIn, point) {\r\n                if (this.segments.length > 0) {\r\n                    var lastSegment = last(this.segments);\r\n                    var segment = new Segment(point, controlIn);\r\n                    this.suspend();\r\n                    lastSegment.controlOut(controlOut);\r\n                    this.resume();\r\n                    this.segments.push(segment);\r\n                }\r\n                return this;\r\n            },\r\n            arc: function (startAngle, endAngle, radiusX, radiusY, anticlockwise) {\r\n                if (this.segments.length > 0) {\r\n                    var lastSegment = last(this.segments);\r\n                    var anchor = lastSegment.anchor();\r\n                    var start = util.rad(startAngle);\r\n                    var center = new Point(anchor.x - radiusX * math.cos(start), anchor.y - radiusY * math.sin(start));\r\n                    var arc = new g.Arc(center, {\r\n                        startAngle: startAngle,\r\n                        endAngle: endAngle,\r\n                        radiusX: radiusX,\r\n                        radiusY: radiusY,\r\n                        anticlockwise: anticlockwise\r\n                    });\r\n                    this._addArcSegments(arc);\r\n                }\r\n                return this;\r\n            },\r\n            arcTo: function (end, rx, ry, largeArc, swipe) {\r\n                if (this.segments.length > 0) {\r\n                    var lastSegment = last(this.segments);\r\n                    var anchor = lastSegment.anchor();\r\n                    var arc = g.Arc.fromPoints(anchor, end, rx, ry, largeArc, swipe);\r\n                    this._addArcSegments(arc);\r\n                }\r\n                return this;\r\n            },\r\n            _addArcSegments: function (arc) {\r\n                this.suspend();\r\n                var curvePoints = arc.curvePoints();\r\n                for (var i = 1; i < curvePoints.length; i += 3) {\r\n                    this.curveTo(curvePoints[i], curvePoints[i + 1], curvePoints[i + 2]);\r\n                }\r\n                this.resume();\r\n                this.geometryChange();\r\n            },\r\n            close: function () {\r\n                this.options.closed = true;\r\n                this.geometryChange();\r\n                return this;\r\n            },\r\n            rawBBox: function () {\r\n                return this._bbox();\r\n            },\r\n            _containsPoint: function (point) {\r\n                var segments = this.segments;\r\n                var length = segments.length;\r\n                var intersectionsCount = 0;\r\n                var previous, current;\r\n                for (var idx = 1; idx < length; idx++) {\r\n                    previous = segments[idx - 1];\r\n                    current = segments[idx];\r\n                    intersectionsCount += previous._intersectionsTo(current, point);\r\n                }\r\n                if (this.options.closed || !segments[0].anchor().equals(segments[length - 1].anchor())) {\r\n                    intersectionsCount += g.lineIntersectionsCount(segments[0].anchor(), segments[length - 1].anchor(), point);\r\n                }\r\n                return intersectionsCount % 2 !== 0;\r\n            },\r\n            _isOnPath: function (point, width) {\r\n                var segments = this.segments;\r\n                var length = segments.length;\r\n                width = width || this.options.stroke.width;\r\n                if (length > 1) {\r\n                    if (segments[0]._isOnPathTo(segments[1], point, width, 'start')) {\r\n                        return true;\r\n                    }\r\n                    for (var idx = 2; idx <= length - 2; idx++) {\r\n                        if (segments[idx - 1]._isOnPathTo(segments[idx], point, width)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                    if (segments[length - 2]._isOnPathTo(segments[length - 1], point, width, 'end')) {\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            _bbox: function (matrix) {\r\n                var segments = this.segments;\r\n                var length = segments.length;\r\n                var boundingBox;\r\n                if (length === 1) {\r\n                    var anchor = segments[0].anchor().transformCopy(matrix);\r\n                    boundingBox = new g.Rect(anchor, Size.ZERO);\r\n                } else if (length > 0) {\r\n                    for (var i = 1; i < length; i++) {\r\n                        var segmentBox = segments[i - 1].bboxTo(segments[i], matrix);\r\n                        if (boundingBox) {\r\n                            boundingBox = g.Rect.union(boundingBox, segmentBox);\r\n                        } else {\r\n                            boundingBox = segmentBox;\r\n                        }\r\n                    }\r\n                }\r\n                return boundingBox;\r\n            }\r\n        });\r\n        drawing.mixins.Paintable.extend(Path.fn);\r\n        drawing.mixins.Measurable.extend(Path.fn);\r\n        Path.fromRect = function (rect, options) {\r\n            return new Path(options).moveTo(rect.topLeft()).lineTo(rect.topRight()).lineTo(rect.bottomRight()).lineTo(rect.bottomLeft()).close();\r\n        };\r\n        Path.fromPoints = function (points, options) {\r\n            if (points) {\r\n                var path = new Path(options);\r\n                for (var i = 0; i < points.length; i++) {\r\n                    var pt = Point.create(points[i]);\r\n                    if (pt) {\r\n                        if (i === 0) {\r\n                            path.moveTo(pt);\r\n                        } else {\r\n                            path.lineTo(pt);\r\n                        }\r\n                    }\r\n                }\r\n                return path;\r\n            }\r\n        };\r\n        Path.fromArc = function (arc, options) {\r\n            var path = new Path(options);\r\n            var startAngle = arc.startAngle;\r\n            var start = arc.pointAt(startAngle);\r\n            path.moveTo(start.x, start.y);\r\n            path.arc(startAngle, arc.endAngle, arc.radiusX, arc.radiusY, arc.anticlockwise);\r\n            return path;\r\n        };\r\n        var MultiPath = Element.extend({\r\n            nodeType: 'MultiPath',\r\n            init: function (options) {\r\n                Element.fn.init.call(this, options);\r\n                this.paths = new GeometryElementsArray();\r\n                this.paths.addObserver(this);\r\n                if (!defined(this.options.stroke)) {\r\n                    this.stroke('#000');\r\n                }\r\n            },\r\n            moveTo: function (x, y) {\r\n                var path = new Path();\r\n                path.moveTo(x, y);\r\n                this.paths.push(path);\r\n                return this;\r\n            },\r\n            lineTo: function (x, y) {\r\n                if (this.paths.length > 0) {\r\n                    last(this.paths).lineTo(x, y);\r\n                }\r\n                return this;\r\n            },\r\n            curveTo: function (controlOut, controlIn, point) {\r\n                if (this.paths.length > 0) {\r\n                    last(this.paths).curveTo(controlOut, controlIn, point);\r\n                }\r\n                return this;\r\n            },\r\n            arc: function (startAngle, endAngle, radiusX, radiusY, anticlockwise) {\r\n                if (this.paths.length > 0) {\r\n                    last(this.paths).arc(startAngle, endAngle, radiusX, radiusY, anticlockwise);\r\n                }\r\n                return this;\r\n            },\r\n            arcTo: function (end, rx, ry, largeArc, swipe) {\r\n                if (this.paths.length > 0) {\r\n                    last(this.paths).arcTo(end, rx, ry, largeArc, swipe);\r\n                }\r\n                return this;\r\n            },\r\n            close: function () {\r\n                if (this.paths.length > 0) {\r\n                    last(this.paths).close();\r\n                }\r\n                return this;\r\n            },\r\n            _bbox: function (matrix) {\r\n                return elementsBoundingBox(this.paths, true, matrix);\r\n            },\r\n            rawBBox: function () {\r\n                return elementsBoundingBox(this.paths, false);\r\n            },\r\n            _containsPoint: function (point) {\r\n                var paths = this.paths;\r\n                for (var idx = 0; idx < paths.length; idx++) {\r\n                    if (paths[idx]._containsPoint(point)) {\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            _isOnPath: function (point) {\r\n                var paths = this.paths;\r\n                var width = this.options.stroke.width;\r\n                for (var idx = 0; idx < paths.length; idx++) {\r\n                    if (paths[idx]._isOnPath(point, width)) {\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            _clippedBBox: function (transformation) {\r\n                return elementsClippedBoundingBox(this.paths, this.currentTransform(transformation));\r\n            }\r\n        });\r\n        drawing.mixins.Paintable.extend(MultiPath.fn);\r\n        drawing.mixins.Measurable.extend(MultiPath.fn);\r\n        var Image = Element.extend({\r\n            nodeType: 'Image',\r\n            init: function (src, rect, options) {\r\n                Element.fn.init.call(this, options);\r\n                this.src(src);\r\n                this.rect(rect || new g.Rect());\r\n            },\r\n            src: function (value) {\r\n                if (defined(value)) {\r\n                    this.options.set('src', value);\r\n                    return this;\r\n                } else {\r\n                    return this.options.get('src');\r\n                }\r\n            },\r\n            bbox: function (transformation) {\r\n                var combinedMatrix = toMatrix(this.currentTransform(transformation));\r\n                return this._rect.bbox(combinedMatrix);\r\n            },\r\n            rawBBox: function () {\r\n                return this._rect.bbox();\r\n            },\r\n            _containsPoint: function (point) {\r\n                return this._rect.containsPoint(point);\r\n            },\r\n            _hasFill: function () {\r\n                return this.src();\r\n            }\r\n        });\r\n        defineGeometryAccessors(Image.fn, ['rect']);\r\n        var GradientStop = Class.extend({\r\n            init: function (offset, color, opacity) {\r\n                this.options = new OptionsStore({\r\n                    offset: offset,\r\n                    color: color,\r\n                    opacity: defined(opacity) ? opacity : 1\r\n                });\r\n                this.options.addObserver(this);\r\n            }\r\n        });\r\n        defineOptionsAccessors(GradientStop.fn, [\r\n            'offset',\r\n            'color',\r\n            'opacity'\r\n        ]);\r\n        deepExtend(GradientStop.fn, ObserversMixin);\r\n        GradientStop.create = function (arg) {\r\n            if (defined(arg)) {\r\n                var stop;\r\n                if (arg instanceof GradientStop) {\r\n                    stop = arg;\r\n                } else if (arg.length > 1) {\r\n                    stop = new GradientStop(arg[0], arg[1], arg[2]);\r\n                } else {\r\n                    stop = new GradientStop(arg.offset, arg.color, arg.opacity);\r\n                }\r\n                return stop;\r\n            }\r\n        };\r\n        var StopsArray = ElementsArray.extend({\r\n            _change: function () {\r\n                this.optionsChange({ field: 'stops' });\r\n            }\r\n        });\r\n        var Gradient = Class.extend({\r\n            nodeType: 'gradient',\r\n            init: function (options) {\r\n                this.stops = new StopsArray(this._createStops(options.stops));\r\n                this.stops.addObserver(this);\r\n                this._userSpace = options.userSpace;\r\n                this.id = generateDefinitionId();\r\n            },\r\n            userSpace: function (value) {\r\n                if (defined(value)) {\r\n                    this._userSpace = value;\r\n                    this.optionsChange();\r\n                    return this;\r\n                } else {\r\n                    return this._userSpace;\r\n                }\r\n            },\r\n            _createStops: function (stops) {\r\n                var result = [];\r\n                var idx;\r\n                stops = stops || [];\r\n                for (idx = 0; idx < stops.length; idx++) {\r\n                    result.push(GradientStop.create(stops[idx]));\r\n                }\r\n                return result;\r\n            },\r\n            addStop: function (offset, color, opacity) {\r\n                this.stops.push(new GradientStop(offset, color, opacity));\r\n            },\r\n            removeStop: function (stop) {\r\n                var index = this.stops.indexOf(stop);\r\n                if (index >= 0) {\r\n                    this.stops.splice(index, 1);\r\n                }\r\n            }\r\n        });\r\n        deepExtend(Gradient.fn, ObserversMixin, {\r\n            optionsChange: function (e) {\r\n                this.trigger('optionsChange', {\r\n                    field: 'gradient' + (e ? '.' + e.field : ''),\r\n                    value: this\r\n                });\r\n            },\r\n            geometryChange: function () {\r\n                this.optionsChange();\r\n            }\r\n        });\r\n        var LinearGradient = Gradient.extend({\r\n            init: function (options) {\r\n                options = options || {};\r\n                Gradient.fn.init.call(this, options);\r\n                this.start(options.start || new Point());\r\n                this.end(options.end || new Point(1, 0));\r\n            }\r\n        });\r\n        definePointAccessors(LinearGradient.fn, [\r\n            'start',\r\n            'end'\r\n        ]);\r\n        var RadialGradient = Gradient.extend({\r\n            init: function (options) {\r\n                options = options || {};\r\n                Gradient.fn.init.call(this, options);\r\n                this.center(options.center || new Point());\r\n                this._radius = defined(options.radius) ? options.radius : 1;\r\n                this._fallbackFill = options.fallbackFill;\r\n            },\r\n            radius: function (value) {\r\n                if (defined(value)) {\r\n                    this._radius = value;\r\n                    this.geometryChange();\r\n                    return this;\r\n                } else {\r\n                    return this._radius;\r\n                }\r\n            },\r\n            fallbackFill: function (value) {\r\n                if (defined(value)) {\r\n                    this._fallbackFill = value;\r\n                    this.optionsChange();\r\n                    return this;\r\n                } else {\r\n                    return this._fallbackFill;\r\n                }\r\n            }\r\n        });\r\n        definePointAccessors(RadialGradient.fn, ['center']);\r\n        var Rect = Element.extend({\r\n            nodeType: 'Rect',\r\n            init: function (geometry, options) {\r\n                Element.fn.init.call(this, options);\r\n                this.geometry(geometry || new g.Rect());\r\n                if (!defined(this.options.stroke)) {\r\n                    this.stroke('#000');\r\n                }\r\n            },\r\n            _bbox: function (matrix) {\r\n                return this._geometry.bbox(matrix);\r\n            },\r\n            rawBBox: function () {\r\n                return this._geometry.bbox();\r\n            },\r\n            _containsPoint: function (point) {\r\n                return this._geometry.containsPoint(point);\r\n            },\r\n            _isOnPath: function (point) {\r\n                return this.geometry()._isOnPath(point, this.options.stroke.width / 2);\r\n            }\r\n        });\r\n        drawing.mixins.Paintable.extend(Rect.fn);\r\n        drawing.mixins.Measurable.extend(Rect.fn);\r\n        defineGeometryAccessors(Rect.fn, ['geometry']);\r\n        var Layout = Group.extend({\r\n            init: function (rect, options) {\r\n                Group.fn.init.call(this, kendo.deepExtend({}, this._defaults, options));\r\n                this._rect = rect;\r\n                this._fieldMap = {};\r\n            },\r\n            _defaults: {\r\n                alignContent: START,\r\n                justifyContent: START,\r\n                alignItems: START,\r\n                spacing: 0,\r\n                orientation: HORIZONTAL,\r\n                lineSpacing: 0,\r\n                wrap: true\r\n            },\r\n            rect: function (value) {\r\n                if (value) {\r\n                    this._rect = value;\r\n                    return this;\r\n                } else {\r\n                    return this._rect;\r\n                }\r\n            },\r\n            _initMap: function () {\r\n                var options = this.options;\r\n                var fieldMap = this._fieldMap;\r\n                if (options.orientation == HORIZONTAL) {\r\n                    fieldMap.sizeField = 'width';\r\n                    fieldMap.groupsSizeField = 'height';\r\n                    fieldMap.groupAxis = 'x';\r\n                    fieldMap.groupsAxis = 'y';\r\n                } else {\r\n                    fieldMap.sizeField = 'height';\r\n                    fieldMap.groupsSizeField = 'width';\r\n                    fieldMap.groupAxis = 'y';\r\n                    fieldMap.groupsAxis = 'x';\r\n                }\r\n            },\r\n            reflow: function () {\r\n                if (!this._rect || this.children.length === 0) {\r\n                    return;\r\n                }\r\n                this._initMap();\r\n                if (this.options.transform) {\r\n                    this.transform(null);\r\n                }\r\n                var options = this.options;\r\n                var fieldMap = this._fieldMap;\r\n                var rect = this._rect;\r\n                var groupOptions = this._initGroups();\r\n                var groups = groupOptions.groups;\r\n                var groupsSize = groupOptions.groupsSize;\r\n                var sizeField = fieldMap.sizeField;\r\n                var groupsSizeField = fieldMap.groupsSizeField;\r\n                var groupAxis = fieldMap.groupAxis;\r\n                var groupsAxis = fieldMap.groupsAxis;\r\n                var groupStart = alignStart(groupsSize, rect, options.alignContent, groupsAxis, groupsSizeField);\r\n                var groupOrigin = new Point();\r\n                var elementOrigin = new Point();\r\n                var size = new g.Size();\r\n                var elementStart, bbox, element, group, groupBox;\r\n                for (var groupIdx = 0; groupIdx < groups.length; groupIdx++) {\r\n                    group = groups[groupIdx];\r\n                    groupOrigin[groupAxis] = elementStart = alignStart(group.size, rect, options.justifyContent, groupAxis, sizeField);\r\n                    groupOrigin[groupsAxis] = groupStart;\r\n                    size[sizeField] = group.size;\r\n                    size[groupsSizeField] = group.lineSize;\r\n                    groupBox = new g.Rect(groupOrigin, size);\r\n                    for (var idx = 0; idx < group.bboxes.length; idx++) {\r\n                        element = group.elements[idx];\r\n                        bbox = group.bboxes[idx];\r\n                        elementOrigin[groupAxis] = elementStart;\r\n                        elementOrigin[groupsAxis] = alignStart(bbox.size[groupsSizeField], groupBox, options.alignItems, groupsAxis, groupsSizeField);\r\n                        translateToPoint(elementOrigin, bbox, element);\r\n                        elementStart += bbox.size[sizeField] + options.spacing;\r\n                    }\r\n                    groupStart += group.lineSize + options.lineSpacing;\r\n                }\r\n                if (!options.wrap && group.size > rect.size[sizeField]) {\r\n                    var scale = rect.size[sizeField] / groupBox.size[sizeField];\r\n                    var scaledStart = groupBox.topLeft().scale(scale, scale);\r\n                    var scaledSize = groupBox.size[groupsSizeField] * scale;\r\n                    var newStart = alignStart(scaledSize, rect, options.alignContent, groupsAxis, groupsSizeField);\r\n                    var transform = g.transform();\r\n                    if (groupAxis === 'x') {\r\n                        transform.translate(rect.origin.x - scaledStart.x, newStart - scaledStart.y);\r\n                    } else {\r\n                        transform.translate(newStart - scaledStart.x, rect.origin.y - scaledStart.y);\r\n                    }\r\n                    transform.scale(scale, scale);\r\n                    this.transform(transform);\r\n                }\r\n            },\r\n            _initGroups: function () {\r\n                var options = this.options;\r\n                var children = this.children;\r\n                var lineSpacing = options.lineSpacing;\r\n                var sizeField = this._fieldMap.sizeField;\r\n                var groupsSize = -lineSpacing;\r\n                var groups = [];\r\n                var group = this._newGroup();\r\n                var addGroup = function () {\r\n                    groups.push(group);\r\n                    groupsSize += group.lineSize + lineSpacing;\r\n                };\r\n                var bbox, element;\r\n                for (var idx = 0; idx < children.length; idx++) {\r\n                    element = children[idx];\r\n                    bbox = children[idx].clippedBBox();\r\n                    if (element.visible() && bbox) {\r\n                        if (options.wrap && group.size + bbox.size[sizeField] + options.spacing > this._rect.size[sizeField]) {\r\n                            if (group.bboxes.length === 0) {\r\n                                this._addToGroup(group, bbox, element);\r\n                                addGroup();\r\n                                group = this._newGroup();\r\n                            } else {\r\n                                addGroup();\r\n                                group = this._newGroup();\r\n                                this._addToGroup(group, bbox, element);\r\n                            }\r\n                        } else {\r\n                            this._addToGroup(group, bbox, element);\r\n                        }\r\n                    }\r\n                }\r\n                if (group.bboxes.length) {\r\n                    addGroup();\r\n                }\r\n                return {\r\n                    groups: groups,\r\n                    groupsSize: groupsSize\r\n                };\r\n            },\r\n            _addToGroup: function (group, bbox, element) {\r\n                group.size += bbox.size[this._fieldMap.sizeField] + this.options.spacing;\r\n                group.lineSize = Math.max(bbox.size[this._fieldMap.groupsSizeField], group.lineSize);\r\n                group.bboxes.push(bbox);\r\n                group.elements.push(element);\r\n            },\r\n            _newGroup: function () {\r\n                return {\r\n                    lineSize: 0,\r\n                    size: -this.options.spacing,\r\n                    bboxes: [],\r\n                    elements: []\r\n                };\r\n            }\r\n        });\r\n        function elementsBoundingBox(elements, applyTransform, transformation) {\r\n            var boundingBox;\r\n            for (var i = 0; i < elements.length; i++) {\r\n                var element = elements[i];\r\n                if (element.visible()) {\r\n                    var elementBoundingBox = applyTransform ? element.bbox(transformation) : element.rawBBox();\r\n                    if (elementBoundingBox) {\r\n                        if (boundingBox) {\r\n                            boundingBox = g.Rect.union(boundingBox, elementBoundingBox);\r\n                        } else {\r\n                            boundingBox = elementBoundingBox;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return boundingBox;\r\n        }\r\n        function elementsClippedBoundingBox(elements, transformation) {\r\n            var boundingBox;\r\n            for (var i = 0; i < elements.length; i++) {\r\n                var element = elements[i];\r\n                if (element.visible()) {\r\n                    var elementBoundingBox = element.clippedBBox(transformation);\r\n                    if (elementBoundingBox) {\r\n                        if (boundingBox) {\r\n                            boundingBox = g.Rect.union(boundingBox, elementBoundingBox);\r\n                        } else {\r\n                            boundingBox = elementBoundingBox;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return boundingBox;\r\n        }\r\n        function defineGeometryAccessors(fn, names) {\r\n            for (var i = 0; i < names.length; i++) {\r\n                fn[names[i]] = geometryAccessor(names[i]);\r\n            }\r\n        }\r\n        function geometryAccessor(name) {\r\n            var fieldName = '_' + name;\r\n            return function (value) {\r\n                if (defined(value)) {\r\n                    this._observerField(fieldName, value);\r\n                    this.geometryChange();\r\n                    return this;\r\n                } else {\r\n                    return this[fieldName];\r\n                }\r\n            };\r\n        }\r\n        function definePointAccessors(fn, names) {\r\n            for (var i = 0; i < names.length; i++) {\r\n                fn[names[i]] = pointAccessor(names[i]);\r\n            }\r\n        }\r\n        function pointAccessor(name) {\r\n            var fieldName = '_' + name;\r\n            return function (value) {\r\n                if (defined(value)) {\r\n                    this._observerField(fieldName, Point.create(value));\r\n                    this.geometryChange();\r\n                    return this;\r\n                } else {\r\n                    return this[fieldName];\r\n                }\r\n            };\r\n        }\r\n        function defineOptionsAccessors(fn, names) {\r\n            for (var i = 0; i < names.length; i++) {\r\n                fn[names[i]] = optionsAccessor(names[i]);\r\n            }\r\n        }\r\n        function optionsAccessor(name) {\r\n            return function (value) {\r\n                if (defined(value)) {\r\n                    this.options.set(name, value);\r\n                    return this;\r\n                } else {\r\n                    return this.options.get(name);\r\n                }\r\n            };\r\n        }\r\n        function generateDefinitionId() {\r\n            return 'kdef' + defId++;\r\n        }\r\n        function align(elements, rect, alignment) {\r\n            alignElements(elements, rect, alignment, 'x', 'width');\r\n        }\r\n        function vAlign(elements, rect, alignment) {\r\n            alignElements(elements, rect, alignment, 'y', 'height');\r\n        }\r\n        function stack(elements) {\r\n            stackElements(getStackElements(elements), 'x', 'y', 'width');\r\n        }\r\n        function vStack(elements) {\r\n            stackElements(getStackElements(elements), 'y', 'x', 'height');\r\n        }\r\n        function wrap(elements, rect) {\r\n            return wrapElements(elements, rect, 'x', 'y', 'width');\r\n        }\r\n        function vWrap(elements, rect) {\r\n            return wrapElements(elements, rect, 'y', 'x', 'height');\r\n        }\r\n        function wrapElements(elements, rect, axis, otherAxis, sizeField) {\r\n            var result = [];\r\n            var stacks = getStacks(elements, rect, sizeField);\r\n            var origin = rect.origin.clone();\r\n            var startElement;\r\n            var elementIdx;\r\n            var stack;\r\n            var idx;\r\n            for (idx = 0; idx < stacks.length; idx++) {\r\n                stack = stacks[idx];\r\n                startElement = stack[0];\r\n                origin[otherAxis] = startElement.bbox.origin[otherAxis];\r\n                translateToPoint(origin, startElement.bbox, startElement.element);\r\n                startElement.bbox.origin[axis] = origin[axis];\r\n                stackElements(stack, axis, otherAxis, sizeField);\r\n                result.push([]);\r\n                for (elementIdx = 0; elementIdx < stack.length; elementIdx++) {\r\n                    result[idx].push(stack[elementIdx].element);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        function fit(element, rect) {\r\n            var bbox = element.clippedBBox();\r\n            var elementSize = bbox.size;\r\n            var rectSize = rect.size;\r\n            if (rectSize.width < elementSize.width || rectSize.height < elementSize.height) {\r\n                var scale = math.min(rectSize.width / elementSize.width, rectSize.height / elementSize.height);\r\n                var transform = element.transform() || g.transform();\r\n                transform.scale(scale, scale);\r\n                element.transform(transform);\r\n            }\r\n        }\r\n        function getStacks(elements, rect, sizeField) {\r\n            var maxSize = rect.size[sizeField];\r\n            var stackSize = 0;\r\n            var stacks = [];\r\n            var stack = [];\r\n            var element;\r\n            var size;\r\n            var bbox;\r\n            var addElementToStack = function () {\r\n                stack.push({\r\n                    element: element,\r\n                    bbox: bbox\r\n                });\r\n            };\r\n            for (var idx = 0; idx < elements.length; idx++) {\r\n                element = elements[idx];\r\n                bbox = element.clippedBBox();\r\n                if (bbox) {\r\n                    size = bbox.size[sizeField];\r\n                    if (stackSize + size > maxSize) {\r\n                        if (stack.length) {\r\n                            stacks.push(stack);\r\n                            stack = [];\r\n                            addElementToStack();\r\n                            stackSize = size;\r\n                        } else {\r\n                            addElementToStack();\r\n                            stacks.push(stack);\r\n                            stack = [];\r\n                            stackSize = 0;\r\n                        }\r\n                    } else {\r\n                        addElementToStack();\r\n                        stackSize += size;\r\n                    }\r\n                }\r\n            }\r\n            if (stack.length) {\r\n                stacks.push(stack);\r\n            }\r\n            return stacks;\r\n        }\r\n        function getStackElements(elements) {\r\n            var stackElements = [];\r\n            var element;\r\n            var bbox;\r\n            for (var idx = 0; idx < elements.length; idx++) {\r\n                element = elements[idx];\r\n                bbox = element.clippedBBox();\r\n                if (bbox) {\r\n                    stackElements.push({\r\n                        element: element,\r\n                        bbox: bbox\r\n                    });\r\n                }\r\n            }\r\n            return stackElements;\r\n        }\r\n        function stackElements(elements, stackAxis, otherAxis, sizeField) {\r\n            if (elements.length > 1) {\r\n                var previousBBox = elements[0].bbox;\r\n                var origin = new Point();\r\n                var element;\r\n                var bbox;\r\n                for (var idx = 1; idx < elements.length; idx++) {\r\n                    element = elements[idx].element;\r\n                    bbox = elements[idx].bbox;\r\n                    origin[stackAxis] = previousBBox.origin[stackAxis] + previousBBox.size[sizeField];\r\n                    origin[otherAxis] = bbox.origin[otherAxis];\r\n                    translateToPoint(origin, bbox, element);\r\n                    bbox.origin[stackAxis] = origin[stackAxis];\r\n                    previousBBox = bbox;\r\n                }\r\n            }\r\n        }\r\n        function alignElements(elements, rect, alignment, axis, sizeField) {\r\n            var bbox, point;\r\n            alignment = alignment || 'start';\r\n            for (var idx = 0; idx < elements.length; idx++) {\r\n                bbox = elements[idx].clippedBBox();\r\n                if (bbox) {\r\n                    point = bbox.origin.clone();\r\n                    point[axis] = alignStart(bbox.size[sizeField], rect, alignment, axis, sizeField);\r\n                    translateToPoint(point, bbox, elements[idx]);\r\n                }\r\n            }\r\n        }\r\n        function alignStart(size, rect, align, axis, sizeField) {\r\n            var start;\r\n            if (align == START) {\r\n                start = rect.origin[axis];\r\n            } else if (align == END) {\r\n                start = rect.origin[axis] + rect.size[sizeField] - size;\r\n            } else {\r\n                start = rect.origin[axis] + (rect.size[sizeField] - size) / 2;\r\n            }\r\n            return start;\r\n        }\r\n        function translate(x, y, element) {\r\n            var transofrm = element.transform() || g.transform();\r\n            var matrix = transofrm.matrix();\r\n            matrix.e += x;\r\n            matrix.f += y;\r\n            transofrm.matrix(matrix);\r\n            element.transform(transofrm);\r\n        }\r\n        function translateToPoint(point, bbox, element) {\r\n            translate(point.x - bbox.origin.x, point.y - bbox.origin.y, element);\r\n        }\r\n        deepExtend(drawing, {\r\n            align: align,\r\n            Arc: Arc,\r\n            Circle: Circle,\r\n            Element: Element,\r\n            ElementsArray: ElementsArray,\r\n            fit: fit,\r\n            Gradient: Gradient,\r\n            GradientStop: GradientStop,\r\n            Group: Group,\r\n            Image: Image,\r\n            Layout: Layout,\r\n            LinearGradient: LinearGradient,\r\n            MultiPath: MultiPath,\r\n            Path: Path,\r\n            RadialGradient: RadialGradient,\r\n            Rect: Rect,\r\n            Segment: Segment,\r\n            stack: stack,\r\n            Text: Text,\r\n            vAlign: vAlign,\r\n            vStack: vStack,\r\n            vWrap: vWrap,\r\n            wrap: wrap\r\n        });\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('drawing/parser', ['drawing/shapes'], f);\r\n}(function () {\r\n    (function ($) {\r\n        var kendo = window.kendo, drawing = kendo.drawing, geometry = kendo.geometry, Class = kendo.Class, Point = geometry.Point, deepExtend = kendo.deepExtend, trim = $.trim, util = kendo.util, last = util.last;\r\n        var SEGMENT_REGEX = /([a-df-z]{1})([^a-df-z]*)(z)?/gi, SPLIT_REGEX = /[,\\s]?([+\\-]?(?:\\d*\\.\\d+|\\d+)(?:[eE][+\\-]?\\d+)?)/g, MOVE = 'm', CLOSE = 'z';\r\n        var PathParser = Class.extend({\r\n            parse: function (str, options) {\r\n                var multiPath = new drawing.MultiPath(options);\r\n                var position = new Point();\r\n                var previousCommand;\r\n                str.replace(SEGMENT_REGEX, function (match, element, params, closePath) {\r\n                    var command = element.toLowerCase();\r\n                    var isRelative = command === element;\r\n                    var parameters = parseParameters(trim(params));\r\n                    if (command === MOVE) {\r\n                        if (isRelative) {\r\n                            position.x += parameters[0];\r\n                            position.y += parameters[1];\r\n                        } else {\r\n                            position.x = parameters[0];\r\n                            position.y = parameters[1];\r\n                        }\r\n                        multiPath.moveTo(position.x, position.y);\r\n                        if (parameters.length > 2) {\r\n                            command = 'l';\r\n                            parameters.splice(0, 2);\r\n                        }\r\n                    }\r\n                    if (ShapeMap[command]) {\r\n                        ShapeMap[command](multiPath, {\r\n                            parameters: parameters,\r\n                            position: position,\r\n                            isRelative: isRelative,\r\n                            previousCommand: previousCommand\r\n                        });\r\n                        if (closePath && closePath.toLowerCase() === CLOSE) {\r\n                            multiPath.close();\r\n                        }\r\n                    } else if (command !== MOVE) {\r\n                        throw new Error('Error while parsing SVG path. Unsupported command: ' + command);\r\n                    }\r\n                    previousCommand = command;\r\n                });\r\n                return multiPath;\r\n            }\r\n        });\r\n        var ShapeMap = {\r\n            l: function (path, options) {\r\n                var parameters = options.parameters;\r\n                var position = options.position;\r\n                for (var i = 0; i < parameters.length; i += 2) {\r\n                    var point = new Point(parameters[i], parameters[i + 1]);\r\n                    if (options.isRelative) {\r\n                        point.translateWith(position);\r\n                    }\r\n                    path.lineTo(point.x, point.y);\r\n                    position.x = point.x;\r\n                    position.y = point.y;\r\n                }\r\n            },\r\n            c: function (path, options) {\r\n                var parameters = options.parameters;\r\n                var position = options.position;\r\n                var controlOut, controlIn, point;\r\n                for (var i = 0; i < parameters.length; i += 6) {\r\n                    controlOut = new Point(parameters[i], parameters[i + 1]);\r\n                    controlIn = new Point(parameters[i + 2], parameters[i + 3]);\r\n                    point = new Point(parameters[i + 4], parameters[i + 5]);\r\n                    if (options.isRelative) {\r\n                        controlIn.translateWith(position);\r\n                        controlOut.translateWith(position);\r\n                        point.translateWith(position);\r\n                    }\r\n                    path.curveTo(controlOut, controlIn, point);\r\n                    position.x = point.x;\r\n                    position.y = point.y;\r\n                }\r\n            },\r\n            v: function (path, options) {\r\n                var value = options.isRelative ? 0 : options.position.x;\r\n                toLineParamaters(options.parameters, true, value);\r\n                this.l(path, options);\r\n            },\r\n            h: function (path, options) {\r\n                var value = options.isRelative ? 0 : options.position.y;\r\n                toLineParamaters(options.parameters, false, value);\r\n                this.l(path, options);\r\n            },\r\n            a: function (path, options) {\r\n                var parameters = options.parameters;\r\n                var position = options.position;\r\n                for (var i = 0; i < parameters.length; i += 7) {\r\n                    var radiusX = parameters[i];\r\n                    var radiusY = parameters[i + 1];\r\n                    var largeArc = parameters[i + 3];\r\n                    var swipe = parameters[i + 4];\r\n                    var endPoint = new Point(parameters[i + 5], parameters[i + 6]);\r\n                    if (options.isRelative) {\r\n                        endPoint.translateWith(position);\r\n                    }\r\n                    path.arcTo(endPoint, radiusX, radiusY, largeArc, swipe);\r\n                    position.x = endPoint.x;\r\n                    position.y = endPoint.y;\r\n                }\r\n            },\r\n            s: function (path, options) {\r\n                var parameters = options.parameters;\r\n                var position = options.position;\r\n                var previousCommand = options.previousCommand;\r\n                var controlOut, endPoint, controlIn, lastControlIn;\r\n                if (previousCommand == 's' || previousCommand == 'c') {\r\n                    lastControlIn = last(last(path.paths).segments).controlIn();\r\n                }\r\n                for (var i = 0; i < parameters.length; i += 4) {\r\n                    controlIn = new Point(parameters[i], parameters[i + 1]);\r\n                    endPoint = new Point(parameters[i + 2], parameters[i + 3]);\r\n                    if (options.isRelative) {\r\n                        controlIn.translateWith(position);\r\n                        endPoint.translateWith(position);\r\n                    }\r\n                    if (lastControlIn) {\r\n                        controlOut = reflectionPoint(lastControlIn, position);\r\n                    } else {\r\n                        controlOut = position.clone();\r\n                    }\r\n                    lastControlIn = controlIn;\r\n                    path.curveTo(controlOut, controlIn, endPoint);\r\n                    position.x = endPoint.x;\r\n                    position.y = endPoint.y;\r\n                }\r\n            },\r\n            q: function (path, options) {\r\n                var parameters = options.parameters;\r\n                var position = options.position;\r\n                var cubicControlPoints, endPoint, controlPoint;\r\n                for (var i = 0; i < parameters.length; i += 4) {\r\n                    controlPoint = new Point(parameters[i], parameters[i + 1]);\r\n                    endPoint = new Point(parameters[i + 2], parameters[i + 3]);\r\n                    if (options.isRelative) {\r\n                        controlPoint.translateWith(position);\r\n                        endPoint.translateWith(position);\r\n                    }\r\n                    cubicControlPoints = quadraticToCubicControlPoints(position, controlPoint, endPoint);\r\n                    path.curveTo(cubicControlPoints.controlOut, cubicControlPoints.controlIn, endPoint);\r\n                    position.x = endPoint.x;\r\n                    position.y = endPoint.y;\r\n                }\r\n            },\r\n            t: function (path, options) {\r\n                var parameters = options.parameters;\r\n                var position = options.position;\r\n                var previousCommand = options.previousCommand;\r\n                var cubicControlPoints, controlPoint, endPoint;\r\n                if (previousCommand == 'q' || previousCommand == 't') {\r\n                    var lastSegment = last(last(path.paths).segments);\r\n                    controlPoint = lastSegment.controlIn().clone().translateWith(position.scaleCopy(-1 / 3)).scale(3 / 2);\r\n                }\r\n                for (var i = 0; i < parameters.length; i += 2) {\r\n                    endPoint = new Point(parameters[i], parameters[i + 1]);\r\n                    if (options.isRelative) {\r\n                        endPoint.translateWith(position);\r\n                    }\r\n                    if (controlPoint) {\r\n                        controlPoint = reflectionPoint(controlPoint, position);\r\n                    } else {\r\n                        controlPoint = position.clone();\r\n                    }\r\n                    cubicControlPoints = quadraticToCubicControlPoints(position, controlPoint, endPoint);\r\n                    path.curveTo(cubicControlPoints.controlOut, cubicControlPoints.controlIn, endPoint);\r\n                    position.x = endPoint.x;\r\n                    position.y = endPoint.y;\r\n                }\r\n            }\r\n        };\r\n        function parseParameters(str) {\r\n            var parameters = [];\r\n            str.replace(SPLIT_REGEX, function (match, number) {\r\n                parameters.push(parseFloat(number));\r\n            });\r\n            return parameters;\r\n        }\r\n        function toLineParamaters(parameters, isVertical, value) {\r\n            var insertPosition = isVertical ? 0 : 1;\r\n            for (var i = 0; i < parameters.length; i += 2) {\r\n                parameters.splice(i + insertPosition, 0, value);\r\n            }\r\n        }\r\n        function reflectionPoint(point, center) {\r\n            if (point && center) {\r\n                return center.scaleCopy(2).translate(-point.x, -point.y);\r\n            }\r\n        }\r\n        function quadraticToCubicControlPoints(position, controlPoint, endPoint) {\r\n            var third = 1 / 3;\r\n            controlPoint = controlPoint.clone().scale(2 / 3);\r\n            return {\r\n                controlOut: controlPoint.clone().translateWith(position.scaleCopy(third)),\r\n                controlIn: controlPoint.translateWith(endPoint.scaleCopy(third))\r\n            };\r\n        }\r\n        PathParser.current = new PathParser();\r\n        drawing.Path.parse = function (str, options) {\r\n            return PathParser.current.parse(str, options);\r\n        };\r\n        deepExtend(drawing, { PathParser: PathParser });\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('drawing/search', ['drawing/shapes'], f);\r\n}(function () {\r\n    (function ($) {\r\n        var kendo = window.kendo, drawing = kendo.drawing, geometry = kendo.geometry, Class = kendo.Class, Rect = geometry.Rect, deepExtend = kendo.deepExtend, isArray = $.isArray, inArray = $.inArray, math = Math, LEVEL_STEP = 10000, MAX_LEVEL = 75;\r\n        var QuadRoot = Class.extend({\r\n            init: function () {\r\n                this.shapes = [];\r\n            },\r\n            _add: function (shape, bbox) {\r\n                this.shapes.push({\r\n                    bbox: bbox,\r\n                    shape: shape\r\n                });\r\n                shape._quadNode = this;\r\n            },\r\n            pointShapes: function (point) {\r\n                var shapes = this.shapes;\r\n                var length = shapes.length;\r\n                var result = [];\r\n                for (var idx = 0; idx < length; idx++) {\r\n                    if (shapes[idx].bbox.containsPoint(point)) {\r\n                        result.push(shapes[idx].shape);\r\n                    }\r\n                }\r\n                return result;\r\n            },\r\n            insert: function (shape, bbox) {\r\n                this._add(shape, bbox);\r\n            },\r\n            remove: function (shape) {\r\n                var shapes = this.shapes;\r\n                var length = shapes.length;\r\n                for (var idx = 0; idx < length; idx++) {\r\n                    if (shapes[idx].shape === shape) {\r\n                        shapes.splice(idx, 1);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        var QuadNode = QuadRoot.extend({\r\n            init: function (rect) {\r\n                QuadRoot.fn.init.call(this);\r\n                this.children = [];\r\n                this.rect = rect;\r\n            },\r\n            inBounds: function (rect) {\r\n                var nodeRect = this.rect;\r\n                var nodeBottomRight = nodeRect.bottomRight();\r\n                var bottomRight = rect.bottomRight();\r\n                var inBounds = nodeRect.origin.x <= rect.origin.x && nodeRect.origin.y <= rect.origin.y && bottomRight.x <= nodeBottomRight.x && bottomRight.y <= nodeBottomRight.y;\r\n                return inBounds;\r\n            },\r\n            pointShapes: function (point) {\r\n                var children = this.children;\r\n                var length = children.length;\r\n                var result = QuadRoot.fn.pointShapes.call(this, point);\r\n                for (var idx = 0; idx < length; idx++) {\r\n                    result = result.concat(children[idx].pointShapes(point));\r\n                }\r\n                return result;\r\n            },\r\n            insert: function (shape, bbox) {\r\n                var inserted = false;\r\n                var children = this.children;\r\n                var length = children.length;\r\n                if (this.inBounds(bbox)) {\r\n                    if (!length && this.shapes.length < 4) {\r\n                        this._add(shape, bbox);\r\n                    } else {\r\n                        if (!length) {\r\n                            this._initChildren();\r\n                        }\r\n                        for (var idx = 0; idx < children.length; idx++) {\r\n                            if (children[idx].insert(shape, bbox)) {\r\n                                inserted = true;\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (!inserted) {\r\n                            this._add(shape, bbox);\r\n                        }\r\n                    }\r\n                    inserted = true;\r\n                }\r\n                return inserted;\r\n            },\r\n            _initChildren: function () {\r\n                var rect = this.rect, children = this.children, shapes = this.shapes, center = rect.center(), halfWidth = rect.width() / 2, halfHeight = rect.height() / 2, childIdx, shapeIdx;\r\n                children.push(new QuadNode(new Rect(rect.origin.x, rect.origin.y, halfWidth, halfHeight)), new QuadNode(new Rect(center.x, rect.origin.y, halfWidth, halfHeight)), new QuadNode(new Rect(rect.origin.x, center.y, halfWidth, halfHeight)), new QuadNode(new Rect(center.x, center.y, halfWidth, halfHeight)));\r\n                for (shapeIdx = shapes.length - 1; shapeIdx >= 0; shapeIdx--) {\r\n                    for (childIdx = 0; childIdx < children.length; childIdx++) {\r\n                        if (children[childIdx].insert(shapes[shapeIdx].shape, shapes[shapeIdx].bbox)) {\r\n                            shapes.splice(shapeIdx, 1);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        var ShapesQuadTree = Class.extend({\r\n            ROOT_SIZE: 1000,\r\n            init: function () {\r\n                this.initRoots();\r\n            },\r\n            initRoots: function () {\r\n                this.rootMap = {};\r\n                this.root = new QuadRoot();\r\n                this.rootElements = [];\r\n            },\r\n            clear: function () {\r\n                var that = this;\r\n                var rootElements = that.rootElements;\r\n                for (var idx = 0; idx < rootElements.length; idx++) {\r\n                    this.remove(rootElements[idx]);\r\n                }\r\n                this.initRoots();\r\n            },\r\n            pointShape: function (point) {\r\n                var size = this.ROOT_SIZE;\r\n                var result = this.root.pointShapes(point);\r\n                var sectorRoot = (this.rootMap[math.floor(point.x / size)] || {})[math.floor(point.y / size)];\r\n                if (sectorRoot) {\r\n                    result = result.concat(sectorRoot.pointShapes(point));\r\n                }\r\n                this.assignZindex(result);\r\n                result.sort(zIndexComparer);\r\n                for (var idx = 0; idx < result.length; idx++) {\r\n                    if (result[idx].containsPoint(point)) {\r\n                        return result[idx];\r\n                    }\r\n                }\r\n            },\r\n            assignZindex: function (elements) {\r\n                var element, levelWeight, zIndex, parents;\r\n                for (var idx = 0; idx < elements.length; idx++) {\r\n                    element = elements[idx];\r\n                    zIndex = 0;\r\n                    levelWeight = math.pow(LEVEL_STEP, MAX_LEVEL);\r\n                    parents = [];\r\n                    while (element) {\r\n                        parents.push(element);\r\n                        element = element.parent;\r\n                    }\r\n                    while (parents.length) {\r\n                        element = parents.pop();\r\n                        zIndex += (inArray(element, element.parent ? element.parent.children : this.rootElements) + 1) * levelWeight;\r\n                        levelWeight /= LEVEL_STEP;\r\n                    }\r\n                    elements[idx]._zIndex = zIndex;\r\n                }\r\n            },\r\n            optionsChange: function (e) {\r\n                if (e.field == 'transform' || e.field == 'stroke.width') {\r\n                    this.bboxChange(e.element);\r\n                }\r\n            },\r\n            geometryChange: function (e) {\r\n                this.bboxChange(e.element);\r\n            },\r\n            bboxChange: function (element) {\r\n                if (element.nodeType === 'Group') {\r\n                    for (var idx = 0; idx < element.children.length; idx++) {\r\n                        this.bboxChange(element.children[idx]);\r\n                    }\r\n                } else {\r\n                    if (element._quadNode) {\r\n                        element._quadNode.remove(element);\r\n                    }\r\n                    this._insertShape(element);\r\n                }\r\n            },\r\n            add: function (elements) {\r\n                var elementsArray = isArray(elements) ? elements.slice(0) : [elements];\r\n                this.rootElements.push.apply(this.rootElements, elementsArray);\r\n                this._insert(elementsArray);\r\n            },\r\n            childrenChange: function (e) {\r\n                if (e.action == 'remove') {\r\n                    for (var idx = 0; idx < e.items.length; idx++) {\r\n                        this.remove(e.items[idx]);\r\n                    }\r\n                } else {\r\n                    this._insert(Array.prototype.slice.call(e.items, 0));\r\n                }\r\n            },\r\n            _insert: function (elements) {\r\n                var element;\r\n                while (elements.length > 0) {\r\n                    element = elements.pop();\r\n                    element.addObserver(this);\r\n                    if (element.nodeType == 'Group') {\r\n                        elements.push.apply(elements, element.children);\r\n                    } else {\r\n                        this._insertShape(element);\r\n                    }\r\n                }\r\n            },\r\n            _insertShape: function (shape) {\r\n                var bbox = shape.bbox();\r\n                if (bbox) {\r\n                    var rootSize = this.ROOT_SIZE;\r\n                    var sectors = this.getSectors(bbox);\r\n                    var x = sectors[0][0];\r\n                    var y = sectors[1][0];\r\n                    if (this.inRoot(sectors)) {\r\n                        this.root.insert(shape, bbox);\r\n                    } else {\r\n                        if (!this.rootMap[x]) {\r\n                            this.rootMap[x] = {};\r\n                        }\r\n                        if (!this.rootMap[x][y]) {\r\n                            this.rootMap[x][y] = new QuadNode(new Rect([\r\n                                x * rootSize,\r\n                                y * rootSize\r\n                            ], [\r\n                                rootSize,\r\n                                rootSize\r\n                            ]));\r\n                        }\r\n                        this.rootMap[x][y].insert(shape, bbox);\r\n                    }\r\n                }\r\n            },\r\n            remove: function (element) {\r\n                element.removeObserver(this);\r\n                if (element.nodeType == 'Group') {\r\n                    var children = element.children;\r\n                    for (var idx = 0; idx < children.length; idx++) {\r\n                        this.remove(children[idx]);\r\n                    }\r\n                } else if (element._quadNode) {\r\n                    element._quadNode.remove(element);\r\n                    delete element._quadNode;\r\n                }\r\n            },\r\n            inRoot: function (sectors) {\r\n                return sectors[0].length > 1 || sectors[1].length > 1;\r\n            },\r\n            getSectors: function (rect) {\r\n                var rootSize = this.ROOT_SIZE;\r\n                var bottomRight = rect.bottomRight();\r\n                var bottomX = math.floor(bottomRight.x / rootSize);\r\n                var bottomY = math.floor(bottomRight.y / rootSize);\r\n                var sectors = [\r\n                    [],\r\n                    []\r\n                ];\r\n                for (var x = math.floor(rect.origin.x / rootSize); x <= bottomX; x++) {\r\n                    sectors[0].push(x);\r\n                }\r\n                for (var y = math.floor(rect.origin.y / rootSize); y <= bottomY; y++) {\r\n                    sectors[1].push(y);\r\n                }\r\n                return sectors;\r\n            }\r\n        });\r\n        function zIndexComparer(x1, x2) {\r\n            if (x1._zIndex < x2._zIndex) {\r\n                return 1;\r\n            }\r\n            if (x1._zIndex > x2._zIndex) {\r\n                return -1;\r\n            }\r\n            return 0;\r\n        }\r\n        deepExtend(drawing, { ShapesQuadTree: ShapesQuadTree });\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('drawing/svg', [\r\n        'drawing/shapes',\r\n        'util/main'\r\n    ], f);\r\n}(function () {\r\n    (function ($) {\r\n        var doc = document, kendo = window.kendo, deepExtend = kendo.deepExtend, g = kendo.geometry, d = kendo.drawing, BaseNode = d.BaseNode, util = kendo.util, defined = util.defined, isTransparent = util.isTransparent, renderAttr = util.renderAttr, renderAllAttr = util.renderAllAttr, renderTemplate = util.renderTemplate, inArray = $.inArray;\r\n        var BUTT = 'butt', DASH_ARRAYS = d.DASH_ARRAYS, GRADIENT = 'gradient', NONE = 'none', NS = '.kendo', SOLID = 'solid', SPACE = ' ', SVG_NS = 'http://www.w3.org/2000/svg', TRANSFORM = 'transform', UNDEFINED = 'undefined';\r\n        var Surface = d.Surface.extend({\r\n            init: function (element, options) {\r\n                d.Surface.fn.init.call(this, element, options);\r\n                this._root = new RootNode(this.options);\r\n                renderSVG(this.element[0], this._template(this));\r\n                this._rootElement = this.element[0].firstElementChild;\r\n                alignToScreen(this._rootElement);\r\n                this._root.attachTo(this._rootElement);\r\n                this.element.on('click' + NS, this._click);\r\n                this.element.on('mouseover' + NS, this._mouseenter);\r\n                this.element.on('mouseout' + NS, this._mouseleave);\r\n                this.element.on('mousemove' + NS, this._mousemove);\r\n                this.resize();\r\n            },\r\n            type: 'svg',\r\n            destroy: function () {\r\n                if (this._root) {\r\n                    this._root.destroy();\r\n                    this._root = null;\r\n                    this._rootElement = null;\r\n                    this.element.off(NS);\r\n                }\r\n                d.Surface.fn.destroy.call(this);\r\n            },\r\n            translate: function (offset) {\r\n                var viewBox = kendo.format('{0} {1} {2} {3}', Math.round(offset.x), Math.round(offset.y), this._size.width, this._size.height);\r\n                this._offset = offset;\r\n                this._rootElement.setAttribute('viewBox', viewBox);\r\n            },\r\n            draw: function (element) {\r\n                d.Surface.fn.draw.call(this, element);\r\n                this._root.load([element]);\r\n            },\r\n            clear: function () {\r\n                d.Surface.fn.clear.call(this);\r\n                this._root.clear();\r\n            },\r\n            svg: function () {\r\n                return '<?xml version=\\'1.0\\' ?>' + this._template(this);\r\n            },\r\n            exportVisual: function () {\r\n                var visual = this._visual;\r\n                var offset = this._offset;\r\n                if (offset) {\r\n                    var wrap = new d.Group();\r\n                    wrap.children.push(visual);\r\n                    wrap.transform(g.transform().translate(-offset.x, -offset.y));\r\n                    visual = wrap;\r\n                }\r\n                return visual;\r\n            },\r\n            _resize: function () {\r\n                if (this._offset) {\r\n                    this.translate(this._offset);\r\n                }\r\n            },\r\n            _template: renderTemplate('<svg style=\\'width: 100%; height: 100%; overflow: hidden;\\' ' + 'xmlns=\\'' + SVG_NS + '\\' ' + 'xmlns:xlink=\\'http://www.w3.org/1999/xlink\\' ' + 'version=\\'1.1\\'>#= d._root.render() #</svg>')\r\n        });\r\n        var Node = BaseNode.extend({\r\n            init: function (srcElement) {\r\n                BaseNode.fn.init.call(this, srcElement);\r\n                this.definitions = {};\r\n            },\r\n            destroy: function () {\r\n                if (this.element) {\r\n                    this.element._kendoNode = null;\r\n                    this.element = null;\r\n                }\r\n                this.clearDefinitions();\r\n                BaseNode.fn.destroy.call(this);\r\n            },\r\n            load: function (elements, pos) {\r\n                var node = this, element = node.element, childNode, srcElement, children, i;\r\n                for (i = 0; i < elements.length; i++) {\r\n                    srcElement = elements[i];\r\n                    children = srcElement.children;\r\n                    childNode = new nodeMap[srcElement.nodeType](srcElement);\r\n                    if (defined(pos)) {\r\n                        node.insertAt(childNode, pos);\r\n                    } else {\r\n                        node.append(childNode);\r\n                    }\r\n                    childNode.createDefinitions();\r\n                    if (children && children.length > 0) {\r\n                        childNode.load(children);\r\n                    }\r\n                    if (element) {\r\n                        childNode.attachTo(element, pos);\r\n                    }\r\n                }\r\n            },\r\n            root: function () {\r\n                var root = this;\r\n                while (root.parent) {\r\n                    root = root.parent;\r\n                }\r\n                return root;\r\n            },\r\n            attachTo: function (domElement, pos) {\r\n                var container = doc.createElement('div');\r\n                renderSVG(container, '<svg xmlns=\\'' + SVG_NS + '\\' version=\\'1.1\\'>' + this.render() + '</svg>');\r\n                var element = container.firstChild.firstChild;\r\n                if (element) {\r\n                    if (defined(pos)) {\r\n                        domElement.insertBefore(element, domElement.childNodes[pos] || null);\r\n                    } else {\r\n                        domElement.appendChild(element);\r\n                    }\r\n                    this.setElement(element);\r\n                }\r\n            },\r\n            setElement: function (element) {\r\n                var nodes = this.childNodes, childElement, i;\r\n                if (this.element) {\r\n                    this.element._kendoNode = null;\r\n                }\r\n                this.element = element;\r\n                this.element._kendoNode = this;\r\n                for (i = 0; i < nodes.length; i++) {\r\n                    childElement = element.childNodes[i];\r\n                    nodes[i].setElement(childElement);\r\n                }\r\n            },\r\n            clear: function () {\r\n                this.clearDefinitions();\r\n                if (this.element) {\r\n                    this.element.innerHTML = '';\r\n                }\r\n                var children = this.childNodes;\r\n                for (var i = 0; i < children.length; i++) {\r\n                    children[i].destroy();\r\n                }\r\n                this.childNodes = [];\r\n            },\r\n            removeSelf: function () {\r\n                if (this.element) {\r\n                    var parentNode = this.element.parentNode;\r\n                    if (parentNode) {\r\n                        parentNode.removeChild(this.element);\r\n                    }\r\n                    this.element = null;\r\n                }\r\n                BaseNode.fn.removeSelf.call(this);\r\n            },\r\n            template: renderTemplate('#= d.renderChildren() #'),\r\n            render: function () {\r\n                return this.template(this);\r\n            },\r\n            renderChildren: function () {\r\n                var nodes = this.childNodes, output = '', i;\r\n                for (i = 0; i < nodes.length; i++) {\r\n                    output += nodes[i].render();\r\n                }\r\n                return output;\r\n            },\r\n            optionsChange: function (e) {\r\n                var field = e.field;\r\n                var value = e.value;\r\n                if (field === 'visible') {\r\n                    this.css('display', value ? '' : NONE);\r\n                } else if (DefinitionMap[field] && isDefinition(field, value)) {\r\n                    this.updateDefinition(field, value);\r\n                } else if (field === 'opacity') {\r\n                    this.attr('opacity', value);\r\n                }\r\n                BaseNode.fn.optionsChange.call(this, e);\r\n            },\r\n            attr: function (name, value) {\r\n                if (this.element) {\r\n                    this.element.setAttribute(name, value);\r\n                }\r\n            },\r\n            allAttr: function (attrs) {\r\n                for (var i = 0; i < attrs.length; i++) {\r\n                    this.attr(attrs[i][0], attrs[i][1]);\r\n                }\r\n            },\r\n            css: function (name, value) {\r\n                if (this.element) {\r\n                    this.element.style[name] = value;\r\n                }\r\n            },\r\n            allCss: function (styles) {\r\n                for (var i = 0; i < styles.length; i++) {\r\n                    this.css(styles[i][0], styles[i][1]);\r\n                }\r\n            },\r\n            removeAttr: function (name) {\r\n                if (this.element) {\r\n                    this.element.removeAttribute(name);\r\n                }\r\n            },\r\n            mapTransform: function (transform) {\r\n                var attrs = [];\r\n                if (transform) {\r\n                    attrs.push([\r\n                        TRANSFORM,\r\n                        'matrix(' + transform.matrix().toString(6) + ')'\r\n                    ]);\r\n                }\r\n                return attrs;\r\n            },\r\n            renderTransform: function () {\r\n                return renderAllAttr(this.mapTransform(this.srcElement.transform()));\r\n            },\r\n            transformChange: function (value) {\r\n                if (value) {\r\n                    this.allAttr(this.mapTransform(value));\r\n                } else {\r\n                    this.removeAttr(TRANSFORM);\r\n                }\r\n            },\r\n            mapStyle: function () {\r\n                var options = this.srcElement.options;\r\n                var style = [[\r\n                        'cursor',\r\n                        options.cursor\r\n                    ]];\r\n                if (options.visible === false) {\r\n                    style.push([\r\n                        'display',\r\n                        NONE\r\n                    ]);\r\n                }\r\n                return style;\r\n            },\r\n            renderStyle: function () {\r\n                return renderAttr('style', util.renderStyle(this.mapStyle(true)));\r\n            },\r\n            renderOpacity: function () {\r\n                return renderAttr('opacity', this.srcElement.options.opacity);\r\n            },\r\n            createDefinitions: function () {\r\n                var srcElement = this.srcElement;\r\n                var definitions = this.definitions;\r\n                var definition, field, options, hasDefinitions;\r\n                if (srcElement) {\r\n                    options = srcElement.options;\r\n                    for (field in DefinitionMap) {\r\n                        definition = options.get(field);\r\n                        if (definition && isDefinition(field, definition)) {\r\n                            definitions[field] = definition;\r\n                            hasDefinitions = true;\r\n                        }\r\n                    }\r\n                    if (hasDefinitions) {\r\n                        this.definitionChange({\r\n                            action: 'add',\r\n                            definitions: definitions\r\n                        });\r\n                    }\r\n                }\r\n            },\r\n            definitionChange: function (e) {\r\n                if (this.parent) {\r\n                    this.parent.definitionChange(e);\r\n                }\r\n            },\r\n            updateDefinition: function (type, value) {\r\n                var definitions = this.definitions;\r\n                var current = definitions[type];\r\n                var attr = DefinitionMap[type];\r\n                var definition = {};\r\n                if (current) {\r\n                    definition[type] = current;\r\n                    this.definitionChange({\r\n                        action: 'remove',\r\n                        definitions: definition\r\n                    });\r\n                    delete definitions[type];\r\n                }\r\n                if (!value) {\r\n                    if (current) {\r\n                        this.removeAttr(attr);\r\n                    }\r\n                } else {\r\n                    definition[type] = value;\r\n                    this.definitionChange({\r\n                        action: 'add',\r\n                        definitions: definition\r\n                    });\r\n                    definitions[type] = value;\r\n                    this.attr(attr, refUrl(value.id));\r\n                }\r\n            },\r\n            clearDefinitions: function () {\r\n                var definitions = this.definitions;\r\n                var field;\r\n                for (field in definitions) {\r\n                    this.definitionChange({\r\n                        action: 'remove',\r\n                        definitions: definitions\r\n                    });\r\n                    this.definitions = {};\r\n                    break;\r\n                }\r\n            },\r\n            renderDefinitions: function () {\r\n                return renderAllAttr(this.mapDefinitions());\r\n            },\r\n            mapDefinitions: function () {\r\n                var definitions = this.definitions;\r\n                var attrs = [];\r\n                var field;\r\n                for (field in definitions) {\r\n                    attrs.push([\r\n                        DefinitionMap[field],\r\n                        refUrl(definitions[field].id)\r\n                    ]);\r\n                }\r\n                return attrs;\r\n            }\r\n        });\r\n        var RootNode = Node.extend({\r\n            init: function (options) {\r\n                Node.fn.init.call(this);\r\n                this.options = options;\r\n                this.defs = new DefinitionNode();\r\n            },\r\n            attachTo: function (domElement) {\r\n                this.element = domElement;\r\n                this.defs.attachTo(domElement.firstElementChild);\r\n            },\r\n            clear: function () {\r\n                BaseNode.fn.clear.call(this);\r\n            },\r\n            template: renderTemplate('#=d.defs.render()##= d.renderChildren() #'),\r\n            definitionChange: function (e) {\r\n                this.defs.definitionChange(e);\r\n            }\r\n        });\r\n        var DefinitionNode = Node.extend({\r\n            init: function () {\r\n                Node.fn.init.call(this);\r\n                this.definitionMap = {};\r\n            },\r\n            attachTo: function (domElement) {\r\n                this.element = domElement;\r\n            },\r\n            template: renderTemplate('<defs>#= d.renderChildren()#</defs>'),\r\n            definitionChange: function (e) {\r\n                var definitions = e.definitions;\r\n                var action = e.action;\r\n                if (action == 'add') {\r\n                    this.addDefinitions(definitions);\r\n                } else if (action == 'remove') {\r\n                    this.removeDefinitions(definitions);\r\n                }\r\n            },\r\n            createDefinition: function (type, item) {\r\n                var nodeType;\r\n                if (type == 'clip') {\r\n                    nodeType = ClipNode;\r\n                } else if (type == 'fill') {\r\n                    if (item instanceof d.LinearGradient) {\r\n                        nodeType = LinearGradientNode;\r\n                    } else if (item instanceof d.RadialGradient) {\r\n                        nodeType = RadialGradientNode;\r\n                    }\r\n                }\r\n                return new nodeType(item);\r\n            },\r\n            addDefinitions: function (definitions) {\r\n                for (var field in definitions) {\r\n                    this.addDefinition(field, definitions[field]);\r\n                }\r\n            },\r\n            addDefinition: function (type, srcElement) {\r\n                var definitionMap = this.definitionMap;\r\n                var id = srcElement.id;\r\n                var element = this.element;\r\n                var node, mapItem;\r\n                mapItem = definitionMap[id];\r\n                if (!mapItem) {\r\n                    node = this.createDefinition(type, srcElement);\r\n                    definitionMap[id] = {\r\n                        element: node,\r\n                        count: 1\r\n                    };\r\n                    this.append(node);\r\n                    if (element) {\r\n                        node.attachTo(this.element);\r\n                    }\r\n                } else {\r\n                    mapItem.count++;\r\n                }\r\n            },\r\n            removeDefinitions: function (definitions) {\r\n                for (var field in definitions) {\r\n                    this.removeDefinition(definitions[field]);\r\n                }\r\n            },\r\n            removeDefinition: function (srcElement) {\r\n                var definitionMap = this.definitionMap;\r\n                var id = srcElement.id;\r\n                var mapItem;\r\n                mapItem = definitionMap[id];\r\n                if (mapItem) {\r\n                    mapItem.count--;\r\n                    if (mapItem.count === 0) {\r\n                        this.remove(inArray(mapItem.element, this.childNodes), 1);\r\n                        delete definitionMap[id];\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        var ClipNode = Node.extend({\r\n            init: function (srcElement) {\r\n                Node.fn.init.call(this);\r\n                this.srcElement = srcElement;\r\n                this.id = srcElement.id;\r\n                this.load([srcElement]);\r\n            },\r\n            template: renderTemplate('<clipPath id=\\'#=d.id#\\'>#= d.renderChildren()#</clipPath>')\r\n        });\r\n        var GroupNode = Node.extend({\r\n            template: renderTemplate('<g#= d.renderTransform() + d.renderStyle() + d.renderOpacity() + d.renderDefinitions()#>#= d.renderChildren() #</g>'),\r\n            optionsChange: function (e) {\r\n                if (e.field == TRANSFORM) {\r\n                    this.transformChange(e.value);\r\n                }\r\n                Node.fn.optionsChange.call(this, e);\r\n            }\r\n        });\r\n        var PathNode = Node.extend({\r\n            geometryChange: function () {\r\n                this.attr('d', this.renderData());\r\n                this.invalidate();\r\n            },\r\n            optionsChange: function (e) {\r\n                switch (e.field) {\r\n                case 'fill':\r\n                    if (e.value) {\r\n                        this.allAttr(this.mapFill(e.value));\r\n                    } else {\r\n                        this.removeAttr('fill');\r\n                    }\r\n                    break;\r\n                case 'fill.color':\r\n                    this.allAttr(this.mapFill({ color: e.value }));\r\n                    break;\r\n                case 'stroke':\r\n                    if (e.value) {\r\n                        this.allAttr(this.mapStroke(e.value));\r\n                    } else {\r\n                        this.removeAttr('stroke');\r\n                    }\r\n                    break;\r\n                case TRANSFORM:\r\n                    this.transformChange(e.value);\r\n                    break;\r\n                default:\r\n                    var name = this.attributeMap[e.field];\r\n                    if (name) {\r\n                        this.attr(name, e.value);\r\n                    }\r\n                    break;\r\n                }\r\n                Node.fn.optionsChange.call(this, e);\r\n            },\r\n            attributeMap: {\r\n                'fill.opacity': 'fill-opacity',\r\n                'stroke.color': 'stroke',\r\n                'stroke.width': 'stroke-width',\r\n                'stroke.opacity': 'stroke-opacity'\r\n            },\r\n            content: function () {\r\n                if (this.element) {\r\n                    this.element.textContent = this.srcElement.content();\r\n                }\r\n            },\r\n            renderData: function () {\r\n                return this.printPath(this.srcElement);\r\n            },\r\n            printPath: function (path) {\r\n                var segments = path.segments, length = segments.length;\r\n                if (length > 0) {\r\n                    var parts = [], output, segmentType, currentType, i;\r\n                    for (i = 1; i < length; i++) {\r\n                        segmentType = this.segmentType(segments[i - 1], segments[i]);\r\n                        if (segmentType !== currentType) {\r\n                            currentType = segmentType;\r\n                            parts.push(segmentType);\r\n                        }\r\n                        if (segmentType === 'L') {\r\n                            parts.push(this.printPoints(segments[i].anchor()));\r\n                        } else {\r\n                            parts.push(this.printPoints(segments[i - 1].controlOut(), segments[i].controlIn(), segments[i].anchor()));\r\n                        }\r\n                    }\r\n                    output = 'M' + this.printPoints(segments[0].anchor()) + SPACE + parts.join(SPACE);\r\n                    if (path.options.closed) {\r\n                        output += 'Z';\r\n                    }\r\n                    return output;\r\n                }\r\n            },\r\n            printPoints: function () {\r\n                var points = arguments, length = points.length, i, result = [];\r\n                for (i = 0; i < length; i++) {\r\n                    result.push(points[i].toString(3));\r\n                }\r\n                return result.join(SPACE);\r\n            },\r\n            segmentType: function (segmentStart, segmentEnd) {\r\n                return segmentStart.controlOut() && segmentEnd.controlIn() ? 'C' : 'L';\r\n            },\r\n            mapStroke: function (stroke) {\r\n                var attrs = [];\r\n                if (stroke && !isTransparent(stroke.color)) {\r\n                    attrs.push([\r\n                        'stroke',\r\n                        stroke.color\r\n                    ]);\r\n                    attrs.push([\r\n                        'stroke-width',\r\n                        stroke.width\r\n                    ]);\r\n                    attrs.push([\r\n                        'stroke-linecap',\r\n                        this.renderLinecap(stroke)\r\n                    ]);\r\n                    attrs.push([\r\n                        'stroke-linejoin',\r\n                        stroke.lineJoin\r\n                    ]);\r\n                    if (defined(stroke.opacity)) {\r\n                        attrs.push([\r\n                            'stroke-opacity',\r\n                            stroke.opacity\r\n                        ]);\r\n                    }\r\n                    if (defined(stroke.dashType)) {\r\n                        attrs.push([\r\n                            'stroke-dasharray',\r\n                            this.renderDashType(stroke)\r\n                        ]);\r\n                    }\r\n                } else {\r\n                    attrs.push([\r\n                        'stroke',\r\n                        NONE\r\n                    ]);\r\n                }\r\n                return attrs;\r\n            },\r\n            renderStroke: function () {\r\n                return renderAllAttr(this.mapStroke(this.srcElement.options.stroke));\r\n            },\r\n            renderDashType: function (stroke) {\r\n                var width = stroke.width || 1, dashType = stroke.dashType;\r\n                if (dashType && dashType != SOLID) {\r\n                    var dashArray = DASH_ARRAYS[dashType.toLowerCase()], result = [], i;\r\n                    for (i = 0; i < dashArray.length; i++) {\r\n                        result.push(dashArray[i] * width);\r\n                    }\r\n                    return result.join(' ');\r\n                }\r\n            },\r\n            renderLinecap: function (stroke) {\r\n                var dashType = stroke.dashType, lineCap = stroke.lineCap;\r\n                return dashType && dashType != SOLID ? BUTT : lineCap;\r\n            },\r\n            mapFill: function (fill) {\r\n                var attrs = [];\r\n                if (!(fill && fill.nodeType == GRADIENT)) {\r\n                    if (fill && !isTransparent(fill.color)) {\r\n                        attrs.push([\r\n                            'fill',\r\n                            fill.color\r\n                        ]);\r\n                        if (defined(fill.opacity)) {\r\n                            attrs.push([\r\n                                'fill-opacity',\r\n                                fill.opacity\r\n                            ]);\r\n                        }\r\n                    } else {\r\n                        attrs.push([\r\n                            'fill',\r\n                            NONE\r\n                        ]);\r\n                    }\r\n                }\r\n                return attrs;\r\n            },\r\n            renderFill: function () {\r\n                return renderAllAttr(this.mapFill(this.srcElement.options.fill));\r\n            },\r\n            template: renderTemplate('<path #= d.renderStyle() # #= d.renderOpacity() # ' + '#= kendo.util.renderAttr(\\'d\\', d.renderData()) # ' + '#= d.renderStroke() # ' + '#= d.renderFill() # ' + '#= d.renderDefinitions() # ' + '#= d.renderTransform() #></path>')\r\n        });\r\n        var ArcNode = PathNode.extend({\r\n            renderData: function () {\r\n                return this.printPath(this.srcElement.toPath());\r\n            }\r\n        });\r\n        var MultiPathNode = PathNode.extend({\r\n            renderData: function () {\r\n                var paths = this.srcElement.paths;\r\n                if (paths.length > 0) {\r\n                    var result = [], i;\r\n                    for (i = 0; i < paths.length; i++) {\r\n                        result.push(this.printPath(paths[i]));\r\n                    }\r\n                    return result.join(' ');\r\n                }\r\n            }\r\n        });\r\n        var CircleNode = PathNode.extend({\r\n            geometryChange: function () {\r\n                var center = this.center();\r\n                this.attr('cx', center.x);\r\n                this.attr('cy', center.y);\r\n                this.attr('r', this.radius());\r\n                this.invalidate();\r\n            },\r\n            center: function () {\r\n                return this.srcElement.geometry().center;\r\n            },\r\n            radius: function () {\r\n                return this.srcElement.geometry().radius;\r\n            },\r\n            template: renderTemplate('<circle #= d.renderStyle() # #= d.renderOpacity() # ' + 'cx=\\'#= d.center().x #\\' cy=\\'#= d.center().y #\\' ' + 'r=\\'#= d.radius() #\\' ' + '#= d.renderStroke() # ' + '#= d.renderFill() # ' + '#= d.renderDefinitions() # ' + '#= d.renderTransform() # ></circle>')\r\n        });\r\n        var TextNode = PathNode.extend({\r\n            geometryChange: function () {\r\n                var pos = this.pos();\r\n                this.attr('x', pos.x);\r\n                this.attr('y', pos.y);\r\n                this.invalidate();\r\n            },\r\n            optionsChange: function (e) {\r\n                if (e.field === 'font') {\r\n                    this.attr('style', util.renderStyle(this.mapStyle()));\r\n                    this.geometryChange();\r\n                } else if (e.field === 'content') {\r\n                    PathNode.fn.content.call(this, this.srcElement.content());\r\n                }\r\n                PathNode.fn.optionsChange.call(this, e);\r\n            },\r\n            mapStyle: function (encode) {\r\n                var style = PathNode.fn.mapStyle.call(this, encode);\r\n                var font = this.srcElement.options.font;\r\n                if (encode) {\r\n                    font = kendo.htmlEncode(font);\r\n                }\r\n                style.push([\r\n                    'font',\r\n                    font\r\n                ]);\r\n                return style;\r\n            },\r\n            pos: function () {\r\n                var pos = this.srcElement.position();\r\n                var size = this.srcElement.measure();\r\n                return pos.clone().setY(pos.y + size.baseline);\r\n            },\r\n            renderContent: function () {\r\n                var content = this.srcElement.content();\r\n                content = decodeEntities(content);\r\n                content = kendo.htmlEncode(content);\r\n                return content;\r\n            },\r\n            template: renderTemplate('<text #= d.renderStyle() # #= d.renderOpacity() # ' + 'x=\\'#= this.pos().x #\\' y=\\'#= this.pos().y #\\' ' + '#= d.renderStroke() # ' + '#= d.renderTransform() # ' + '#= d.renderDefinitions() # ' + '#= d.renderFill() #>#= d.renderContent() #</text>')\r\n        });\r\n        var ImageNode = PathNode.extend({\r\n            geometryChange: function () {\r\n                this.allAttr(this.mapPosition());\r\n                this.invalidate();\r\n            },\r\n            optionsChange: function (e) {\r\n                if (e.field === 'src') {\r\n                    this.allAttr(this.mapSource());\r\n                }\r\n                PathNode.fn.optionsChange.call(this, e);\r\n            },\r\n            mapPosition: function () {\r\n                var rect = this.srcElement.rect();\r\n                var tl = rect.topLeft();\r\n                return [\r\n                    [\r\n                        'x',\r\n                        tl.x\r\n                    ],\r\n                    [\r\n                        'y',\r\n                        tl.y\r\n                    ],\r\n                    [\r\n                        'width',\r\n                        rect.width() + 'px'\r\n                    ],\r\n                    [\r\n                        'height',\r\n                        rect.height() + 'px'\r\n                    ]\r\n                ];\r\n            },\r\n            renderPosition: function () {\r\n                return renderAllAttr(this.mapPosition());\r\n            },\r\n            mapSource: function (encode) {\r\n                var src = this.srcElement.src();\r\n                if (encode) {\r\n                    src = kendo.htmlEncode(src);\r\n                }\r\n                return [[\r\n                        'xlink:href',\r\n                        src\r\n                    ]];\r\n            },\r\n            renderSource: function () {\r\n                return renderAllAttr(this.mapSource(true));\r\n            },\r\n            template: renderTemplate('<image preserveAspectRatio=\\'none\\' #= d.renderStyle() # #= d.renderTransform()# #= d.renderOpacity() # ' + '#= d.renderPosition() # #= d.renderSource() # #= d.renderDefinitions()#>' + '</image>')\r\n        });\r\n        var GradientStopNode = Node.extend({\r\n            template: renderTemplate('<stop #=d.renderOffset()# #=d.renderStyle()# />'),\r\n            renderOffset: function () {\r\n                return renderAttr('offset', this.srcElement.offset());\r\n            },\r\n            mapStyle: function () {\r\n                var srcElement = this.srcElement;\r\n                return [\r\n                    [\r\n                        'stop-color',\r\n                        srcElement.color()\r\n                    ],\r\n                    [\r\n                        'stop-opacity',\r\n                        srcElement.opacity()\r\n                    ]\r\n                ];\r\n            },\r\n            optionsChange: function (e) {\r\n                if (e.field == 'offset') {\r\n                    this.attr(e.field, e.value);\r\n                } else if (e.field == 'color' || e.field == 'opacity') {\r\n                    this.css('stop-' + e.field, e.value);\r\n                }\r\n            }\r\n        });\r\n        var GradientNode = Node.extend({\r\n            init: function (srcElement) {\r\n                Node.fn.init.call(this, srcElement);\r\n                this.id = srcElement.id;\r\n                this.loadStops();\r\n            },\r\n            loadStops: function () {\r\n                var srcElement = this.srcElement;\r\n                var stops = srcElement.stops;\r\n                var element = this.element;\r\n                var stopNode;\r\n                var idx;\r\n                for (idx = 0; idx < stops.length; idx++) {\r\n                    stopNode = new GradientStopNode(stops[idx]);\r\n                    this.append(stopNode);\r\n                    if (element) {\r\n                        stopNode.attachTo(element);\r\n                    }\r\n                }\r\n            },\r\n            optionsChange: function (e) {\r\n                if (e.field == 'gradient.stops') {\r\n                    BaseNode.fn.clear.call(this);\r\n                    this.loadStops();\r\n                } else if (e.field == GRADIENT) {\r\n                    this.allAttr(this.mapCoordinates());\r\n                }\r\n            },\r\n            renderCoordinates: function () {\r\n                return renderAllAttr(this.mapCoordinates());\r\n            },\r\n            mapSpace: function () {\r\n                return [\r\n                    'gradientUnits',\r\n                    this.srcElement.userSpace() ? 'userSpaceOnUse' : 'objectBoundingBox'\r\n                ];\r\n            }\r\n        });\r\n        var LinearGradientNode = GradientNode.extend({\r\n            template: renderTemplate('<linearGradient id=\\'#=d.id#\\' #=d.renderCoordinates()#>' + '#= d.renderChildren()#' + '</linearGradient>'),\r\n            mapCoordinates: function () {\r\n                var srcElement = this.srcElement;\r\n                var start = srcElement.start();\r\n                var end = srcElement.end();\r\n                var attrs = [\r\n                    [\r\n                        'x1',\r\n                        start.x\r\n                    ],\r\n                    [\r\n                        'y1',\r\n                        start.y\r\n                    ],\r\n                    [\r\n                        'x2',\r\n                        end.x\r\n                    ],\r\n                    [\r\n                        'y2',\r\n                        end.y\r\n                    ],\r\n                    this.mapSpace()\r\n                ];\r\n                return attrs;\r\n            }\r\n        });\r\n        var RadialGradientNode = GradientNode.extend({\r\n            template: renderTemplate('<radialGradient id=\\'#=d.id#\\' #=d.renderCoordinates()#>' + '#= d.renderChildren()#' + '</radialGradient>'),\r\n            mapCoordinates: function () {\r\n                var srcElement = this.srcElement;\r\n                var center = srcElement.center();\r\n                var radius = srcElement.radius();\r\n                var attrs = [\r\n                    [\r\n                        'cx',\r\n                        center.x\r\n                    ],\r\n                    [\r\n                        'cy',\r\n                        center.y\r\n                    ],\r\n                    [\r\n                        'r',\r\n                        radius\r\n                    ],\r\n                    this.mapSpace()\r\n                ];\r\n                return attrs;\r\n            }\r\n        });\r\n        var RectNode = PathNode.extend({\r\n            geometryChange: function () {\r\n                var geometry = this.srcElement.geometry();\r\n                this.attr('x', geometry.origin.x);\r\n                this.attr('y', geometry.origin.y);\r\n                this.attr('width', geometry.size.width);\r\n                this.attr('height', geometry.size.height);\r\n                this.invalidate();\r\n            },\r\n            size: function () {\r\n                return this.srcElement.geometry().size;\r\n            },\r\n            origin: function () {\r\n                return this.srcElement.geometry().origin;\r\n            },\r\n            template: renderTemplate('<rect #= d.renderStyle() # #= d.renderOpacity() # ' + 'x=\\'#= d.origin().x #\\' y=\\'#= d.origin().y #\\' ' + 'width=\\'#= d.size().width #\\' height=\\'#= d.size().height #\\'' + '#= d.renderStroke() # ' + '#= d.renderFill() # ' + '#= d.renderDefinitions() # ' + '#= d.renderTransform() # />')\r\n        });\r\n        var nodeMap = {\r\n            Group: GroupNode,\r\n            Text: TextNode,\r\n            Path: PathNode,\r\n            MultiPath: MultiPathNode,\r\n            Circle: CircleNode,\r\n            Arc: ArcNode,\r\n            Image: ImageNode,\r\n            Rect: RectNode\r\n        };\r\n        var renderSVG = function (container, svg) {\r\n            container.innerHTML = svg;\r\n        };\r\n        (function () {\r\n            var testFragment = '<svg xmlns=\\'' + SVG_NS + '\\'></svg>', testContainer = doc.createElement('div'), hasParser = typeof DOMParser != UNDEFINED;\r\n            testContainer.innerHTML = testFragment;\r\n            if (hasParser && testContainer.firstChild.namespaceURI != SVG_NS) {\r\n                renderSVG = function (container, svg) {\r\n                    var parser = new DOMParser(), chartDoc = parser.parseFromString(svg, 'text/xml'), importedDoc = doc.adoptNode(chartDoc.documentElement);\r\n                    container.innerHTML = '';\r\n                    container.appendChild(importedDoc);\r\n                };\r\n            }\r\n        }());\r\n        function alignToScreen(element) {\r\n            var ctm;\r\n            try {\r\n                ctm = element.getScreenCTM ? element.getScreenCTM() : null;\r\n            } catch (e) {\r\n            }\r\n            if (ctm) {\r\n                var left = -ctm.e % 1, top = -ctm.f % 1, style = element.style;\r\n                if (left !== 0 || top !== 0) {\r\n                    style.left = left + 'px';\r\n                    style.top = top + 'px';\r\n                }\r\n            }\r\n        }\r\n        function baseUrl() {\r\n            var base = document.getElementsByTagName('base')[0], url = '', href = document.location.href, hashIndex = href.indexOf('#');\r\n            if (base && !kendo.support.browser.msie) {\r\n                if (hashIndex !== -1) {\r\n                    href = href.substring(0, hashIndex);\r\n                }\r\n                url = href;\r\n            }\r\n            return url;\r\n        }\r\n        function refUrl(id) {\r\n            return 'url(' + baseUrl() + '#' + id + ')';\r\n        }\r\n        function exportGroup(group) {\r\n            var root = new RootNode();\r\n            var bbox = group.clippedBBox();\r\n            if (bbox) {\r\n                var origin = bbox.getOrigin();\r\n                var exportRoot = new d.Group();\r\n                exportRoot.transform(g.transform().translate(-origin.x, -origin.y));\r\n                exportRoot.children.push(group);\r\n                group = exportRoot;\r\n            }\r\n            root.load([group]);\r\n            var svg = '<?xml version=\\'1.0\\' ?>' + '<svg xmlns=\\'' + SVG_NS + '\\' ' + 'xmlns:xlink=\\'http://www.w3.org/1999/xlink\\' ' + 'version=\\'1.1\\'>' + root.render() + '</svg>';\r\n            root.destroy();\r\n            return svg;\r\n        }\r\n        function exportSVG(group, options) {\r\n            var svg = exportGroup(group);\r\n            if (!options || !options.raw) {\r\n                svg = 'data:image/svg+xml;base64,' + util.encodeBase64(svg);\r\n            }\r\n            return $.Deferred().resolve(svg).promise();\r\n        }\r\n        function isDefinition(type, value) {\r\n            return type == 'clip' || type == 'fill' && (!value || value.nodeType == GRADIENT);\r\n        }\r\n        function decodeEntities(text) {\r\n            if (!text || !text.indexOf || text.indexOf('&') < 0) {\r\n                return text;\r\n            } else {\r\n                var element = decodeEntities._element;\r\n                element.innerHTML = text;\r\n                return element.textContent || element.innerText;\r\n            }\r\n        }\r\n        decodeEntities._element = document.createElement('span');\r\n        var DefinitionMap = {\r\n            clip: 'clip-path',\r\n            fill: 'fill'\r\n        };\r\n        kendo.support.svg = function () {\r\n            return doc.implementation.hasFeature('http://www.w3.org/TR/SVG11/feature#BasicStructure', '1.1');\r\n        }();\r\n        if (kendo.support.svg) {\r\n            d.SurfaceFactory.current.register('svg', Surface, 10);\r\n        }\r\n        deepExtend(d, {\r\n            exportSVG: exportSVG,\r\n            svg: {\r\n                ArcNode: ArcNode,\r\n                CircleNode: CircleNode,\r\n                ClipNode: ClipNode,\r\n                DefinitionNode: DefinitionNode,\r\n                GradientStopNode: GradientStopNode,\r\n                GroupNode: GroupNode,\r\n                ImageNode: ImageNode,\r\n                LinearGradientNode: LinearGradientNode,\r\n                MultiPathNode: MultiPathNode,\r\n                Node: Node,\r\n                PathNode: PathNode,\r\n                RadialGradientNode: RadialGradientNode,\r\n                RectNode: RectNode,\r\n                RootNode: RootNode,\r\n                Surface: Surface,\r\n                TextNode: TextNode,\r\n                _exportGroup: exportGroup\r\n            }\r\n        });\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('drawing/canvas', [\r\n        'drawing/search',\r\n        'kendo.color'\r\n    ], f);\r\n}(function () {\r\n    (function ($) {\r\n        var doc = document, kendo = window.kendo, deepExtend = kendo.deepExtend, util = kendo.util, defined = util.defined, isTransparent = util.isTransparent, renderTemplate = util.renderTemplate, valueOrDefault = util.valueOrDefault, g = kendo.geometry, d = kendo.drawing, BaseNode = d.BaseNode, proxy = $.proxy;\r\n        var BUTT = 'butt', DASH_ARRAYS = d.DASH_ARRAYS, FRAME_DELAY = 1000 / 60, SOLID = 'solid', NS = '.kendo';\r\n        var Surface = d.Surface.extend({\r\n            init: function (element, options) {\r\n                d.Surface.fn.init.call(this, element, options);\r\n                this.element[0].innerHTML = this._template(this);\r\n                var canvas = this.element[0].firstElementChild;\r\n                canvas.width = $(element).width();\r\n                canvas.height = $(element).height();\r\n                this._rootElement = canvas;\r\n                this._root = new RootNode(canvas);\r\n            },\r\n            destroy: function () {\r\n                d.Surface.fn.destroy.call(this);\r\n                if (this._root) {\r\n                    this._root.destroy();\r\n                    this._root = null;\r\n                }\r\n                if (this._searchTree) {\r\n                    this._searchTree.clear();\r\n                    delete this._searchTree;\r\n                }\r\n                this.element.off(NS);\r\n            },\r\n            type: 'canvas',\r\n            draw: function (element) {\r\n                d.Surface.fn.draw.call(this, element);\r\n                this._root.load([element], undefined, this.options.cors);\r\n                if (this._searchTree) {\r\n                    this._searchTree.add([element]);\r\n                }\r\n            },\r\n            clear: function () {\r\n                d.Surface.fn.clear.call(this);\r\n                this._root.clear();\r\n                if (this._searchTree) {\r\n                    this._searchTree.clear();\r\n                }\r\n            },\r\n            eventTarget: function (e) {\r\n                if (this._searchTree) {\r\n                    var point = this._surfacePoint(e);\r\n                    var shape = this._searchTree.pointShape(point);\r\n                    return shape;\r\n                }\r\n            },\r\n            image: function () {\r\n                var root = this._root;\r\n                var rootElement = this._rootElement;\r\n                var loadingStates = [];\r\n                root.traverse(function (childNode) {\r\n                    if (childNode.loading) {\r\n                        loadingStates.push(childNode.loading);\r\n                    }\r\n                });\r\n                var defer = $.Deferred();\r\n                $.when.apply($, loadingStates).done(function () {\r\n                    root._invalidate();\r\n                    try {\r\n                        var data = rootElement.toDataURL();\r\n                        defer.resolve(data);\r\n                    } catch (e) {\r\n                        defer.reject(e);\r\n                    }\r\n                }).fail(function (e) {\r\n                    defer.reject(e);\r\n                });\r\n                return defer.promise();\r\n            },\r\n            suspendTracking: function () {\r\n                d.Surface.fn.suspendTracking.call(this);\r\n                if (this._searchTree) {\r\n                    this._searchTree.clear();\r\n                    delete this._searchTree;\r\n                }\r\n            },\r\n            resumeTracking: function () {\r\n                d.Surface.fn.resumeTracking.call(this);\r\n                if (!this._searchTree) {\r\n                    this._searchTree = new d.ShapesQuadTree();\r\n                    var childNodes = this._root.childNodes;\r\n                    var rootElements = [];\r\n                    for (var idx = 0; idx < childNodes.length; idx++) {\r\n                        rootElements.push(childNodes[idx].srcElement);\r\n                    }\r\n                    this._searchTree.add(rootElements);\r\n                }\r\n            },\r\n            _resize: function () {\r\n                this._rootElement.width = this._size.width;\r\n                this._rootElement.height = this._size.height;\r\n                this._root.invalidate();\r\n            },\r\n            _template: renderTemplate('<canvas style=\\'width: 100%; height: 100%;\\'></canvas>'),\r\n            _enableTracking: function () {\r\n                this._searchTree = new d.ShapesQuadTree();\r\n                this._mouseTrackHandler = proxy(this._trackMouse, this);\r\n                this.element.on('click' + NS, this._mouseTrackHandler);\r\n                this.element.on('mousemove' + NS, this._mouseTrackHandler);\r\n                d.Surface.fn._enableTracking.call(this);\r\n            },\r\n            _trackMouse: function (e) {\r\n                if (this._suspendedTracking) {\r\n                    return;\r\n                }\r\n                var shape = this.eventTarget(e);\r\n                if (e.type != 'click') {\r\n                    var currentShape = this._currentShape;\r\n                    if (currentShape && currentShape !== shape) {\r\n                        this.trigger('mouseleave', {\r\n                            element: currentShape,\r\n                            originalEvent: e,\r\n                            type: 'mouseleave'\r\n                        });\r\n                    }\r\n                    if (shape && currentShape !== shape) {\r\n                        this.trigger('mouseenter', {\r\n                            element: shape,\r\n                            originalEvent: e,\r\n                            type: 'mouseenter'\r\n                        });\r\n                    }\r\n                    this.trigger('mousemove', {\r\n                        element: shape,\r\n                        originalEvent: e,\r\n                        type: 'mousemove'\r\n                    });\r\n                    this._currentShape = shape;\r\n                } else if (shape) {\r\n                    this.trigger('click', {\r\n                        element: shape,\r\n                        originalEvent: e,\r\n                        type: 'click'\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        var Node = BaseNode.extend({\r\n            init: function (srcElement) {\r\n                BaseNode.fn.init.call(this, srcElement);\r\n                if (srcElement) {\r\n                    this.initClip();\r\n                }\r\n            },\r\n            initClip: function () {\r\n                var clip = this.srcElement.clip();\r\n                if (clip) {\r\n                    this.clip = clip;\r\n                    clip.addObserver(this);\r\n                }\r\n            },\r\n            clear: function () {\r\n                if (this.srcElement) {\r\n                    this.srcElement.removeObserver(this);\r\n                }\r\n                this.clearClip();\r\n                BaseNode.fn.clear.call(this);\r\n            },\r\n            clearClip: function () {\r\n                if (this.clip) {\r\n                    this.clip.removeObserver(this);\r\n                    delete this.clip;\r\n                }\r\n            },\r\n            setClip: function (ctx) {\r\n                if (this.clip) {\r\n                    ctx.beginPath();\r\n                    PathNode.fn.renderPoints(ctx, this.clip);\r\n                    ctx.clip();\r\n                }\r\n            },\r\n            optionsChange: function (e) {\r\n                if (e.field == 'clip') {\r\n                    this.clearClip();\r\n                    this.initClip();\r\n                }\r\n                BaseNode.fn.optionsChange.call(this, e);\r\n            },\r\n            setTransform: function (ctx) {\r\n                if (this.srcElement) {\r\n                    var transform = this.srcElement.transform();\r\n                    if (transform) {\r\n                        ctx.transform.apply(ctx, transform.matrix().toArray(6));\r\n                    }\r\n                }\r\n            },\r\n            loadElements: function (elements, pos, cors) {\r\n                var node = this, childNode, srcElement, children, i;\r\n                for (i = 0; i < elements.length; i++) {\r\n                    srcElement = elements[i];\r\n                    children = srcElement.children;\r\n                    childNode = new nodeMap[srcElement.nodeType](srcElement, cors);\r\n                    if (children && children.length > 0) {\r\n                        childNode.load(children, pos, cors);\r\n                    }\r\n                    if (defined(pos)) {\r\n                        node.insertAt(childNode, pos);\r\n                    } else {\r\n                        node.append(childNode);\r\n                    }\r\n                }\r\n            },\r\n            load: function (elements, pos, cors) {\r\n                this.loadElements(elements, pos, cors);\r\n                this.invalidate();\r\n            },\r\n            setOpacity: function (ctx) {\r\n                if (this.srcElement) {\r\n                    var opacity = this.srcElement.opacity();\r\n                    if (defined(opacity)) {\r\n                        this.globalAlpha(ctx, opacity);\r\n                    }\r\n                }\r\n            },\r\n            globalAlpha: function (ctx, value) {\r\n                if (value && ctx.globalAlpha) {\r\n                    value *= ctx.globalAlpha;\r\n                }\r\n                ctx.globalAlpha = value;\r\n            },\r\n            visible: function () {\r\n                var src = this.srcElement;\r\n                return !src || src && src.options.visible !== false;\r\n            }\r\n        });\r\n        var GroupNode = Node.extend({\r\n            renderTo: function (ctx) {\r\n                if (!this.visible()) {\r\n                    return;\r\n                }\r\n                ctx.save();\r\n                this.setTransform(ctx);\r\n                this.setClip(ctx);\r\n                this.setOpacity(ctx);\r\n                var childNodes = this.childNodes;\r\n                for (var i = 0; i < childNodes.length; i++) {\r\n                    var child = childNodes[i];\r\n                    if (child.visible()) {\r\n                        child.renderTo(ctx);\r\n                    }\r\n                }\r\n                ctx.restore();\r\n            }\r\n        });\r\n        d.mixins.Traversable.extend(GroupNode.fn, 'childNodes');\r\n        var RootNode = GroupNode.extend({\r\n            init: function (canvas) {\r\n                GroupNode.fn.init.call(this);\r\n                this.canvas = canvas;\r\n                this.ctx = canvas.getContext('2d');\r\n                var invalidateHandler = proxy(this._invalidate, this);\r\n                this.invalidate = kendo.throttle(function () {\r\n                    kendo.animationFrame(invalidateHandler);\r\n                }, FRAME_DELAY);\r\n            },\r\n            destroy: function () {\r\n                GroupNode.fn.destroy.call(this);\r\n                this.canvas = null;\r\n                this.ctx = null;\r\n            },\r\n            load: function (elements, pos, cors) {\r\n                this.loadElements(elements, pos, cors);\r\n                this._invalidate();\r\n            },\r\n            _invalidate: function () {\r\n                if (!this.ctx) {\r\n                    return;\r\n                }\r\n                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n                this.renderTo(this.ctx);\r\n            }\r\n        });\r\n        d.mixins.Traversable.extend(RootNode.fn, 'childNodes');\r\n        var PathNode = Node.extend({\r\n            renderTo: function (ctx) {\r\n                ctx.save();\r\n                this.setTransform(ctx);\r\n                this.setClip(ctx);\r\n                this.setOpacity(ctx);\r\n                ctx.beginPath();\r\n                this.renderPoints(ctx, this.srcElement);\r\n                this.setLineDash(ctx);\r\n                this.setLineCap(ctx);\r\n                this.setLineJoin(ctx);\r\n                this.setFill(ctx);\r\n                this.setStroke(ctx);\r\n                ctx.restore();\r\n            },\r\n            setFill: function (ctx) {\r\n                var fill = this.srcElement.options.fill;\r\n                var hasFill = false;\r\n                if (fill) {\r\n                    if (fill.nodeType == 'gradient') {\r\n                        this.setGradientFill(ctx, fill);\r\n                        hasFill = true;\r\n                    } else if (!isTransparent(fill.color)) {\r\n                        ctx.fillStyle = fill.color;\r\n                        ctx.save();\r\n                        this.globalAlpha(ctx, fill.opacity);\r\n                        ctx.fill();\r\n                        ctx.restore();\r\n                        hasFill = true;\r\n                    }\r\n                }\r\n                return hasFill;\r\n            },\r\n            setGradientFill: function (ctx, fill) {\r\n                var bbox = this.srcElement.rawBBox();\r\n                var gradient;\r\n                if (fill instanceof d.LinearGradient) {\r\n                    var start = fill.start();\r\n                    var end = fill.end();\r\n                    gradient = ctx.createLinearGradient(start.x, start.y, end.x, end.y);\r\n                } else if (fill instanceof d.RadialGradient) {\r\n                    var center = fill.center();\r\n                    gradient = ctx.createRadialGradient(center.x, center.y, 0, center.x, center.y, fill.radius());\r\n                }\r\n                addGradientStops(gradient, fill.stops);\r\n                ctx.save();\r\n                if (!fill.userSpace()) {\r\n                    ctx.transform(bbox.width(), 0, 0, bbox.height(), bbox.origin.x, bbox.origin.y);\r\n                }\r\n                ctx.fillStyle = gradient;\r\n                ctx.fill();\r\n                ctx.restore();\r\n            },\r\n            setStroke: function (ctx) {\r\n                var stroke = this.srcElement.options.stroke;\r\n                if (stroke && !isTransparent(stroke.color) && stroke.width > 0) {\r\n                    ctx.strokeStyle = stroke.color;\r\n                    ctx.lineWidth = valueOrDefault(stroke.width, 1);\r\n                    ctx.save();\r\n                    this.globalAlpha(ctx, stroke.opacity);\r\n                    ctx.stroke();\r\n                    ctx.restore();\r\n                    return true;\r\n                }\r\n            },\r\n            dashType: function () {\r\n                var stroke = this.srcElement.options.stroke;\r\n                if (stroke && stroke.dashType) {\r\n                    return stroke.dashType.toLowerCase();\r\n                }\r\n            },\r\n            setLineDash: function (ctx) {\r\n                var dashType = this.dashType();\r\n                if (dashType && dashType != SOLID) {\r\n                    var dashArray = DASH_ARRAYS[dashType];\r\n                    if (ctx.setLineDash) {\r\n                        ctx.setLineDash(dashArray);\r\n                    } else {\r\n                        ctx.mozDash = dashArray;\r\n                        ctx.webkitLineDash = dashArray;\r\n                    }\r\n                }\r\n            },\r\n            setLineCap: function (ctx) {\r\n                var dashType = this.dashType();\r\n                var stroke = this.srcElement.options.stroke;\r\n                if (dashType && dashType !== SOLID) {\r\n                    ctx.lineCap = BUTT;\r\n                } else if (stroke && stroke.lineCap) {\r\n                    ctx.lineCap = stroke.lineCap;\r\n                }\r\n            },\r\n            setLineJoin: function (ctx) {\r\n                var stroke = this.srcElement.options.stroke;\r\n                if (stroke && stroke.lineJoin) {\r\n                    ctx.lineJoin = stroke.lineJoin;\r\n                }\r\n            },\r\n            renderPoints: function (ctx, path) {\r\n                var segments = path.segments;\r\n                if (segments.length === 0) {\r\n                    return;\r\n                }\r\n                var seg = segments[0];\r\n                var anchor = seg.anchor();\r\n                ctx.moveTo(anchor.x, anchor.y);\r\n                for (var i = 1; i < segments.length; i++) {\r\n                    seg = segments[i];\r\n                    anchor = seg.anchor();\r\n                    var prevSeg = segments[i - 1];\r\n                    var prevOut = prevSeg.controlOut();\r\n                    var controlIn = seg.controlIn();\r\n                    if (prevOut && controlIn) {\r\n                        ctx.bezierCurveTo(prevOut.x, prevOut.y, controlIn.x, controlIn.y, anchor.x, anchor.y);\r\n                    } else {\r\n                        ctx.lineTo(anchor.x, anchor.y);\r\n                    }\r\n                }\r\n                if (path.options.closed) {\r\n                    ctx.closePath();\r\n                }\r\n            }\r\n        });\r\n        var MultiPathNode = PathNode.extend({\r\n            renderPoints: function (ctx) {\r\n                var paths = this.srcElement.paths;\r\n                for (var i = 0; i < paths.length; i++) {\r\n                    PathNode.fn.renderPoints(ctx, paths[i]);\r\n                }\r\n            }\r\n        });\r\n        var CircleNode = PathNode.extend({\r\n            renderPoints: function (ctx) {\r\n                var geometry = this.srcElement.geometry();\r\n                var c = geometry.center;\r\n                var r = geometry.radius;\r\n                ctx.arc(c.x, c.y, r, 0, Math.PI * 2);\r\n            }\r\n        });\r\n        var ArcNode = PathNode.extend({\r\n            renderPoints: function (ctx) {\r\n                var path = this.srcElement.toPath();\r\n                PathNode.fn.renderPoints.call(this, ctx, path);\r\n            }\r\n        });\r\n        var TextNode = PathNode.extend({\r\n            renderTo: function (ctx) {\r\n                var text = this.srcElement;\r\n                var pos = text.position();\r\n                var size = text.measure();\r\n                ctx.save();\r\n                this.setTransform(ctx);\r\n                this.setClip(ctx);\r\n                this.setOpacity(ctx);\r\n                ctx.beginPath();\r\n                ctx.font = text.options.font;\r\n                if (this.setFill(ctx)) {\r\n                    ctx.fillText(text.content(), pos.x, pos.y + size.baseline);\r\n                }\r\n                if (this.setStroke(ctx)) {\r\n                    this.setLineDash(ctx);\r\n                    ctx.strokeText(text.content(), pos.x, pos.y + size.baseline);\r\n                }\r\n                ctx.restore();\r\n            }\r\n        });\r\n        var ImageNode = PathNode.extend({\r\n            init: function (srcElement, cors) {\r\n                PathNode.fn.init.call(this, srcElement);\r\n                this.onLoad = proxy(this.onLoad, this);\r\n                this.onError = proxy(this.onError, this);\r\n                this.loading = $.Deferred();\r\n                var img = this.img = new Image();\r\n                if (cors && !/^data:/i.test(srcElement.src())) {\r\n                    img.crossOrigin = cors;\r\n                }\r\n                img.src = srcElement.src();\r\n                if (img.complete) {\r\n                    this.onLoad();\r\n                } else {\r\n                    img.onload = this.onLoad;\r\n                    img.onerror = this.onError;\r\n                }\r\n            },\r\n            renderTo: function (ctx) {\r\n                if (this.loading.state() === 'resolved') {\r\n                    ctx.save();\r\n                    this.setTransform(ctx);\r\n                    this.setClip(ctx);\r\n                    this.drawImage(ctx);\r\n                    ctx.restore();\r\n                }\r\n            },\r\n            optionsChange: function (e) {\r\n                if (e.field === 'src') {\r\n                    this.loading = $.Deferred();\r\n                    this.img.src = this.srcElement.src();\r\n                } else {\r\n                    PathNode.fn.optionsChange.call(this, e);\r\n                }\r\n            },\r\n            onLoad: function () {\r\n                this.loading.resolve();\r\n                this.invalidate();\r\n            },\r\n            onError: function () {\r\n                this.loading.reject(new Error('Unable to load image \\'' + this.img.src + '\\'. Check for connectivity and verify CORS headers.'));\r\n            },\r\n            drawImage: function (ctx) {\r\n                var rect = this.srcElement.rect();\r\n                var tl = rect.topLeft();\r\n                ctx.drawImage(this.img, tl.x, tl.y, rect.width(), rect.height());\r\n            }\r\n        });\r\n        var RectNode = PathNode.extend({\r\n            renderPoints: function (ctx) {\r\n                var geometry = this.srcElement.geometry();\r\n                var origin = geometry.origin;\r\n                var size = geometry.size;\r\n                ctx.rect(origin.x, origin.y, size.width, size.height);\r\n            }\r\n        });\r\n        function exportImage(group, options) {\r\n            var defaults = {\r\n                width: '800px',\r\n                height: '600px',\r\n                cors: 'Anonymous'\r\n            };\r\n            var bbox = group.clippedBBox();\r\n            if (bbox) {\r\n                var origin = bbox.getOrigin();\r\n                var exportRoot = new d.Group();\r\n                exportRoot.transform(g.transform().translate(-origin.x, -origin.y));\r\n                exportRoot.children.push(group);\r\n                group = exportRoot;\r\n                var size = bbox.getSize();\r\n                defaults.width = size.width + 'px';\r\n                defaults.height = size.height + 'px';\r\n            }\r\n            options = deepExtend(defaults, options);\r\n            var container = $('<div />').css({\r\n                display: 'none',\r\n                width: options.width,\r\n                height: options.height\r\n            }).appendTo(document.body);\r\n            var surface = new Surface(container, options);\r\n            surface.draw(group);\r\n            var promise = surface.image();\r\n            promise.always(function () {\r\n                surface.destroy();\r\n                container.remove();\r\n            });\r\n            return promise;\r\n        }\r\n        var nodeMap = {\r\n            Group: GroupNode,\r\n            Text: TextNode,\r\n            Path: PathNode,\r\n            MultiPath: MultiPathNode,\r\n            Circle: CircleNode,\r\n            Arc: ArcNode,\r\n            Image: ImageNode,\r\n            Rect: RectNode\r\n        };\r\n        function addGradientStops(gradient, stops) {\r\n            var color, stop, idx;\r\n            for (idx = 0; idx < stops.length; idx++) {\r\n                stop = stops[idx];\r\n                color = kendo.parseColor(stop.color());\r\n                color.a *= stop.opacity();\r\n                gradient.addColorStop(stop.offset(), color.toCssRgba());\r\n            }\r\n        }\r\n        kendo.support.canvas = function () {\r\n            return !!doc.createElement('canvas').getContext;\r\n        }();\r\n        if (kendo.support.canvas) {\r\n            d.SurfaceFactory.current.register('canvas', Surface, 20);\r\n        }\r\n        deepExtend(kendo.drawing, {\r\n            exportImage: exportImage,\r\n            canvas: {\r\n                ArcNode: ArcNode,\r\n                CircleNode: CircleNode,\r\n                GroupNode: GroupNode,\r\n                ImageNode: ImageNode,\r\n                MultiPathNode: MultiPathNode,\r\n                Node: Node,\r\n                PathNode: PathNode,\r\n                RectNode: RectNode,\r\n                RootNode: RootNode,\r\n                Surface: Surface,\r\n                TextNode: TextNode\r\n            }\r\n        });\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('drawing/vml', [\r\n        'drawing/shapes',\r\n        'kendo.color'\r\n    ], f);\r\n}(function () {\r\n    (function ($) {\r\n        var doc = document, math = Math, atan2 = math.atan2, ceil = math.ceil, sqrt = math.sqrt, kendo = window.kendo, deepExtend = kendo.deepExtend, noop = $.noop, d = kendo.drawing, BaseNode = d.BaseNode, g = kendo.geometry, toMatrix = g.toMatrix, Color = kendo.Color, util = kendo.util, isTransparent = util.isTransparent, defined = util.defined, deg = util.deg, round = util.round, valueOrDefault = util.valueOrDefault;\r\n        var NONE = 'none', NS = '.kendo', COORDINATE_MULTIPLE = 100, COORDINATE_SIZE = COORDINATE_MULTIPLE * COORDINATE_MULTIPLE, GRADIENT = 'gradient', TRANSFORM_PRECISION = 4;\r\n        var Surface = d.Surface.extend({\r\n            init: function (element, options) {\r\n                d.Surface.fn.init.call(this, element, options);\r\n                enableVML();\r\n                this.element.empty();\r\n                this._root = new RootNode();\r\n                this._root.attachTo(this.element[0]);\r\n                this.element.on('click' + NS, this._click);\r\n                this.element.on('mouseover' + NS, this._mouseenter);\r\n                this.element.on('mouseout' + NS, this._mouseleave);\r\n                this.element.on('mousemove' + NS, this._mousemove);\r\n            },\r\n            type: 'vml',\r\n            destroy: function () {\r\n                if (this._root) {\r\n                    this._root.destroy();\r\n                    this._root = null;\r\n                    this.element.off(NS);\r\n                }\r\n                d.Surface.fn.destroy.call(this);\r\n            },\r\n            draw: function (element) {\r\n                d.Surface.fn.draw.call(this, element);\r\n                this._root.load([element], undefined, null);\r\n            },\r\n            clear: function () {\r\n                d.Surface.fn.clear.call(this);\r\n                this._root.clear();\r\n            }\r\n        });\r\n        var Node = BaseNode.extend({\r\n            init: function (srcElement) {\r\n                BaseNode.fn.init.call(this, srcElement);\r\n                this.createElement();\r\n                this.attachReference();\r\n            },\r\n            observe: noop,\r\n            destroy: function () {\r\n                if (this.element) {\r\n                    this.element._kendoNode = null;\r\n                    this.element = null;\r\n                }\r\n                BaseNode.fn.destroy.call(this);\r\n            },\r\n            clear: function () {\r\n                if (this.element) {\r\n                    this.element.innerHTML = '';\r\n                }\r\n                var children = this.childNodes;\r\n                for (var i = 0; i < children.length; i++) {\r\n                    children[i].destroy();\r\n                }\r\n                this.childNodes = [];\r\n            },\r\n            removeSelf: function () {\r\n                if (this.element) {\r\n                    this.element.parentNode.removeChild(this.element);\r\n                    this.element = null;\r\n                }\r\n                BaseNode.fn.removeSelf.call(this);\r\n            },\r\n            createElement: function () {\r\n                this.element = doc.createElement('div');\r\n            },\r\n            attachReference: function () {\r\n                this.element._kendoNode = this;\r\n            },\r\n            load: function (elements, pos, transform, opacity) {\r\n                opacity = valueOrDefault(opacity, 1);\r\n                if (this.srcElement) {\r\n                    opacity *= valueOrDefault(this.srcElement.options.opacity, 1);\r\n                }\r\n                for (var i = 0; i < elements.length; i++) {\r\n                    var srcElement = elements[i];\r\n                    var children = srcElement.children;\r\n                    var combinedTransform = srcElement.currentTransform(transform);\r\n                    var currentOpacity = opacity * valueOrDefault(srcElement.options.opacity, 1);\r\n                    var childNode = new nodeMap[srcElement.nodeType](srcElement, combinedTransform, currentOpacity);\r\n                    if (children && children.length > 0) {\r\n                        childNode.load(children, pos, combinedTransform, opacity);\r\n                    }\r\n                    if (defined(pos)) {\r\n                        this.insertAt(childNode, pos);\r\n                    } else {\r\n                        this.append(childNode);\r\n                    }\r\n                    childNode.attachTo(this.element, pos);\r\n                }\r\n            },\r\n            attachTo: function (domElement, pos) {\r\n                if (defined(pos)) {\r\n                    domElement.insertBefore(this.element, domElement.children[pos] || null);\r\n                } else {\r\n                    domElement.appendChild(this.element);\r\n                }\r\n            },\r\n            optionsChange: function (e) {\r\n                if (e.field == 'visible') {\r\n                    this.css('display', e.value !== false ? '' : NONE);\r\n                }\r\n            },\r\n            setStyle: function () {\r\n                this.allCss(this.mapStyle());\r\n            },\r\n            mapStyle: function () {\r\n                var style = [];\r\n                if (this.srcElement && this.srcElement.options.visible === false) {\r\n                    style.push([\r\n                        'display',\r\n                        NONE\r\n                    ]);\r\n                }\r\n                return style;\r\n            },\r\n            mapOpacityTo: function (attrs, multiplier) {\r\n                var opacity = valueOrDefault(this.opacity, 1);\r\n                opacity *= valueOrDefault(multiplier, 1);\r\n                attrs.push([\r\n                    'opacity',\r\n                    opacity\r\n                ]);\r\n            },\r\n            attr: function (name, value) {\r\n                if (this.element) {\r\n                    this.element[name] = value;\r\n                }\r\n            },\r\n            allAttr: function (attrs) {\r\n                for (var i = 0; i < attrs.length; i++) {\r\n                    this.attr(attrs[i][0], attrs[i][1]);\r\n                }\r\n            },\r\n            css: function (name, value) {\r\n                if (this.element) {\r\n                    this.element.style[name] = value;\r\n                }\r\n            },\r\n            allCss: function (styles) {\r\n                for (var i = 0; i < styles.length; i++) {\r\n                    this.css(styles[i][0], styles[i][1]);\r\n                }\r\n            }\r\n        });\r\n        var RootNode = Node.extend({\r\n            createElement: function () {\r\n                Node.fn.createElement.call(this);\r\n                this.allCss([\r\n                    [\r\n                        'width',\r\n                        '100%'\r\n                    ],\r\n                    [\r\n                        'height',\r\n                        '100%'\r\n                    ],\r\n                    [\r\n                        'position',\r\n                        'relative'\r\n                    ],\r\n                    [\r\n                        'visibility',\r\n                        'visible'\r\n                    ]\r\n                ]);\r\n            },\r\n            attachReference: noop\r\n        });\r\n        var ClipObserver = kendo.Class.extend({\r\n            init: function (srcElement, observer) {\r\n                this.srcElement = srcElement;\r\n                this.observer = observer;\r\n                srcElement.addObserver(this);\r\n            },\r\n            geometryChange: function () {\r\n                this.observer.optionsChange({\r\n                    field: 'clip',\r\n                    value: this.srcElement\r\n                });\r\n            },\r\n            clear: function () {\r\n                this.srcElement.removeObserver(this);\r\n            }\r\n        });\r\n        var ObserverNode = Node.extend({\r\n            init: function (srcElement) {\r\n                Node.fn.init.call(this, srcElement);\r\n                if (srcElement) {\r\n                    this.initClip();\r\n                }\r\n            },\r\n            observe: function () {\r\n                BaseNode.fn.observe.call(this);\r\n            },\r\n            mapStyle: function () {\r\n                var style = Node.fn.mapStyle.call(this);\r\n                if (this.srcElement && this.srcElement.clip()) {\r\n                    style.push([\r\n                        'clip',\r\n                        this.clipRect()\r\n                    ]);\r\n                }\r\n                return style;\r\n            },\r\n            optionsChange: function (e) {\r\n                if (e.field == 'clip') {\r\n                    this.clearClip();\r\n                    this.initClip();\r\n                    this.setClip();\r\n                }\r\n                Node.fn.optionsChange.call(this, e);\r\n            },\r\n            clear: function () {\r\n                this.clearClip();\r\n                Node.fn.clear.call(this);\r\n            },\r\n            initClip: function () {\r\n                if (this.srcElement.clip()) {\r\n                    this.clip = new ClipObserver(this.srcElement.clip(), this);\r\n                    this.clip.observer = this;\r\n                }\r\n            },\r\n            clearClip: function () {\r\n                if (this.clip) {\r\n                    this.clip.clear();\r\n                    this.clip = null;\r\n                    this.css('clip', this.clipRect());\r\n                }\r\n            },\r\n            setClip: function () {\r\n                if (this.clip) {\r\n                    this.css('clip', this.clipRect());\r\n                }\r\n            },\r\n            clipRect: function () {\r\n                var clipRect = EMPTY_CLIP;\r\n                var clip = this.srcElement.clip();\r\n                if (clip) {\r\n                    var bbox = this.clipBBox(clip);\r\n                    var topLeft = bbox.topLeft();\r\n                    var bottomRight = bbox.bottomRight();\r\n                    clipRect = kendo.format('rect({0}px {1}px {2}px {3}px)', topLeft.y, bottomRight.x, bottomRight.y, topLeft.x);\r\n                }\r\n                return clipRect;\r\n            },\r\n            clipBBox: function (clip) {\r\n                var topLeft = this.srcElement.rawBBox().topLeft();\r\n                var clipBBox = clip.rawBBox();\r\n                clipBBox.origin.translate(-topLeft.x, -topLeft.y);\r\n                return clipBBox;\r\n            }\r\n        });\r\n        var GroupNode = ObserverNode.extend({\r\n            createElement: function () {\r\n                Node.fn.createElement.call(this);\r\n                this.setStyle();\r\n            },\r\n            attachTo: function (domElement, pos) {\r\n                this.css('display', NONE);\r\n                Node.fn.attachTo.call(this, domElement, pos);\r\n                if (this.srcElement.options.visible !== false) {\r\n                    this.css('display', '');\r\n                }\r\n            },\r\n            _attachTo: function (domElement) {\r\n                var frag = document.createDocumentFragment();\r\n                frag.appendChild(this.element);\r\n                domElement.appendChild(frag);\r\n            },\r\n            mapStyle: function () {\r\n                var style = ObserverNode.fn.mapStyle.call(this);\r\n                style.push([\r\n                    'position',\r\n                    'absolute'\r\n                ]);\r\n                style.push([\r\n                    'white-space',\r\n                    'nowrap'\r\n                ]);\r\n                return style;\r\n            },\r\n            optionsChange: function (e) {\r\n                if (e.field === 'transform') {\r\n                    this.refreshTransform();\r\n                }\r\n                if (e.field === 'opacity') {\r\n                    this.refreshOpacity();\r\n                }\r\n                ObserverNode.fn.optionsChange.call(this, e);\r\n            },\r\n            refreshTransform: function (transform) {\r\n                var currentTransform = this.srcElement.currentTransform(transform), children = this.childNodes, length = children.length, i;\r\n                this.setClip();\r\n                for (i = 0; i < length; i++) {\r\n                    children[i].refreshTransform(currentTransform);\r\n                }\r\n            },\r\n            currentOpacity: function () {\r\n                var opacity = valueOrDefault(this.srcElement.options.opacity, 1);\r\n                if (this.parent && this.parent.currentOpacity) {\r\n                    opacity *= this.parent.currentOpacity();\r\n                }\r\n                return opacity;\r\n            },\r\n            refreshOpacity: function () {\r\n                var children = this.childNodes, length = children.length, i;\r\n                var opacity = this.currentOpacity();\r\n                for (i = 0; i < length; i++) {\r\n                    children[i].refreshOpacity(opacity);\r\n                }\r\n            },\r\n            initClip: function () {\r\n                ObserverNode.fn.initClip.call(this);\r\n                if (this.clip) {\r\n                    var bbox = this.clip.srcElement.bbox(this.srcElement.currentTransform());\r\n                    if (bbox) {\r\n                        this.css('width', bbox.width() + bbox.origin.x);\r\n                        this.css('height', bbox.height() + bbox.origin.y);\r\n                    }\r\n                }\r\n            },\r\n            clipBBox: function (clip) {\r\n                return clip.bbox(this.srcElement.currentTransform());\r\n            },\r\n            clearClip: function () {\r\n                ObserverNode.fn.clearClip.call(this);\r\n            }\r\n        });\r\n        var StrokeNode = Node.extend({\r\n            init: function (srcElement, opacity) {\r\n                this.opacity = opacity;\r\n                Node.fn.init.call(this, srcElement);\r\n            },\r\n            createElement: function () {\r\n                this.element = createElementVML('stroke');\r\n                this.setOpacity();\r\n            },\r\n            optionsChange: function (e) {\r\n                if (e.field.indexOf('stroke') === 0) {\r\n                    this.setStroke();\r\n                }\r\n            },\r\n            refreshOpacity: function (opacity) {\r\n                this.opacity = opacity;\r\n                this.setStroke();\r\n            },\r\n            setStroke: function () {\r\n                this.allAttr(this.mapStroke());\r\n            },\r\n            setOpacity: function () {\r\n                this.setStroke();\r\n            },\r\n            mapStroke: function () {\r\n                var stroke = this.srcElement.options.stroke;\r\n                var attrs = [];\r\n                if (stroke && !isTransparent(stroke.color) && stroke.width !== 0) {\r\n                    attrs.push([\r\n                        'on',\r\n                        'true'\r\n                    ]);\r\n                    attrs.push([\r\n                        'color',\r\n                        stroke.color\r\n                    ]);\r\n                    attrs.push([\r\n                        'weight',\r\n                        (stroke.width || 1) + 'px'\r\n                    ]);\r\n                    this.mapOpacityTo(attrs, stroke.opacity);\r\n                    if (defined(stroke.dashType)) {\r\n                        attrs.push([\r\n                            'dashstyle',\r\n                            stroke.dashType\r\n                        ]);\r\n                    }\r\n                    if (defined(stroke.lineJoin)) {\r\n                        attrs.push([\r\n                            'joinstyle',\r\n                            stroke.lineJoin\r\n                        ]);\r\n                    }\r\n                    if (defined(stroke.lineCap)) {\r\n                        var lineCap = stroke.lineCap.toLowerCase();\r\n                        if (lineCap === 'butt') {\r\n                            lineCap = lineCap === 'butt' ? 'flat' : lineCap;\r\n                        }\r\n                        attrs.push([\r\n                            'endcap',\r\n                            lineCap\r\n                        ]);\r\n                    }\r\n                } else {\r\n                    attrs.push([\r\n                        'on',\r\n                        'false'\r\n                    ]);\r\n                }\r\n                return attrs;\r\n            }\r\n        });\r\n        var FillNode = Node.extend({\r\n            init: function (srcElement, transform, opacity) {\r\n                this.opacity = opacity;\r\n                Node.fn.init.call(this, srcElement);\r\n            },\r\n            createElement: function () {\r\n                this.element = createElementVML('fill');\r\n                this.setFill();\r\n            },\r\n            optionsChange: function (e) {\r\n                if (fillField(e.field)) {\r\n                    this.setFill();\r\n                }\r\n            },\r\n            refreshOpacity: function (opacity) {\r\n                this.opacity = opacity;\r\n                this.setOpacity();\r\n            },\r\n            setFill: function () {\r\n                this.allAttr(this.mapFill());\r\n            },\r\n            setOpacity: function () {\r\n                this.setFill();\r\n            },\r\n            attr: function (name, value) {\r\n                var element = this.element;\r\n                if (element) {\r\n                    var fields = name.split('.');\r\n                    while (fields.length > 1) {\r\n                        element = element[fields.shift()];\r\n                    }\r\n                    element[fields[0]] = value;\r\n                }\r\n            },\r\n            mapFill: function () {\r\n                var fill = this.srcElement.fill();\r\n                var attrs = [[\r\n                        'on',\r\n                        'false'\r\n                    ]];\r\n                if (fill) {\r\n                    if (fill.nodeType == GRADIENT) {\r\n                        attrs = this.mapGradient(fill);\r\n                    } else if (!isTransparent(fill.color)) {\r\n                        attrs = this.mapFillColor(fill);\r\n                    }\r\n                }\r\n                return attrs;\r\n            },\r\n            mapFillColor: function (fill) {\r\n                var attrs = [\r\n                    [\r\n                        'on',\r\n                        'true'\r\n                    ],\r\n                    [\r\n                        'color',\r\n                        fill.color\r\n                    ]\r\n                ];\r\n                this.mapOpacityTo(attrs, fill.opacity);\r\n                return attrs;\r\n            },\r\n            mapGradient: function (fill) {\r\n                var options = this.srcElement.options;\r\n                var fallbackFill = options.fallbackFill || fill.fallbackFill && fill.fallbackFill();\r\n                var attrs;\r\n                if (fill instanceof d.LinearGradient) {\r\n                    attrs = this.mapLinearGradient(fill);\r\n                } else if (fill instanceof d.RadialGradient && fill.supportVML) {\r\n                    attrs = this.mapRadialGradient(fill);\r\n                } else if (fallbackFill) {\r\n                    attrs = this.mapFillColor(fallbackFill);\r\n                } else {\r\n                    attrs = [[\r\n                            'on',\r\n                            'false'\r\n                        ]];\r\n                }\r\n                return attrs;\r\n            },\r\n            mapLinearGradient: function (fill) {\r\n                var start = fill.start();\r\n                var end = fill.end();\r\n                var angle = util.deg(atan2(end.y - start.y, end.x - start.x));\r\n                var attrs = [\r\n                    [\r\n                        'on',\r\n                        'true'\r\n                    ],\r\n                    [\r\n                        'type',\r\n                        GRADIENT\r\n                    ],\r\n                    [\r\n                        'focus',\r\n                        0\r\n                    ],\r\n                    [\r\n                        'method',\r\n                        'none'\r\n                    ],\r\n                    [\r\n                        'angle',\r\n                        270 - angle\r\n                    ]\r\n                ];\r\n                this.addColors(attrs);\r\n                return attrs;\r\n            },\r\n            mapRadialGradient: function (fill) {\r\n                var bbox = this.srcElement.rawBBox();\r\n                var center = fill.center();\r\n                var focusx = (center.x - bbox.origin.x) / bbox.width();\r\n                var focusy = (center.y - bbox.origin.y) / bbox.height();\r\n                var attrs = [\r\n                    [\r\n                        'on',\r\n                        'true'\r\n                    ],\r\n                    [\r\n                        'type',\r\n                        'gradienttitle'\r\n                    ],\r\n                    [\r\n                        'focus',\r\n                        '100%'\r\n                    ],\r\n                    [\r\n                        'focusposition',\r\n                        focusx + ' ' + focusy\r\n                    ],\r\n                    [\r\n                        'method',\r\n                        'none'\r\n                    ]\r\n                ];\r\n                this.addColors(attrs);\r\n                return attrs;\r\n            },\r\n            addColors: function (attrs) {\r\n                var options = this.srcElement.options;\r\n                var opacity = valueOrDefault(this.opacity, 1);\r\n                var stopColors = [];\r\n                var stops = options.fill.stops;\r\n                var baseColor = options.baseColor;\r\n                var colorsField = this.element.colors ? 'colors.value' : 'colors';\r\n                var color = stopColor(baseColor, stops[0], opacity);\r\n                var color2 = stopColor(baseColor, stops[stops.length - 1], opacity);\r\n                var stop;\r\n                for (var idx = 0; idx < stops.length; idx++) {\r\n                    stop = stops[idx];\r\n                    stopColors.push(math.round(stop.offset() * 100) + '% ' + stopColor(baseColor, stop, opacity));\r\n                }\r\n                attrs.push([\r\n                    colorsField,\r\n                    stopColors.join(',')\r\n                ], [\r\n                    'color',\r\n                    color\r\n                ], [\r\n                    'color2',\r\n                    color2\r\n                ]);\r\n            }\r\n        });\r\n        var TransformNode = Node.extend({\r\n            init: function (srcElement, transform) {\r\n                this.transform = transform;\r\n                Node.fn.init.call(this, srcElement);\r\n            },\r\n            createElement: function () {\r\n                this.element = createElementVML('skew');\r\n                this.setTransform();\r\n            },\r\n            optionsChange: function (e) {\r\n                if (e.field === 'transform') {\r\n                    this.refresh(this.srcElement.currentTransform());\r\n                }\r\n            },\r\n            refresh: function (transform) {\r\n                this.transform = transform;\r\n                this.setTransform();\r\n            },\r\n            transformOrigin: function () {\r\n                return '-0.5,-0.5';\r\n            },\r\n            setTransform: function () {\r\n                this.allAttr(this.mapTransform());\r\n            },\r\n            mapTransform: function () {\r\n                var transform = this.transform;\r\n                var attrs = [], matrix = toMatrix(transform);\r\n                if (matrix) {\r\n                    matrix.round(TRANSFORM_PRECISION);\r\n                    attrs.push([\r\n                        'on',\r\n                        'true'\r\n                    ], [\r\n                        'matrix',\r\n                        [\r\n                            matrix.a,\r\n                            matrix.c,\r\n                            matrix.b,\r\n                            matrix.d,\r\n                            0,\r\n                            0\r\n                        ].join(',')\r\n                    ], [\r\n                        'offset',\r\n                        matrix.e + 'px,' + matrix.f + 'px'\r\n                    ], [\r\n                        'origin',\r\n                        this.transformOrigin()\r\n                    ]);\r\n                } else {\r\n                    attrs.push([\r\n                        'on',\r\n                        'false'\r\n                    ]);\r\n                }\r\n                return attrs;\r\n            }\r\n        });\r\n        var ShapeNode = ObserverNode.extend({\r\n            init: function (srcElement, transform, opacity) {\r\n                this.fill = this.createFillNode(srcElement, transform, opacity);\r\n                this.stroke = new StrokeNode(srcElement, opacity);\r\n                this.transform = this.createTransformNode(srcElement, transform);\r\n                ObserverNode.fn.init.call(this, srcElement);\r\n            },\r\n            attachTo: function (domElement, pos) {\r\n                this.fill.attachTo(this.element);\r\n                this.stroke.attachTo(this.element);\r\n                this.transform.attachTo(this.element);\r\n                Node.fn.attachTo.call(this, domElement, pos);\r\n            },\r\n            createFillNode: function (srcElement, transform, opacity) {\r\n                return new FillNode(srcElement, transform, opacity);\r\n            },\r\n            createTransformNode: function (srcElement, transform) {\r\n                return new TransformNode(srcElement, transform);\r\n            },\r\n            createElement: function () {\r\n                this.element = createElementVML('shape');\r\n                this.setCoordsize();\r\n                this.setStyle();\r\n            },\r\n            optionsChange: function (e) {\r\n                if (fillField(e.field)) {\r\n                    this.fill.optionsChange(e);\r\n                } else if (e.field.indexOf('stroke') === 0) {\r\n                    this.stroke.optionsChange(e);\r\n                } else if (e.field === 'transform') {\r\n                    this.transform.optionsChange(e);\r\n                } else if (e.field === 'opacity') {\r\n                    this.fill.setOpacity();\r\n                    this.stroke.setOpacity();\r\n                }\r\n                ObserverNode.fn.optionsChange.call(this, e);\r\n            },\r\n            refreshTransform: function (transform) {\r\n                this.transform.refresh(this.srcElement.currentTransform(transform));\r\n            },\r\n            refreshOpacity: function (opacity) {\r\n                opacity *= valueOrDefault(this.srcElement.options.opacity, 1);\r\n                this.fill.refreshOpacity(opacity);\r\n                this.stroke.refreshOpacity(opacity);\r\n            },\r\n            mapStyle: function (width, height) {\r\n                var styles = ObserverNode.fn.mapStyle.call(this);\r\n                if (!width || !height) {\r\n                    width = height = COORDINATE_MULTIPLE;\r\n                }\r\n                styles.push([\r\n                    'position',\r\n                    'absolute'\r\n                ], [\r\n                    'width',\r\n                    width + 'px'\r\n                ], [\r\n                    'height',\r\n                    height + 'px'\r\n                ]);\r\n                var cursor = this.srcElement.options.cursor;\r\n                if (cursor) {\r\n                    styles.push([\r\n                        'cursor',\r\n                        cursor\r\n                    ]);\r\n                }\r\n                return styles;\r\n            },\r\n            setCoordsize: function () {\r\n                this.allAttr([\r\n                    [\r\n                        'coordorigin',\r\n                        '0 0'\r\n                    ],\r\n                    [\r\n                        'coordsize',\r\n                        COORDINATE_SIZE + ' ' + COORDINATE_SIZE\r\n                    ]\r\n                ]);\r\n            }\r\n        });\r\n        var PathDataNode = Node.extend({\r\n            createElement: function () {\r\n                this.element = createElementVML('path');\r\n                this.setPathData();\r\n            },\r\n            geometryChange: function () {\r\n                this.setPathData();\r\n            },\r\n            setPathData: function () {\r\n                this.attr('v', this.renderData());\r\n            },\r\n            renderData: function () {\r\n                return printPath(this.srcElement);\r\n            }\r\n        });\r\n        var PathNode = ShapeNode.extend({\r\n            init: function (srcElement, transform, opacity) {\r\n                this.pathData = this.createDataNode(srcElement);\r\n                ShapeNode.fn.init.call(this, srcElement, transform, opacity);\r\n            },\r\n            attachTo: function (domElement, pos) {\r\n                this.pathData.attachTo(this.element);\r\n                ShapeNode.fn.attachTo.call(this, domElement, pos);\r\n            },\r\n            createDataNode: function (srcElement) {\r\n                return new PathDataNode(srcElement);\r\n            },\r\n            geometryChange: function () {\r\n                this.pathData.geometryChange();\r\n                ShapeNode.fn.geometryChange.call(this);\r\n            }\r\n        });\r\n        var MultiPathDataNode = PathDataNode.extend({\r\n            renderData: function () {\r\n                var paths = this.srcElement.paths;\r\n                if (paths.length > 0) {\r\n                    var result = [], i, open;\r\n                    for (i = 0; i < paths.length; i++) {\r\n                        open = i < paths.length - 1;\r\n                        result.push(printPath(paths[i], open));\r\n                    }\r\n                    return result.join(' ');\r\n                }\r\n            }\r\n        });\r\n        var MultiPathNode = PathNode.extend({\r\n            createDataNode: function (srcElement) {\r\n                return new MultiPathDataNode(srcElement);\r\n            }\r\n        });\r\n        var CircleTransformNode = TransformNode.extend({\r\n            transformOrigin: function () {\r\n                var boundingBox = this.srcElement.geometry().bbox(), center = boundingBox.center(), originX = -ceil(center.x) / ceil(boundingBox.width()), originY = -ceil(center.y) / ceil(boundingBox.height());\r\n                return originX + ',' + originY;\r\n            }\r\n        });\r\n        var CircleNode = ShapeNode.extend({\r\n            createElement: function () {\r\n                this.element = createElementVML('oval');\r\n                this.setStyle();\r\n            },\r\n            createTransformNode: function (srcElement, transform) {\r\n                return new CircleTransformNode(srcElement, transform);\r\n            },\r\n            geometryChange: function () {\r\n                ShapeNode.fn.geometryChange.call(this);\r\n                this.setStyle();\r\n                this.refreshTransform();\r\n            },\r\n            mapStyle: function () {\r\n                var geometry = this.srcElement.geometry();\r\n                var radius = geometry.radius;\r\n                var center = geometry.center;\r\n                var diameter = ceil(radius * 2);\r\n                var styles = ShapeNode.fn.mapStyle.call(this, diameter, diameter);\r\n                styles.push([\r\n                    'left',\r\n                    ceil(center.x - radius) + 'px'\r\n                ], [\r\n                    'top',\r\n                    ceil(center.y - radius) + 'px'\r\n                ]);\r\n                return styles;\r\n            }\r\n        });\r\n        var ArcDataNode = PathDataNode.extend({\r\n            renderData: function () {\r\n                return printPath(this.srcElement.toPath());\r\n            }\r\n        });\r\n        var ArcNode = PathNode.extend({\r\n            createDataNode: function (srcElement) {\r\n                return new ArcDataNode(srcElement);\r\n            }\r\n        });\r\n        var TextPathDataNode = PathDataNode.extend({\r\n            createElement: function () {\r\n                PathDataNode.fn.createElement.call(this);\r\n                this.attr('textpathok', true);\r\n            },\r\n            renderData: function () {\r\n                var rect = this.srcElement.rect();\r\n                var center = rect.center();\r\n                return 'm ' + printPoints([new g.Point(rect.topLeft().x, center.y)]) + ' l ' + printPoints([new g.Point(rect.bottomRight().x, center.y)]);\r\n            }\r\n        });\r\n        var TextPathNode = Node.extend({\r\n            createElement: function () {\r\n                this.element = createElementVML('textpath');\r\n                this.attr('on', true);\r\n                this.attr('fitpath', false);\r\n                this.setStyle();\r\n                this.setString();\r\n            },\r\n            optionsChange: function (e) {\r\n                if (e.field === 'content') {\r\n                    this.setString();\r\n                } else {\r\n                    this.setStyle();\r\n                }\r\n                Node.fn.optionsChange.call(this, e);\r\n            },\r\n            mapStyle: function () {\r\n                return [[\r\n                        'font',\r\n                        this.srcElement.options.font\r\n                    ]];\r\n            },\r\n            setString: function () {\r\n                this.attr('string', this.srcElement.content());\r\n            }\r\n        });\r\n        var TextNode = PathNode.extend({\r\n            init: function (srcElement, transform, opacity) {\r\n                this.path = new TextPathNode(srcElement);\r\n                PathNode.fn.init.call(this, srcElement, transform, opacity);\r\n            },\r\n            createDataNode: function (srcElement) {\r\n                return new TextPathDataNode(srcElement);\r\n            },\r\n            attachTo: function (domElement, pos) {\r\n                this.path.attachTo(this.element);\r\n                PathNode.fn.attachTo.call(this, domElement, pos);\r\n            },\r\n            optionsChange: function (e) {\r\n                if (e.field === 'font' || e.field === 'content') {\r\n                    this.path.optionsChange(e);\r\n                    this.pathData.geometryChange(e);\r\n                }\r\n                PathNode.fn.optionsChange.call(this, e);\r\n            }\r\n        });\r\n        var ImagePathDataNode = PathDataNode.extend({\r\n            renderData: function () {\r\n                var rect = this.srcElement.rect();\r\n                var path = new d.Path().moveTo(rect.topLeft()).lineTo(rect.topRight()).lineTo(rect.bottomRight()).lineTo(rect.bottomLeft()).close();\r\n                return printPath(path);\r\n            }\r\n        });\r\n        var ImageFillNode = TransformNode.extend({\r\n            init: function (srcElement, transform, opacity) {\r\n                this.opacity = opacity;\r\n                TransformNode.fn.init.call(this, srcElement, transform);\r\n            },\r\n            createElement: function () {\r\n                this.element = createElementVML('fill');\r\n                this.attr('type', 'frame');\r\n                this.attr('rotate', true);\r\n                this.setOpacity();\r\n                this.setSrc();\r\n                this.setTransform();\r\n            },\r\n            optionsChange: function (e) {\r\n                if (e.field === 'src') {\r\n                    this.setSrc();\r\n                }\r\n                TransformNode.fn.optionsChange.call(this, e);\r\n            },\r\n            geometryChange: function () {\r\n                this.refresh();\r\n            },\r\n            refreshOpacity: function (opacity) {\r\n                this.opacity = opacity;\r\n                this.setOpacity();\r\n            },\r\n            setOpacity: function () {\r\n                var attrs = [];\r\n                this.mapOpacityTo(attrs, this.srcElement.options.opacity);\r\n                this.allAttr(attrs);\r\n            },\r\n            setSrc: function () {\r\n                this.attr('src', this.srcElement.src());\r\n            },\r\n            mapTransform: function () {\r\n                var img = this.srcElement;\r\n                var rawbbox = img.rawBBox();\r\n                var rawcenter = rawbbox.center();\r\n                var fillOrigin = COORDINATE_MULTIPLE / 2;\r\n                var fillSize = COORDINATE_MULTIPLE;\r\n                var x;\r\n                var y;\r\n                var width = rawbbox.width() / fillSize;\r\n                var height = rawbbox.height() / fillSize;\r\n                var angle = 0;\r\n                var transform = this.transform;\r\n                if (transform) {\r\n                    var matrix = toMatrix(transform);\r\n                    var sx = sqrt(matrix.a * matrix.a + matrix.b * matrix.b);\r\n                    var sy = sqrt(matrix.c * matrix.c + matrix.d * matrix.d);\r\n                    width *= sx;\r\n                    height *= sy;\r\n                    var ax = deg(atan2(matrix.b, matrix.d));\r\n                    var ay = deg(atan2(-matrix.c, matrix.a));\r\n                    angle = (ax + ay) / 2;\r\n                    if (angle !== 0) {\r\n                        var center = img.bbox().center();\r\n                        x = (center.x - fillOrigin) / fillSize;\r\n                        y = (center.y - fillOrigin) / fillSize;\r\n                    } else {\r\n                        x = (rawcenter.x * sx + matrix.e - fillOrigin) / fillSize;\r\n                        y = (rawcenter.y * sy + matrix.f - fillOrigin) / fillSize;\r\n                    }\r\n                } else {\r\n                    x = (rawcenter.x - fillOrigin) / fillSize;\r\n                    y = (rawcenter.y - fillOrigin) / fillSize;\r\n                }\r\n                width = round(width, TRANSFORM_PRECISION);\r\n                height = round(height, TRANSFORM_PRECISION);\r\n                x = round(x, TRANSFORM_PRECISION);\r\n                y = round(y, TRANSFORM_PRECISION);\r\n                angle = round(angle, TRANSFORM_PRECISION);\r\n                return [\r\n                    [\r\n                        'size',\r\n                        width + ',' + height\r\n                    ],\r\n                    [\r\n                        'position',\r\n                        x + ',' + y\r\n                    ],\r\n                    [\r\n                        'angle',\r\n                        angle\r\n                    ]\r\n                ];\r\n            }\r\n        });\r\n        var ImageNode = PathNode.extend({\r\n            createFillNode: function (srcElement, transform, opacity) {\r\n                return new ImageFillNode(srcElement, transform, opacity);\r\n            },\r\n            createDataNode: function (srcElement) {\r\n                return new ImagePathDataNode(srcElement);\r\n            },\r\n            optionsChange: function (e) {\r\n                if (e.field === 'src' || e.field === 'transform') {\r\n                    this.fill.optionsChange(e);\r\n                }\r\n                PathNode.fn.optionsChange.call(this, e);\r\n            },\r\n            geometryChange: function () {\r\n                this.fill.geometryChange();\r\n                PathNode.fn.geometryChange.call(this);\r\n            },\r\n            refreshTransform: function (transform) {\r\n                PathNode.fn.refreshTransform.call(this, transform);\r\n                this.fill.refresh(this.srcElement.currentTransform(transform));\r\n            }\r\n        });\r\n        var RectDataNode = PathDataNode.extend({\r\n            renderData: function () {\r\n                var rect = this.srcElement.geometry();\r\n                var parts = [\r\n                    'm',\r\n                    printPoints([rect.topLeft()]),\r\n                    'l',\r\n                    printPoints([\r\n                        rect.topRight(),\r\n                        rect.bottomRight(),\r\n                        rect.bottomLeft()\r\n                    ]),\r\n                    'x e'\r\n                ];\r\n                return parts.join(' ');\r\n            }\r\n        });\r\n        var RectNode = PathNode.extend({\r\n            createDataNode: function (srcElement) {\r\n                return new RectDataNode(srcElement);\r\n            }\r\n        });\r\n        var nodeMap = {\r\n            Group: GroupNode,\r\n            Text: TextNode,\r\n            Path: PathNode,\r\n            MultiPath: MultiPathNode,\r\n            Circle: CircleNode,\r\n            Arc: ArcNode,\r\n            Image: ImageNode,\r\n            Rect: RectNode\r\n        };\r\n        function enableVML() {\r\n            if (doc.namespaces && !doc.namespaces.kvml) {\r\n                doc.namespaces.add('kvml', 'urn:schemas-microsoft-com:vml');\r\n                var stylesheet = doc.styleSheets.length > 30 ? doc.styleSheets[0] : doc.createStyleSheet();\r\n                stylesheet.addRule('.kvml', 'behavior:url(#default#VML)');\r\n            }\r\n        }\r\n        function createElementVML(type) {\r\n            var element = doc.createElement('kvml:' + type);\r\n            element.className = 'kvml';\r\n            return element;\r\n        }\r\n        function printPoints(points) {\r\n            var length = points.length;\r\n            var result = [];\r\n            for (var i = 0; i < length; i++) {\r\n                result.push(points[i].scaleCopy(COORDINATE_MULTIPLE).toString(0, ','));\r\n            }\r\n            return result.join(' ');\r\n        }\r\n        function printPath(path, open) {\r\n            var segments = path.segments, length = segments.length;\r\n            if (length > 0) {\r\n                var parts = [], output, type, currentType, i;\r\n                for (i = 1; i < length; i++) {\r\n                    type = segmentType(segments[i - 1], segments[i]);\r\n                    if (type !== currentType) {\r\n                        currentType = type;\r\n                        parts.push(type);\r\n                    }\r\n                    if (type === 'l') {\r\n                        parts.push(printPoints([segments[i].anchor()]));\r\n                    } else {\r\n                        parts.push(printPoints([\r\n                            segments[i - 1].controlOut(),\r\n                            segments[i].controlIn(),\r\n                            segments[i].anchor()\r\n                        ]));\r\n                    }\r\n                }\r\n                output = 'm ' + printPoints([segments[0].anchor()]) + ' ' + parts.join(' ');\r\n                if (path.options.closed) {\r\n                    output += ' x';\r\n                }\r\n                if (open !== true) {\r\n                    output += ' e';\r\n                }\r\n                return output;\r\n            }\r\n        }\r\n        function segmentType(segmentStart, segmentEnd) {\r\n            return segmentStart.controlOut() && segmentEnd.controlIn() ? 'c' : 'l';\r\n        }\r\n        function fillField(field) {\r\n            return field.indexOf('fill') === 0 || field.indexOf(GRADIENT) === 0;\r\n        }\r\n        function stopColor(baseColor, stop, baseOpacity) {\r\n            var opacity = baseOpacity * valueOrDefault(stop.opacity(), 1);\r\n            var color;\r\n            if (baseColor) {\r\n                color = blendColors(baseColor, stop.color(), opacity);\r\n            } else {\r\n                color = blendColors(stop.color(), '#fff', 1 - opacity);\r\n            }\r\n            return color;\r\n        }\r\n        function blendColors(base, overlay, alpha) {\r\n            var baseColor = new Color(base), overlayColor = new Color(overlay), r = blendChannel(baseColor.r, overlayColor.r, alpha), g = blendChannel(baseColor.g, overlayColor.g, alpha), b = blendChannel(baseColor.b, overlayColor.b, alpha);\r\n            return new Color(r, g, b).toHex();\r\n        }\r\n        function blendChannel(a, b, alpha) {\r\n            return math.round(alpha * b + (1 - alpha) * a);\r\n        }\r\n        kendo.support.vml = function () {\r\n            var browser = kendo.support.browser;\r\n            return browser.msie && browser.version < 9;\r\n        }();\r\n        var EMPTY_CLIP = 'inherit';\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 8) {\r\n            EMPTY_CLIP = 'rect(auto auto auto auto)';\r\n        }\r\n        if (kendo.support.vml) {\r\n            d.SurfaceFactory.current.register('vml', Surface, 30);\r\n        }\r\n        deepExtend(d, {\r\n            vml: {\r\n                ArcDataNode: ArcDataNode,\r\n                ArcNode: ArcNode,\r\n                CircleTransformNode: CircleTransformNode,\r\n                CircleNode: CircleNode,\r\n                FillNode: FillNode,\r\n                GroupNode: GroupNode,\r\n                ImageNode: ImageNode,\r\n                ImageFillNode: ImageFillNode,\r\n                ImagePathDataNode: ImagePathDataNode,\r\n                MultiPathDataNode: MultiPathDataNode,\r\n                MultiPathNode: MultiPathNode,\r\n                Node: Node,\r\n                PathDataNode: PathDataNode,\r\n                PathNode: PathNode,\r\n                RectDataNode: RectDataNode,\r\n                RectNode: RectNode,\r\n                RootNode: RootNode,\r\n                StrokeNode: StrokeNode,\r\n                Surface: Surface,\r\n                TextNode: TextNode,\r\n                TextPathNode: TextPathNode,\r\n                TextPathDataNode: TextPathDataNode,\r\n                TransformNode: TransformNode\r\n            }\r\n        });\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('drawing/html', [\r\n        'kendo.color',\r\n        'drawing/shapes',\r\n        'util/main',\r\n        'util/text-metrics'\r\n    ], f);\r\n}(function () {\r\n    (function ($, parseFloat, Math) {\r\n        'use strict';\r\n        var drawing = kendo.drawing;\r\n        var geo = kendo.geometry;\r\n        var slice = Array.prototype.slice;\r\n        var browser = kendo.support.browser;\r\n        var romanNumeral = kendo.util.arabicToRoman;\r\n        var KENDO_PSEUDO_ELEMENT = 'KENDO-PSEUDO-ELEMENT';\r\n        var IMAGE_CACHE = {};\r\n        var nodeInfo = {};\r\n        nodeInfo._root = nodeInfo;\r\n        var TextRect = drawing.Text.extend({\r\n            nodeType: 'Text',\r\n            init: function (str, rect, options) {\r\n                drawing.Text.fn.init.call(this, str, rect.getOrigin(), options);\r\n                this._pdfRect = rect;\r\n            },\r\n            rect: function () {\r\n                return this._pdfRect;\r\n            },\r\n            rawBBox: function () {\r\n                return this._pdfRect;\r\n            }\r\n        });\r\n        function getXY(thing) {\r\n            if (typeof thing == 'number') {\r\n                return {\r\n                    x: thing,\r\n                    y: thing\r\n                };\r\n            }\r\n            if (Array.isArray(thing)) {\r\n                return {\r\n                    x: thing[0],\r\n                    y: thing[1]\r\n                };\r\n            }\r\n            return {\r\n                x: thing.x,\r\n                y: thing.y\r\n            };\r\n        }\r\n        function drawDOM(element, options) {\r\n            if (!options) {\r\n                options = {};\r\n            }\r\n            var defer = $.Deferred();\r\n            element = $(element)[0];\r\n            if (!element) {\r\n                return defer.reject('No element to export');\r\n            }\r\n            if (typeof window.getComputedStyle != 'function') {\r\n                throw new Error('window.getComputedStyle is missing.  You are using an unsupported browser, or running in IE8 compatibility mode.  Drawing HTML is supported in Chrome, Firefox, Safari and IE9+.');\r\n            }\r\n            if (kendo.pdf) {\r\n                kendo.pdf.defineFont(getFontFaces(element.ownerDocument));\r\n            }\r\n            var scale = getXY(options.scale || 1);\r\n            function doOne(element) {\r\n                var group = new drawing.Group();\r\n                var pos = element.getBoundingClientRect();\r\n                setTransform(group, [\r\n                    scale.x,\r\n                    0,\r\n                    0,\r\n                    scale.y,\r\n                    -pos.left * scale.x,\r\n                    -pos.top * scale.y\r\n                ]);\r\n                nodeInfo._clipbox = false;\r\n                nodeInfo._matrix = geo.Matrix.unit();\r\n                nodeInfo._stackingContext = {\r\n                    element: element,\r\n                    group: group\r\n                };\r\n                if (options.avoidLinks === true) {\r\n                    nodeInfo._avoidLinks = 'a';\r\n                } else {\r\n                    nodeInfo._avoidLinks = options.avoidLinks;\r\n                }\r\n                $(element).addClass('k-pdf-export');\r\n                renderElement(element, group);\r\n                $(element).removeClass('k-pdf-export');\r\n                return group;\r\n            }\r\n            cacheImages(element, function () {\r\n                var forceBreak = options && options.forcePageBreak;\r\n                var hasPaperSize = options && options.paperSize && options.paperSize != 'auto';\r\n                var paperOptions = kendo.pdf.getPaperOptions(function (key, def) {\r\n                    if (key == 'paperSize') {\r\n                        return hasPaperSize ? options[key] : 'A4';\r\n                    }\r\n                    return key in options ? options[key] : def;\r\n                });\r\n                var pageWidth = hasPaperSize && paperOptions.paperSize[0];\r\n                var pageHeight = hasPaperSize && paperOptions.paperSize[1];\r\n                var margin = options.margin && paperOptions.margin;\r\n                var hasMargin = !!margin;\r\n                if (forceBreak || pageHeight) {\r\n                    if (!margin) {\r\n                        margin = {\r\n                            left: 0,\r\n                            top: 0,\r\n                            right: 0,\r\n                            bottom: 0\r\n                        };\r\n                    }\r\n                    if (pageWidth) {\r\n                        pageWidth /= scale.x;\r\n                    }\r\n                    if (pageHeight) {\r\n                        pageHeight /= scale.y;\r\n                    }\r\n                    margin.left /= scale.x;\r\n                    margin.right /= scale.x;\r\n                    margin.top /= scale.y;\r\n                    margin.bottom /= scale.y;\r\n                    var group = new drawing.Group({\r\n                        pdf: {\r\n                            multiPage: true,\r\n                            paperSize: hasPaperSize ? paperOptions.paperSize : 'auto',\r\n                            _ignoreMargin: hasMargin\r\n                        }\r\n                    });\r\n                    handlePageBreaks(function (x) {\r\n                        if (options.progress) {\r\n                            var canceled = false, pageNum = 0;\r\n                            (function next() {\r\n                                if (pageNum < x.pages.length) {\r\n                                    group.append(doOne(x.pages[pageNum]));\r\n                                    options.progress({\r\n                                        pageNum: ++pageNum,\r\n                                        totalPages: x.pages.length,\r\n                                        cancel: function () {\r\n                                            canceled = true;\r\n                                        }\r\n                                    });\r\n                                    if (!canceled) {\r\n                                        setTimeout(next);\r\n                                    } else {\r\n                                        x.container.parentNode.removeChild(x.container);\r\n                                    }\r\n                                } else {\r\n                                    x.container.parentNode.removeChild(x.container);\r\n                                    defer.resolve(group);\r\n                                }\r\n                            }());\r\n                        } else {\r\n                            x.pages.forEach(function (page) {\r\n                                group.append(doOne(page));\r\n                            });\r\n                            x.container.parentNode.removeChild(x.container);\r\n                            defer.resolve(group);\r\n                        }\r\n                    }, element, forceBreak, pageWidth ? pageWidth - margin.left - margin.right : null, pageHeight ? pageHeight - margin.top - margin.bottom : null, margin, options);\r\n                } else {\r\n                    defer.resolve(doOne(element));\r\n                }\r\n            });\r\n            function makeTemplate(template) {\r\n                if (template != null) {\r\n                    if (typeof template == 'string') {\r\n                        template = kendo.template(template.replace(/^\\s+|\\s+$/g, ''));\r\n                    }\r\n                    if (typeof template == 'function') {\r\n                        return function (data) {\r\n                            var el = template(data);\r\n                            if (el) {\r\n                                if (typeof el == 'string') {\r\n                                    el = el.replace(/^\\s+|\\s+$/g, '');\r\n                                }\r\n                                return $(el)[0];\r\n                            }\r\n                        };\r\n                    }\r\n                    return function () {\r\n                        return $(template).clone()[0];\r\n                    };\r\n                }\r\n            }\r\n            function cloneNodes(el) {\r\n                var clone = el.cloneNode(false);\r\n                if (el.nodeType == 1) {\r\n                    var $el = $(el), $clone = $(clone), i;\r\n                    var data = $el.data();\r\n                    for (i in data) {\r\n                        $clone.data(i, data[i]);\r\n                    }\r\n                    if (/^canvas$/i.test(el.tagName)) {\r\n                        clone.getContext('2d').drawImage(el, 0, 0);\r\n                    } else if (/^input$/i.test(el.tagName)) {\r\n                        el.removeAttribute('name');\r\n                    } else {\r\n                        for (i = el.firstChild; i; i = i.nextSibling) {\r\n                            clone.appendChild(cloneNodes(i));\r\n                        }\r\n                    }\r\n                }\r\n                return clone;\r\n            }\r\n            function handlePageBreaks(callback, element, forceBreak, pageWidth, pageHeight, margin, options) {\r\n                var template = makeTemplate(options.template);\r\n                var doc = element.ownerDocument;\r\n                var pages = [];\r\n                var copy = options._destructive ? element : cloneNodes(element);\r\n                var container = doc.createElement('KENDO-PDF-DOCUMENT');\r\n                var adjust = 0;\r\n                $(copy).find('tfoot').each(function () {\r\n                    this.parentNode.appendChild(this);\r\n                });\r\n                $(copy).find('ol').each(function () {\r\n                    $(this).children().each(function (index) {\r\n                        this.setAttribute('kendo-split-index', index);\r\n                    });\r\n                });\r\n                $(container).css({\r\n                    display: 'block',\r\n                    position: 'absolute',\r\n                    boxSizing: 'content-box',\r\n                    left: '-10000px',\r\n                    top: '-10000px'\r\n                });\r\n                if (pageWidth) {\r\n                    $(container).css({\r\n                        width: pageWidth,\r\n                        paddingLeft: margin.left,\r\n                        paddingRight: margin.right\r\n                    });\r\n                    $(copy).css({ overflow: 'hidden' });\r\n                }\r\n                element.parentNode.insertBefore(container, element);\r\n                container.appendChild(copy);\r\n                if (options.beforePageBreak) {\r\n                    setTimeout(function () {\r\n                        options.beforePageBreak(container, doPageBreak);\r\n                    }, 15);\r\n                } else {\r\n                    setTimeout(doPageBreak, 15);\r\n                }\r\n                function doPageBreak() {\r\n                    if (forceBreak != '-' || pageHeight) {\r\n                        splitElement(copy);\r\n                    }\r\n                    var page = makePage();\r\n                    copy.parentNode.insertBefore(page, copy);\r\n                    page.appendChild(copy);\r\n                    if (template) {\r\n                        var count = pages.length;\r\n                        pages.forEach(function (page, i) {\r\n                            var el = template({\r\n                                element: page,\r\n                                pageNum: i + 1,\r\n                                totalPages: pages.length\r\n                            });\r\n                            if (el) {\r\n                                page.appendChild(el);\r\n                                cacheImages(el, function () {\r\n                                    if (--count === 0) {\r\n                                        next();\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                    } else {\r\n                        next();\r\n                    }\r\n                    function next() {\r\n                        whenImagesAreActuallyLoaded(pages, function () {\r\n                            callback({\r\n                                pages: pages,\r\n                                container: container\r\n                            });\r\n                        });\r\n                    }\r\n                }\r\n                function keepTogether(jqel) {\r\n                    if (options.keepTogether && jqel.is(options.keepTogether) && jqel.height() <= pageHeight - adjust) {\r\n                        return true;\r\n                    }\r\n                    return jqel.data('kendoChart') || /^(?:img|tr|thead|th|tfoot|iframe|svg|object|canvas|input|textarea|select|video|h[1-6])/i.test(jqel[0].tagName);\r\n                }\r\n                function splitElement(element) {\r\n                    var style = getComputedStyle(element);\r\n                    var bottomPadding = parseFloat(getPropertyValue(style, 'padding-bottom'));\r\n                    var bottomBorder = parseFloat(getPropertyValue(style, 'border-bottom-width'));\r\n                    var saveAdjust = adjust;\r\n                    adjust += bottomPadding + bottomBorder;\r\n                    var isFirst = true;\r\n                    for (var el = element.firstChild; el; el = el.nextSibling) {\r\n                        if (el.nodeType == 1) {\r\n                            isFirst = false;\r\n                            var jqel = $(el);\r\n                            if (jqel.is(forceBreak)) {\r\n                                breakAtElement(el);\r\n                                continue;\r\n                            }\r\n                            if (!pageHeight) {\r\n                                splitElement(el);\r\n                                continue;\r\n                            }\r\n                            if (!/^(?:static|relative)$/.test(getPropertyValue(getComputedStyle(el), 'position'))) {\r\n                                continue;\r\n                            }\r\n                            var fall = fallsOnMargin(el);\r\n                            if (fall == 1) {\r\n                                breakAtElement(el);\r\n                            } else if (fall) {\r\n                                if (keepTogether(jqel)) {\r\n                                    breakAtElement(el);\r\n                                } else {\r\n                                    splitElement(el);\r\n                                }\r\n                            } else {\r\n                                splitElement(el);\r\n                            }\r\n                        } else if (el.nodeType == 3 && pageHeight) {\r\n                            splitText(el, isFirst);\r\n                            isFirst = false;\r\n                        }\r\n                    }\r\n                    adjust = saveAdjust;\r\n                }\r\n                function firstInParent(el) {\r\n                    var p = el.parentNode, first = p.firstChild;\r\n                    if (el === first) {\r\n                        return true;\r\n                    }\r\n                    if (el === p.children[0]) {\r\n                        if (first.nodeType == 7 || first.nodeType == 8) {\r\n                            return true;\r\n                        }\r\n                        if (first.nodeType == 3) {\r\n                            return !/\\S/.test(first.data);\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n                function breakAtElement(el) {\r\n                    if (el.nodeType == 1 && el !== copy && firstInParent(el)) {\r\n                        return breakAtElement(el.parentNode);\r\n                    }\r\n                    var table, colgroup, thead, grid, gridHead;\r\n                    table = $(el).closest('table');\r\n                    colgroup = table.find('colgroup:first');\r\n                    if (options.repeatHeaders) {\r\n                        thead = table.find('thead:first');\r\n                        grid = $(el).closest('.k-grid[data-role=\"grid\"]');\r\n                        if (grid[0] && grid[0].querySelector('.k-auto-scrollable')) {\r\n                            gridHead = grid.find('.k-grid-header:first');\r\n                        }\r\n                    }\r\n                    var page = makePage();\r\n                    var range = doc.createRange();\r\n                    range.setStartBefore(copy);\r\n                    range.setEndBefore(el);\r\n                    page.appendChild(range.extractContents());\r\n                    copy.parentNode.insertBefore(page, copy);\r\n                    if (table[0]) {\r\n                        table = $(el).closest('table');\r\n                        if (options.repeatHeaders && thead[0]) {\r\n                            thead.clone().prependTo(table);\r\n                        }\r\n                        if (colgroup[0]) {\r\n                            colgroup.clone().prependTo(table);\r\n                        }\r\n                    }\r\n                    if (options.repeatHeaders && gridHead && gridHead[0]) {\r\n                        grid = $(el).closest('.k-grid[data-role=\"grid\"]');\r\n                        if (gridHead[0]) {\r\n                            gridHead.clone().prependTo(grid);\r\n                        }\r\n                    }\r\n                }\r\n                function makePage() {\r\n                    var page = doc.createElement('KENDO-PDF-PAGE');\r\n                    $(page).css({\r\n                        display: 'block',\r\n                        boxSizing: 'content-box',\r\n                        width: pageWidth || 'auto',\r\n                        padding: margin.top + 'px ' + margin.right + 'px ' + margin.bottom + 'px ' + margin.left + 'px',\r\n                        position: 'relative',\r\n                        height: pageHeight || 'auto',\r\n                        overflow: pageHeight || pageWidth ? 'hidden' : 'visible',\r\n                        clear: 'both'\r\n                    });\r\n                    if (options && options.pageClassName) {\r\n                        page.className = options.pageClassName;\r\n                    }\r\n                    pages.push(page);\r\n                    return page;\r\n                }\r\n                function fallsOnMargin(thing) {\r\n                    var box = thing.getBoundingClientRect();\r\n                    if (box.width === 0 || box.height === 0) {\r\n                        return 0;\r\n                    }\r\n                    var top = copy.getBoundingClientRect().top;\r\n                    var available = pageHeight - adjust;\r\n                    return box.height > available ? 3 : box.top - top > available ? 1 : box.bottom - top > available ? 2 : 0;\r\n                }\r\n                function splitText(node, isFirst) {\r\n                    if (!/\\S/.test(node.data)) {\r\n                        return;\r\n                    }\r\n                    var len = node.data.length;\r\n                    var range = doc.createRange();\r\n                    range.selectNodeContents(node);\r\n                    var fall = fallsOnMargin(range);\r\n                    if (!fall) {\r\n                        return;\r\n                    }\r\n                    var nextnode = node;\r\n                    if (fall == 1) {\r\n                        if (isFirst) {\r\n                            breakAtElement(node.parentNode);\r\n                        } else {\r\n                            breakAtElement(node);\r\n                        }\r\n                    } else {\r\n                        (function findEOP(min, pos, max) {\r\n                            range.setEnd(node, pos);\r\n                            if (min == pos || pos == max) {\r\n                                return pos;\r\n                            }\r\n                            if (fallsOnMargin(range)) {\r\n                                return findEOP(min, min + pos >> 1, pos);\r\n                            } else {\r\n                                return findEOP(pos, pos + max >> 1, max);\r\n                            }\r\n                        }(0, len >> 1, len));\r\n                        if (!/\\S/.test(range.toString()) && isFirst) {\r\n                            breakAtElement(node.parentNode);\r\n                        } else {\r\n                            nextnode = node.splitText(range.endOffset);\r\n                            var page = makePage();\r\n                            range.setStartBefore(copy);\r\n                            page.appendChild(range.extractContents());\r\n                            copy.parentNode.insertBefore(page, copy);\r\n                        }\r\n                    }\r\n                    splitText(nextnode);\r\n                }\r\n            }\r\n            return defer.promise();\r\n        }\r\n        drawing.drawDOM = drawDOM;\r\n        drawDOM.getFontFaces = getFontFaces;\r\n        var parseBackgroundImage = function () {\r\n            var tok_linear_gradient = /^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\\s*)\\(/;\r\n            var tok_percent = /^([-0-9.]+%)/;\r\n            var tok_length = /^([-0-9.]+px)/;\r\n            var tok_keyword = /^(left|right|top|bottom|to|center)\\W/;\r\n            var tok_angle = /^([-0-9.]+(deg|grad|rad|turn))/;\r\n            var tok_whitespace = /^(\\s+)/;\r\n            var tok_popen = /^(\\()/;\r\n            var tok_pclose = /^(\\))/;\r\n            var tok_comma = /^(,)/;\r\n            var tok_url = /^(url)\\(/;\r\n            var tok_content = /^(.*?)\\)/;\r\n            var cache1 = {}, cache2 = {};\r\n            function parse(input) {\r\n                var orig = input;\r\n                if (hasOwnProperty(cache1, orig)) {\r\n                    return cache1[orig];\r\n                }\r\n                function skip_ws() {\r\n                    var m = tok_whitespace.exec(input);\r\n                    if (m) {\r\n                        input = input.substr(m[1].length);\r\n                    }\r\n                }\r\n                function read(token) {\r\n                    skip_ws();\r\n                    var m = token.exec(input);\r\n                    if (m) {\r\n                        input = input.substr(m[1].length);\r\n                        return m[1];\r\n                    }\r\n                }\r\n                function read_stop() {\r\n                    var color = kendo.parseColor(input, true);\r\n                    var length, percent;\r\n                    if (color) {\r\n                        input = input.substr(color.match[0].length);\r\n                        color = color.toRGB();\r\n                        if (!(length = read(tok_length))) {\r\n                            percent = read(tok_percent);\r\n                        }\r\n                        return {\r\n                            color: color,\r\n                            length: length,\r\n                            percent: percent\r\n                        };\r\n                    }\r\n                }\r\n                function read_linear_gradient(propName) {\r\n                    var angle;\r\n                    var to1, to2;\r\n                    var stops = [];\r\n                    var reverse = false;\r\n                    if (read(tok_popen)) {\r\n                        angle = read(tok_angle);\r\n                        if (angle) {\r\n                            angle = parseAngle(angle);\r\n                            read(tok_comma);\r\n                        } else {\r\n                            to1 = read(tok_keyword);\r\n                            if (to1 == 'to') {\r\n                                to1 = read(tok_keyword);\r\n                            } else if (to1 && /^-/.test(propName)) {\r\n                                reverse = true;\r\n                            }\r\n                            to2 = read(tok_keyword);\r\n                            read(tok_comma);\r\n                        }\r\n                        if (/-moz-/.test(propName) && angle == null && to1 == null) {\r\n                            var x = read(tok_percent), y = read(tok_percent);\r\n                            reverse = true;\r\n                            if (x == '0%') {\r\n                                to1 = 'left';\r\n                            } else if (x == '100%') {\r\n                                to1 = 'right';\r\n                            }\r\n                            if (y == '0%') {\r\n                                to2 = 'top';\r\n                            } else if (y == '100%') {\r\n                                to2 = 'bottom';\r\n                            }\r\n                            read(tok_comma);\r\n                        }\r\n                        while (input && !read(tok_pclose)) {\r\n                            var stop = read_stop();\r\n                            if (!stop) {\r\n                                break;\r\n                            }\r\n                            stops.push(stop);\r\n                            read(tok_comma);\r\n                        }\r\n                        return {\r\n                            type: 'linear',\r\n                            angle: angle,\r\n                            to: to1 && to2 ? to1 + ' ' + to2 : to1 ? to1 : to2 ? to2 : null,\r\n                            stops: stops,\r\n                            reverse: reverse\r\n                        };\r\n                    }\r\n                }\r\n                function read_url() {\r\n                    if (read(tok_popen)) {\r\n                        var url = read(tok_content);\r\n                        url = url.replace(/^['\"]+|[\"']+$/g, '');\r\n                        read(tok_pclose);\r\n                        return {\r\n                            type: 'url',\r\n                            url: url\r\n                        };\r\n                    }\r\n                }\r\n                var tok;\r\n                if (tok = read(tok_linear_gradient)) {\r\n                    tok = read_linear_gradient(tok);\r\n                } else if (tok = read(tok_url)) {\r\n                    tok = read_url();\r\n                }\r\n                return cache1[orig] = tok || { type: 'none' };\r\n            }\r\n            return function (input) {\r\n                if (hasOwnProperty(cache2, input)) {\r\n                    return cache2[input];\r\n                }\r\n                return cache2[input] = splitProperty(input).map(parse);\r\n            };\r\n        }();\r\n        var splitProperty = function () {\r\n            var cache = {};\r\n            return function (input, separator) {\r\n                if (!separator) {\r\n                    separator = /^\\s*,\\s*/;\r\n                }\r\n                var cacheKey = input + separator;\r\n                if (hasOwnProperty(cache, cacheKey)) {\r\n                    return cache[cacheKey];\r\n                }\r\n                var ret = [];\r\n                var last = 0, pos = 0;\r\n                var in_paren = 0;\r\n                var in_string = false;\r\n                var m;\r\n                function looking_at(rx) {\r\n                    return m = rx.exec(input.substr(pos));\r\n                }\r\n                function trim(str) {\r\n                    return str.replace(/^\\s+|\\s+$/g, '');\r\n                }\r\n                while (pos < input.length) {\r\n                    if (!in_string && looking_at(/^[\\(\\[\\{]/)) {\r\n                        in_paren++;\r\n                        pos++;\r\n                    } else if (!in_string && looking_at(/^[\\)\\]\\}]/)) {\r\n                        in_paren--;\r\n                        pos++;\r\n                    } else if (!in_string && looking_at(/^[\\\"\\']/)) {\r\n                        in_string = m[0];\r\n                        pos++;\r\n                    } else if (in_string == '\\'' && looking_at(/^\\\\\\'/)) {\r\n                        pos += 2;\r\n                    } else if (in_string == '\"' && looking_at(/^\\\\\\\"/)) {\r\n                        pos += 2;\r\n                    } else if (in_string == '\\'' && looking_at(/^\\'/)) {\r\n                        in_string = false;\r\n                        pos++;\r\n                    } else if (in_string == '\"' && looking_at(/^\\\"/)) {\r\n                        in_string = false;\r\n                        pos++;\r\n                    } else if (looking_at(separator)) {\r\n                        if (!in_string && !in_paren && pos > last) {\r\n                            ret.push(trim(input.substring(last, pos)));\r\n                            last = pos + m[0].length;\r\n                        }\r\n                        pos += m[0].length;\r\n                    } else {\r\n                        pos++;\r\n                    }\r\n                }\r\n                if (last < pos) {\r\n                    ret.push(trim(input.substring(last, pos)));\r\n                }\r\n                return cache[cacheKey] = ret;\r\n            };\r\n        }();\r\n        var getFontURL = function () {\r\n            var cache = {};\r\n            return function (el) {\r\n                var url = cache[el];\r\n                if (!url) {\r\n                    var m;\r\n                    if (m = /url\\((['\"]?)([^'\")]*?)\\1\\)\\s+format\\((['\"]?)truetype\\3\\)/.exec(el)) {\r\n                        url = cache[el] = m[2];\r\n                    } else if (m = /url\\((['\"]?)([^'\")]*?\\.ttf)\\1\\)/.exec(el)) {\r\n                        url = cache[el] = m[2];\r\n                    }\r\n                }\r\n                return url;\r\n            };\r\n        }();\r\n        function getFontFaces(doc) {\r\n            if (doc == null) {\r\n                doc = document;\r\n            }\r\n            var result = {};\r\n            for (var i = 0; i < doc.styleSheets.length; ++i) {\r\n                doStylesheet(doc.styleSheets[i]);\r\n            }\r\n            return result;\r\n            function doStylesheet(ss) {\r\n                if (ss) {\r\n                    var rules = null;\r\n                    try {\r\n                        rules = ss.cssRules;\r\n                    } catch (ex) {\r\n                    }\r\n                    if (rules) {\r\n                        addRules(ss, rules);\r\n                    }\r\n                }\r\n            }\r\n            function findFonts(rule) {\r\n                var src = getPropertyValue(rule.style, 'src');\r\n                if (src) {\r\n                    return splitProperty(src).reduce(function (a, el) {\r\n                        var font = getFontURL(el);\r\n                        if (font) {\r\n                            a.push(font);\r\n                        }\r\n                        return a;\r\n                    }, []);\r\n                } else {\r\n                    var font = getFontURL(rule.cssText);\r\n                    return font ? [font] : [];\r\n                }\r\n            }\r\n            function addRules(styleSheet, rules) {\r\n                for (var i = 0; i < rules.length; ++i) {\r\n                    var r = rules[i];\r\n                    switch (r.type) {\r\n                    case 3:\r\n                        doStylesheet(r.styleSheet);\r\n                        break;\r\n                    case 5:\r\n                        var style = r.style;\r\n                        var family = splitProperty(getPropertyValue(style, 'font-family'));\r\n                        var bold = /^([56789]00|bold)$/i.test(getPropertyValue(style, 'font-weight'));\r\n                        var italic = 'italic' == getPropertyValue(style, 'font-style');\r\n                        var src = findFonts(r);\r\n                        if (src.length > 0) {\r\n                            addRule(styleSheet, family, bold, italic, src[0]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            function addRule(styleSheet, names, bold, italic, url) {\r\n                if (!/^data:/i.test(url)) {\r\n                    if (!(/^[^\\/:]+:\\/\\//.test(url) || /^\\//.test(url))) {\r\n                        url = String(styleSheet.href).replace(/[^\\/]*$/, '') + url;\r\n                    }\r\n                }\r\n                names.forEach(function (name) {\r\n                    name = name.replace(/^(['\"]?)(.*?)\\1$/, '$2');\r\n                    if (bold) {\r\n                        name += '|bold';\r\n                    }\r\n                    if (italic) {\r\n                        name += '|italic';\r\n                    }\r\n                    result[name] = url;\r\n                });\r\n            }\r\n        }\r\n        function hasOwnProperty(obj, key) {\r\n            return Object.prototype.hasOwnProperty.call(obj, key);\r\n        }\r\n        function getCounter(name) {\r\n            name = '_counter_' + name;\r\n            return nodeInfo[name];\r\n        }\r\n        function getAllCounters(name) {\r\n            var values = [], p = nodeInfo;\r\n            name = '_counter_' + name;\r\n            while (p) {\r\n                if (hasOwnProperty(p, name)) {\r\n                    values.push(p[name]);\r\n                }\r\n                p = Object.getPrototypeOf(p);\r\n            }\r\n            return values.reverse();\r\n        }\r\n        function incCounter(name, inc) {\r\n            var p = nodeInfo;\r\n            name = '_counter_' + name;\r\n            while (p && !hasOwnProperty(p, name)) {\r\n                p = Object.getPrototypeOf(p);\r\n            }\r\n            if (!p) {\r\n                p = nodeInfo._root;\r\n            }\r\n            p[name] = (p[name] || 0) + (inc == null ? 1 : inc);\r\n        }\r\n        function resetCounter(name, val) {\r\n            name = '_counter_' + name;\r\n            nodeInfo[name] = val == null ? 0 : val;\r\n        }\r\n        function doCounters(a, f, def) {\r\n            for (var i = 0; i < a.length;) {\r\n                var name = a[i++];\r\n                var val = parseFloat(a[i]);\r\n                if (isNaN(val)) {\r\n                    f(name, def);\r\n                } else {\r\n                    f(name, val);\r\n                    ++i;\r\n                }\r\n            }\r\n        }\r\n        function parseColor(str, css) {\r\n            var color = kendo.parseColor(str);\r\n            if (color) {\r\n                color = color.toRGB();\r\n                if (css) {\r\n                    color = color.toCssRgba();\r\n                } else if (color.a === 0) {\r\n                    color = null;\r\n                }\r\n            }\r\n            return color;\r\n        }\r\n        function whenImagesAreActuallyLoaded(elements, callback) {\r\n            var pending = 0;\r\n            elements.forEach(function (el) {\r\n                var images = el.querySelectorAll('img');\r\n                for (var i = 0; i < images.length; ++i) {\r\n                    var img = images[i];\r\n                    if (!img.complete) {\r\n                        pending++;\r\n                        img.onload = img.onerror = next;\r\n                    }\r\n                }\r\n            });\r\n            if (!pending) {\r\n                next();\r\n            }\r\n            function next() {\r\n                if (--pending <= 0) {\r\n                    callback();\r\n                }\r\n            }\r\n        }\r\n        function cacheImages(element, callback) {\r\n            var urls = [];\r\n            function add(url) {\r\n                if (!IMAGE_CACHE[url]) {\r\n                    IMAGE_CACHE[url] = true;\r\n                    urls.push(url);\r\n                }\r\n            }\r\n            (function dive(element) {\r\n                if (/^img$/i.test(element.tagName)) {\r\n                    add(element.src);\r\n                }\r\n                parseBackgroundImage(getPropertyValue(getComputedStyle(element), 'background-image')).forEach(function (bg) {\r\n                    if (bg.type == 'url') {\r\n                        add(bg.url);\r\n                    }\r\n                });\r\n                if (element.children) {\r\n                    slice.call(element.children).forEach(dive);\r\n                }\r\n            }(element));\r\n            var count = urls.length;\r\n            function next() {\r\n                if (--count <= 0) {\r\n                    callback();\r\n                }\r\n            }\r\n            if (count === 0) {\r\n                next();\r\n            }\r\n            urls.forEach(function (url) {\r\n                var img = IMAGE_CACHE[url] = new Image();\r\n                if (!/^data:/i.test(url)) {\r\n                    img.crossOrigin = 'Anonymous';\r\n                }\r\n                img.src = url;\r\n                if (img.complete) {\r\n                    next();\r\n                } else {\r\n                    img.onload = next;\r\n                    img.onerror = function () {\r\n                        IMAGE_CACHE[url] = null;\r\n                        next();\r\n                    };\r\n                }\r\n            });\r\n        }\r\n        function alphaNumeral(n) {\r\n            var result = '';\r\n            do {\r\n                var r = n % 26;\r\n                result = String.fromCharCode(97 + r) + result;\r\n                n = Math.floor(n / 26);\r\n            } while (n > 0);\r\n            return result;\r\n        }\r\n        function pushNodeInfo(element, style, group) {\r\n            nodeInfo = Object.create(nodeInfo);\r\n            nodeInfo[element.tagName.toLowerCase()] = {\r\n                element: element,\r\n                style: style\r\n            };\r\n            var decoration = getPropertyValue(style, 'text-decoration');\r\n            if (decoration && decoration != 'none') {\r\n                var color = getPropertyValue(style, 'color');\r\n                decoration.split(/\\s+/g).forEach(function (name) {\r\n                    if (!nodeInfo[name]) {\r\n                        nodeInfo[name] = color;\r\n                    }\r\n                });\r\n            }\r\n            if (createsStackingContext(style)) {\r\n                nodeInfo._stackingContext = {\r\n                    element: element,\r\n                    group: group\r\n                };\r\n            }\r\n        }\r\n        function popNodeInfo() {\r\n            nodeInfo = Object.getPrototypeOf(nodeInfo);\r\n        }\r\n        function updateClipbox(path) {\r\n            if (nodeInfo._clipbox != null) {\r\n                var box = path.bbox(nodeInfo._matrix);\r\n                if (nodeInfo._clipbox) {\r\n                    nodeInfo._clipbox = geo.Rect.intersect(nodeInfo._clipbox, box);\r\n                } else {\r\n                    nodeInfo._clipbox = box;\r\n                }\r\n            }\r\n        }\r\n        function emptyClipbox() {\r\n            var cb = nodeInfo._clipbox;\r\n            if (cb == null) {\r\n                return true;\r\n            }\r\n            if (cb) {\r\n                return cb.width() === 0 || cb.height() === 0;\r\n            }\r\n        }\r\n        function createsStackingContext(style) {\r\n            function prop(name) {\r\n                return getPropertyValue(style, name);\r\n            }\r\n            if (prop('transform') != 'none' || prop('position') != 'static' && prop('z-index') != 'auto' || prop('opacity') < 1) {\r\n                return true;\r\n            }\r\n        }\r\n        function getComputedStyle(element, pseudoElt) {\r\n            return window.getComputedStyle(element, pseudoElt || null);\r\n        }\r\n        function getPropertyValue(style, prop) {\r\n            return style.getPropertyValue(prop) || browser.webkit && style.getPropertyValue('-webkit-' + prop) || browser.mozilla && style.getPropertyValue('-moz-' + prop) || browser.opera && style.getPropertyValue('-o-' + prop) || browser.msie && style.getPropertyValue('-ms-' + prop);\r\n        }\r\n        function pleaseSetPropertyValue(style, prop, value, important) {\r\n            style.setProperty(prop, value, important);\r\n            if (browser.webkit) {\r\n                style.setProperty('-webkit-' + prop, value, important);\r\n            } else if (browser.mozilla) {\r\n                style.setProperty('-moz-' + prop, value, important);\r\n            } else if (browser.opera) {\r\n                style.setProperty('-o-' + prop, value, important);\r\n            } else if (browser.msie) {\r\n                style.setProperty('-ms-' + prop, value, important);\r\n                prop = 'ms' + prop.replace(/(^|-)([a-z])/g, function (s, p1, p2) {\r\n                    return p1 + p2.toUpperCase();\r\n                });\r\n                style[prop] = value;\r\n            }\r\n        }\r\n        function getBorder(style, side) {\r\n            side = 'border-' + side;\r\n            return {\r\n                width: parseFloat(getPropertyValue(style, side + '-width')),\r\n                style: getPropertyValue(style, side + '-style'),\r\n                color: parseColor(getPropertyValue(style, side + '-color'), true)\r\n            };\r\n        }\r\n        function saveStyle(element, func) {\r\n            var prev = element.style.cssText;\r\n            var result = func();\r\n            element.style.cssText = prev;\r\n            return result;\r\n        }\r\n        function getBorderRadius(style, side) {\r\n            var r = getPropertyValue(style, 'border-' + side + '-radius').split(/\\s+/g).map(parseFloat);\r\n            if (r.length == 1) {\r\n                r.push(r[0]);\r\n            }\r\n            return sanitizeRadius({\r\n                x: r[0],\r\n                y: r[1]\r\n            });\r\n        }\r\n        function getContentBox(element) {\r\n            var box = element.getBoundingClientRect();\r\n            box = innerBox(box, 'border-*-width', element);\r\n            box = innerBox(box, 'padding-*', element);\r\n            return box;\r\n        }\r\n        function innerBox(box, prop, element) {\r\n            var style, wt, wr, wb, wl;\r\n            if (typeof prop == 'string') {\r\n                style = getComputedStyle(element);\r\n                wt = parseFloat(getPropertyValue(style, prop.replace('*', 'top')));\r\n                wr = parseFloat(getPropertyValue(style, prop.replace('*', 'right')));\r\n                wb = parseFloat(getPropertyValue(style, prop.replace('*', 'bottom')));\r\n                wl = parseFloat(getPropertyValue(style, prop.replace('*', 'left')));\r\n            } else if (typeof prop == 'number') {\r\n                wt = wr = wb = wl = prop;\r\n            }\r\n            return {\r\n                top: box.top + wt,\r\n                right: box.right - wr,\r\n                bottom: box.bottom - wb,\r\n                left: box.left + wl,\r\n                width: box.right - box.left - wr - wl,\r\n                height: box.bottom - box.top - wb - wt\r\n            };\r\n        }\r\n        function getTransform(style) {\r\n            var transform = getPropertyValue(style, 'transform');\r\n            if (transform == 'none') {\r\n                return null;\r\n            }\r\n            var matrix = /^\\s*matrix\\(\\s*(.*?)\\s*\\)\\s*$/.exec(transform);\r\n            if (matrix) {\r\n                var origin = getPropertyValue(style, 'transform-origin');\r\n                matrix = matrix[1].split(/\\s*,\\s*/g).map(parseFloat);\r\n                origin = origin.split(/\\s+/g).map(parseFloat);\r\n                return {\r\n                    matrix: matrix,\r\n                    origin: origin\r\n                };\r\n            }\r\n        }\r\n        function radiansToDegrees(radians) {\r\n            return 180 * radians / Math.PI % 360;\r\n        }\r\n        function parseAngle(angle) {\r\n            var num = parseFloat(angle);\r\n            if (/grad$/.test(angle)) {\r\n                return Math.PI * num / 200;\r\n            } else if (/rad$/.test(angle)) {\r\n                return num;\r\n            } else if (/turn$/.test(angle)) {\r\n                return Math.PI * num * 2;\r\n            } else if (/deg$/.test(angle)) {\r\n                return Math.PI * num / 180;\r\n            }\r\n        }\r\n        function setTransform(shape, m) {\r\n            m = new geo.Matrix(m[0], m[1], m[2], m[3], m[4], m[5]);\r\n            shape.transform(m);\r\n            return m;\r\n        }\r\n        function setClipping(shape, clipPath) {\r\n            shape.clip(clipPath);\r\n        }\r\n        function addArcToPath(path, x, y, options) {\r\n            var points = new geo.Arc([\r\n                    x,\r\n                    y\r\n                ], options).curvePoints(), i = 1;\r\n            while (i < points.length) {\r\n                path.curveTo(points[i++], points[i++], points[i++]);\r\n            }\r\n        }\r\n        function sanitizeRadius(r) {\r\n            if (r.x <= 0 || r.y <= 0) {\r\n                r.x = r.y = 0;\r\n            }\r\n            return r;\r\n        }\r\n        function adjustBorderRadiusForBox(box, rTL, rTR, rBR, rBL) {\r\n            var tl_x = Math.max(0, rTL.x), tl_y = Math.max(0, rTL.y);\r\n            var tr_x = Math.max(0, rTR.x), tr_y = Math.max(0, rTR.y);\r\n            var br_x = Math.max(0, rBR.x), br_y = Math.max(0, rBR.y);\r\n            var bl_x = Math.max(0, rBL.x), bl_y = Math.max(0, rBL.y);\r\n            var f = Math.min(box.width / (tl_x + tr_x), box.height / (tr_y + br_y), box.width / (br_x + bl_x), box.height / (bl_y + tl_y));\r\n            if (f < 1) {\r\n                tl_x *= f;\r\n                tl_y *= f;\r\n                tr_x *= f;\r\n                tr_y *= f;\r\n                br_x *= f;\r\n                br_y *= f;\r\n                bl_x *= f;\r\n                bl_y *= f;\r\n            }\r\n            return {\r\n                tl: {\r\n                    x: tl_x,\r\n                    y: tl_y\r\n                },\r\n                tr: {\r\n                    x: tr_x,\r\n                    y: tr_y\r\n                },\r\n                br: {\r\n                    x: br_x,\r\n                    y: br_y\r\n                },\r\n                bl: {\r\n                    x: bl_x,\r\n                    y: bl_y\r\n                }\r\n            };\r\n        }\r\n        function elementRoundBox(element, box, type) {\r\n            var style = getComputedStyle(element);\r\n            var rTL = getBorderRadius(style, 'top-left');\r\n            var rTR = getBorderRadius(style, 'top-right');\r\n            var rBL = getBorderRadius(style, 'bottom-left');\r\n            var rBR = getBorderRadius(style, 'bottom-right');\r\n            if (type == 'padding' || type == 'content') {\r\n                var bt = getBorder(style, 'top');\r\n                var br = getBorder(style, 'right');\r\n                var bb = getBorder(style, 'bottom');\r\n                var bl = getBorder(style, 'left');\r\n                rTL.x -= bl.width;\r\n                rTL.y -= bt.width;\r\n                rTR.x -= br.width;\r\n                rTR.y -= bt.width;\r\n                rBR.x -= br.width;\r\n                rBR.y -= bb.width;\r\n                rBL.x -= bl.width;\r\n                rBL.y -= bb.width;\r\n                if (type == 'content') {\r\n                    var pt = parseFloat(getPropertyValue(style, 'padding-top'));\r\n                    var pr = parseFloat(getPropertyValue(style, 'padding-right'));\r\n                    var pb = parseFloat(getPropertyValue(style, 'padding-bottom'));\r\n                    var pl = parseFloat(getPropertyValue(style, 'padding-left'));\r\n                    rTL.x -= pl;\r\n                    rTL.y -= pt;\r\n                    rTR.x -= pr;\r\n                    rTR.y -= pt;\r\n                    rBR.x -= pr;\r\n                    rBR.y -= pb;\r\n                    rBL.x -= pl;\r\n                    rBL.y -= pb;\r\n                }\r\n            }\r\n            if (typeof type == 'number') {\r\n                rTL.x -= type;\r\n                rTL.y -= type;\r\n                rTR.x -= type;\r\n                rTR.y -= type;\r\n                rBR.x -= type;\r\n                rBR.y -= type;\r\n                rBL.x -= type;\r\n                rBL.y -= type;\r\n            }\r\n            return roundBox(box, rTL, rTR, rBR, rBL);\r\n        }\r\n        function roundBox(box, rTL0, rTR0, rBR0, rBL0) {\r\n            var tmp = adjustBorderRadiusForBox(box, rTL0, rTR0, rBR0, rBL0);\r\n            var rTL = tmp.tl;\r\n            var rTR = tmp.tr;\r\n            var rBR = tmp.br;\r\n            var rBL = tmp.bl;\r\n            var path = new drawing.Path({\r\n                fill: null,\r\n                stroke: null\r\n            });\r\n            path.moveTo(box.left, box.top + rTL.y);\r\n            if (rTL.x) {\r\n                addArcToPath(path, box.left + rTL.x, box.top + rTL.y, {\r\n                    startAngle: -180,\r\n                    endAngle: -90,\r\n                    radiusX: rTL.x,\r\n                    radiusY: rTL.y\r\n                });\r\n            }\r\n            path.lineTo(box.right - rTR.x, box.top);\r\n            if (rTR.x) {\r\n                addArcToPath(path, box.right - rTR.x, box.top + rTR.y, {\r\n                    startAngle: -90,\r\n                    endAngle: 0,\r\n                    radiusX: rTR.x,\r\n                    radiusY: rTR.y\r\n                });\r\n            }\r\n            path.lineTo(box.right, box.bottom - rBR.y);\r\n            if (rBR.x) {\r\n                addArcToPath(path, box.right - rBR.x, box.bottom - rBR.y, {\r\n                    startAngle: 0,\r\n                    endAngle: 90,\r\n                    radiusX: rBR.x,\r\n                    radiusY: rBR.y\r\n                });\r\n            }\r\n            path.lineTo(box.left + rBL.x, box.bottom);\r\n            if (rBL.x) {\r\n                addArcToPath(path, box.left + rBL.x, box.bottom - rBL.y, {\r\n                    startAngle: 90,\r\n                    endAngle: 180,\r\n                    radiusX: rBL.x,\r\n                    radiusY: rBL.y\r\n                });\r\n            }\r\n            return path.close();\r\n        }\r\n        function formatCounter(val, style) {\r\n            var str = parseFloat(val) + '';\r\n            switch (style) {\r\n            case 'decimal-leading-zero':\r\n                if (str.length < 2) {\r\n                    str = '0' + str;\r\n                }\r\n                return str;\r\n            case 'lower-roman':\r\n                return romanNumeral(val).toLowerCase();\r\n            case 'upper-roman':\r\n                return romanNumeral(val).toUpperCase();\r\n            case 'lower-latin':\r\n            case 'lower-alpha':\r\n                return alphaNumeral(val - 1);\r\n            case 'upper-latin':\r\n            case 'upper-alpha':\r\n                return alphaNumeral(val - 1).toUpperCase();\r\n            default:\r\n                return str;\r\n            }\r\n        }\r\n        function evalPseudoElementContent(element, content) {\r\n            function displayCounter(name, style, separator) {\r\n                if (!separator) {\r\n                    return formatCounter(getCounter(name) || 0, style);\r\n                }\r\n                separator = separator.replace(/^\\s*([\"'])(.*)\\1\\s*$/, '$2');\r\n                return getAllCounters(name).map(function (val) {\r\n                    return formatCounter(val, style);\r\n                }).join(separator);\r\n            }\r\n            var a = splitProperty(content, /^\\s+/);\r\n            var result = [], m;\r\n            a.forEach(function (el) {\r\n                var tmp;\r\n                if (m = /^\\s*([\"'])(.*)\\1\\s*$/.exec(el)) {\r\n                    result.push(m[2].replace(/\\\\([0-9a-f]{4})/gi, function (s, p) {\r\n                        return String.fromCharCode(parseInt(p, 16));\r\n                    }));\r\n                } else if (m = /^\\s*counter\\((.*?)\\)\\s*$/.exec(el)) {\r\n                    tmp = splitProperty(m[1]);\r\n                    result.push(displayCounter(tmp[0], tmp[1]));\r\n                } else if (m = /^\\s*counters\\((.*?)\\)\\s*$/.exec(el)) {\r\n                    tmp = splitProperty(m[1]);\r\n                    result.push(displayCounter(tmp[0], tmp[2], tmp[1]));\r\n                } else if (m = /^\\s*attr\\((.*?)\\)\\s*$/.exec(el)) {\r\n                    result.push(element.getAttribute(m[1]) || '');\r\n                } else {\r\n                    result.push(el);\r\n                }\r\n            });\r\n            return result.join('');\r\n        }\r\n        function getCssText(style) {\r\n            if (style.cssText) {\r\n                return style.cssText;\r\n            }\r\n            var result = [];\r\n            for (var i = 0; i < style.length; ++i) {\r\n                result.push(style[i] + ': ' + getPropertyValue(style, style[i]));\r\n            }\r\n            return result.join(';\\n');\r\n        }\r\n        function _renderWithPseudoElements(element, group) {\r\n            if (element.tagName == KENDO_PSEUDO_ELEMENT) {\r\n                _renderElement(element, group);\r\n                return;\r\n            }\r\n            var fake = [];\r\n            function pseudo(kind, place) {\r\n                var style = getComputedStyle(element, kind);\r\n                if (style.content && style.content != 'normal' && style.content != 'none' && style.width != '0px') {\r\n                    var psel = element.ownerDocument.createElement(KENDO_PSEUDO_ELEMENT);\r\n                    psel.style.cssText = getCssText(style);\r\n                    psel.textContent = evalPseudoElementContent(element, style.content);\r\n                    element.insertBefore(psel, place);\r\n                    fake.push(psel);\r\n                }\r\n            }\r\n            pseudo(':before', element.firstChild);\r\n            pseudo(':after', null);\r\n            var saveClass = element.className;\r\n            element.className += ' kendo-pdf-hide-pseudo-elements';\r\n            _renderElement(element, group);\r\n            element.className = saveClass;\r\n            fake.forEach(function (el) {\r\n                element.removeChild(el);\r\n            });\r\n        }\r\n        function _renderElement(element, group) {\r\n            var style = getComputedStyle(element);\r\n            var top = getBorder(style, 'top');\r\n            var right = getBorder(style, 'right');\r\n            var bottom = getBorder(style, 'bottom');\r\n            var left = getBorder(style, 'left');\r\n            var rTL0 = getBorderRadius(style, 'top-left');\r\n            var rTR0 = getBorderRadius(style, 'top-right');\r\n            var rBL0 = getBorderRadius(style, 'bottom-left');\r\n            var rBR0 = getBorderRadius(style, 'bottom-right');\r\n            var dir = getPropertyValue(style, 'direction');\r\n            var backgroundColor = getPropertyValue(style, 'background-color');\r\n            backgroundColor = parseColor(backgroundColor);\r\n            var backgroundImage = parseBackgroundImage(getPropertyValue(style, 'background-image'));\r\n            var backgroundRepeat = splitProperty(getPropertyValue(style, 'background-repeat'));\r\n            var backgroundPosition = splitProperty(getPropertyValue(style, 'background-position'));\r\n            var backgroundOrigin = splitProperty(getPropertyValue(style, 'background-origin'));\r\n            var backgroundSize = splitProperty(getPropertyValue(style, 'background-size'));\r\n            if (browser.msie && browser.version < 10) {\r\n                backgroundPosition = splitProperty(element.currentStyle.backgroundPosition);\r\n            }\r\n            var innerbox = innerBox(element.getBoundingClientRect(), 'border-*-width', element);\r\n            (function () {\r\n                var clip = getPropertyValue(style, 'clip');\r\n                var m = /^\\s*rect\\((.*)\\)\\s*$/.exec(clip);\r\n                if (m) {\r\n                    var a = m[1].split(/[ ,]+/g);\r\n                    var top = a[0] == 'auto' ? innerbox.top : parseFloat(a[0]) + innerbox.top;\r\n                    var right = a[1] == 'auto' ? innerbox.right : parseFloat(a[1]) + innerbox.left;\r\n                    var bottom = a[2] == 'auto' ? innerbox.bottom : parseFloat(a[2]) + innerbox.top;\r\n                    var left = a[3] == 'auto' ? innerbox.left : parseFloat(a[3]) + innerbox.left;\r\n                    var tmp = new drawing.Group();\r\n                    var clipPath = new drawing.Path().moveTo(left, top).lineTo(right, top).lineTo(right, bottom).lineTo(left, bottom).close();\r\n                    setClipping(tmp, clipPath);\r\n                    group.append(tmp);\r\n                    group = tmp;\r\n                    updateClipbox(clipPath);\r\n                }\r\n            }());\r\n            var boxes, i, cells;\r\n            var display = getPropertyValue(style, 'display');\r\n            if (display == 'table-row') {\r\n                boxes = [];\r\n                for (i = 0, cells = element.children; i < cells.length; ++i) {\r\n                    boxes.push(cells[i].getBoundingClientRect());\r\n                }\r\n            } else {\r\n                boxes = element.getClientRects();\r\n                if (boxes.length == 1) {\r\n                    boxes = [element.getBoundingClientRect()];\r\n                }\r\n            }\r\n            boxes = adjustBoxes(boxes);\r\n            for (i = 0; i < boxes.length; ++i) {\r\n                drawOneBox(boxes[i], i === 0, i == boxes.length - 1);\r\n            }\r\n            if (boxes.length > 0 && display == 'list-item') {\r\n                drawBullet(boxes[0]);\r\n            }\r\n            (function () {\r\n                function clipit() {\r\n                    var clipPath = elementRoundBox(element, innerbox, 'padding');\r\n                    var tmp = new drawing.Group();\r\n                    setClipping(tmp, clipPath);\r\n                    group.append(tmp);\r\n                    group = tmp;\r\n                    updateClipbox(clipPath);\r\n                }\r\n                if (isFormField(element)) {\r\n                    clipit();\r\n                } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, 'overflow'))) {\r\n                    clipit();\r\n                } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, 'overflow-x'))) {\r\n                    clipit();\r\n                } else if (/^(hidden|auto|scroll)/.test(getPropertyValue(style, 'overflow-y'))) {\r\n                    clipit();\r\n                }\r\n            }());\r\n            if (!maybeRenderWidget(element, group)) {\r\n                renderContents(element, group);\r\n            }\r\n            return group;\r\n            function adjustBoxes(boxes) {\r\n                if (/^td$/i.test(element.tagName)) {\r\n                    var table = nodeInfo.table;\r\n                    if (table && getPropertyValue(table.style, 'border-collapse') == 'collapse') {\r\n                        var tableBorderLeft = getBorder(table.style, 'left').width;\r\n                        var tableBorderTop = getBorder(table.style, 'top').width;\r\n                        if (tableBorderLeft === 0 && tableBorderTop === 0) {\r\n                            return boxes;\r\n                        }\r\n                        var tableBox = table.element.getBoundingClientRect();\r\n                        var firstCell = table.element.rows[0].cells[0];\r\n                        var firstCellBox = firstCell.getBoundingClientRect();\r\n                        if (firstCellBox.top == tableBox.top || firstCellBox.left == tableBox.left) {\r\n                            return slice.call(boxes).map(function (box) {\r\n                                return {\r\n                                    left: box.left + tableBorderLeft,\r\n                                    top: box.top + tableBorderTop,\r\n                                    right: box.right + tableBorderLeft,\r\n                                    bottom: box.bottom + tableBorderTop,\r\n                                    height: box.height,\r\n                                    width: box.width\r\n                                };\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n                return boxes;\r\n            }\r\n            function drawEdge(color, len, Wtop, Wleft, Wright, rl, rr, transform) {\r\n                if (Wtop <= 0) {\r\n                    return;\r\n                }\r\n                var path, edge = new drawing.Group();\r\n                setTransform(edge, transform);\r\n                group.append(edge);\r\n                sanitizeRadius(rl);\r\n                sanitizeRadius(rr);\r\n                path = new drawing.Path({\r\n                    fill: { color: color },\r\n                    stroke: null\r\n                });\r\n                edge.append(path);\r\n                path.moveTo(rl.x ? Math.max(rl.x, Wleft) : 0, 0).lineTo(len - (rr.x ? Math.max(rr.x, Wright) : 0), 0).lineTo(len - Math.max(rr.x, Wright), Wtop).lineTo(Math.max(rl.x, Wleft), Wtop).close();\r\n                if (rl.x) {\r\n                    drawRoundCorner(Wleft, rl, [\r\n                        -1,\r\n                        0,\r\n                        0,\r\n                        1,\r\n                        rl.x,\r\n                        0\r\n                    ]);\r\n                }\r\n                if (rr.x) {\r\n                    drawRoundCorner(Wright, rr, [\r\n                        1,\r\n                        0,\r\n                        0,\r\n                        1,\r\n                        len - rr.x,\r\n                        0\r\n                    ]);\r\n                }\r\n                function drawRoundCorner(Wright, r, transform) {\r\n                    var angle = Math.PI / 2 * Wright / (Wright + Wtop);\r\n                    var ri = {\r\n                        x: r.x - Wright,\r\n                        y: r.y - Wtop\r\n                    };\r\n                    var path = new drawing.Path({\r\n                        fill: { color: color },\r\n                        stroke: null\r\n                    }).moveTo(0, 0);\r\n                    setTransform(path, transform);\r\n                    addArcToPath(path, 0, r.y, {\r\n                        startAngle: -90,\r\n                        endAngle: -radiansToDegrees(angle),\r\n                        radiusX: r.x,\r\n                        radiusY: r.y\r\n                    });\r\n                    if (ri.x > 0 && ri.y > 0) {\r\n                        path.lineTo(ri.x * Math.cos(angle), r.y - ri.y * Math.sin(angle));\r\n                        addArcToPath(path, 0, r.y, {\r\n                            startAngle: -radiansToDegrees(angle),\r\n                            endAngle: -90,\r\n                            radiusX: ri.x,\r\n                            radiusY: ri.y,\r\n                            anticlockwise: true\r\n                        });\r\n                    } else if (ri.x > 0) {\r\n                        path.lineTo(ri.x, Wtop).lineTo(0, Wtop);\r\n                    } else {\r\n                        path.lineTo(ri.x, Wtop).lineTo(ri.x, 0);\r\n                    }\r\n                    edge.append(path.close());\r\n                }\r\n            }\r\n            function drawBackground(box) {\r\n                var background = new drawing.Group();\r\n                setClipping(background, roundBox(box, rTL0, rTR0, rBR0, rBL0));\r\n                group.append(background);\r\n                if (element.tagName == 'A' && element.href && !/^#?$/.test($(element).attr('href'))) {\r\n                    if (!nodeInfo._avoidLinks || !$(element).is(nodeInfo._avoidLinks)) {\r\n                        background._pdfLink = {\r\n                            url: element.href,\r\n                            top: box.top,\r\n                            right: box.right,\r\n                            bottom: box.bottom,\r\n                            left: box.left\r\n                        };\r\n                    }\r\n                }\r\n                if (backgroundColor) {\r\n                    var path = new drawing.Path({\r\n                        fill: { color: backgroundColor.toCssRgba() },\r\n                        stroke: null\r\n                    });\r\n                    path.moveTo(box.left, box.top).lineTo(box.right, box.top).lineTo(box.right, box.bottom).lineTo(box.left, box.bottom).close();\r\n                    background.append(path);\r\n                }\r\n                for (var i = backgroundImage.length; --i >= 0;) {\r\n                    drawOneBackground(background, box, backgroundImage[i], backgroundRepeat[i % backgroundRepeat.length], backgroundPosition[i % backgroundPosition.length], backgroundOrigin[i % backgroundOrigin.length], backgroundSize[i % backgroundSize.length]);\r\n                }\r\n            }\r\n            function drawOneBackground(group, box, background, backgroundRepeat, backgroundPosition, backgroundOrigin, backgroundSize) {\r\n                if (!background || background == 'none') {\r\n                    return;\r\n                }\r\n                if (background.type == 'url') {\r\n                    if (/^url\\(\\\"data:image\\/svg/i.test(background.url)) {\r\n                        return;\r\n                    }\r\n                    var img = IMAGE_CACHE[background.url];\r\n                    if (img && img.width > 0 && img.height > 0) {\r\n                        drawBackgroundImage(group, box, img.width, img.height, function (group, rect) {\r\n                            group.append(new drawing.Image(background.url, rect));\r\n                        });\r\n                    }\r\n                } else if (background.type == 'linear') {\r\n                    drawBackgroundImage(group, box, box.width, box.height, gradientRenderer(background));\r\n                } else {\r\n                    return;\r\n                }\r\n                function drawBackgroundImage(group, box, img_width, img_height, renderBG) {\r\n                    var aspect_ratio = img_width / img_height, f;\r\n                    var orgBox = box;\r\n                    if (backgroundOrigin == 'content-box') {\r\n                        orgBox = innerBox(orgBox, 'border-*-width', element);\r\n                        orgBox = innerBox(orgBox, 'padding-*', element);\r\n                    } else if (backgroundOrigin == 'padding-box') {\r\n                        orgBox = innerBox(orgBox, 'border-*-width', element);\r\n                    }\r\n                    if (!/^\\s*auto(\\s+auto)?\\s*$/.test(backgroundSize)) {\r\n                        if (backgroundSize == 'contain') {\r\n                            f = Math.min(orgBox.width / img_width, orgBox.height / img_height);\r\n                            img_width *= f;\r\n                            img_height *= f;\r\n                        } else if (backgroundSize == 'cover') {\r\n                            f = Math.max(orgBox.width / img_width, orgBox.height / img_height);\r\n                            img_width *= f;\r\n                            img_height *= f;\r\n                        } else {\r\n                            var size = backgroundSize.split(/\\s+/g);\r\n                            if (/%$/.test(size[0])) {\r\n                                img_width = orgBox.width * parseFloat(size[0]) / 100;\r\n                            } else {\r\n                                img_width = parseFloat(size[0]);\r\n                            }\r\n                            if (size.length == 1 || size[1] == 'auto') {\r\n                                img_height = img_width / aspect_ratio;\r\n                            } else if (/%$/.test(size[1])) {\r\n                                img_height = orgBox.height * parseFloat(size[1]) / 100;\r\n                            } else {\r\n                                img_height = parseFloat(size[1]);\r\n                            }\r\n                        }\r\n                    }\r\n                    var pos = (backgroundPosition + '').split(/\\s+/);\r\n                    if (pos.length == 1) {\r\n                        pos[1] = '50%';\r\n                    }\r\n                    if (/%$/.test(pos[0])) {\r\n                        pos[0] = parseFloat(pos[0]) / 100 * (orgBox.width - img_width);\r\n                    } else {\r\n                        pos[0] = parseFloat(pos[0]);\r\n                    }\r\n                    if (/%$/.test(pos[1])) {\r\n                        pos[1] = parseFloat(pos[1]) / 100 * (orgBox.height - img_height);\r\n                    } else {\r\n                        pos[1] = parseFloat(pos[1]);\r\n                    }\r\n                    var rect = new geo.Rect([\r\n                        orgBox.left + pos[0],\r\n                        orgBox.top + pos[1]\r\n                    ], [\r\n                        img_width,\r\n                        img_height\r\n                    ]);\r\n                    function rewX() {\r\n                        while (rect.origin.x > box.left) {\r\n                            rect.origin.x -= img_width;\r\n                        }\r\n                    }\r\n                    function rewY() {\r\n                        while (rect.origin.y > box.top) {\r\n                            rect.origin.y -= img_height;\r\n                        }\r\n                    }\r\n                    function repeatX() {\r\n                        while (rect.origin.x < box.right) {\r\n                            renderBG(group, rect.clone());\r\n                            rect.origin.x += img_width;\r\n                        }\r\n                    }\r\n                    if (backgroundRepeat == 'no-repeat') {\r\n                        renderBG(group, rect);\r\n                    } else if (backgroundRepeat == 'repeat-x') {\r\n                        rewX();\r\n                        repeatX();\r\n                    } else if (backgroundRepeat == 'repeat-y') {\r\n                        rewY();\r\n                        while (rect.origin.y < box.bottom) {\r\n                            renderBG(group, rect.clone());\r\n                            rect.origin.y += img_height;\r\n                        }\r\n                    } else if (backgroundRepeat == 'repeat') {\r\n                        rewX();\r\n                        rewY();\r\n                        var origin = rect.origin.clone();\r\n                        while (rect.origin.y < box.bottom) {\r\n                            rect.origin.x = origin.x;\r\n                            repeatX();\r\n                            rect.origin.y += img_height;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            function drawBullet() {\r\n                var listStyleType = getPropertyValue(style, 'list-style-type');\r\n                if (listStyleType == 'none') {\r\n                    return;\r\n                }\r\n                var listStylePosition = getPropertyValue(style, 'list-style-position');\r\n                function _drawBullet(f) {\r\n                    saveStyle(element, function () {\r\n                        element.style.position = 'relative';\r\n                        var bullet = element.ownerDocument.createElement(KENDO_PSEUDO_ELEMENT);\r\n                        bullet.style.position = 'absolute';\r\n                        bullet.style.boxSizing = 'border-box';\r\n                        if (listStylePosition == 'outside') {\r\n                            bullet.style.width = '6em';\r\n                            bullet.style.left = '-6.8em';\r\n                            bullet.style.textAlign = 'right';\r\n                        } else {\r\n                            bullet.style.left = '0px';\r\n                        }\r\n                        f(bullet);\r\n                        element.insertBefore(bullet, element.firstChild);\r\n                        renderElement(bullet, group);\r\n                        element.removeChild(bullet);\r\n                    });\r\n                }\r\n                function elementIndex(f) {\r\n                    var a = element.parentNode.children;\r\n                    var k = element.getAttribute('kendo-split-index');\r\n                    if (k != null) {\r\n                        return f(k | 0, a.length);\r\n                    }\r\n                    for (var i = 0; i < a.length; ++i) {\r\n                        if (a[i] === element) {\r\n                            return f(i, a.length);\r\n                        }\r\n                    }\r\n                }\r\n                switch (listStyleType) {\r\n                case 'circle':\r\n                case 'disc':\r\n                case 'square':\r\n                    _drawBullet(function (bullet) {\r\n                        bullet.style.fontSize = '60%';\r\n                        bullet.style.lineHeight = '200%';\r\n                        bullet.style.paddingRight = '0.5em';\r\n                        bullet.style.fontFamily = 'DejaVu Serif';\r\n                        bullet.innerHTML = {\r\n                            'disc': '\\u25CF',\r\n                            'circle': '\\u25EF',\r\n                            'square': '\\u25A0'\r\n                        }[listStyleType];\r\n                    });\r\n                    break;\r\n                case 'decimal':\r\n                case 'decimal-leading-zero':\r\n                    _drawBullet(function (bullet) {\r\n                        elementIndex(function (idx) {\r\n                            ++idx;\r\n                            if (listStyleType == 'decimal-leading-zero' && (idx + '').length < 2) {\r\n                                idx = '0' + idx;\r\n                            }\r\n                            bullet.innerHTML = idx + '.';\r\n                        });\r\n                    });\r\n                    break;\r\n                case 'lower-roman':\r\n                case 'upper-roman':\r\n                    _drawBullet(function (bullet) {\r\n                        elementIndex(function (idx) {\r\n                            idx = romanNumeral(idx + 1);\r\n                            if (listStyleType == 'upper-roman') {\r\n                                idx = idx.toUpperCase();\r\n                            }\r\n                            bullet.innerHTML = idx + '.';\r\n                        });\r\n                    });\r\n                    break;\r\n                case 'lower-latin':\r\n                case 'lower-alpha':\r\n                case 'upper-latin':\r\n                case 'upper-alpha':\r\n                    _drawBullet(function (bullet) {\r\n                        elementIndex(function (idx) {\r\n                            idx = alphaNumeral(idx);\r\n                            if (/^upper/i.test(listStyleType)) {\r\n                                idx = idx.toUpperCase();\r\n                            }\r\n                            bullet.innerHTML = idx + '.';\r\n                        });\r\n                    });\r\n                    break;\r\n                }\r\n            }\r\n            function drawOneBox(box, isFirst, isLast) {\r\n                if (box.width === 0 || box.height === 0) {\r\n                    return;\r\n                }\r\n                drawBackground(box);\r\n                var shouldDrawLeft = left.width > 0 && (isFirst && dir == 'ltr' || isLast && dir == 'rtl');\r\n                var shouldDrawRight = right.width > 0 && (isLast && dir == 'ltr' || isFirst && dir == 'rtl');\r\n                if (top.width === 0 && left.width === 0 && right.width === 0 && bottom.width === 0) {\r\n                    return;\r\n                }\r\n                if (true) {\r\n                    if (top.color == right.color && top.color == bottom.color && top.color == left.color) {\r\n                        if (top.width == right.width && top.width == bottom.width && top.width == left.width) {\r\n                            if (shouldDrawLeft && shouldDrawRight) {\r\n                                box = innerBox(box, top.width / 2);\r\n                                var path = elementRoundBox(element, box, top.width / 2);\r\n                                path.options.stroke = {\r\n                                    color: top.color,\r\n                                    width: top.width\r\n                                };\r\n                                group.append(path);\r\n                                return;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (rTL0.x === 0 && rTR0.x === 0 && rBR0.x === 0 && rBL0.x === 0) {\r\n                        if (top.width < 2 && left.width < 2 && right.width < 2 && bottom.width < 2) {\r\n                            if (top.width > 0) {\r\n                                group.append(new drawing.Path({\r\n                                    stroke: {\r\n                                        width: top.width,\r\n                                        color: top.color\r\n                                    }\r\n                                }).moveTo(box.left, box.top + top.width / 2).lineTo(box.right, box.top + top.width / 2));\r\n                            }\r\n                            if (bottom.width > 0) {\r\n                                group.append(new drawing.Path({\r\n                                    stroke: {\r\n                                        width: bottom.width,\r\n                                        color: bottom.color\r\n                                    }\r\n                                }).moveTo(box.left, box.bottom - bottom.width / 2).lineTo(box.right, box.bottom - bottom.width / 2));\r\n                            }\r\n                            if (shouldDrawLeft) {\r\n                                group.append(new drawing.Path({\r\n                                    stroke: {\r\n                                        width: left.width,\r\n                                        color: left.color\r\n                                    }\r\n                                }).moveTo(box.left + left.width / 2, box.top).lineTo(box.left + left.width / 2, box.bottom));\r\n                            }\r\n                            if (shouldDrawRight) {\r\n                                group.append(new drawing.Path({\r\n                                    stroke: {\r\n                                        width: right.width,\r\n                                        color: right.color\r\n                                    }\r\n                                }).moveTo(box.right - right.width / 2, box.top).lineTo(box.right - right.width / 2, box.bottom));\r\n                            }\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n                var tmp = adjustBorderRadiusForBox(box, rTL0, rTR0, rBR0, rBL0);\r\n                var rTL = tmp.tl;\r\n                var rTR = tmp.tr;\r\n                var rBR = tmp.br;\r\n                var rBL = tmp.bl;\r\n                drawEdge(top.color, box.width, top.width, left.width, right.width, rTL, rTR, [\r\n                    1,\r\n                    0,\r\n                    0,\r\n                    1,\r\n                    box.left,\r\n                    box.top\r\n                ]);\r\n                drawEdge(bottom.color, box.width, bottom.width, right.width, left.width, rBR, rBL, [\r\n                    -1,\r\n                    0,\r\n                    0,\r\n                    -1,\r\n                    box.right,\r\n                    box.bottom\r\n                ]);\r\n                function inv(p) {\r\n                    return {\r\n                        x: p.y,\r\n                        y: p.x\r\n                    };\r\n                }\r\n                drawEdge(left.color, box.height, left.width, bottom.width, top.width, inv(rBL), inv(rTL), [\r\n                    0,\r\n                    -1,\r\n                    1,\r\n                    0,\r\n                    box.left,\r\n                    box.bottom\r\n                ]);\r\n                drawEdge(right.color, box.height, right.width, top.width, bottom.width, inv(rTR), inv(rBR), [\r\n                    0,\r\n                    1,\r\n                    -1,\r\n                    0,\r\n                    box.right,\r\n                    box.top\r\n                ]);\r\n            }\r\n        }\r\n        function gradientRenderer(gradient) {\r\n            return function (group, rect) {\r\n                var width = rect.width(), height = rect.height();\r\n                switch (gradient.type) {\r\n                case 'linear':\r\n                    var angle = gradient.angle != null ? gradient.angle : Math.PI;\r\n                    switch (gradient.to) {\r\n                    case 'top':\r\n                        angle = 0;\r\n                        break;\r\n                    case 'left':\r\n                        angle = -Math.PI / 2;\r\n                        break;\r\n                    case 'bottom':\r\n                        angle = Math.PI;\r\n                        break;\r\n                    case 'right':\r\n                        angle = Math.PI / 2;\r\n                        break;\r\n                    case 'top left':\r\n                    case 'left top':\r\n                        angle = -Math.atan2(height, width);\r\n                        break;\r\n                    case 'top right':\r\n                    case 'right top':\r\n                        angle = Math.atan2(height, width);\r\n                        break;\r\n                    case 'bottom left':\r\n                    case 'left bottom':\r\n                        angle = Math.PI + Math.atan2(height, width);\r\n                        break;\r\n                    case 'bottom right':\r\n                    case 'right bottom':\r\n                        angle = Math.PI - Math.atan2(height, width);\r\n                        break;\r\n                    }\r\n                    if (gradient.reverse) {\r\n                        angle -= Math.PI;\r\n                    }\r\n                    angle %= 2 * Math.PI;\r\n                    if (angle < 0) {\r\n                        angle += 2 * Math.PI;\r\n                    }\r\n                    var pxlen = Math.abs(width * Math.sin(angle)) + Math.abs(height * Math.cos(angle));\r\n                    var scaledAngle = Math.atan(width * Math.tan(angle) / height);\r\n                    var sin = Math.sin(scaledAngle), cos = Math.cos(scaledAngle);\r\n                    var len = Math.abs(sin) + Math.abs(cos);\r\n                    var x = len / 2 * sin;\r\n                    var y = len / 2 * cos;\r\n                    if (angle > Math.PI / 2 && angle <= 3 * Math.PI / 2) {\r\n                        x = -x;\r\n                        y = -y;\r\n                    }\r\n                    var implicit = [], right = 0;\r\n                    var stops = gradient.stops.map(function (s, i) {\r\n                        var offset = s.percent;\r\n                        if (offset) {\r\n                            offset = parseFloat(offset) / 100;\r\n                        } else if (s.length) {\r\n                            offset = parseFloat(s.length) / pxlen;\r\n                        } else if (i === 0) {\r\n                            offset = 0;\r\n                        } else if (i == gradient.stops.length - 1) {\r\n                            offset = 1;\r\n                        }\r\n                        var stop = {\r\n                            color: s.color.toCssRgba(),\r\n                            offset: offset\r\n                        };\r\n                        if (offset != null) {\r\n                            right = offset;\r\n                            implicit.forEach(function (s, i) {\r\n                                var stop = s.stop;\r\n                                stop.offset = s.left + (right - s.left) * (i + 1) / (implicit.length + 1);\r\n                            });\r\n                            implicit = [];\r\n                        } else {\r\n                            implicit.push({\r\n                                left: right,\r\n                                stop: stop\r\n                            });\r\n                        }\r\n                        return stop;\r\n                    });\r\n                    var start = [\r\n                        0.5 - x,\r\n                        0.5 + y\r\n                    ];\r\n                    var end = [\r\n                        0.5 + x,\r\n                        0.5 - y\r\n                    ];\r\n                    group.append(drawing.Path.fromRect(rect).stroke(null).fill(new drawing.LinearGradient({\r\n                        start: start,\r\n                        end: end,\r\n                        stops: stops,\r\n                        userSpace: false\r\n                    })));\r\n                    break;\r\n                case 'radial':\r\n                    if (window.console && window.console.log) {\r\n                        window.console.log('Radial gradients are not yet supported in HTML renderer');\r\n                    }\r\n                    break;\r\n                }\r\n            };\r\n        }\r\n        function maybeRenderWidget(element, group) {\r\n            if (element.getAttribute(kendo.attr('role'))) {\r\n                var widget = kendo.widgetInstance($(element));\r\n                if (widget && (widget.exportDOMVisual || widget.exportVisual)) {\r\n                    var visual;\r\n                    if (widget.exportDOMVisual) {\r\n                        visual = widget.exportDOMVisual();\r\n                    } else {\r\n                        visual = widget.exportVisual();\r\n                    }\r\n                    if (!visual) {\r\n                        return false;\r\n                    }\r\n                    var wrap = new drawing.Group();\r\n                    wrap.children.push(visual);\r\n                    var bbox = element.getBoundingClientRect();\r\n                    wrap.transform(geo.transform().translate(bbox.left, bbox.top));\r\n                    group.append(wrap);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        function renderImage(element, url, group) {\r\n            var box = getContentBox(element);\r\n            var rect = new geo.Rect([\r\n                box.left,\r\n                box.top\r\n            ], [\r\n                box.width,\r\n                box.height\r\n            ]);\r\n            var image = new drawing.Image(url, rect);\r\n            setClipping(image, elementRoundBox(element, box, 'content'));\r\n            group.append(image);\r\n        }\r\n        function zIndexSort(a, b) {\r\n            var sa = getComputedStyle(a);\r\n            var sb = getComputedStyle(b);\r\n            var za = parseFloat(getPropertyValue(sa, 'z-index'));\r\n            var zb = parseFloat(getPropertyValue(sb, 'z-index'));\r\n            var pa = getPropertyValue(sa, 'position');\r\n            var pb = getPropertyValue(sb, 'position');\r\n            if (isNaN(za) && isNaN(zb)) {\r\n                if (/static|absolute/.test(pa) && /static|absolute/.test(pb)) {\r\n                    return 0;\r\n                }\r\n                if (pa == 'static') {\r\n                    return -1;\r\n                }\r\n                if (pb == 'static') {\r\n                    return 1;\r\n                }\r\n                return 0;\r\n            }\r\n            if (isNaN(za)) {\r\n                return zb === 0 ? 0 : zb > 0 ? -1 : 1;\r\n            }\r\n            if (isNaN(zb)) {\r\n                return za === 0 ? 0 : za > 0 ? 1 : -1;\r\n            }\r\n            return parseFloat(za) - parseFloat(zb);\r\n        }\r\n        function isFormField(element) {\r\n            return /^(?:textarea|select|input)$/i.test(element.tagName);\r\n        }\r\n        function getSelectedOption(element) {\r\n            if (element.selectedOptions && element.selectedOptions.length > 0) {\r\n                return element.selectedOptions[0];\r\n            }\r\n            return element.options[element.selectedIndex];\r\n        }\r\n        function renderCheckbox(element, group) {\r\n            var style = getComputedStyle(element);\r\n            var color = getPropertyValue(style, 'color');\r\n            var box = element.getBoundingClientRect();\r\n            if (element.type == 'checkbox') {\r\n                group.append(drawing.Path.fromRect(new geo.Rect([\r\n                    box.left + 1,\r\n                    box.top + 1\r\n                ], [\r\n                    box.width - 2,\r\n                    box.height - 2\r\n                ])).stroke(color, 1));\r\n                if (element.checked) {\r\n                    group.append(new drawing.Path().stroke(color, 1.2).moveTo(box.left + 0.22 * box.width, box.top + 0.55 * box.height).lineTo(box.left + 0.45 * box.width, box.top + 0.75 * box.height).lineTo(box.left + 0.78 * box.width, box.top + 0.22 * box.width));\r\n                }\r\n            } else {\r\n                group.append(new drawing.Circle(new geo.Circle([\r\n                    (box.left + box.right) / 2,\r\n                    (box.top + box.bottom) / 2\r\n                ], Math.min(box.width - 2, box.height - 2) / 2)).stroke(color, 1));\r\n                if (element.checked) {\r\n                    group.append(new drawing.Circle(new geo.Circle([\r\n                        (box.left + box.right) / 2,\r\n                        (box.top + box.bottom) / 2\r\n                    ], Math.min(box.width - 8, box.height - 8) / 2)).fill(color).stroke(null));\r\n                }\r\n            }\r\n        }\r\n        function renderFormField(element, group) {\r\n            var tag = element.tagName.toLowerCase();\r\n            if (tag == 'input' && (element.type == 'checkbox' || element.type == 'radio')) {\r\n                return renderCheckbox(element, group);\r\n            }\r\n            var p = element.parentNode;\r\n            var doc = element.ownerDocument;\r\n            var el = doc.createElement(KENDO_PSEUDO_ELEMENT);\r\n            var option;\r\n            el.style.cssText = getCssText(getComputedStyle(element));\r\n            if (tag == 'input') {\r\n                el.style.whiteSpace = 'pre';\r\n            }\r\n            if (tag == 'select' || tag == 'textarea') {\r\n                el.style.overflow = 'auto';\r\n            }\r\n            if (tag == 'select') {\r\n                if (element.multiple) {\r\n                    for (var i = 0; i < element.options.length; ++i) {\r\n                        option = doc.createElement(KENDO_PSEUDO_ELEMENT);\r\n                        option.style.cssText = getCssText(getComputedStyle(element.options[i]));\r\n                        option.style.display = 'block';\r\n                        option.textContent = element.options[i].textContent;\r\n                        el.appendChild(option);\r\n                    }\r\n                } else {\r\n                    option = getSelectedOption(element);\r\n                    if (option) {\r\n                        el.textContent = option.textContent;\r\n                    }\r\n                }\r\n            } else {\r\n                el.textContent = element.value;\r\n            }\r\n            p.insertBefore(el, element);\r\n            el.scrollLeft = element.scrollLeft;\r\n            el.scrollTop = element.scrollTop;\r\n            element.style.display = 'none';\r\n            renderContents(el, group);\r\n            element.style.display = '';\r\n            p.removeChild(el);\r\n        }\r\n        function renderContents(element, group) {\r\n            if (nodeInfo._stackingContext.element === element) {\r\n                nodeInfo._stackingContext.group = group;\r\n            }\r\n            switch (element.tagName.toLowerCase()) {\r\n            case 'img':\r\n                renderImage(element, element.src, group);\r\n                break;\r\n            case 'canvas':\r\n                try {\r\n                    renderImage(element, element.toDataURL('image/png'), group);\r\n                } catch (ex) {\r\n                }\r\n                break;\r\n            case 'textarea':\r\n            case 'input':\r\n            case 'select':\r\n                renderFormField(element, group);\r\n                break;\r\n            default:\r\n                var blocks = [], floats = [], inline = [], positioned = [];\r\n                for (var i = element.firstChild; i; i = i.nextSibling) {\r\n                    switch (i.nodeType) {\r\n                    case 3:\r\n                        if (/\\S/.test(i.data)) {\r\n                            renderText(element, i, group);\r\n                        }\r\n                        break;\r\n                    case 1:\r\n                        var style = getComputedStyle(i);\r\n                        var display = getPropertyValue(style, 'display');\r\n                        var floating = getPropertyValue(style, 'float');\r\n                        var position = getPropertyValue(style, 'position');\r\n                        if (position != 'static') {\r\n                            positioned.push(i);\r\n                        } else if (display != 'inline') {\r\n                            if (floating != 'none') {\r\n                                floats.push(i);\r\n                            } else {\r\n                                blocks.push(i);\r\n                            }\r\n                        } else {\r\n                            inline.push(i);\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                blocks.sort(zIndexSort).forEach(function (el) {\r\n                    renderElement(el, group);\r\n                });\r\n                floats.sort(zIndexSort).forEach(function (el) {\r\n                    renderElement(el, group);\r\n                });\r\n                inline.sort(zIndexSort).forEach(function (el) {\r\n                    renderElement(el, group);\r\n                });\r\n                positioned.sort(zIndexSort).forEach(function (el) {\r\n                    renderElement(el, group);\r\n                });\r\n            }\r\n        }\r\n        function renderText(element, node, group) {\r\n            if (emptyClipbox()) {\r\n                return;\r\n            }\r\n            var style = getComputedStyle(element);\r\n            if (parseFloat(getPropertyValue(style, 'text-indent')) < -500) {\r\n                return;\r\n            }\r\n            var text = node.data;\r\n            var start = 0;\r\n            var end = text.search(/\\S\\s*$/) + 1;\r\n            if (!end) {\r\n                return;\r\n            }\r\n            var fontSize = getPropertyValue(style, 'font-size');\r\n            var lineHeight = getPropertyValue(style, 'line-height');\r\n            var font = [\r\n                getPropertyValue(style, 'font-style'),\r\n                getPropertyValue(style, 'font-variant'),\r\n                getPropertyValue(style, 'font-weight'),\r\n                fontSize,\r\n                getPropertyValue(style, 'font-family')\r\n            ].join(' ');\r\n            fontSize = parseFloat(fontSize);\r\n            lineHeight = parseFloat(lineHeight);\r\n            if (fontSize === 0) {\r\n                return;\r\n            }\r\n            var color = getPropertyValue(style, 'color');\r\n            var range = element.ownerDocument.createRange();\r\n            var align = getPropertyValue(style, 'text-align');\r\n            var isJustified = align == 'justify';\r\n            var whiteSpace = getPropertyValue(style, 'white-space');\r\n            var textOverflow, saveTextOverflow;\r\n            if (browser.msie) {\r\n                textOverflow = style.textOverflow;\r\n                if (textOverflow == 'ellipsis') {\r\n                    saveTextOverflow = element.style.textOverflow;\r\n                    element.style.textOverflow = 'clip';\r\n                }\r\n            }\r\n            var estimateLineLength = element.getBoundingClientRect().width / fontSize * 5;\r\n            if (estimateLineLength === 0) {\r\n                estimateLineLength = 500;\r\n            }\r\n            var prevLineBottom = null;\r\n            while (!doChunk()) {\r\n            }\r\n            if (browser.msie && textOverflow == 'ellipsis') {\r\n                element.style.textOverflow = saveTextOverflow;\r\n            }\r\n            return;\r\n            function actuallyGetRangeBoundingRect(range) {\r\n                if (browser.msie || browser.chrome) {\r\n                    var rectangles = range.getClientRects(), box = {\r\n                            top: +Infinity,\r\n                            right: -Infinity,\r\n                            bottom: -Infinity,\r\n                            left: +Infinity\r\n                        };\r\n                    for (var i = 0; i < rectangles.length; ++i) {\r\n                        var b = rectangles[i];\r\n                        if (b.width <= 1 || b.bottom === prevLineBottom) {\r\n                            continue;\r\n                        }\r\n                        box.left = Math.min(b.left, box.left);\r\n                        box.top = Math.min(b.top, box.top);\r\n                        box.right = Math.max(b.right, box.right);\r\n                        box.bottom = Math.max(b.bottom, box.bottom);\r\n                    }\r\n                    box.width = box.right - box.left;\r\n                    box.height = box.bottom - box.top;\r\n                    return box;\r\n                }\r\n                return range.getBoundingClientRect();\r\n            }\r\n            function doChunk() {\r\n                var origStart = start;\r\n                var box, pos = text.substr(start).search(/\\S/);\r\n                start += pos;\r\n                if (pos < 0 || start >= end) {\r\n                    return true;\r\n                }\r\n                range.setStart(node, start);\r\n                range.setEnd(node, start + 1);\r\n                box = actuallyGetRangeBoundingRect(range);\r\n                var found = false;\r\n                if (isJustified) {\r\n                    pos = text.substr(start).search(/\\s/);\r\n                    if (pos >= 0) {\r\n                        range.setEnd(node, start + pos);\r\n                        var r = actuallyGetRangeBoundingRect(range);\r\n                        if (r.bottom == box.bottom) {\r\n                            box = r;\r\n                            found = true;\r\n                            start += pos;\r\n                        }\r\n                    }\r\n                }\r\n                if (!found) {\r\n                    pos = function findEOL(min, eol, max) {\r\n                        range.setEnd(node, eol);\r\n                        var r = actuallyGetRangeBoundingRect(range);\r\n                        if (r.bottom != box.bottom && min < eol) {\r\n                            return findEOL(min, min + eol >> 1, eol);\r\n                        } else if (r.right != box.right) {\r\n                            box = r;\r\n                            if (eol < max) {\r\n                                return findEOL(eol, eol + max >> 1, max);\r\n                            } else {\r\n                                return eol;\r\n                            }\r\n                        } else {\r\n                            return eol;\r\n                        }\r\n                    }(start, Math.min(end, start + estimateLineLength), end);\r\n                    if (pos == start) {\r\n                        return true;\r\n                    }\r\n                    start = pos;\r\n                    pos = range.toString().search(/\\s+$/);\r\n                    if (pos === 0) {\r\n                        return;\r\n                    }\r\n                    if (pos > 0) {\r\n                        range.setEnd(node, range.startOffset + pos);\r\n                        box = actuallyGetRangeBoundingRect(range);\r\n                    }\r\n                }\r\n                if (browser.msie) {\r\n                    box = range.getClientRects()[0];\r\n                }\r\n                var str = range.toString();\r\n                if (!/^(?:pre|pre-wrap)$/i.test(whiteSpace)) {\r\n                    str = str.replace(/\\s+/g, ' ');\r\n                } else if (/\\t/.test(str)) {\r\n                    var cc = 0;\r\n                    for (pos = origStart; pos < range.startOffset; ++pos) {\r\n                        var code = text.charCodeAt(pos);\r\n                        if (code == 9) {\r\n                            cc += 8 - cc % 8;\r\n                        } else if (code == 10 || code == 13) {\r\n                            cc = 0;\r\n                        } else {\r\n                            cc++;\r\n                        }\r\n                    }\r\n                    while ((pos = str.search('\\t')) >= 0) {\r\n                        var indent = '        '.substr(0, 8 - (cc + pos) % 8);\r\n                        str = str.substr(0, pos) + indent + str.substr(pos + 1);\r\n                    }\r\n                }\r\n                if (!found) {\r\n                    prevLineBottom = box.bottom;\r\n                }\r\n                drawText(str, box);\r\n            }\r\n            function drawText(str, box) {\r\n                if (browser.msie && !isNaN(lineHeight)) {\r\n                    var size = kendo.util.measureText(str, { font: font });\r\n                    var top = (box.top + box.bottom - size.height) / 2;\r\n                    box = {\r\n                        top: top,\r\n                        right: box.right,\r\n                        bottom: top + size.height,\r\n                        left: box.left,\r\n                        height: size.height,\r\n                        width: box.right - box.left\r\n                    };\r\n                }\r\n                var text = new TextRect(str, new geo.Rect([\r\n                    box.left,\r\n                    box.top\r\n                ], [\r\n                    box.width,\r\n                    box.height\r\n                ]), {\r\n                    font: font,\r\n                    fill: { color: color }\r\n                });\r\n                group.append(text);\r\n                decorate(box);\r\n            }\r\n            function decorate(box) {\r\n                line(nodeInfo['underline'], box.bottom);\r\n                line(nodeInfo['line-through'], box.bottom - box.height / 2.7);\r\n                line(nodeInfo['overline'], box.top);\r\n                function line(color, ypos) {\r\n                    if (color) {\r\n                        var width = fontSize / 12;\r\n                        var path = new drawing.Path({\r\n                            stroke: {\r\n                                width: width,\r\n                                color: color\r\n                            }\r\n                        });\r\n                        ypos -= width;\r\n                        path.moveTo(box.left, ypos).lineTo(box.right, ypos);\r\n                        group.append(path);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        function groupInStackingContext(element, group, zIndex) {\r\n            var main;\r\n            if (zIndex != 'auto') {\r\n                main = nodeInfo._stackingContext.group;\r\n                zIndex = parseFloat(zIndex);\r\n            } else {\r\n                main = group;\r\n                zIndex = 0;\r\n            }\r\n            var a = main.children;\r\n            for (var i = 0; i < a.length; ++i) {\r\n                if (a[i]._dom_zIndex != null && a[i]._dom_zIndex > zIndex) {\r\n                    break;\r\n                }\r\n            }\r\n            var tmp = new drawing.Group();\r\n            main.insertAt(tmp, i);\r\n            tmp._dom_zIndex = zIndex;\r\n            if (main !== group) {\r\n                if (nodeInfo._clipbox) {\r\n                    var m = nodeInfo._matrix.invert();\r\n                    var r = nodeInfo._clipbox.transformCopy(m);\r\n                    setClipping(tmp, drawing.Path.fromRect(r));\r\n                }\r\n            }\r\n            return tmp;\r\n        }\r\n        function renderElement(element, container) {\r\n            var style = getComputedStyle(element);\r\n            var counterReset = getPropertyValue(style, 'counter-reset');\r\n            if (counterReset) {\r\n                doCounters(splitProperty(counterReset, /^\\s+/), resetCounter, 0);\r\n            }\r\n            var counterIncrement = getPropertyValue(style, 'counter-increment');\r\n            if (counterIncrement) {\r\n                doCounters(splitProperty(counterIncrement, /^\\s+/), incCounter, 1);\r\n            }\r\n            if (/^(style|script|link|meta|iframe|svg|col|colgroup)$/i.test(element.tagName)) {\r\n                return;\r\n            }\r\n            if (nodeInfo._clipbox == null) {\r\n                return;\r\n            }\r\n            var opacity = parseFloat(getPropertyValue(style, 'opacity'));\r\n            var visibility = getPropertyValue(style, 'visibility');\r\n            var display = getPropertyValue(style, 'display');\r\n            if (opacity === 0 || visibility == 'hidden' || display == 'none') {\r\n                return;\r\n            }\r\n            var tr = getTransform(style);\r\n            var group;\r\n            var zIndex = getPropertyValue(style, 'z-index');\r\n            if ((tr || opacity < 1) && zIndex == 'auto') {\r\n                zIndex = 0;\r\n            }\r\n            group = groupInStackingContext(element, container, zIndex);\r\n            if (opacity < 1) {\r\n                group.opacity(opacity * group.opacity());\r\n            }\r\n            pushNodeInfo(element, style, group);\r\n            if (!tr) {\r\n                _renderWithPseudoElements(element, group);\r\n            } else {\r\n                saveStyle(element, function () {\r\n                    pleaseSetPropertyValue(element.style, 'transform', 'none', 'important');\r\n                    pleaseSetPropertyValue(element.style, 'transition', 'none', 'important');\r\n                    if (getPropertyValue(style, 'position') == 'static') {\r\n                        pleaseSetPropertyValue(element.style, 'position', 'relative', 'important');\r\n                    }\r\n                    var bbox = element.getBoundingClientRect();\r\n                    var x = bbox.left + tr.origin[0];\r\n                    var y = bbox.top + tr.origin[1];\r\n                    var m = [\r\n                        1,\r\n                        0,\r\n                        0,\r\n                        1,\r\n                        -x,\r\n                        -y\r\n                    ];\r\n                    m = mmul(m, tr.matrix);\r\n                    m = mmul(m, [\r\n                        1,\r\n                        0,\r\n                        0,\r\n                        1,\r\n                        x,\r\n                        y\r\n                    ]);\r\n                    m = setTransform(group, m);\r\n                    nodeInfo._matrix = nodeInfo._matrix.multiplyCopy(m);\r\n                    _renderWithPseudoElements(element, group);\r\n                });\r\n            }\r\n            popNodeInfo();\r\n        }\r\n        function mmul(a, b) {\r\n            var a1 = a[0], b1 = a[1], c1 = a[2], d1 = a[3], e1 = a[4], f1 = a[5];\r\n            var a2 = b[0], b2 = b[1], c2 = b[2], d2 = b[3], e2 = b[4], f2 = b[5];\r\n            return [\r\n                a1 * a2 + b1 * c2,\r\n                a1 * b2 + b1 * d2,\r\n                c1 * a2 + d1 * c2,\r\n                c1 * b2 + d1 * d2,\r\n                e1 * a2 + f1 * c2 + e2,\r\n                e1 * b2 + f1 * d2 + f2\r\n            ];\r\n        }\r\n    }(window.kendo.jQuery, parseFloat, Math));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('drawing/animation', [\r\n        'drawing/geometry',\r\n        'drawing/core'\r\n    ], f);\r\n}(function () {\r\n    (function ($) {\r\n        var noop = $.noop, kendo = window.kendo, Class = kendo.Class, util = kendo.util, animationFrame = kendo.animationFrame, deepExtend = kendo.deepExtend;\r\n        var Animation = Class.extend({\r\n            init: function (element, options) {\r\n                var anim = this;\r\n                anim.options = deepExtend({}, anim.options, options);\r\n                anim.element = element;\r\n            },\r\n            options: {\r\n                duration: 500,\r\n                easing: 'swing'\r\n            },\r\n            setup: noop,\r\n            step: noop,\r\n            play: function () {\r\n                var anim = this, options = anim.options, easing = $.easing[options.easing], duration = options.duration, delay = options.delay || 0, start = util.now() + delay, finish = start + duration;\r\n                if (duration === 0) {\r\n                    anim.step(1);\r\n                    anim.abort();\r\n                } else {\r\n                    setTimeout(function () {\r\n                        var loop = function () {\r\n                            if (anim._stopped) {\r\n                                return;\r\n                            }\r\n                            var wallTime = util.now();\r\n                            var time = util.limitValue(wallTime - start, 0, duration);\r\n                            var pos = time / duration;\r\n                            var easingPos = easing(pos, time, 0, 1, duration);\r\n                            anim.step(easingPos);\r\n                            if (wallTime < finish) {\r\n                                animationFrame(loop);\r\n                            } else {\r\n                                anim.abort();\r\n                            }\r\n                        };\r\n                        loop();\r\n                    }, delay);\r\n                }\r\n            },\r\n            abort: function () {\r\n                this._stopped = true;\r\n            },\r\n            destroy: function () {\r\n                this.abort();\r\n            }\r\n        });\r\n        var AnimationFactory = function () {\r\n            this._items = [];\r\n        };\r\n        AnimationFactory.prototype = {\r\n            register: function (name, type) {\r\n                this._items.push({\r\n                    name: name,\r\n                    type: type\r\n                });\r\n            },\r\n            create: function (element, options) {\r\n                var items = this._items;\r\n                var match;\r\n                if (options && options.type) {\r\n                    var type = options.type.toLowerCase();\r\n                    for (var i = 0; i < items.length; i++) {\r\n                        if (items[i].name.toLowerCase() === type) {\r\n                            match = items[i];\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if (match) {\r\n                    return new match.type(element, options);\r\n                }\r\n            }\r\n        };\r\n        AnimationFactory.current = new AnimationFactory();\r\n        Animation.create = function (type, element, options) {\r\n            return AnimationFactory.current.create(type, element, options);\r\n        };\r\n        deepExtend(kendo.drawing, {\r\n            Animation: Animation,\r\n            AnimationFactory: AnimationFactory\r\n        });\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('kendo.drawing', [\r\n        'kendo.color',\r\n        'util/main',\r\n        'util/text-metrics',\r\n        'util/base64',\r\n        'mixins/observers',\r\n        'drawing/geometry',\r\n        'drawing/core',\r\n        'drawing/mixins',\r\n        'drawing/shapes',\r\n        'drawing/parser',\r\n        'drawing/search',\r\n        'drawing/svg',\r\n        'drawing/canvas',\r\n        'drawing/vml',\r\n        'drawing/html',\r\n        'drawing/animation'\r\n    ], f);\r\n}(function () {\r\n    var __meta__ = {\r\n        id: 'drawing',\r\n        name: 'Drawing API',\r\n        category: 'framework',\r\n        description: 'The Kendo UI low-level drawing API',\r\n        depends: [\r\n            'core',\r\n            'color'\r\n        ]\r\n    };\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\n/** \r\n * Kendo UI v2016.2.714 (http://www.telerik.com/kendo-ui)                                                                                                                                               \r\n * Copyright 2016 Telerik AD. All rights reserved.                                                                                                                                                      \r\n *                                                                                                                                                                                                      \r\n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \r\n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \r\n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n\r\n*/\r\n(function (f, define) {\r\n    define('util/main', ['kendo.core'], f);\r\n}(function () {\r\n    (function () {\r\n        var math = Math, kendo = window.kendo, deepExtend = kendo.deepExtend;\r\n        var DEG_TO_RAD = math.PI / 180, MAX_NUM = Number.MAX_VALUE, MIN_NUM = -Number.MAX_VALUE, UNDEFINED = 'undefined';\r\n        function defined(value) {\r\n            return typeof value !== UNDEFINED;\r\n        }\r\n        function round(value, precision) {\r\n            var power = pow(precision);\r\n            return math.round(value * power) / power;\r\n        }\r\n        function pow(p) {\r\n            if (p) {\r\n                return math.pow(10, p);\r\n            } else {\r\n                return 1;\r\n            }\r\n        }\r\n        function limitValue(value, min, max) {\r\n            return math.max(math.min(value, max), min);\r\n        }\r\n        function rad(degrees) {\r\n            return degrees * DEG_TO_RAD;\r\n        }\r\n        function deg(radians) {\r\n            return radians / DEG_TO_RAD;\r\n        }\r\n        function isNumber(val) {\r\n            return typeof val === 'number' && !isNaN(val);\r\n        }\r\n        function valueOrDefault(value, defaultValue) {\r\n            return defined(value) ? value : defaultValue;\r\n        }\r\n        function sqr(value) {\r\n            return value * value;\r\n        }\r\n        function objectKey(object) {\r\n            var parts = [];\r\n            for (var key in object) {\r\n                parts.push(key + object[key]);\r\n            }\r\n            return parts.sort().join('');\r\n        }\r\n        function hashKey(str) {\r\n            var hash = 2166136261;\r\n            for (var i = 0; i < str.length; ++i) {\r\n                hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\r\n                hash ^= str.charCodeAt(i);\r\n            }\r\n            return hash >>> 0;\r\n        }\r\n        function hashObject(object) {\r\n            return hashKey(objectKey(object));\r\n        }\r\n        var now = Date.now;\r\n        if (!now) {\r\n            now = function () {\r\n                return new Date().getTime();\r\n            };\r\n        }\r\n        function arrayLimits(arr) {\r\n            var length = arr.length, i, min = MAX_NUM, max = MIN_NUM;\r\n            for (i = 0; i < length; i++) {\r\n                max = math.max(max, arr[i]);\r\n                min = math.min(min, arr[i]);\r\n            }\r\n            return {\r\n                min: min,\r\n                max: max\r\n            };\r\n        }\r\n        function arrayMin(arr) {\r\n            return arrayLimits(arr).min;\r\n        }\r\n        function arrayMax(arr) {\r\n            return arrayLimits(arr).max;\r\n        }\r\n        function sparseArrayMin(arr) {\r\n            return sparseArrayLimits(arr).min;\r\n        }\r\n        function sparseArrayMax(arr) {\r\n            return sparseArrayLimits(arr).max;\r\n        }\r\n        function sparseArrayLimits(arr) {\r\n            var min = MAX_NUM, max = MIN_NUM;\r\n            for (var i = 0, length = arr.length; i < length; i++) {\r\n                var n = arr[i];\r\n                if (n !== null && isFinite(n)) {\r\n                    min = math.min(min, n);\r\n                    max = math.max(max, n);\r\n                }\r\n            }\r\n            return {\r\n                min: min === MAX_NUM ? undefined : min,\r\n                max: max === MIN_NUM ? undefined : max\r\n            };\r\n        }\r\n        function last(array) {\r\n            if (array) {\r\n                return array[array.length - 1];\r\n            }\r\n        }\r\n        function append(first, second) {\r\n            first.push.apply(first, second);\r\n            return first;\r\n        }\r\n        function renderTemplate(text) {\r\n            return kendo.template(text, {\r\n                useWithBlock: false,\r\n                paramName: 'd'\r\n            });\r\n        }\r\n        function renderAttr(name, value) {\r\n            return defined(value) && value !== null ? ' ' + name + '=\\'' + value + '\\' ' : '';\r\n        }\r\n        function renderAllAttr(attrs) {\r\n            var output = '';\r\n            for (var i = 0; i < attrs.length; i++) {\r\n                output += renderAttr(attrs[i][0], attrs[i][1]);\r\n            }\r\n            return output;\r\n        }\r\n        function renderStyle(attrs) {\r\n            var output = '';\r\n            for (var i = 0; i < attrs.length; i++) {\r\n                var value = attrs[i][1];\r\n                if (defined(value)) {\r\n                    output += attrs[i][0] + ':' + value + ';';\r\n                }\r\n            }\r\n            if (output !== '') {\r\n                return output;\r\n            }\r\n        }\r\n        function renderSize(size) {\r\n            if (typeof size !== 'string') {\r\n                size += 'px';\r\n            }\r\n            return size;\r\n        }\r\n        function renderPos(pos) {\r\n            var result = [];\r\n            if (pos) {\r\n                var parts = kendo.toHyphens(pos).split('-');\r\n                for (var i = 0; i < parts.length; i++) {\r\n                    result.push('k-pos-' + parts[i]);\r\n                }\r\n            }\r\n            return result.join(' ');\r\n        }\r\n        function isTransparent(color) {\r\n            return color === '' || color === null || color === 'none' || color === 'transparent' || !defined(color);\r\n        }\r\n        function arabicToRoman(n) {\r\n            var literals = {\r\n                1: 'i',\r\n                10: 'x',\r\n                100: 'c',\r\n                2: 'ii',\r\n                20: 'xx',\r\n                200: 'cc',\r\n                3: 'iii',\r\n                30: 'xxx',\r\n                300: 'ccc',\r\n                4: 'iv',\r\n                40: 'xl',\r\n                400: 'cd',\r\n                5: 'v',\r\n                50: 'l',\r\n                500: 'd',\r\n                6: 'vi',\r\n                60: 'lx',\r\n                600: 'dc',\r\n                7: 'vii',\r\n                70: 'lxx',\r\n                700: 'dcc',\r\n                8: 'viii',\r\n                80: 'lxxx',\r\n                800: 'dccc',\r\n                9: 'ix',\r\n                90: 'xc',\r\n                900: 'cm',\r\n                1000: 'm'\r\n            };\r\n            var values = [\r\n                1000,\r\n                900,\r\n                800,\r\n                700,\r\n                600,\r\n                500,\r\n                400,\r\n                300,\r\n                200,\r\n                100,\r\n                90,\r\n                80,\r\n                70,\r\n                60,\r\n                50,\r\n                40,\r\n                30,\r\n                20,\r\n                10,\r\n                9,\r\n                8,\r\n                7,\r\n                6,\r\n                5,\r\n                4,\r\n                3,\r\n                2,\r\n                1\r\n            ];\r\n            var roman = '';\r\n            while (n > 0) {\r\n                if (n < values[0]) {\r\n                    values.shift();\r\n                } else {\r\n                    roman += literals[values[0]];\r\n                    n -= values[0];\r\n                }\r\n            }\r\n            return roman;\r\n        }\r\n        function romanToArabic(r) {\r\n            r = r.toLowerCase();\r\n            var digits = {\r\n                i: 1,\r\n                v: 5,\r\n                x: 10,\r\n                l: 50,\r\n                c: 100,\r\n                d: 500,\r\n                m: 1000\r\n            };\r\n            var value = 0, prev = 0;\r\n            for (var i = 0; i < r.length; ++i) {\r\n                var v = digits[r.charAt(i)];\r\n                if (!v) {\r\n                    return null;\r\n                }\r\n                value += v;\r\n                if (v > prev) {\r\n                    value -= 2 * prev;\r\n                }\r\n                prev = v;\r\n            }\r\n            return value;\r\n        }\r\n        function memoize(f) {\r\n            var cache = Object.create(null);\r\n            return function () {\r\n                var id = '';\r\n                for (var i = arguments.length; --i >= 0;) {\r\n                    id += ':' + arguments[i];\r\n                }\r\n                if (id in cache) {\r\n                    return cache[id];\r\n                }\r\n                return f.apply(this, arguments);\r\n            };\r\n        }\r\n        function ucs2decode(string) {\r\n            var output = [], counter = 0, length = string.length, value, extra;\r\n            while (counter < length) {\r\n                value = string.charCodeAt(counter++);\r\n                if (value >= 55296 && value <= 56319 && counter < length) {\r\n                    extra = string.charCodeAt(counter++);\r\n                    if ((extra & 64512) == 56320) {\r\n                        output.push(((value & 1023) << 10) + (extra & 1023) + 65536);\r\n                    } else {\r\n                        output.push(value);\r\n                        counter--;\r\n                    }\r\n                } else {\r\n                    output.push(value);\r\n                }\r\n            }\r\n            return output;\r\n        }\r\n        function ucs2encode(array) {\r\n            return array.map(function (value) {\r\n                var output = '';\r\n                if (value > 65535) {\r\n                    value -= 65536;\r\n                    output += String.fromCharCode(value >>> 10 & 1023 | 55296);\r\n                    value = 56320 | value & 1023;\r\n                }\r\n                output += String.fromCharCode(value);\r\n                return output;\r\n            }).join('');\r\n        }\r\n        deepExtend(kendo, {\r\n            util: {\r\n                MAX_NUM: MAX_NUM,\r\n                MIN_NUM: MIN_NUM,\r\n                append: append,\r\n                arrayLimits: arrayLimits,\r\n                arrayMin: arrayMin,\r\n                arrayMax: arrayMax,\r\n                defined: defined,\r\n                deg: deg,\r\n                hashKey: hashKey,\r\n                hashObject: hashObject,\r\n                isNumber: isNumber,\r\n                isTransparent: isTransparent,\r\n                last: last,\r\n                limitValue: limitValue,\r\n                now: now,\r\n                objectKey: objectKey,\r\n                round: round,\r\n                rad: rad,\r\n                renderAttr: renderAttr,\r\n                renderAllAttr: renderAllAttr,\r\n                renderPos: renderPos,\r\n                renderSize: renderSize,\r\n                renderStyle: renderStyle,\r\n                renderTemplate: renderTemplate,\r\n                sparseArrayLimits: sparseArrayLimits,\r\n                sparseArrayMin: sparseArrayMin,\r\n                sparseArrayMax: sparseArrayMax,\r\n                sqr: sqr,\r\n                valueOrDefault: valueOrDefault,\r\n                romanToArabic: romanToArabic,\r\n                arabicToRoman: arabicToRoman,\r\n                memoize: memoize,\r\n                ucs2encode: ucs2encode,\r\n                ucs2decode: ucs2decode\r\n            }\r\n        });\r\n        kendo.drawing.util = kendo.util;\r\n        kendo.dataviz.util = kendo.util;\r\n    }());\r\n    return window.kendo;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('pdf/core', [\r\n        'kendo.core',\r\n        'util/main'\r\n    ], f);\r\n}(function () {\r\n    (function (window, parseFloat, undefined) {\r\n        'use strict';\r\n        var kendo = window.kendo;\r\n        var HAS_TYPED_ARRAYS = !!window.Uint8Array;\r\n        var NL = '\\n';\r\n        var RESOURCE_COUNTER = 0;\r\n        var BASE64 = function () {\r\n            var keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\r\n            return {\r\n                decode: function (str) {\r\n                    var input = str.replace(/[^A-Za-z0-9\\+\\/\\=]/g, ''), i = 0, n = input.length, output = [];\r\n                    while (i < n) {\r\n                        var enc1 = keyStr.indexOf(input.charAt(i++));\r\n                        var enc2 = keyStr.indexOf(input.charAt(i++));\r\n                        var enc3 = keyStr.indexOf(input.charAt(i++));\r\n                        var enc4 = keyStr.indexOf(input.charAt(i++));\r\n                        var chr1 = enc1 << 2 | enc2 >>> 4;\r\n                        var chr2 = (enc2 & 15) << 4 | enc3 >>> 2;\r\n                        var chr3 = (enc3 & 3) << 6 | enc4;\r\n                        output.push(chr1);\r\n                        if (enc3 != 64) {\r\n                            output.push(chr2);\r\n                        }\r\n                        if (enc4 != 64) {\r\n                            output.push(chr3);\r\n                        }\r\n                    }\r\n                    return output;\r\n                },\r\n                encode: function (bytes) {\r\n                    var i = 0, n = bytes.length;\r\n                    var output = '';\r\n                    while (i < n) {\r\n                        var chr1 = bytes[i++];\r\n                        var chr2 = bytes[i++];\r\n                        var chr3 = bytes[i++];\r\n                        var enc1 = chr1 >>> 2;\r\n                        var enc2 = (chr1 & 3) << 4 | chr2 >>> 4;\r\n                        var enc3 = (chr2 & 15) << 2 | chr3 >>> 6;\r\n                        var enc4 = chr3 & 63;\r\n                        if (i - n == 2) {\r\n                            enc3 = enc4 = 64;\r\n                        } else if (i - n == 1) {\r\n                            enc4 = 64;\r\n                        }\r\n                        output += keyStr.charAt(enc1) + keyStr.charAt(enc2) + keyStr.charAt(enc3) + keyStr.charAt(enc4);\r\n                    }\r\n                    return output;\r\n                }\r\n            };\r\n        }();\r\n        var PAPER_SIZE = {\r\n            a0: [\r\n                2383.94,\r\n                3370.39\r\n            ],\r\n            a1: [\r\n                1683.78,\r\n                2383.94\r\n            ],\r\n            a2: [\r\n                1190.55,\r\n                1683.78\r\n            ],\r\n            a3: [\r\n                841.89,\r\n                1190.55\r\n            ],\r\n            a4: [\r\n                595.28,\r\n                841.89\r\n            ],\r\n            a5: [\r\n                419.53,\r\n                595.28\r\n            ],\r\n            a6: [\r\n                297.64,\r\n                419.53\r\n            ],\r\n            a7: [\r\n                209.76,\r\n                297.64\r\n            ],\r\n            a8: [\r\n                147.4,\r\n                209.76\r\n            ],\r\n            a9: [\r\n                104.88,\r\n                147.4\r\n            ],\r\n            a10: [\r\n                73.7,\r\n                104.88\r\n            ],\r\n            b0: [\r\n                2834.65,\r\n                4008.19\r\n            ],\r\n            b1: [\r\n                2004.09,\r\n                2834.65\r\n            ],\r\n            b2: [\r\n                1417.32,\r\n                2004.09\r\n            ],\r\n            b3: [\r\n                1000.63,\r\n                1417.32\r\n            ],\r\n            b4: [\r\n                708.66,\r\n                1000.63\r\n            ],\r\n            b5: [\r\n                498.9,\r\n                708.66\r\n            ],\r\n            b6: [\r\n                354.33,\r\n                498.9\r\n            ],\r\n            b7: [\r\n                249.45,\r\n                354.33\r\n            ],\r\n            b8: [\r\n                175.75,\r\n                249.45\r\n            ],\r\n            b9: [\r\n                124.72,\r\n                175.75\r\n            ],\r\n            b10: [\r\n                87.87,\r\n                124.72\r\n            ],\r\n            c0: [\r\n                2599.37,\r\n                3676.54\r\n            ],\r\n            c1: [\r\n                1836.85,\r\n                2599.37\r\n            ],\r\n            c2: [\r\n                1298.27,\r\n                1836.85\r\n            ],\r\n            c3: [\r\n                918.43,\r\n                1298.27\r\n            ],\r\n            c4: [\r\n                649.13,\r\n                918.43\r\n            ],\r\n            c5: [\r\n                459.21,\r\n                649.13\r\n            ],\r\n            c6: [\r\n                323.15,\r\n                459.21\r\n            ],\r\n            c7: [\r\n                229.61,\r\n                323.15\r\n            ],\r\n            c8: [\r\n                161.57,\r\n                229.61\r\n            ],\r\n            c9: [\r\n                113.39,\r\n                161.57\r\n            ],\r\n            c10: [\r\n                79.37,\r\n                113.39\r\n            ],\r\n            executive: [\r\n                521.86,\r\n                756\r\n            ],\r\n            folio: [\r\n                612,\r\n                936\r\n            ],\r\n            legal: [\r\n                612,\r\n                1008\r\n            ],\r\n            letter: [\r\n                612,\r\n                792\r\n            ],\r\n            tabloid: [\r\n                792,\r\n                1224\r\n            ]\r\n        };\r\n        function makeOutput() {\r\n            var indentLevel = 0, output = BinaryStream();\r\n            function out() {\r\n                for (var i = 0; i < arguments.length; ++i) {\r\n                    var x = arguments[i];\r\n                    if (x === undefined) {\r\n                        throw new Error('Cannot output undefined to PDF');\r\n                    } else if (x instanceof PDFValue) {\r\n                        x.beforeRender(out);\r\n                        x.render(out);\r\n                    } else if (isArray(x)) {\r\n                        renderArray(x, out);\r\n                    } else if (isDate(x)) {\r\n                        renderDate(x, out);\r\n                    } else if (typeof x == 'number') {\r\n                        if (isNaN(x)) {\r\n                            throw new Error('Cannot output NaN to PDF');\r\n                        }\r\n                        var num = x.toFixed(7);\r\n                        if (num.indexOf('.') >= 0) {\r\n                            num = num.replace(/\\.?0+$/, '');\r\n                        }\r\n                        if (num == '-0') {\r\n                            num = '0';\r\n                        }\r\n                        output.writeString(num);\r\n                    } else if (/string|boolean/.test(typeof x)) {\r\n                        output.writeString(x + '');\r\n                    } else if (typeof x.get == 'function') {\r\n                        output.write(x.get());\r\n                    } else if (typeof x == 'object') {\r\n                        if (!x) {\r\n                            output.writeString('null');\r\n                        } else {\r\n                            out(new PDFDictionary(x));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            out.writeData = function (data) {\r\n                output.write(data);\r\n            };\r\n            out.withIndent = function (f) {\r\n                ++indentLevel;\r\n                f(out);\r\n                --indentLevel;\r\n            };\r\n            out.indent = function () {\r\n                out(NL, pad('', indentLevel * 2, '  '));\r\n                out.apply(null, arguments);\r\n            };\r\n            out.offset = function () {\r\n                return output.offset();\r\n            };\r\n            out.toString = function () {\r\n                throw new Error('FIX CALLER');\r\n            };\r\n            out.get = function () {\r\n                return output.get();\r\n            };\r\n            out.stream = function () {\r\n                return output;\r\n            };\r\n            return out;\r\n        }\r\n        function wrapObject(value, id) {\r\n            var beforeRender = value.beforeRender;\r\n            var renderValue = value.render;\r\n            value.beforeRender = function () {\r\n            };\r\n            value.render = function (out) {\r\n                out(id, ' 0 R');\r\n            };\r\n            value.renderFull = function (out) {\r\n                value._offset = out.offset();\r\n                out(id, ' 0 obj ');\r\n                beforeRender.call(value, out);\r\n                renderValue.call(value, out);\r\n                out(' endobj');\r\n            };\r\n        }\r\n        function getPaperOptions(getOption) {\r\n            if (typeof getOption != 'function') {\r\n                var options = getOption;\r\n                getOption = function (key, def) {\r\n                    return key in options ? options[key] : def;\r\n                };\r\n            }\r\n            var paperSize = getOption('paperSize', PAPER_SIZE.a4);\r\n            if (!paperSize) {\r\n                return {};\r\n            }\r\n            if (typeof paperSize == 'string') {\r\n                paperSize = PAPER_SIZE[paperSize.toLowerCase()];\r\n                if (paperSize == null) {\r\n                    throw new Error('Unknown paper size');\r\n                }\r\n            }\r\n            paperSize[0] = unitsToPoints(paperSize[0]);\r\n            paperSize[1] = unitsToPoints(paperSize[1]);\r\n            if (getOption('landscape', false)) {\r\n                paperSize = [\r\n                    Math.max(paperSize[0], paperSize[1]),\r\n                    Math.min(paperSize[0], paperSize[1])\r\n                ];\r\n            }\r\n            var margin = getOption('margin');\r\n            if (margin) {\r\n                if (typeof margin == 'string' || typeof margin == 'number') {\r\n                    margin = unitsToPoints(margin, 0);\r\n                    margin = {\r\n                        left: margin,\r\n                        top: margin,\r\n                        right: margin,\r\n                        bottom: margin\r\n                    };\r\n                } else {\r\n                    margin = {\r\n                        left: unitsToPoints(margin.left, 0),\r\n                        top: unitsToPoints(margin.top, 0),\r\n                        right: unitsToPoints(margin.right, 0),\r\n                        bottom: unitsToPoints(margin.bottom, 0)\r\n                    };\r\n                }\r\n                if (getOption('addMargin')) {\r\n                    paperSize[0] += margin.left + margin.right;\r\n                    paperSize[1] += margin.top + margin.bottom;\r\n                }\r\n            }\r\n            return {\r\n                paperSize: paperSize,\r\n                margin: margin\r\n            };\r\n        }\r\n        function PDFDocument(options) {\r\n            var self = this;\r\n            var out = makeOutput();\r\n            var objcount = 0;\r\n            var objects = [];\r\n            function getOption(name, defval) {\r\n                return options && options[name] != null ? options[name] : defval;\r\n            }\r\n            self.getOption = getOption;\r\n            self.attach = function (value) {\r\n                if (objects.indexOf(value) < 0) {\r\n                    wrapObject(value, ++objcount);\r\n                    objects.push(value);\r\n                }\r\n                return value;\r\n            };\r\n            self.pages = [];\r\n            self.FONTS = {};\r\n            self.IMAGES = {};\r\n            self.GRAD_COL_FUNCTIONS = {};\r\n            self.GRAD_OPC_FUNCTIONS = {};\r\n            self.GRAD_COL = {};\r\n            self.GRAD_OPC = {};\r\n            var catalog = self.attach(new PDFCatalog());\r\n            var pageTree = self.attach(new PDFPageTree());\r\n            catalog.setPages(pageTree);\r\n            self.addPage = function (options) {\r\n                var paperOptions = getPaperOptions(function (name, defval) {\r\n                    return options && options[name] != null ? options[name] : defval;\r\n                });\r\n                var paperSize = paperOptions.paperSize;\r\n                var margin = paperOptions.margin;\r\n                var contentWidth = paperSize[0];\r\n                var contentHeight = paperSize[1];\r\n                if (margin) {\r\n                    contentWidth -= margin.left + margin.right;\r\n                    contentHeight -= margin.top + margin.bottom;\r\n                }\r\n                var content = new PDFStream(makeOutput(), null, true);\r\n                var props = {\r\n                    Contents: self.attach(content),\r\n                    Parent: pageTree,\r\n                    MediaBox: [\r\n                        0,\r\n                        0,\r\n                        paperSize[0],\r\n                        paperSize[1]\r\n                    ]\r\n                };\r\n                var page = new PDFPage(self, props);\r\n                page._content = content;\r\n                pageTree.addPage(self.attach(page));\r\n                page.transform(1, 0, 0, -1, 0, paperSize[1]);\r\n                if (margin) {\r\n                    page.translate(margin.left, margin.top);\r\n                    page.rect(0, 0, contentWidth, contentHeight);\r\n                    page.clip();\r\n                }\r\n                self.pages.push(page);\r\n                return page;\r\n            };\r\n            self.render = function () {\r\n                var i;\r\n                out('%PDF-1.4', NL, '%', NL, NL);\r\n                for (i = 0; i < objects.length; ++i) {\r\n                    objects[i].renderFull(out);\r\n                    out(NL, NL);\r\n                }\r\n                var xrefOffset = out.offset();\r\n                out('xref', NL, 0, ' ', objects.length + 1, NL);\r\n                out('0000000000 65535 f ', NL);\r\n                for (i = 0; i < objects.length; ++i) {\r\n                    out(zeropad(objects[i]._offset, 10), ' 00000 n ', NL);\r\n                }\r\n                out(NL);\r\n                out('trailer', NL);\r\n                out(new PDFDictionary({\r\n                    Size: objects.length + 1,\r\n                    Root: catalog,\r\n                    Info: new PDFDictionary({\r\n                        Producer: new PDFString(getOption('producer', 'Kendo UI PDF Generator v.' + kendo.version)),\r\n                        Title: new PDFString(getOption('title', '')),\r\n                        Author: new PDFString(getOption('author', '')),\r\n                        Subject: new PDFString(getOption('subject', '')),\r\n                        Keywords: new PDFString(getOption('keywords', '')),\r\n                        Creator: new PDFString(getOption('creator', 'Kendo UI PDF Generator v.' + kendo.version)),\r\n                        CreationDate: getOption('date', new Date())\r\n                    })\r\n                }), NL, NL);\r\n                out('startxref', NL, xrefOffset, NL);\r\n                out('%%EOF', NL);\r\n                return out.stream().offset(0);\r\n            };\r\n        }\r\n        var FONT_CACHE = {\r\n            'Times-Roman': true,\r\n            'Times-Bold': true,\r\n            'Times-Italic': true,\r\n            'Times-BoldItalic': true,\r\n            'Helvetica': true,\r\n            'Helvetica-Bold': true,\r\n            'Helvetica-Oblique': true,\r\n            'Helvetica-BoldOblique': true,\r\n            'Courier': true,\r\n            'Courier-Bold': true,\r\n            'Courier-Oblique': true,\r\n            'Courier-BoldOblique': true,\r\n            'Symbol': true,\r\n            'ZapfDingbats': true\r\n        };\r\n        function loadBinary(url, cont) {\r\n            function error() {\r\n                if (window.console) {\r\n                    if (window.console.error) {\r\n                        window.console.error('Cannot load URL: %s', url);\r\n                    } else {\r\n                        window.console.log('Cannot load URL: %s', url);\r\n                    }\r\n                }\r\n                cont(null);\r\n            }\r\n            var req = new XMLHttpRequest();\r\n            req.open('GET', url, true);\r\n            if (HAS_TYPED_ARRAYS) {\r\n                req.responseType = 'arraybuffer';\r\n            }\r\n            req.onload = function () {\r\n                if (req.status == 200 || req.status == 304) {\r\n                    if (HAS_TYPED_ARRAYS) {\r\n                        cont(new Uint8Array(req.response));\r\n                    } else {\r\n                        cont(new VBArray(req.responseBody).toArray());\r\n                    }\r\n                } else {\r\n                    error();\r\n                }\r\n            };\r\n            req.onerror = error;\r\n            req.send(null);\r\n        }\r\n        function loadFont(url, cont) {\r\n            var font = FONT_CACHE[url];\r\n            if (font) {\r\n                cont(font);\r\n            } else {\r\n                loadBinary(url, function (data) {\r\n                    if (data == null) {\r\n                        throw new Error('Cannot load font from ' + url);\r\n                    } else {\r\n                        var font = new kendo.pdf.TTFFont(data);\r\n                        FONT_CACHE[url] = font;\r\n                        cont(font);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        var IMAGE_CACHE = {};\r\n        function loadImage(url, cont) {\r\n            var img = IMAGE_CACHE[url], bloburl, blob;\r\n            if (img) {\r\n                cont(img);\r\n            } else {\r\n                img = new Image();\r\n                if (!/^data:/i.test(url)) {\r\n                    img.crossOrigin = 'Anonymous';\r\n                }\r\n                if (HAS_TYPED_ARRAYS && !/^data:/i.test(url)) {\r\n                    var xhr = new XMLHttpRequest();\r\n                    xhr.onload = function () {\r\n                        blob = xhr.response;\r\n                        bloburl = URL.createObjectURL(blob);\r\n                        _load(bloburl);\r\n                    };\r\n                    xhr.onerror = _onerror;\r\n                    xhr.open('GET', url, true);\r\n                    xhr.responseType = 'blob';\r\n                    xhr.send();\r\n                } else {\r\n                    _load(url);\r\n                }\r\n            }\r\n            function _load(url) {\r\n                img.src = url;\r\n                if (img.complete && !kendo.support.browser.msie) {\r\n                    _onload();\r\n                } else {\r\n                    img.onload = _onload;\r\n                    img.onerror = _onerror;\r\n                }\r\n            }\r\n            function _onerror() {\r\n                cont(IMAGE_CACHE[url] = 'TAINTED');\r\n            }\r\n            function _onload() {\r\n                if (blob && /^image\\/jpe?g$/i.test(blob.type)) {\r\n                    var reader = new FileReader();\r\n                    reader.onload = function () {\r\n                        img = new PDFJpegImage(img.width, img.height, BinaryStream(new Uint8Array(this.result)));\r\n                        URL.revokeObjectURL(bloburl);\r\n                        cont(IMAGE_CACHE[url] = img);\r\n                    };\r\n                    reader.readAsArrayBuffer(blob);\r\n                    return;\r\n                }\r\n                var canvas = document.createElement('canvas');\r\n                canvas.width = img.width;\r\n                canvas.height = img.height;\r\n                var ctx = canvas.getContext('2d');\r\n                ctx.drawImage(img, 0, 0);\r\n                var imgdata;\r\n                try {\r\n                    imgdata = ctx.getImageData(0, 0, img.width, img.height);\r\n                } catch (ex) {\r\n                    return _onerror();\r\n                } finally {\r\n                    if (bloburl) {\r\n                        URL.revokeObjectURL(bloburl);\r\n                    }\r\n                }\r\n                var hasAlpha = false, rgb = BinaryStream(), alpha = BinaryStream();\r\n                var rawbytes = imgdata.data;\r\n                var i = 0;\r\n                while (i < rawbytes.length) {\r\n                    rgb.writeByte(rawbytes[i++]);\r\n                    rgb.writeByte(rawbytes[i++]);\r\n                    rgb.writeByte(rawbytes[i++]);\r\n                    var a = rawbytes[i++];\r\n                    if (a < 255) {\r\n                        hasAlpha = true;\r\n                    }\r\n                    alpha.writeByte(a);\r\n                }\r\n                if (hasAlpha) {\r\n                    img = new PDFRawImage(img.width, img.height, rgb, alpha);\r\n                } else {\r\n                    var data = canvas.toDataURL('image/jpeg');\r\n                    data = data.substr(data.indexOf(';base64,') + 8);\r\n                    var stream = BinaryStream();\r\n                    stream.writeBase64(data);\r\n                    stream.offset(0);\r\n                    img = new PDFJpegImage(img.width, img.height, stream);\r\n                }\r\n                cont(IMAGE_CACHE[url] = img);\r\n            }\r\n        }\r\n        function manyLoader(loadOne) {\r\n            return function (urls, callback) {\r\n                var n = urls.length, i = n;\r\n                if (n === 0) {\r\n                    return callback();\r\n                }\r\n                while (i-- > 0) {\r\n                    loadOne(urls[i], function () {\r\n                        if (--n === 0) {\r\n                            callback();\r\n                        }\r\n                    });\r\n                }\r\n            };\r\n        }\r\n        var loadFonts = manyLoader(loadFont);\r\n        var loadImages = manyLoader(loadImage);\r\n        PDFDocument.prototype = {\r\n            loadFonts: loadFonts,\r\n            loadImages: loadImages,\r\n            getFont: function (url) {\r\n                var font = this.FONTS[url];\r\n                if (!font) {\r\n                    font = FONT_CACHE[url];\r\n                    if (!font) {\r\n                        throw new Error('Font ' + url + ' has not been loaded');\r\n                    }\r\n                    if (font === true) {\r\n                        font = this.attach(new PDFStandardFont(url));\r\n                    } else {\r\n                        font = this.attach(new PDFFont(this, font));\r\n                    }\r\n                    this.FONTS[url] = font;\r\n                }\r\n                return font;\r\n            },\r\n            getImage: function (url) {\r\n                var img = this.IMAGES[url];\r\n                if (!img) {\r\n                    img = IMAGE_CACHE[url];\r\n                    if (!img) {\r\n                        throw new Error('Image ' + url + ' has not been loaded');\r\n                    }\r\n                    if (img === 'TAINTED') {\r\n                        return null;\r\n                    }\r\n                    img = this.IMAGES[url] = this.attach(img.asStream(this));\r\n                }\r\n                return img;\r\n            },\r\n            getOpacityGS: function (opacity, forStroke) {\r\n                var id = parseFloat(opacity).toFixed(3);\r\n                opacity = parseFloat(id);\r\n                id += forStroke ? 'S' : 'F';\r\n                var cache = this._opacityGSCache || (this._opacityGSCache = {});\r\n                var gs = cache[id];\r\n                if (!gs) {\r\n                    var props = { Type: _('ExtGState') };\r\n                    if (forStroke) {\r\n                        props.CA = opacity;\r\n                    } else {\r\n                        props.ca = opacity;\r\n                    }\r\n                    gs = this.attach(new PDFDictionary(props));\r\n                    gs._resourceName = _('GS' + ++RESOURCE_COUNTER);\r\n                    cache[id] = gs;\r\n                }\r\n                return gs;\r\n            },\r\n            dict: function (props) {\r\n                return new PDFDictionary(props);\r\n            },\r\n            name: function (str) {\r\n                return _(str);\r\n            },\r\n            stream: function (props, content) {\r\n                return new PDFStream(content, props);\r\n            }\r\n        };\r\n        function pad(str, len, ch) {\r\n            while (str.length < len) {\r\n                str = ch + str;\r\n            }\r\n            return str;\r\n        }\r\n        function zeropad(n, len) {\r\n            return pad(n + '', len, '0');\r\n        }\r\n        function hasOwnProperty(obj, key) {\r\n            return Object.prototype.hasOwnProperty.call(obj, key);\r\n        }\r\n        var isArray = Array.isArray || function (obj) {\r\n            return obj instanceof Array;\r\n        };\r\n        function isDate(obj) {\r\n            return obj instanceof Date;\r\n        }\r\n        function renderArray(a, out) {\r\n            out('[');\r\n            if (a.length > 0) {\r\n                out.withIndent(function () {\r\n                    for (var i = 0; i < a.length; ++i) {\r\n                        if (i > 0 && i % 8 === 0) {\r\n                            out.indent(a[i]);\r\n                        } else {\r\n                            out(' ', a[i]);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            out(' ]');\r\n        }\r\n        function renderDate(date, out) {\r\n            out('(D:', zeropad(date.getUTCFullYear(), 4), zeropad(date.getUTCMonth() + 1, 2), zeropad(date.getUTCDate(), 2), zeropad(date.getUTCHours(), 2), zeropad(date.getUTCMinutes(), 2), zeropad(date.getUTCSeconds(), 2), 'Z)');\r\n        }\r\n        function mm2pt(mm) {\r\n            return mm * (72 / 25.4);\r\n        }\r\n        function cm2pt(cm) {\r\n            return mm2pt(cm * 10);\r\n        }\r\n        function in2pt(inch) {\r\n            return inch * 72;\r\n        }\r\n        function unitsToPoints(x, def) {\r\n            if (typeof x == 'number') {\r\n                return x;\r\n            }\r\n            if (typeof x == 'string') {\r\n                var m;\r\n                m = /^\\s*([0-9.]+)\\s*(mm|cm|in|pt)\\s*$/.exec(x);\r\n                if (m) {\r\n                    var num = parseFloat(m[1]);\r\n                    if (!isNaN(num)) {\r\n                        if (m[2] == 'pt') {\r\n                            return num;\r\n                        }\r\n                        return {\r\n                            'mm': mm2pt,\r\n                            'cm': cm2pt,\r\n                            'in': in2pt\r\n                        }[m[2]](num);\r\n                    }\r\n                }\r\n            }\r\n            if (def != null) {\r\n                return def;\r\n            }\r\n            throw new Error('Can\\'t parse unit: ' + x);\r\n        }\r\n        function PDFValue() {\r\n        }\r\n        PDFValue.prototype.beforeRender = function () {\r\n        };\r\n        function defclass(Ctor, proto, Base) {\r\n            if (!Base) {\r\n                Base = PDFValue;\r\n            }\r\n            Ctor.prototype = new Base();\r\n            for (var i in proto) {\r\n                if (hasOwnProperty(proto, i)) {\r\n                    Ctor.prototype[i] = proto[i];\r\n                }\r\n            }\r\n            return Ctor;\r\n        }\r\n        var PDFString = defclass(function PDFString(value) {\r\n            this.value = value;\r\n        }, {\r\n            render: function (out) {\r\n                var txt = '', esc = this.escape();\r\n                for (var i = 0; i < esc.length; ++i) {\r\n                    txt += String.fromCharCode(esc.charCodeAt(i) & 255);\r\n                }\r\n                out('(', txt, ')');\r\n            },\r\n            escape: function () {\r\n                return this.value.replace(/([\\(\\)\\\\])/g, '\\\\$1');\r\n            },\r\n            toString: function () {\r\n                return this.value;\r\n            }\r\n        });\r\n        var PDFHexString = defclass(function PDFHexString(value) {\r\n            this.value = value;\r\n        }, {\r\n            render: function (out) {\r\n                out('<');\r\n                for (var i = 0; i < this.value.length; ++i) {\r\n                    out(zeropad(this.value.charCodeAt(i).toString(16), 4));\r\n                }\r\n                out('>');\r\n            }\r\n        }, PDFString);\r\n        var PDFName = defclass(function PDFName(name) {\r\n            this.name = name;\r\n        }, {\r\n            render: function (out) {\r\n                out('/' + this.escape());\r\n            },\r\n            escape: function () {\r\n                return this.name.replace(/[^\\x21-\\x7E]/g, function (c) {\r\n                    return '#' + zeropad(c.charCodeAt(0).toString(16), 2);\r\n                });\r\n            },\r\n            toString: function () {\r\n                return this.name;\r\n            }\r\n        });\r\n        var PDFName_cache = {};\r\n        PDFName.get = _;\r\n        function _(name) {\r\n            if (hasOwnProperty(PDFName_cache, name)) {\r\n                return PDFName_cache[name];\r\n            }\r\n            return PDFName_cache[name] = new PDFName(name);\r\n        }\r\n        var PDFDictionary = defclass(function PDFDictionary(props) {\r\n            this.props = props;\r\n        }, {\r\n            render: function (out) {\r\n                var props = this.props, empty = true;\r\n                out('<<');\r\n                out.withIndent(function () {\r\n                    for (var i in props) {\r\n                        if (hasOwnProperty(props, i) && !/^_/.test(i)) {\r\n                            empty = false;\r\n                            out.indent(_(i), ' ', props[i]);\r\n                        }\r\n                    }\r\n                });\r\n                if (!empty) {\r\n                    out.indent();\r\n                }\r\n                out('>>');\r\n            }\r\n        });\r\n        var PDFStream = defclass(function PDFStream(data, props, compress) {\r\n            if (typeof data == 'string') {\r\n                var tmp = BinaryStream();\r\n                tmp.write(data);\r\n                data = tmp;\r\n            }\r\n            this.data = data;\r\n            this.props = props || {};\r\n            this.compress = compress;\r\n        }, {\r\n            render: function (out) {\r\n                var data = this.data.get(), props = this.props;\r\n                if (this.compress && window.pako && typeof window.pako.deflate == 'function') {\r\n                    if (!props.Filter) {\r\n                        props.Filter = [];\r\n                    } else if (!(props.Filter instanceof Array)) {\r\n                        props.Filter = [props.Filter];\r\n                    }\r\n                    props.Filter.unshift(_('FlateDecode'));\r\n                    data = window.pako.deflate(data);\r\n                }\r\n                props.Length = data.length;\r\n                out(new PDFDictionary(props), ' stream', NL);\r\n                out.writeData(data);\r\n                out(NL, 'endstream');\r\n            }\r\n        });\r\n        var PDFCatalog = defclass(function PDFCatalog(props) {\r\n            props = this.props = props || {};\r\n            props.Type = _('Catalog');\r\n        }, {\r\n            setPages: function (pagesObj) {\r\n                this.props.Pages = pagesObj;\r\n            }\r\n        }, PDFDictionary);\r\n        var PDFPageTree = defclass(function PDFPageTree() {\r\n            this.props = {\r\n                Type: _('Pages'),\r\n                Kids: [],\r\n                Count: 0\r\n            };\r\n        }, {\r\n            addPage: function (pageObj) {\r\n                this.props.Kids.push(pageObj);\r\n                this.props.Count++;\r\n            }\r\n        }, PDFDictionary);\r\n        function PDFJpegImage(width, height, data) {\r\n            this.asStream = function () {\r\n                var stream = new PDFStream(data, {\r\n                    Type: _('XObject'),\r\n                    Subtype: _('Image'),\r\n                    Width: width,\r\n                    Height: height,\r\n                    BitsPerComponent: 8,\r\n                    ColorSpace: _('DeviceRGB'),\r\n                    Filter: _('DCTDecode')\r\n                });\r\n                stream._resourceName = _('I' + ++RESOURCE_COUNTER);\r\n                return stream;\r\n            };\r\n        }\r\n        function PDFRawImage(width, height, rgb, alpha) {\r\n            this.asStream = function (pdf) {\r\n                var mask = new PDFStream(alpha, {\r\n                    Type: _('XObject'),\r\n                    Subtype: _('Image'),\r\n                    Width: width,\r\n                    Height: height,\r\n                    BitsPerComponent: 8,\r\n                    ColorSpace: _('DeviceGray')\r\n                }, true);\r\n                var stream = new PDFStream(rgb, {\r\n                    Type: _('XObject'),\r\n                    Subtype: _('Image'),\r\n                    Width: width,\r\n                    Height: height,\r\n                    BitsPerComponent: 8,\r\n                    ColorSpace: _('DeviceRGB'),\r\n                    SMask: pdf.attach(mask)\r\n                }, true);\r\n                stream._resourceName = _('I' + ++RESOURCE_COUNTER);\r\n                return stream;\r\n            };\r\n        }\r\n        var PDFStandardFont = defclass(function PDFStandardFont(name) {\r\n            this.props = {\r\n                Type: _('Font'),\r\n                Subtype: _('Type1'),\r\n                BaseFont: _(name)\r\n            };\r\n            this._resourceName = _('F' + ++RESOURCE_COUNTER);\r\n        }, {\r\n            encodeText: function (str) {\r\n                return new PDFString(str + '');\r\n            }\r\n        }, PDFDictionary);\r\n        var PDFFont = defclass(function PDFFont(pdf, font, props) {\r\n            props = this.props = props || {};\r\n            props.Type = _('Font');\r\n            props.Subtype = _('Type0');\r\n            props.Encoding = _('Identity-H');\r\n            this._pdf = pdf;\r\n            this._font = font;\r\n            this._sub = font.makeSubset();\r\n            this._resourceName = _('F' + ++RESOURCE_COUNTER);\r\n            var head = font.head;\r\n            this.name = font.psName;\r\n            var scale = this.scale = font.scale;\r\n            this.bbox = [\r\n                head.xMin * scale,\r\n                head.yMin * scale,\r\n                head.xMax * scale,\r\n                head.yMax * scale\r\n            ];\r\n            this.italicAngle = font.post.italicAngle;\r\n            this.ascent = font.ascent * scale;\r\n            this.descent = font.descent * scale;\r\n            this.lineGap = font.lineGap * scale;\r\n            this.capHeight = font.os2.capHeight || this.ascent;\r\n            this.xHeight = font.os2.xHeight || 0;\r\n            this.stemV = 0;\r\n            this.familyClass = (font.os2.familyClass || 0) >> 8;\r\n            this.isSerif = this.familyClass >= 1 && this.familyClass <= 7;\r\n            this.isScript = this.familyClass == 10;\r\n            this.flags = (font.post.isFixedPitch ? 1 : 0) | (this.isSerif ? 1 << 1 : 0) | (this.isScript ? 1 << 3 : 0) | (this.italicAngle !== 0 ? 1 << 6 : 0) | 1 << 5;\r\n        }, {\r\n            encodeText: function (text) {\r\n                return new PDFHexString(this._sub.encodeText(text + ''));\r\n            },\r\n            getTextWidth: function (fontSize, text) {\r\n                var width = 0, codeMap = this._font.cmap.codeMap;\r\n                for (var i = 0; i < text.length; ++i) {\r\n                    var glyphId = codeMap[text.charCodeAt(i)];\r\n                    width += this._font.widthOfGlyph(glyphId || 0);\r\n                }\r\n                return width * fontSize / 1000;\r\n            },\r\n            beforeRender: function () {\r\n                var self = this;\r\n                var sub = self._sub;\r\n                var data = sub.render();\r\n                var fontStream = new PDFStream(BinaryStream(data), { Length1: data.length }, true);\r\n                var descriptor = self._pdf.attach(new PDFDictionary({\r\n                    Type: _('FontDescriptor'),\r\n                    FontName: _(self._sub.psName),\r\n                    FontBBox: self.bbox,\r\n                    Flags: self.flags,\r\n                    StemV: self.stemV,\r\n                    ItalicAngle: self.italicAngle,\r\n                    Ascent: self.ascent,\r\n                    Descent: self.descent,\r\n                    CapHeight: self.capHeight,\r\n                    XHeight: self.xHeight,\r\n                    FontFile2: self._pdf.attach(fontStream)\r\n                }));\r\n                var cmap = sub.ncid2ogid;\r\n                var firstChar = sub.firstChar;\r\n                var lastChar = sub.lastChar;\r\n                var charWidths = [];\r\n                (function loop(i, chunk) {\r\n                    if (i <= lastChar) {\r\n                        var gid = cmap[i];\r\n                        if (gid == null) {\r\n                            loop(i + 1);\r\n                        } else {\r\n                            if (!chunk) {\r\n                                charWidths.push(i, chunk = []);\r\n                            }\r\n                            chunk.push(self._font.widthOfGlyph(gid));\r\n                            loop(i + 1, chunk);\r\n                        }\r\n                    }\r\n                }(firstChar));\r\n                var descendant = new PDFDictionary({\r\n                    Type: _('Font'),\r\n                    Subtype: _('CIDFontType2'),\r\n                    BaseFont: _(self._sub.psName),\r\n                    CIDSystemInfo: new PDFDictionary({\r\n                        Registry: new PDFString('Adobe'),\r\n                        Ordering: new PDFString('Identity'),\r\n                        Supplement: 0\r\n                    }),\r\n                    FontDescriptor: descriptor,\r\n                    FirstChar: firstChar,\r\n                    LastChar: lastChar,\r\n                    DW: Math.round(self._font.widthOfGlyph(0)),\r\n                    W: charWidths,\r\n                    CIDToGIDMap: self._pdf.attach(self._makeCidToGidMap())\r\n                });\r\n                var dict = self.props;\r\n                dict.BaseFont = _(self._sub.psName);\r\n                dict.DescendantFonts = [self._pdf.attach(descendant)];\r\n                var unimap = new PDFToUnicodeCmap(firstChar, lastChar, sub.subset);\r\n                var unimapStream = new PDFStream(makeOutput(), null, true);\r\n                unimapStream.data(unimap);\r\n                dict.ToUnicode = self._pdf.attach(unimapStream);\r\n            },\r\n            _makeCidToGidMap: function () {\r\n                return new PDFStream(BinaryStream(this._sub.cidToGidMap()), null, true);\r\n            }\r\n        }, PDFDictionary);\r\n        var PDFToUnicodeCmap = defclass(function PDFUnicodeCMap(firstChar, lastChar, map) {\r\n            this.firstChar = firstChar;\r\n            this.lastChar = lastChar;\r\n            this.map = map;\r\n        }, {\r\n            render: function (out) {\r\n                out.indent('/CIDInit /ProcSet findresource begin');\r\n                out.indent('12 dict begin');\r\n                out.indent('begincmap');\r\n                out.indent('/CIDSystemInfo <<');\r\n                out.indent('  /Registry (Adobe)');\r\n                out.indent('  /Ordering (UCS)');\r\n                out.indent('  /Supplement 0');\r\n                out.indent('>> def');\r\n                out.indent('/CMapName /Adobe-Identity-UCS def');\r\n                out.indent('/CMapType 2 def');\r\n                out.indent('1 begincodespacerange');\r\n                out.indent('  <0000><ffff>');\r\n                out.indent('endcodespacerange');\r\n                var self = this;\r\n                out.indent(self.lastChar - self.firstChar + 1, ' beginbfchar');\r\n                out.withIndent(function () {\r\n                    for (var code = self.firstChar; code <= self.lastChar; ++code) {\r\n                        var unicode = self.map[code];\r\n                        var str = kendo.util.ucs2encode([unicode]);\r\n                        out.indent('<', zeropad(code.toString(16), 4), '>', '<');\r\n                        for (var i = 0; i < str.length; ++i) {\r\n                            out(zeropad(str.charCodeAt(i).toString(16), 4));\r\n                        }\r\n                        out('>');\r\n                    }\r\n                });\r\n                out.indent('endbfchar');\r\n                out.indent('endcmap');\r\n                out.indent('CMapName currentdict /CMap defineresource pop');\r\n                out.indent('end');\r\n                out.indent('end');\r\n            }\r\n        });\r\n        function makeHash(a) {\r\n            return a.map(function (x) {\r\n                return isArray(x) ? makeHash(x) : typeof x == 'number' ? (Math.round(x * 1000) / 1000).toFixed(3) : x;\r\n            }).join(' ');\r\n        }\r\n        function cacheColorGradientFunction(pdf, r1, g1, b1, r2, g2, b2) {\r\n            var hash = makeHash([\r\n                r1,\r\n                g1,\r\n                b1,\r\n                r2,\r\n                g2,\r\n                b2\r\n            ]);\r\n            var func = pdf.GRAD_COL_FUNCTIONS[hash];\r\n            if (!func) {\r\n                func = pdf.GRAD_COL_FUNCTIONS[hash] = pdf.attach(new PDFDictionary({\r\n                    FunctionType: 2,\r\n                    Domain: [\r\n                        0,\r\n                        1\r\n                    ],\r\n                    Range: [\r\n                        0,\r\n                        1,\r\n                        0,\r\n                        1,\r\n                        0,\r\n                        1\r\n                    ],\r\n                    N: 1,\r\n                    C0: [\r\n                        r1,\r\n                        g1,\r\n                        b1\r\n                    ],\r\n                    C1: [\r\n                        r2,\r\n                        g2,\r\n                        b2\r\n                    ]\r\n                }));\r\n            }\r\n            return func;\r\n        }\r\n        function cacheOpacityGradientFunction(pdf, a1, a2) {\r\n            var hash = makeHash([\r\n                a1,\r\n                a2\r\n            ]);\r\n            var func = pdf.GRAD_OPC_FUNCTIONS[hash];\r\n            if (!func) {\r\n                func = pdf.GRAD_OPC_FUNCTIONS[hash] = pdf.attach(new PDFDictionary({\r\n                    FunctionType: 2,\r\n                    Domain: [\r\n                        0,\r\n                        1\r\n                    ],\r\n                    Range: [\r\n                        0,\r\n                        1\r\n                    ],\r\n                    N: 1,\r\n                    C0: [a1],\r\n                    C1: [a2]\r\n                }));\r\n            }\r\n            return func;\r\n        }\r\n        function makeGradientFunctions(pdf, stops) {\r\n            var hasAlpha = false;\r\n            var opacities = [];\r\n            var colors = [];\r\n            var offsets = [];\r\n            var encode = [];\r\n            var i, prev, cur, prevColor, curColor;\r\n            for (i = 1; i < stops.length; ++i) {\r\n                prev = stops[i - 1];\r\n                cur = stops[i];\r\n                prevColor = prev.color;\r\n                curColor = cur.color;\r\n                colors.push(cacheColorGradientFunction(pdf, prevColor.r, prevColor.g, prevColor.b, curColor.r, curColor.g, curColor.b));\r\n                if (prevColor.a < 1 || curColor.a < 1) {\r\n                    hasAlpha = true;\r\n                }\r\n                offsets.push(cur.offset);\r\n                encode.push(0, 1);\r\n            }\r\n            if (hasAlpha) {\r\n                for (i = 1; i < stops.length; ++i) {\r\n                    prev = stops[i - 1];\r\n                    cur = stops[i];\r\n                    prevColor = prev.color;\r\n                    curColor = cur.color;\r\n                    opacities.push(cacheOpacityGradientFunction(pdf, prevColor.a, curColor.a));\r\n                }\r\n            }\r\n            offsets.pop();\r\n            return {\r\n                hasAlpha: hasAlpha,\r\n                colors: assemble(colors),\r\n                opacities: hasAlpha ? assemble(opacities) : null\r\n            };\r\n            function assemble(funcs) {\r\n                if (funcs.length == 1) {\r\n                    return funcs[0];\r\n                }\r\n                return {\r\n                    FunctionType: 3,\r\n                    Functions: funcs,\r\n                    Domain: [\r\n                        0,\r\n                        1\r\n                    ],\r\n                    Bounds: offsets,\r\n                    Encode: encode\r\n                };\r\n            }\r\n        }\r\n        function cacheColorGradient(pdf, isRadial, stops, coords, funcs, box) {\r\n            var shading, hash;\r\n            if (!box) {\r\n                var a = [isRadial].concat(coords);\r\n                stops.forEach(function (x) {\r\n                    a.push(x.offset, x.color.r, x.color.g, x.color.b);\r\n                });\r\n                hash = makeHash(a);\r\n                shading = pdf.GRAD_COL[hash];\r\n            }\r\n            if (!shading) {\r\n                shading = new PDFDictionary({\r\n                    Type: _('Shading'),\r\n                    ShadingType: isRadial ? 3 : 2,\r\n                    ColorSpace: _('DeviceRGB'),\r\n                    Coords: coords,\r\n                    Domain: [\r\n                        0,\r\n                        1\r\n                    ],\r\n                    Function: funcs,\r\n                    Extend: [\r\n                        true,\r\n                        true\r\n                    ]\r\n                });\r\n                pdf.attach(shading);\r\n                shading._resourceName = 'S' + ++RESOURCE_COUNTER;\r\n                if (hash) {\r\n                    pdf.GRAD_COL[hash] = shading;\r\n                }\r\n            }\r\n            return shading;\r\n        }\r\n        function cacheOpacityGradient(pdf, isRadial, stops, coords, funcs, box) {\r\n            var opacity, hash;\r\n            if (!box) {\r\n                var a = [isRadial].concat(coords);\r\n                stops.forEach(function (x) {\r\n                    a.push(x.offset, x.color.a);\r\n                });\r\n                hash = makeHash(a);\r\n                opacity = pdf.GRAD_OPC[hash];\r\n            }\r\n            if (!opacity) {\r\n                opacity = new PDFDictionary({\r\n                    Type: _('ExtGState'),\r\n                    AIS: false,\r\n                    CA: 1,\r\n                    ca: 1,\r\n                    SMask: {\r\n                        Type: _('Mask'),\r\n                        S: _('Luminosity'),\r\n                        G: pdf.attach(new PDFStream('/a0 gs /s0 sh', {\r\n                            Type: _('XObject'),\r\n                            Subtype: _('Form'),\r\n                            FormType: 1,\r\n                            BBox: box ? [\r\n                                box.left,\r\n                                box.top + box.height,\r\n                                box.left + box.width,\r\n                                box.top\r\n                            ] : [\r\n                                0,\r\n                                1,\r\n                                1,\r\n                                0\r\n                            ],\r\n                            Group: {\r\n                                Type: _('Group'),\r\n                                S: _('Transparency'),\r\n                                CS: _('DeviceGray'),\r\n                                I: true\r\n                            },\r\n                            Resources: {\r\n                                ExtGState: {\r\n                                    a0: {\r\n                                        CA: 1,\r\n                                        ca: 1\r\n                                    }\r\n                                },\r\n                                Shading: {\r\n                                    s0: {\r\n                                        ColorSpace: _('DeviceGray'),\r\n                                        Coords: coords,\r\n                                        Domain: [\r\n                                            0,\r\n                                            1\r\n                                        ],\r\n                                        ShadingType: isRadial ? 3 : 2,\r\n                                        Function: funcs,\r\n                                        Extend: [\r\n                                            true,\r\n                                            true\r\n                                        ]\r\n                                    }\r\n                                }\r\n                            }\r\n                        }))\r\n                    }\r\n                });\r\n                pdf.attach(opacity);\r\n                opacity._resourceName = 'O' + ++RESOURCE_COUNTER;\r\n                if (hash) {\r\n                    pdf.GRAD_OPC[hash] = opacity;\r\n                }\r\n            }\r\n            return opacity;\r\n        }\r\n        function cacheGradient(pdf, gradient, box) {\r\n            var isRadial = gradient.type == 'radial';\r\n            var funcs = makeGradientFunctions(pdf, gradient.stops);\r\n            var coords = isRadial ? [\r\n                gradient.start.x,\r\n                gradient.start.y,\r\n                gradient.start.r,\r\n                gradient.end.x,\r\n                gradient.end.y,\r\n                gradient.end.r\r\n            ] : [\r\n                gradient.start.x,\r\n                gradient.start.y,\r\n                gradient.end.x,\r\n                gradient.end.y\r\n            ];\r\n            var shading = cacheColorGradient(pdf, isRadial, gradient.stops, coords, funcs.colors, gradient.userSpace && box);\r\n            var opacity = funcs.hasAlpha ? cacheOpacityGradient(pdf, isRadial, gradient.stops, coords, funcs.opacities, gradient.userSpace && box) : null;\r\n            return {\r\n                hasAlpha: funcs.hasAlpha,\r\n                shading: shading,\r\n                opacity: opacity\r\n            };\r\n        }\r\n        var PDFPage = defclass(function PDFPage(pdf, props) {\r\n            this._pdf = pdf;\r\n            this._rcount = 0;\r\n            this._textMode = false;\r\n            this._fontResources = {};\r\n            this._gsResources = {};\r\n            this._xResources = {};\r\n            this._patResources = {};\r\n            this._shResources = {};\r\n            this._opacity = 1;\r\n            this._matrix = [\r\n                1,\r\n                0,\r\n                0,\r\n                1,\r\n                0,\r\n                0\r\n            ];\r\n            this._annotations = [];\r\n            this._font = null;\r\n            this._fontSize = null;\r\n            this._contextStack = [];\r\n            props = this.props = props || {};\r\n            props.Type = _('Page');\r\n            props.ProcSet = [\r\n                _('PDF'),\r\n                _('Text'),\r\n                _('ImageB'),\r\n                _('ImageC'),\r\n                _('ImageI')\r\n            ];\r\n            props.Resources = new PDFDictionary({\r\n                Font: new PDFDictionary(this._fontResources),\r\n                ExtGState: new PDFDictionary(this._gsResources),\r\n                XObject: new PDFDictionary(this._xResources),\r\n                Pattern: new PDFDictionary(this._patResources),\r\n                Shading: new PDFDictionary(this._shResources)\r\n            });\r\n            props.Annots = this._annotations;\r\n        }, {\r\n            _out: function () {\r\n                this._content.data.apply(null, arguments);\r\n            },\r\n            transform: function (a, b, c, d, e, f) {\r\n                if (!isIdentityMatrix(arguments)) {\r\n                    this._matrix = mmul(arguments, this._matrix);\r\n                    this._out(a, ' ', b, ' ', c, ' ', d, ' ', e, ' ', f, ' cm');\r\n                    this._out(NL);\r\n                }\r\n            },\r\n            translate: function (dx, dy) {\r\n                this.transform(1, 0, 0, 1, dx, dy);\r\n            },\r\n            scale: function (sx, sy) {\r\n                this.transform(sx, 0, 0, sy, 0, 0);\r\n            },\r\n            rotate: function (angle) {\r\n                var cos = Math.cos(angle), sin = Math.sin(angle);\r\n                this.transform(cos, sin, -sin, cos, 0, 0);\r\n            },\r\n            beginText: function () {\r\n                this._textMode = true;\r\n                this._out('BT', NL);\r\n            },\r\n            endText: function () {\r\n                this._textMode = false;\r\n                this._out('ET', NL);\r\n            },\r\n            _requireTextMode: function () {\r\n                if (!this._textMode) {\r\n                    throw new Error('Text mode required; call page.beginText() first');\r\n                }\r\n            },\r\n            _requireFont: function () {\r\n                if (!this._font) {\r\n                    throw new Error('No font selected; call page.setFont() first');\r\n                }\r\n            },\r\n            setFont: function (font, size) {\r\n                this._requireTextMode();\r\n                if (font == null) {\r\n                    font = this._font;\r\n                } else if (!(font instanceof PDFFont)) {\r\n                    font = this._pdf.getFont(font);\r\n                }\r\n                if (size == null) {\r\n                    size = this._fontSize;\r\n                }\r\n                this._fontResources[font._resourceName] = font;\r\n                this._font = font;\r\n                this._fontSize = size;\r\n                this._out(font._resourceName, ' ', size, ' Tf', NL);\r\n            },\r\n            setTextLeading: function (size) {\r\n                this._requireTextMode();\r\n                this._out(size, ' TL', NL);\r\n            },\r\n            setTextRenderingMode: function (mode) {\r\n                this._requireTextMode();\r\n                this._out(mode, ' Tr', NL);\r\n            },\r\n            showText: function (text, requestedWidth) {\r\n                this._requireFont();\r\n                if (text.length > 1 && requestedWidth && this._font instanceof PDFFont) {\r\n                    var outputWidth = this._font.getTextWidth(this._fontSize, text);\r\n                    var scale = requestedWidth / outputWidth * 100;\r\n                    this._out(scale, ' Tz ');\r\n                }\r\n                this._out(this._font.encodeText(text), ' Tj', NL);\r\n            },\r\n            showTextNL: function (text) {\r\n                this._requireFont();\r\n                this._out(this._font.encodeText(text), ' \\'', NL);\r\n            },\r\n            addLink: function (uri, box) {\r\n                var ll = this._toPage({\r\n                    x: box.left,\r\n                    y: box.bottom\r\n                });\r\n                var ur = this._toPage({\r\n                    x: box.right,\r\n                    y: box.top\r\n                });\r\n                this._annotations.push(new PDFDictionary({\r\n                    Type: _('Annot'),\r\n                    Subtype: _('Link'),\r\n                    Rect: [\r\n                        ll.x,\r\n                        ll.y,\r\n                        ur.x,\r\n                        ur.y\r\n                    ],\r\n                    Border: [\r\n                        0,\r\n                        0,\r\n                        0\r\n                    ],\r\n                    A: new PDFDictionary({\r\n                        Type: _('Action'),\r\n                        S: _('URI'),\r\n                        URI: new PDFString(uri)\r\n                    })\r\n                }));\r\n            },\r\n            setStrokeColor: function (r, g, b) {\r\n                this._out(r, ' ', g, ' ', b, ' RG', NL);\r\n            },\r\n            setOpacity: function (opacity) {\r\n                this.setFillOpacity(opacity);\r\n                this.setStrokeOpacity(opacity);\r\n                this._opacity *= opacity;\r\n            },\r\n            setStrokeOpacity: function (opacity) {\r\n                if (opacity < 1) {\r\n                    var gs = this._pdf.getOpacityGS(this._opacity * opacity, true);\r\n                    this._gsResources[gs._resourceName] = gs;\r\n                    this._out(gs._resourceName, ' gs', NL);\r\n                }\r\n            },\r\n            setFillColor: function (r, g, b) {\r\n                this._out(r, ' ', g, ' ', b, ' rg', NL);\r\n            },\r\n            setFillOpacity: function (opacity) {\r\n                if (opacity < 1) {\r\n                    var gs = this._pdf.getOpacityGS(this._opacity * opacity, false);\r\n                    this._gsResources[gs._resourceName] = gs;\r\n                    this._out(gs._resourceName, ' gs', NL);\r\n                }\r\n            },\r\n            gradient: function (gradient, box) {\r\n                this.save();\r\n                this.rect(box.left, box.top, box.width, box.height);\r\n                this.clip();\r\n                if (!gradient.userSpace) {\r\n                    this.transform(box.width, 0, 0, box.height, box.left, box.top);\r\n                }\r\n                var g = cacheGradient(this._pdf, gradient, box);\r\n                var sname = g.shading._resourceName, oname;\r\n                this._shResources[sname] = g.shading;\r\n                if (g.hasAlpha) {\r\n                    oname = g.opacity._resourceName;\r\n                    this._gsResources[oname] = g.opacity;\r\n                    this._out('/' + oname + ' gs ');\r\n                }\r\n                this._out('/' + sname + ' sh', NL);\r\n                this.restore();\r\n            },\r\n            setDashPattern: function (dashArray, dashPhase) {\r\n                this._out(dashArray, ' ', dashPhase, ' d', NL);\r\n            },\r\n            setLineWidth: function (width) {\r\n                this._out(width, ' w', NL);\r\n            },\r\n            setLineCap: function (lineCap) {\r\n                this._out(lineCap, ' J', NL);\r\n            },\r\n            setLineJoin: function (lineJoin) {\r\n                this._out(lineJoin, ' j', NL);\r\n            },\r\n            setMitterLimit: function (mitterLimit) {\r\n                this._out(mitterLimit, ' M', NL);\r\n            },\r\n            save: function () {\r\n                this._contextStack.push(this._context());\r\n                this._out('q', NL);\r\n            },\r\n            restore: function () {\r\n                this._out('Q', NL);\r\n                this._context(this._contextStack.pop());\r\n            },\r\n            moveTo: function (x, y) {\r\n                this._out(x, ' ', y, ' m', NL);\r\n            },\r\n            lineTo: function (x, y) {\r\n                this._out(x, ' ', y, ' l', NL);\r\n            },\r\n            bezier: function (x1, y1, x2, y2, x3, y3) {\r\n                this._out(x1, ' ', y1, ' ', x2, ' ', y2, ' ', x3, ' ', y3, ' c', NL);\r\n            },\r\n            bezier1: function (x1, y1, x3, y3) {\r\n                this._out(x1, ' ', y1, ' ', x3, ' ', y3, ' y', NL);\r\n            },\r\n            bezier2: function (x2, y2, x3, y3) {\r\n                this._out(x2, ' ', y2, ' ', x3, ' ', y3, ' v', NL);\r\n            },\r\n            close: function () {\r\n                this._out('h', NL);\r\n            },\r\n            rect: function (x, y, w, h) {\r\n                this._out(x, ' ', y, ' ', w, ' ', h, ' re', NL);\r\n            },\r\n            ellipse: function (x, y, rx, ry) {\r\n                function _X(v) {\r\n                    return x + v;\r\n                }\r\n                function _Y(v) {\r\n                    return y + v;\r\n                }\r\n                var k = 0.5522847498307936;\r\n                this.moveTo(_X(0), _Y(ry));\r\n                this.bezier(_X(rx * k), _Y(ry), _X(rx), _Y(ry * k), _X(rx), _Y(0));\r\n                this.bezier(_X(rx), _Y(-ry * k), _X(rx * k), _Y(-ry), _X(0), _Y(-ry));\r\n                this.bezier(_X(-rx * k), _Y(-ry), _X(-rx), _Y(-ry * k), _X(-rx), _Y(0));\r\n                this.bezier(_X(-rx), _Y(ry * k), _X(-rx * k), _Y(ry), _X(0), _Y(ry));\r\n            },\r\n            circle: function (x, y, r) {\r\n                this.ellipse(x, y, r, r);\r\n            },\r\n            stroke: function () {\r\n                this._out('S', NL);\r\n            },\r\n            nop: function () {\r\n                this._out('n', NL);\r\n            },\r\n            clip: function () {\r\n                this._out('W n', NL);\r\n            },\r\n            clipStroke: function () {\r\n                this._out('W S', NL);\r\n            },\r\n            closeStroke: function () {\r\n                this._out('s', NL);\r\n            },\r\n            fill: function () {\r\n                this._out('f', NL);\r\n            },\r\n            fillStroke: function () {\r\n                this._out('B', NL);\r\n            },\r\n            drawImage: function (url) {\r\n                var img = this._pdf.getImage(url);\r\n                if (img) {\r\n                    this._xResources[img._resourceName] = img;\r\n                    this._out(img._resourceName, ' Do', NL);\r\n                }\r\n            },\r\n            comment: function (txt) {\r\n                var self = this;\r\n                txt.split(/\\r?\\n/g).forEach(function (line) {\r\n                    self._out('% ', line, NL);\r\n                });\r\n            },\r\n            _context: function (val) {\r\n                if (val != null) {\r\n                    this._opacity = val.opacity;\r\n                    this._matrix = val.matrix;\r\n                } else {\r\n                    return {\r\n                        opacity: this._opacity,\r\n                        matrix: this._matrix\r\n                    };\r\n                }\r\n            },\r\n            _toPage: function (p) {\r\n                var m = this._matrix;\r\n                var a = m[0], b = m[1], c = m[2], d = m[3], e = m[4], f = m[5];\r\n                return {\r\n                    x: a * p.x + c * p.y + e,\r\n                    y: b * p.x + d * p.y + f\r\n                };\r\n            }\r\n        }, PDFDictionary);\r\n        function BinaryStream(data) {\r\n            var offset = 0, length = 0;\r\n            if (data == null) {\r\n                data = HAS_TYPED_ARRAYS ? new Uint8Array(256) : [];\r\n            } else {\r\n                length = data.length;\r\n            }\r\n            var ensure = HAS_TYPED_ARRAYS ? function (len) {\r\n                if (len >= data.length) {\r\n                    var tmp = new Uint8Array(Math.max(len + 256, data.length * 2));\r\n                    tmp.set(data, 0);\r\n                    data = tmp;\r\n                }\r\n            } : function () {\r\n            };\r\n            var get = HAS_TYPED_ARRAYS ? function () {\r\n                return new Uint8Array(data.buffer, 0, length);\r\n            } : function () {\r\n                return data;\r\n            };\r\n            var write = HAS_TYPED_ARRAYS ? function (bytes) {\r\n                if (typeof bytes == 'string') {\r\n                    return writeString(bytes);\r\n                }\r\n                var len = bytes.length;\r\n                ensure(offset + len);\r\n                data.set(bytes, offset);\r\n                offset += len;\r\n                if (offset > length) {\r\n                    length = offset;\r\n                }\r\n            } : function (bytes) {\r\n                if (typeof bytes == 'string') {\r\n                    return writeString(bytes);\r\n                }\r\n                for (var i = 0; i < bytes.length; ++i) {\r\n                    writeByte(bytes[i]);\r\n                }\r\n            };\r\n            var slice = HAS_TYPED_ARRAYS ? function (start, length) {\r\n                if (data.buffer.slice) {\r\n                    return new Uint8Array(data.buffer.slice(start, start + length));\r\n                } else {\r\n                    var x = new Uint8Array(length);\r\n                    x.set(new Uint8Array(data.buffer, start, length));\r\n                    return x;\r\n                }\r\n            } : function (start, length) {\r\n                return data.slice(start, start + length);\r\n            };\r\n            function eof() {\r\n                return offset >= length;\r\n            }\r\n            function readByte() {\r\n                return offset < length ? data[offset++] : 0;\r\n            }\r\n            function writeByte(b) {\r\n                ensure(offset);\r\n                data[offset++] = b & 255;\r\n                if (offset > length) {\r\n                    length = offset;\r\n                }\r\n            }\r\n            function readShort() {\r\n                return readByte() << 8 | readByte();\r\n            }\r\n            function writeShort(w) {\r\n                writeByte(w >> 8);\r\n                writeByte(w);\r\n            }\r\n            function readShort_() {\r\n                var w = readShort();\r\n                return w >= 32768 ? w - 65536 : w;\r\n            }\r\n            function writeShort_(w) {\r\n                writeShort(w < 0 ? w + 65536 : w);\r\n            }\r\n            function readLong() {\r\n                return readShort() * 65536 + readShort();\r\n            }\r\n            function writeLong(w) {\r\n                writeShort(w >>> 16 & 65535);\r\n                writeShort(w & 65535);\r\n            }\r\n            function readLong_() {\r\n                var w = readLong();\r\n                return w >= 2147483648 ? w - 4294967296 : w;\r\n            }\r\n            function writeLong_(w) {\r\n                writeLong(w < 0 ? w + 4294967296 : w);\r\n            }\r\n            function readFixed() {\r\n                return readLong() / 65536;\r\n            }\r\n            function writeFixed(f) {\r\n                writeLong(Math.round(f * 65536));\r\n            }\r\n            function readFixed_() {\r\n                return readLong_() / 65536;\r\n            }\r\n            function writeFixed_(f) {\r\n                writeLong_(Math.round(f * 65536));\r\n            }\r\n            function read(len) {\r\n                return times(len, readByte);\r\n            }\r\n            function readString(len) {\r\n                return String.fromCharCode.apply(String, read(len));\r\n            }\r\n            function writeString(str) {\r\n                for (var i = 0; i < str.length; ++i) {\r\n                    writeByte(str.charCodeAt(i));\r\n                }\r\n            }\r\n            function times(n, reader) {\r\n                for (var ret = new Array(n), i = 0; i < n; ++i) {\r\n                    ret[i] = reader();\r\n                }\r\n                return ret;\r\n            }\r\n            var stream = {\r\n                eof: eof,\r\n                readByte: readByte,\r\n                writeByte: writeByte,\r\n                readShort: readShort,\r\n                writeShort: writeShort,\r\n                readLong: readLong,\r\n                writeLong: writeLong,\r\n                readFixed: readFixed,\r\n                writeFixed: writeFixed,\r\n                readShort_: readShort_,\r\n                writeShort_: writeShort_,\r\n                readLong_: readLong_,\r\n                writeLong_: writeLong_,\r\n                readFixed_: readFixed_,\r\n                writeFixed_: writeFixed_,\r\n                read: read,\r\n                write: write,\r\n                readString: readString,\r\n                writeString: writeString,\r\n                times: times,\r\n                get: get,\r\n                slice: slice,\r\n                offset: function (pos) {\r\n                    if (pos != null) {\r\n                        offset = pos;\r\n                        return stream;\r\n                    }\r\n                    return offset;\r\n                },\r\n                skip: function (nbytes) {\r\n                    offset += nbytes;\r\n                },\r\n                toString: function () {\r\n                    throw new Error('FIX CALLER.  BinaryStream is no longer convertible to string!');\r\n                },\r\n                length: function () {\r\n                    return length;\r\n                },\r\n                saveExcursion: function (f) {\r\n                    var pos = offset;\r\n                    try {\r\n                        return f();\r\n                    } finally {\r\n                        offset = pos;\r\n                    }\r\n                },\r\n                writeBase64: function (base64) {\r\n                    if (window.atob) {\r\n                        writeString(window.atob(base64));\r\n                    } else {\r\n                        write(BASE64.decode(base64));\r\n                    }\r\n                },\r\n                base64: function () {\r\n                    return BASE64.encode(get());\r\n                }\r\n            };\r\n            return stream;\r\n        }\r\n        function unquote(str) {\r\n            return str.replace(/^\\s*(['\"])(.*)\\1\\s*$/, '$2');\r\n        }\r\n        function parseFontDef(fontdef) {\r\n            var rx = /^\\s*((normal|italic)\\s+)?((normal|small-caps)\\s+)?((normal|bold|\\d+)\\s+)?(([0-9.]+)(px|pt))(\\/(([0-9.]+)(px|pt)|normal))?\\s+(.*?)\\s*$/i;\r\n            var m = rx.exec(fontdef);\r\n            if (!m) {\r\n                return {\r\n                    fontSize: 12,\r\n                    fontFamily: 'sans-serif'\r\n                };\r\n            }\r\n            var fontSize = m[8] ? parseInt(m[8], 10) : 12;\r\n            return {\r\n                italic: m[2] && m[2].toLowerCase() == 'italic',\r\n                variant: m[4],\r\n                bold: m[6] && /bold|700/i.test(m[6]),\r\n                fontSize: fontSize,\r\n                lineHeight: m[12] ? m[12] == 'normal' ? fontSize : parseInt(m[12], 10) : null,\r\n                fontFamily: m[14].split(/\\s*,\\s*/g).map(unquote)\r\n            };\r\n        }\r\n        function getFontURL(style) {\r\n            function mkFamily(name) {\r\n                if (style.bold) {\r\n                    name += '|bold';\r\n                }\r\n                if (style.italic) {\r\n                    name += '|italic';\r\n                }\r\n                return name.toLowerCase();\r\n            }\r\n            var fontFamily = style.fontFamily;\r\n            var name, url;\r\n            if (fontFamily instanceof Array) {\r\n                for (var i = 0; i < fontFamily.length; ++i) {\r\n                    name = mkFamily(fontFamily[i]);\r\n                    url = FONT_MAPPINGS[name];\r\n                    if (url) {\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                url = FONT_MAPPINGS[fontFamily.toLowerCase()];\r\n            }\r\n            while (typeof url == 'function') {\r\n                url = url();\r\n            }\r\n            if (!url) {\r\n                url = 'Times-Roman';\r\n            }\r\n            return url;\r\n        }\r\n        var FONT_MAPPINGS = {\r\n            'serif': 'Times-Roman',\r\n            'serif|bold': 'Times-Bold',\r\n            'serif|italic': 'Times-Italic',\r\n            'serif|bold|italic': 'Times-BoldItalic',\r\n            'sans-serif': 'Helvetica',\r\n            'sans-serif|bold': 'Helvetica-Bold',\r\n            'sans-serif|italic': 'Helvetica-Oblique',\r\n            'sans-serif|bold|italic': 'Helvetica-BoldOblique',\r\n            'monospace': 'Courier',\r\n            'monospace|bold': 'Courier-Bold',\r\n            'monospace|italic': 'Courier-Oblique',\r\n            'monospace|bold|italic': 'Courier-BoldOblique',\r\n            'zapfdingbats': 'ZapfDingbats',\r\n            'zapfdingbats|bold': 'ZapfDingbats',\r\n            'zapfdingbats|italic': 'ZapfDingbats',\r\n            'zapfdingbats|bold|italic': 'ZapfDingbats'\r\n        };\r\n        function fontAlias(alias, name) {\r\n            alias = alias.toLowerCase();\r\n            FONT_MAPPINGS[alias] = function () {\r\n                return FONT_MAPPINGS[name];\r\n            };\r\n            FONT_MAPPINGS[alias + '|bold'] = function () {\r\n                return FONT_MAPPINGS[name + '|bold'];\r\n            };\r\n            FONT_MAPPINGS[alias + '|italic'] = function () {\r\n                return FONT_MAPPINGS[name + '|italic'];\r\n            };\r\n            FONT_MAPPINGS[alias + '|bold|italic'] = function () {\r\n                return FONT_MAPPINGS[name + '|bold|italic'];\r\n            };\r\n        }\r\n        fontAlias('Times New Roman', 'serif');\r\n        fontAlias('Courier New', 'monospace');\r\n        fontAlias('Arial', 'sans-serif');\r\n        fontAlias('Helvetica', 'sans-serif');\r\n        fontAlias('Verdana', 'sans-serif');\r\n        fontAlias('Tahoma', 'sans-serif');\r\n        fontAlias('Georgia', 'sans-serif');\r\n        fontAlias('Monaco', 'monospace');\r\n        fontAlias('Andale Mono', 'monospace');\r\n        function defineFont(name, url) {\r\n            if (arguments.length == 1) {\r\n                for (var i in name) {\r\n                    if (hasOwnProperty(name, i)) {\r\n                        defineFont(i, name[i]);\r\n                    }\r\n                }\r\n            } else {\r\n                name = name.toLowerCase();\r\n                FONT_MAPPINGS[name] = url;\r\n                switch (name) {\r\n                case 'dejavu sans':\r\n                    FONT_MAPPINGS['sans-serif'] = url;\r\n                    break;\r\n                case 'dejavu sans|bold':\r\n                    FONT_MAPPINGS['sans-serif|bold'] = url;\r\n                    break;\r\n                case 'dejavu sans|italic':\r\n                    FONT_MAPPINGS['sans-serif|italic'] = url;\r\n                    break;\r\n                case 'dejavu sans|bold|italic':\r\n                    FONT_MAPPINGS['sans-serif|bold|italic'] = url;\r\n                    break;\r\n                case 'dejavu serif':\r\n                    FONT_MAPPINGS['serif'] = url;\r\n                    break;\r\n                case 'dejavu serif|bold':\r\n                    FONT_MAPPINGS['serif|bold'] = url;\r\n                    break;\r\n                case 'dejavu serif|italic':\r\n                    FONT_MAPPINGS['serif|italic'] = url;\r\n                    break;\r\n                case 'dejavu serif|bold|italic':\r\n                    FONT_MAPPINGS['serif|bold|italic'] = url;\r\n                    break;\r\n                case 'dejavu mono':\r\n                    FONT_MAPPINGS['monospace'] = url;\r\n                    break;\r\n                case 'dejavu mono|bold':\r\n                    FONT_MAPPINGS['monospace|bold'] = url;\r\n                    break;\r\n                case 'dejavu mono|italic':\r\n                    FONT_MAPPINGS['monospace|italic'] = url;\r\n                    break;\r\n                case 'dejavu mono|bold|italic':\r\n                    FONT_MAPPINGS['monospace|bold|italic'] = url;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        kendo.pdf = {\r\n            Document: PDFDocument,\r\n            BinaryStream: BinaryStream,\r\n            defineFont: defineFont,\r\n            parseFontDef: parseFontDef,\r\n            getFontURL: getFontURL,\r\n            loadFonts: loadFonts,\r\n            loadImages: loadImages,\r\n            getPaperOptions: getPaperOptions,\r\n            TEXT_RENDERING_MODE: {\r\n                fill: 0,\r\n                stroke: 1,\r\n                fillAndStroke: 2,\r\n                invisible: 3,\r\n                fillAndClip: 4,\r\n                strokeAndClip: 5,\r\n                fillStrokeClip: 6,\r\n                clip: 7\r\n            }\r\n        };\r\n        function mmul(a, b) {\r\n            var a1 = a[0], b1 = a[1], c1 = a[2], d1 = a[3], e1 = a[4], f1 = a[5];\r\n            var a2 = b[0], b2 = b[1], c2 = b[2], d2 = b[3], e2 = b[4], f2 = b[5];\r\n            return [\r\n                a1 * a2 + b1 * c2,\r\n                a1 * b2 + b1 * d2,\r\n                c1 * a2 + d1 * c2,\r\n                c1 * b2 + d1 * d2,\r\n                e1 * a2 + f1 * c2 + e2,\r\n                e1 * b2 + f1 * d2 + f2\r\n            ];\r\n        }\r\n        function isIdentityMatrix(m) {\r\n            return m[0] === 1 && m[1] === 0 && m[2] === 0 && m[3] === 1 && m[4] === 0 && m[5] === 0;\r\n        }\r\n    }(window, parseFloat));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('pdf/ttf', [\r\n        'pdf/core',\r\n        'util/main'\r\n    ], f);\r\n}(function () {\r\n    (function (window) {\r\n        'use strict';\r\n        function hasOwnProperty(obj, key) {\r\n            return Object.prototype.hasOwnProperty.call(obj, key);\r\n        }\r\n        function sortedKeys(obj) {\r\n            return Object.keys(obj).sort(function (a, b) {\r\n                return a - b;\r\n            }).map(parseFloat);\r\n        }\r\n        var PDF = window.kendo.pdf;\r\n        var BinaryStream = PDF.BinaryStream;\r\n        function Directory(data) {\r\n            this.raw = data;\r\n            this.scalerType = data.readLong();\r\n            this.tableCount = data.readShort();\r\n            this.searchRange = data.readShort();\r\n            this.entrySelector = data.readShort();\r\n            this.rangeShift = data.readShort();\r\n            var tables = this.tables = {};\r\n            for (var i = 0; i < this.tableCount; ++i) {\r\n                var entry = {\r\n                    tag: data.readString(4),\r\n                    checksum: data.readLong(),\r\n                    offset: data.readLong(),\r\n                    length: data.readLong()\r\n                };\r\n                tables[entry.tag] = entry;\r\n            }\r\n        }\r\n        Directory.prototype = {\r\n            readTable: function (name, Ctor) {\r\n                var def = this.tables[name];\r\n                if (!def) {\r\n                    throw new Error('Table ' + name + ' not found in directory');\r\n                }\r\n                return this[name] = def.table = new Ctor(this, def);\r\n            },\r\n            render: function (tables) {\r\n                var tableCount = Object.keys(tables).length;\r\n                var maxpow2 = Math.pow(2, Math.floor(Math.log(tableCount) / Math.LN2));\r\n                var searchRange = maxpow2 * 16;\r\n                var entrySelector = Math.floor(Math.log(maxpow2) / Math.LN2);\r\n                var rangeShift = tableCount * 16 - searchRange;\r\n                var out = BinaryStream();\r\n                out.writeLong(this.scalerType);\r\n                out.writeShort(tableCount);\r\n                out.writeShort(searchRange);\r\n                out.writeShort(entrySelector);\r\n                out.writeShort(rangeShift);\r\n                var directoryLength = tableCount * 16;\r\n                var offset = out.offset() + directoryLength;\r\n                var headOffset = null;\r\n                var tableData = BinaryStream();\r\n                for (var tag in tables) {\r\n                    if (hasOwnProperty(tables, tag)) {\r\n                        var table = tables[tag];\r\n                        out.writeString(tag);\r\n                        out.writeLong(this.checksum(table));\r\n                        out.writeLong(offset);\r\n                        out.writeLong(table.length);\r\n                        tableData.write(table);\r\n                        if (tag == 'head') {\r\n                            headOffset = offset;\r\n                        }\r\n                        offset += table.length;\r\n                        while (offset % 4) {\r\n                            tableData.writeByte(0);\r\n                            offset++;\r\n                        }\r\n                    }\r\n                }\r\n                out.write(tableData.get());\r\n                var sum = this.checksum(out.get());\r\n                var adjustment = 2981146554 - sum;\r\n                out.offset(headOffset + 8);\r\n                out.writeLong(adjustment);\r\n                return out.get();\r\n            },\r\n            checksum: function (data) {\r\n                data = BinaryStream(data);\r\n                var sum = 0;\r\n                while (!data.eof()) {\r\n                    sum += data.readLong();\r\n                }\r\n                return sum & 4294967295;\r\n            }\r\n        };\r\n        function deftable(methods) {\r\n            function Ctor(file, def) {\r\n                this.definition = def;\r\n                this.length = def.length;\r\n                this.offset = def.offset;\r\n                this.file = file;\r\n                this.rawData = file.raw;\r\n                this.parse(file.raw);\r\n            }\r\n            Ctor.prototype.raw = function () {\r\n                return this.rawData.slice(this.offset, this.length);\r\n            };\r\n            for (var i in methods) {\r\n                if (hasOwnProperty(methods, i)) {\r\n                    Ctor[i] = Ctor.prototype[i] = methods[i];\r\n                }\r\n            }\r\n            return Ctor;\r\n        }\r\n        var HeadTable = deftable({\r\n            parse: function (data) {\r\n                data.offset(this.offset);\r\n                this.version = data.readLong();\r\n                this.revision = data.readLong();\r\n                this.checkSumAdjustment = data.readLong();\r\n                this.magicNumber = data.readLong();\r\n                this.flags = data.readShort();\r\n                this.unitsPerEm = data.readShort();\r\n                this.created = data.read(8);\r\n                this.modified = data.read(8);\r\n                this.xMin = data.readShort_();\r\n                this.yMin = data.readShort_();\r\n                this.xMax = data.readShort_();\r\n                this.yMax = data.readShort_();\r\n                this.macStyle = data.readShort();\r\n                this.lowestRecPPEM = data.readShort();\r\n                this.fontDirectionHint = data.readShort_();\r\n                this.indexToLocFormat = data.readShort_();\r\n                this.glyphDataFormat = data.readShort_();\r\n            },\r\n            render: function (indexToLocFormat) {\r\n                var out = BinaryStream();\r\n                out.writeLong(this.version);\r\n                out.writeLong(this.revision);\r\n                out.writeLong(0);\r\n                out.writeLong(this.magicNumber);\r\n                out.writeShort(this.flags);\r\n                out.writeShort(this.unitsPerEm);\r\n                out.write(this.created);\r\n                out.write(this.modified);\r\n                out.writeShort_(this.xMin);\r\n                out.writeShort_(this.yMin);\r\n                out.writeShort_(this.xMax);\r\n                out.writeShort_(this.yMax);\r\n                out.writeShort(this.macStyle);\r\n                out.writeShort(this.lowestRecPPEM);\r\n                out.writeShort_(this.fontDirectionHint);\r\n                out.writeShort_(indexToLocFormat);\r\n                out.writeShort_(this.glyphDataFormat);\r\n                return out.get();\r\n            }\r\n        });\r\n        var LocaTable = deftable({\r\n            parse: function (data) {\r\n                data.offset(this.offset);\r\n                var format = this.file.head.indexToLocFormat;\r\n                if (format === 0) {\r\n                    this.offsets = data.times(this.length / 2, function () {\r\n                        return 2 * data.readShort();\r\n                    });\r\n                } else {\r\n                    this.offsets = data.times(this.length / 4, data.readLong);\r\n                }\r\n            },\r\n            offsetOf: function (id) {\r\n                return this.offsets[id];\r\n            },\r\n            lengthOf: function (id) {\r\n                return this.offsets[id + 1] - this.offsets[id];\r\n            },\r\n            render: function (offsets) {\r\n                var out = BinaryStream();\r\n                var needsLongFormat = offsets[offsets.length - 1] > 65535;\r\n                for (var i = 0; i < offsets.length; ++i) {\r\n                    if (needsLongFormat) {\r\n                        out.writeLong(offsets[i]);\r\n                    } else {\r\n                        out.writeShort(offsets[i] / 2);\r\n                    }\r\n                }\r\n                return {\r\n                    format: needsLongFormat ? 1 : 0,\r\n                    table: out.get()\r\n                };\r\n            }\r\n        });\r\n        var HheaTable = deftable({\r\n            parse: function (data) {\r\n                data.offset(this.offset);\r\n                this.version = data.readLong();\r\n                this.ascent = data.readShort_();\r\n                this.descent = data.readShort_();\r\n                this.lineGap = data.readShort_();\r\n                this.advanceWidthMax = data.readShort();\r\n                this.minLeftSideBearing = data.readShort_();\r\n                this.minRightSideBearing = data.readShort_();\r\n                this.xMaxExtent = data.readShort_();\r\n                this.caretSlopeRise = data.readShort_();\r\n                this.caretSlopeRun = data.readShort_();\r\n                this.caretOffset = data.readShort_();\r\n                data.skip(4 * 2);\r\n                this.metricDataFormat = data.readShort_();\r\n                this.numOfLongHorMetrics = data.readShort();\r\n            },\r\n            render: function (ids) {\r\n                var out = BinaryStream();\r\n                out.writeLong(this.version);\r\n                out.writeShort_(this.ascent);\r\n                out.writeShort_(this.descent);\r\n                out.writeShort_(this.lineGap);\r\n                out.writeShort(this.advanceWidthMax);\r\n                out.writeShort_(this.minLeftSideBearing);\r\n                out.writeShort_(this.minRightSideBearing);\r\n                out.writeShort_(this.xMaxExtent);\r\n                out.writeShort_(this.caretSlopeRise);\r\n                out.writeShort_(this.caretSlopeRun);\r\n                out.writeShort_(this.caretOffset);\r\n                out.write([\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0,\r\n                    0\r\n                ]);\r\n                out.writeShort_(this.metricDataFormat);\r\n                out.writeShort(ids.length);\r\n                return out.get();\r\n            }\r\n        });\r\n        var MaxpTable = deftable({\r\n            parse: function (data) {\r\n                data.offset(this.offset);\r\n                this.version = data.readLong();\r\n                this.numGlyphs = data.readShort();\r\n                this.maxPoints = data.readShort();\r\n                this.maxContours = data.readShort();\r\n                this.maxComponentPoints = data.readShort();\r\n                this.maxComponentContours = data.readShort();\r\n                this.maxZones = data.readShort();\r\n                this.maxTwilightPoints = data.readShort();\r\n                this.maxStorage = data.readShort();\r\n                this.maxFunctionDefs = data.readShort();\r\n                this.maxInstructionDefs = data.readShort();\r\n                this.maxStackElements = data.readShort();\r\n                this.maxSizeOfInstructions = data.readShort();\r\n                this.maxComponentElements = data.readShort();\r\n                this.maxComponentDepth = data.readShort();\r\n            },\r\n            render: function (glyphIds) {\r\n                var out = BinaryStream();\r\n                out.writeLong(this.version);\r\n                out.writeShort(glyphIds.length);\r\n                out.writeShort(this.maxPoints);\r\n                out.writeShort(this.maxContours);\r\n                out.writeShort(this.maxComponentPoints);\r\n                out.writeShort(this.maxComponentContours);\r\n                out.writeShort(this.maxZones);\r\n                out.writeShort(this.maxTwilightPoints);\r\n                out.writeShort(this.maxStorage);\r\n                out.writeShort(this.maxFunctionDefs);\r\n                out.writeShort(this.maxInstructionDefs);\r\n                out.writeShort(this.maxStackElements);\r\n                out.writeShort(this.maxSizeOfInstructions);\r\n                out.writeShort(this.maxComponentElements);\r\n                out.writeShort(this.maxComponentDepth);\r\n                return out.get();\r\n            }\r\n        });\r\n        var HmtxTable = deftable({\r\n            parse: function (data) {\r\n                data.offset(this.offset);\r\n                var dir = this.file, hhea = dir.hhea;\r\n                this.metrics = data.times(hhea.numOfLongHorMetrics, function () {\r\n                    return {\r\n                        advance: data.readShort(),\r\n                        lsb: data.readShort_()\r\n                    };\r\n                });\r\n                var lsbCount = dir.maxp.numGlyphs - dir.hhea.numOfLongHorMetrics;\r\n                this.leftSideBearings = data.times(lsbCount, data.readShort_);\r\n            },\r\n            forGlyph: function (id) {\r\n                var metrics = this.metrics;\r\n                var n = metrics.length;\r\n                if (id < n) {\r\n                    return metrics[id];\r\n                }\r\n                return {\r\n                    advance: metrics[n - 1].advance,\r\n                    lsb: this.leftSideBearings[id - n]\r\n                };\r\n            },\r\n            render: function (glyphIds) {\r\n                var out = BinaryStream();\r\n                for (var i = 0; i < glyphIds.length; ++i) {\r\n                    var m = this.forGlyph(glyphIds[i]);\r\n                    out.writeShort(m.advance);\r\n                    out.writeShort_(m.lsb);\r\n                }\r\n                return out.get();\r\n            }\r\n        });\r\n        var GlyfTable = function () {\r\n            function SimpleGlyph(raw) {\r\n                this.raw = raw;\r\n            }\r\n            SimpleGlyph.prototype = {\r\n                compound: false,\r\n                render: function () {\r\n                    return this.raw.get();\r\n                }\r\n            };\r\n            var ARG_1_AND_2_ARE_WORDS = 1;\r\n            var WE_HAVE_A_SCALE = 8;\r\n            var MORE_COMPONENTS = 32;\r\n            var WE_HAVE_AN_X_AND_Y_SCALE = 64;\r\n            var WE_HAVE_A_TWO_BY_TWO = 128;\r\n            function CompoundGlyph(data) {\r\n                this.raw = data;\r\n                var ids = this.glyphIds = [];\r\n                var offsets = this.idOffsets = [];\r\n                while (true) {\r\n                    var flags = data.readShort();\r\n                    offsets.push(data.offset());\r\n                    ids.push(data.readShort());\r\n                    if (!(flags & MORE_COMPONENTS)) {\r\n                        break;\r\n                    }\r\n                    data.skip(flags & ARG_1_AND_2_ARE_WORDS ? 4 : 2);\r\n                    if (flags & WE_HAVE_A_TWO_BY_TWO) {\r\n                        data.skip(8);\r\n                    } else if (flags & WE_HAVE_AN_X_AND_Y_SCALE) {\r\n                        data.skip(4);\r\n                    } else if (flags & WE_HAVE_A_SCALE) {\r\n                        data.skip(2);\r\n                    }\r\n                }\r\n            }\r\n            CompoundGlyph.prototype = {\r\n                compound: true,\r\n                render: function (old2new) {\r\n                    var out = BinaryStream(this.raw.get());\r\n                    for (var i = 0; i < this.glyphIds.length; ++i) {\r\n                        var id = this.glyphIds[i];\r\n                        out.offset(this.idOffsets[i]);\r\n                        out.writeShort(old2new[id]);\r\n                    }\r\n                    return out.get();\r\n                }\r\n            };\r\n            return deftable({\r\n                parse: function () {\r\n                    this.cache = {};\r\n                },\r\n                glyphFor: function (id) {\r\n                    var cache = this.cache;\r\n                    if (hasOwnProperty(cache, id)) {\r\n                        return cache[id];\r\n                    }\r\n                    var loca = this.file.loca;\r\n                    var length = loca.lengthOf(id);\r\n                    if (length === 0) {\r\n                        return cache[id] = null;\r\n                    }\r\n                    var data = this.rawData;\r\n                    var offset = this.offset + loca.offsetOf(id);\r\n                    var raw = BinaryStream(data.slice(offset, length));\r\n                    var numberOfContours = raw.readShort_();\r\n                    var xMin = raw.readShort_();\r\n                    var yMin = raw.readShort_();\r\n                    var xMax = raw.readShort_();\r\n                    var yMax = raw.readShort_();\r\n                    var glyph = cache[id] = numberOfContours == -1 ? new CompoundGlyph(raw) : new SimpleGlyph(raw);\r\n                    glyph.numberOfContours = numberOfContours;\r\n                    glyph.xMin = xMin;\r\n                    glyph.yMin = yMin;\r\n                    glyph.xMax = xMax;\r\n                    glyph.yMax = yMax;\r\n                    return glyph;\r\n                },\r\n                render: function (glyphs, oldIds, old2new) {\r\n                    var out = BinaryStream(), offsets = [];\r\n                    for (var i = 0; i < oldIds.length; ++i) {\r\n                        var id = oldIds[i];\r\n                        var glyph = glyphs[id];\r\n                        offsets.push(out.offset());\r\n                        if (glyph) {\r\n                            out.write(glyph.render(old2new));\r\n                        }\r\n                    }\r\n                    offsets.push(out.offset());\r\n                    return {\r\n                        table: out.get(),\r\n                        offsets: offsets\r\n                    };\r\n                }\r\n            });\r\n        }();\r\n        var NameTable = function () {\r\n            function NameEntry(text, entry) {\r\n                this.text = text;\r\n                this.length = text.length;\r\n                this.platformID = entry.platformID;\r\n                this.platformSpecificID = entry.platformSpecificID;\r\n                this.languageID = entry.languageID;\r\n                this.nameID = entry.nameID;\r\n            }\r\n            return deftable({\r\n                parse: function (data) {\r\n                    data.offset(this.offset);\r\n                    data.readShort();\r\n                    var count = data.readShort();\r\n                    var stringOffset = this.offset + data.readShort();\r\n                    var nameRecords = data.times(count, function () {\r\n                        return {\r\n                            platformID: data.readShort(),\r\n                            platformSpecificID: data.readShort(),\r\n                            languageID: data.readShort(),\r\n                            nameID: data.readShort(),\r\n                            length: data.readShort(),\r\n                            offset: data.readShort() + stringOffset\r\n                        };\r\n                    });\r\n                    var strings = this.strings = {};\r\n                    for (var i = 0; i < nameRecords.length; ++i) {\r\n                        var rec = nameRecords[i];\r\n                        data.offset(rec.offset);\r\n                        var text = data.readString(rec.length);\r\n                        if (!strings[rec.nameID]) {\r\n                            strings[rec.nameID] = [];\r\n                        }\r\n                        strings[rec.nameID].push(new NameEntry(text, rec));\r\n                    }\r\n                    this.postscriptEntry = strings[6][0];\r\n                    this.postscriptName = this.postscriptEntry.text.replace(/[^\\x20-\\x7F]/g, '');\r\n                },\r\n                render: function (psName) {\r\n                    var strings = this.strings;\r\n                    var strCount = 0;\r\n                    for (var i in strings) {\r\n                        if (hasOwnProperty(strings, i)) {\r\n                            strCount += strings[i].length;\r\n                        }\r\n                    }\r\n                    var out = BinaryStream();\r\n                    var strTable = BinaryStream();\r\n                    out.writeShort(0);\r\n                    out.writeShort(strCount);\r\n                    out.writeShort(6 + 12 * strCount);\r\n                    for (i in strings) {\r\n                        if (hasOwnProperty(strings, i)) {\r\n                            var list = i == 6 ? [new NameEntry(psName, this.postscriptEntry)] : strings[i];\r\n                            for (var j = 0; j < list.length; ++j) {\r\n                                var str = list[j];\r\n                                out.writeShort(str.platformID);\r\n                                out.writeShort(str.platformSpecificID);\r\n                                out.writeShort(str.languageID);\r\n                                out.writeShort(str.nameID);\r\n                                out.writeShort(str.length);\r\n                                out.writeShort(strTable.offset());\r\n                                strTable.writeString(str.text);\r\n                            }\r\n                        }\r\n                    }\r\n                    out.write(strTable.get());\r\n                    return out.get();\r\n                }\r\n            });\r\n        }();\r\n        var PostTable = function () {\r\n            var POSTSCRIPT_GLYPHS = '.notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat'.split(/\\s+/g);\r\n            return deftable({\r\n                parse: function (data) {\r\n                    data.offset(this.offset);\r\n                    this.format = data.readLong();\r\n                    this.italicAngle = data.readFixed_();\r\n                    this.underlinePosition = data.readShort_();\r\n                    this.underlineThickness = data.readShort_();\r\n                    this.isFixedPitch = data.readLong();\r\n                    this.minMemType42 = data.readLong();\r\n                    this.maxMemType42 = data.readLong();\r\n                    this.minMemType1 = data.readLong();\r\n                    this.maxMemType1 = data.readLong();\r\n                    var numberOfGlyphs;\r\n                    switch (this.format) {\r\n                    case 65536:\r\n                    case 196608:\r\n                        break;\r\n                    case 131072:\r\n                        numberOfGlyphs = data.readShort();\r\n                        this.glyphNameIndex = data.times(numberOfGlyphs, data.readShort);\r\n                        this.names = [];\r\n                        var limit = this.offset + this.length;\r\n                        while (data.offset() < limit) {\r\n                            this.names.push(data.readString(data.readByte()));\r\n                        }\r\n                        break;\r\n                    case 151552:\r\n                        numberOfGlyphs = data.readShort();\r\n                        this.offsets = data.read(numberOfGlyphs);\r\n                        break;\r\n                    case 262144:\r\n                        this.map = data.times(this.file.maxp.numGlyphs, data.readShort);\r\n                        break;\r\n                    }\r\n                },\r\n                glyphFor: function (code) {\r\n                    switch (this.format) {\r\n                    case 65536:\r\n                        return POSTSCRIPT_GLYPHS[code] || '.notdef';\r\n                    case 131072:\r\n                        var index = this.glyphNameIndex[code];\r\n                        if (index < POSTSCRIPT_GLYPHS.length) {\r\n                            return POSTSCRIPT_GLYPHS[index];\r\n                        }\r\n                        return this.names[index - POSTSCRIPT_GLYPHS.length] || '.notdef';\r\n                    case 151552:\r\n                    case 196608:\r\n                        return '.notdef';\r\n                    case 262144:\r\n                        return this.map[code] || 65535;\r\n                    }\r\n                },\r\n                render: function (mapping) {\r\n                    if (this.format == 196608) {\r\n                        return this.raw();\r\n                    }\r\n                    var out = BinaryStream(this.rawData.slice(this.offset, 32));\r\n                    out.writeLong(131072);\r\n                    out.offset(32);\r\n                    var indexes = [];\r\n                    var strings = [];\r\n                    for (var i = 0; i < mapping.length; ++i) {\r\n                        var id = mapping[i];\r\n                        var post = this.glyphFor(id);\r\n                        var index = POSTSCRIPT_GLYPHS.indexOf(post);\r\n                        if (index >= 0) {\r\n                            indexes.push(index);\r\n                        } else {\r\n                            indexes.push(POSTSCRIPT_GLYPHS.length + strings.length);\r\n                            strings.push(post);\r\n                        }\r\n                    }\r\n                    out.writeShort(mapping.length);\r\n                    for (i = 0; i < indexes.length; ++i) {\r\n                        out.writeShort(indexes[i]);\r\n                    }\r\n                    for (i = 0; i < strings.length; ++i) {\r\n                        out.writeByte(strings[i].length);\r\n                        out.writeString(strings[i]);\r\n                    }\r\n                    return out.get();\r\n                }\r\n            });\r\n        }();\r\n        var CmapTable = function () {\r\n            function CmapEntry(data, offset, codeMap) {\r\n                var self = this;\r\n                self.platformID = data.readShort();\r\n                self.platformSpecificID = data.readShort();\r\n                self.offset = offset + data.readLong();\r\n                data.saveExcursion(function () {\r\n                    var code;\r\n                    data.offset(self.offset);\r\n                    self.format = data.readShort();\r\n                    switch (self.format) {\r\n                    case 0:\r\n                        self.length = data.readShort();\r\n                        self.language = data.readShort();\r\n                        for (var i = 0; i < 256; ++i) {\r\n                            codeMap[i] = data.readByte();\r\n                        }\r\n                        break;\r\n                    case 4:\r\n                        self.length = data.readShort();\r\n                        self.language = data.readShort();\r\n                        var segCount = data.readShort() / 2;\r\n                        data.skip(6);\r\n                        var endCode = data.times(segCount, data.readShort);\r\n                        data.skip(2);\r\n                        var startCode = data.times(segCount, data.readShort);\r\n                        var idDelta = data.times(segCount, data.readShort_);\r\n                        var idRangeOffset = data.times(segCount, data.readShort);\r\n                        var count = (self.length + self.offset - data.offset()) / 2;\r\n                        var glyphIds = data.times(count, data.readShort);\r\n                        for (i = 0; i < segCount; ++i) {\r\n                            var start = startCode[i], end = endCode[i];\r\n                            for (code = start; code <= end; ++code) {\r\n                                var glyphId;\r\n                                if (idRangeOffset[i] === 0) {\r\n                                    glyphId = code + idDelta[i];\r\n                                } else {\r\n                                    var index = idRangeOffset[i] / 2 - (segCount - i) + (code - start);\r\n                                    glyphId = glyphIds[index] || 0;\r\n                                    if (glyphId !== 0) {\r\n                                        glyphId += idDelta[i];\r\n                                    }\r\n                                }\r\n                                codeMap[code] = glyphId & 65535;\r\n                            }\r\n                        }\r\n                        break;\r\n                    case 6:\r\n                        self.length = data.readShort();\r\n                        self.language = data.readShort();\r\n                        code = data.readShort();\r\n                        var length = data.readShort();\r\n                        while (length-- > 0) {\r\n                            codeMap[code++] = data.readShort();\r\n                        }\r\n                        break;\r\n                    case 12:\r\n                        data.readShort();\r\n                        self.length = data.readLong();\r\n                        self.language = data.readLong();\r\n                        var ngroups = data.readLong();\r\n                        while (ngroups-- > 0) {\r\n                            code = data.readLong();\r\n                            var endCharCode = data.readLong();\r\n                            var glyphCode = data.readLong();\r\n                            while (code <= endCharCode) {\r\n                                codeMap[code++] = glyphCode++;\r\n                            }\r\n                        }\r\n                        break;\r\n                    default:\r\n                        if (window.console) {\r\n                            window.console.error('Unhandled CMAP format: ' + self.format);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            function renderCharmap(ncid2ogid, ogid2ngid) {\r\n                var codes = sortedKeys(ncid2ogid);\r\n                var startCodes = [];\r\n                var endCodes = [];\r\n                var last = null;\r\n                var diff = null;\r\n                function new_gid(charcode) {\r\n                    return ogid2ngid[ncid2ogid[charcode]];\r\n                }\r\n                for (var i = 0; i < codes.length; ++i) {\r\n                    var code = codes[i];\r\n                    var gid = new_gid(code);\r\n                    var delta = gid - code;\r\n                    if (last == null || delta !== diff) {\r\n                        if (last) {\r\n                            endCodes.push(last);\r\n                        }\r\n                        startCodes.push(code);\r\n                        diff = delta;\r\n                    }\r\n                    last = code;\r\n                }\r\n                if (last) {\r\n                    endCodes.push(last);\r\n                }\r\n                endCodes.push(65535);\r\n                startCodes.push(65535);\r\n                var segCount = startCodes.length;\r\n                var segCountX2 = segCount * 2;\r\n                var searchRange = 2 * Math.pow(2, Math.floor(Math.log(segCount) / Math.LN2));\r\n                var entrySelector = Math.log(searchRange / 2) / Math.LN2;\r\n                var rangeShift = segCountX2 - searchRange;\r\n                var deltas = [];\r\n                var rangeOffsets = [];\r\n                var glyphIds = [];\r\n                for (i = 0; i < segCount; ++i) {\r\n                    var startCode = startCodes[i];\r\n                    var endCode = endCodes[i];\r\n                    if (startCode == 65535) {\r\n                        deltas.push(0);\r\n                        rangeOffsets.push(0);\r\n                        break;\r\n                    }\r\n                    var startGlyph = new_gid(startCode);\r\n                    if (startCode - startGlyph >= 32768) {\r\n                        deltas.push(0);\r\n                        rangeOffsets.push(2 * (glyphIds.length + segCount - i));\r\n                        for (var j = startCode; j <= endCode; ++j) {\r\n                            glyphIds.push(new_gid(j));\r\n                        }\r\n                    } else {\r\n                        deltas.push(startGlyph - startCode);\r\n                        rangeOffsets.push(0);\r\n                    }\r\n                }\r\n                var out = BinaryStream();\r\n                out.writeShort(3);\r\n                out.writeShort(1);\r\n                out.writeLong(12);\r\n                out.writeShort(4);\r\n                out.writeShort(16 + segCount * 8 + glyphIds.length * 2);\r\n                out.writeShort(0);\r\n                out.writeShort(segCountX2);\r\n                out.writeShort(searchRange);\r\n                out.writeShort(entrySelector);\r\n                out.writeShort(rangeShift);\r\n                endCodes.forEach(out.writeShort);\r\n                out.writeShort(0);\r\n                startCodes.forEach(out.writeShort);\r\n                deltas.forEach(out.writeShort_);\r\n                rangeOffsets.forEach(out.writeShort);\r\n                glyphIds.forEach(out.writeShort);\r\n                return out.get();\r\n            }\r\n            return deftable({\r\n                parse: function (data) {\r\n                    var self = this;\r\n                    var offset = self.offset;\r\n                    data.offset(offset);\r\n                    self.codeMap = {};\r\n                    self.version = data.readShort();\r\n                    var tableCount = data.readShort();\r\n                    self.tables = data.times(tableCount, function () {\r\n                        return new CmapEntry(data, offset, self.codeMap);\r\n                    });\r\n                },\r\n                render: function (ncid2ogid, ogid2ngid) {\r\n                    var out = BinaryStream();\r\n                    out.writeShort(0);\r\n                    out.writeShort(1);\r\n                    out.write(renderCharmap(ncid2ogid, ogid2ngid));\r\n                    return out.get();\r\n                }\r\n            });\r\n        }();\r\n        var OS2Table = deftable({\r\n            parse: function (data) {\r\n                data.offset(this.offset);\r\n                this.version = data.readShort();\r\n                this.averageCharWidth = data.readShort_();\r\n                this.weightClass = data.readShort();\r\n                this.widthClass = data.readShort();\r\n                this.type = data.readShort();\r\n                this.ySubscriptXSize = data.readShort_();\r\n                this.ySubscriptYSize = data.readShort_();\r\n                this.ySubscriptXOffset = data.readShort_();\r\n                this.ySubscriptYOffset = data.readShort_();\r\n                this.ySuperscriptXSize = data.readShort_();\r\n                this.ySuperscriptYSize = data.readShort_();\r\n                this.ySuperscriptXOffset = data.readShort_();\r\n                this.ySuperscriptYOffset = data.readShort_();\r\n                this.yStrikeoutSize = data.readShort_();\r\n                this.yStrikeoutPosition = data.readShort_();\r\n                this.familyClass = data.readShort_();\r\n                this.panose = data.times(10, data.readByte);\r\n                this.charRange = data.times(4, data.readLong);\r\n                this.vendorID = data.readString(4);\r\n                this.selection = data.readShort();\r\n                this.firstCharIndex = data.readShort();\r\n                this.lastCharIndex = data.readShort();\r\n                if (this.version > 0) {\r\n                    this.ascent = data.readShort_();\r\n                    this.descent = data.readShort_();\r\n                    this.lineGap = data.readShort_();\r\n                    this.winAscent = data.readShort();\r\n                    this.winDescent = data.readShort();\r\n                    this.codePageRange = data.times(2, data.readLong);\r\n                    if (this.version > 1) {\r\n                        this.xHeight = data.readShort();\r\n                        this.capHeight = data.readShort();\r\n                        this.defaultChar = data.readShort();\r\n                        this.breakChar = data.readShort();\r\n                        this.maxContext = data.readShort();\r\n                    }\r\n                }\r\n            },\r\n            render: function () {\r\n                return this.raw();\r\n            }\r\n        });\r\n        var subsetTag = 100000;\r\n        function nextSubsetTag() {\r\n            var ret = '', n = subsetTag + '';\r\n            for (var i = 0; i < n.length; ++i) {\r\n                ret += String.fromCharCode(n.charCodeAt(i) - 48 + 65);\r\n            }\r\n            ++subsetTag;\r\n            return ret;\r\n        }\r\n        function Subfont(font) {\r\n            this.font = font;\r\n            this.subset = {};\r\n            this.unicodes = {};\r\n            this.ogid2ngid = { 0: 0 };\r\n            this.ngid2ogid = { 0: 0 };\r\n            this.ncid2ogid = {};\r\n            this.next = this.firstChar = 1;\r\n            this.nextGid = 1;\r\n            this.psName = nextSubsetTag() + '+' + this.font.psName;\r\n        }\r\n        Subfont.prototype = {\r\n            use: function (ch) {\r\n                var self = this;\r\n                if (typeof ch == 'string') {\r\n                    return kendo.util.ucs2decode(ch).reduce(function (ret, code) {\r\n                        return ret + String.fromCharCode(self.use(code));\r\n                    }, '');\r\n                }\r\n                var code = self.unicodes[ch];\r\n                if (!code) {\r\n                    code = self.next++;\r\n                    self.subset[code] = ch;\r\n                    self.unicodes[ch] = code;\r\n                    var old_gid = self.font.cmap.codeMap[ch];\r\n                    if (old_gid) {\r\n                        self.ncid2ogid[code] = old_gid;\r\n                        if (self.ogid2ngid[old_gid] == null) {\r\n                            var new_gid = self.nextGid++;\r\n                            self.ogid2ngid[old_gid] = new_gid;\r\n                            self.ngid2ogid[new_gid] = old_gid;\r\n                        }\r\n                    }\r\n                }\r\n                return code;\r\n            },\r\n            encodeText: function (text) {\r\n                return this.use(text);\r\n            },\r\n            glyphIds: function () {\r\n                return sortedKeys(this.ogid2ngid);\r\n            },\r\n            glyphsFor: function (glyphIds, result) {\r\n                if (!result) {\r\n                    result = {};\r\n                }\r\n                for (var i = 0; i < glyphIds.length; ++i) {\r\n                    var id = glyphIds[i];\r\n                    if (!result[id]) {\r\n                        var glyph = result[id] = this.font.glyf.glyphFor(id);\r\n                        if (glyph && glyph.compound) {\r\n                            this.glyphsFor(glyph.glyphIds, result);\r\n                        }\r\n                    }\r\n                }\r\n                return result;\r\n            },\r\n            render: function () {\r\n                var glyphs = this.glyphsFor(this.glyphIds());\r\n                for (var old_gid in glyphs) {\r\n                    if (hasOwnProperty(glyphs, old_gid)) {\r\n                        old_gid = parseInt(old_gid, 10);\r\n                        if (this.ogid2ngid[old_gid] == null) {\r\n                            var new_gid = this.nextGid++;\r\n                            this.ogid2ngid[old_gid] = new_gid;\r\n                            this.ngid2ogid[new_gid] = old_gid;\r\n                        }\r\n                    }\r\n                }\r\n                var new_gid_ids = sortedKeys(this.ngid2ogid);\r\n                var old_gid_ids = new_gid_ids.map(function (id) {\r\n                    return this.ngid2ogid[id];\r\n                }, this);\r\n                var font = this.font;\r\n                var glyf = font.glyf.render(glyphs, old_gid_ids, this.ogid2ngid);\r\n                var loca = font.loca.render(glyf.offsets);\r\n                this.lastChar = this.next - 1;\r\n                var tables = {\r\n                    'cmap': CmapTable.render(this.ncid2ogid, this.ogid2ngid),\r\n                    'glyf': glyf.table,\r\n                    'loca': loca.table,\r\n                    'hmtx': font.hmtx.render(old_gid_ids),\r\n                    'hhea': font.hhea.render(old_gid_ids),\r\n                    'maxp': font.maxp.render(old_gid_ids),\r\n                    'post': font.post.render(old_gid_ids),\r\n                    'name': font.name.render(this.psName),\r\n                    'head': font.head.render(loca.format),\r\n                    'OS/2': font.os2.render()\r\n                };\r\n                return this.font.directory.render(tables);\r\n            },\r\n            cidToGidMap: function () {\r\n                var out = BinaryStream(), len = 0;\r\n                for (var cid = this.firstChar; cid < this.next; ++cid) {\r\n                    while (len < cid) {\r\n                        out.writeShort(0);\r\n                        len++;\r\n                    }\r\n                    var old_gid = this.ncid2ogid[cid];\r\n                    if (old_gid) {\r\n                        var new_gid = this.ogid2ngid[old_gid];\r\n                        out.writeShort(new_gid);\r\n                    } else {\r\n                        out.writeShort(0);\r\n                    }\r\n                    len++;\r\n                }\r\n                return out.get();\r\n            }\r\n        };\r\n        function TTFFont(rawData, name) {\r\n            var self = this;\r\n            var data = self.contents = BinaryStream(rawData);\r\n            if (data.readString(4) == 'ttcf') {\r\n                if (!name) {\r\n                    throw new Error('Must specify a name for TTC files');\r\n                }\r\n                data.readLong();\r\n                var numFonts = data.readLong();\r\n                for (var i = 0; i < numFonts; ++i) {\r\n                    var offset = data.readLong();\r\n                    data.saveExcursion(function () {\r\n                        data.offset(offset);\r\n                        self.parse();\r\n                    });\r\n                    if (self.psName == name) {\r\n                        return;\r\n                    }\r\n                }\r\n                throw new Error('Font ' + name + ' not found in collection');\r\n            } else {\r\n                data.offset(0);\r\n                self.parse();\r\n            }\r\n        }\r\n        TTFFont.prototype = {\r\n            parse: function () {\r\n                var dir = this.directory = new Directory(this.contents);\r\n                this.head = dir.readTable('head', HeadTable);\r\n                this.loca = dir.readTable('loca', LocaTable);\r\n                this.hhea = dir.readTable('hhea', HheaTable);\r\n                this.maxp = dir.readTable('maxp', MaxpTable);\r\n                this.hmtx = dir.readTable('hmtx', HmtxTable);\r\n                this.glyf = dir.readTable('glyf', GlyfTable);\r\n                this.name = dir.readTable('name', NameTable);\r\n                this.post = dir.readTable('post', PostTable);\r\n                this.cmap = dir.readTable('cmap', CmapTable);\r\n                this.os2 = dir.readTable('OS/2', OS2Table);\r\n                this.psName = this.name.postscriptName;\r\n                this.ascent = this.os2.ascent || this.hhea.ascent;\r\n                this.descent = this.os2.descent || this.hhea.descent;\r\n                this.lineGap = this.os2.lineGap || this.hhea.lineGap;\r\n                this.scale = 1000 / this.head.unitsPerEm;\r\n            },\r\n            widthOfGlyph: function (glyph) {\r\n                return this.hmtx.forGlyph(glyph).advance * this.scale;\r\n            },\r\n            makeSubset: function () {\r\n                return new Subfont(this);\r\n            }\r\n        };\r\n        PDF.TTFFont = TTFFont;\r\n    }(window));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('util/text-metrics', [\r\n        'kendo.core',\r\n        'util/main'\r\n    ], f);\r\n}(function () {\r\n    (function ($) {\r\n        var doc = document, kendo = window.kendo, Class = kendo.Class, util = kendo.util, defined = util.defined;\r\n        var LRUCache = Class.extend({\r\n            init: function (size) {\r\n                this._size = size;\r\n                this._length = 0;\r\n                this._map = {};\r\n            },\r\n            put: function (key, value) {\r\n                var lru = this, map = lru._map, entry = {\r\n                        key: key,\r\n                        value: value\r\n                    };\r\n                map[key] = entry;\r\n                if (!lru._head) {\r\n                    lru._head = lru._tail = entry;\r\n                } else {\r\n                    lru._tail.newer = entry;\r\n                    entry.older = lru._tail;\r\n                    lru._tail = entry;\r\n                }\r\n                if (lru._length >= lru._size) {\r\n                    map[lru._head.key] = null;\r\n                    lru._head = lru._head.newer;\r\n                    lru._head.older = null;\r\n                } else {\r\n                    lru._length++;\r\n                }\r\n            },\r\n            get: function (key) {\r\n                var lru = this, entry = lru._map[key];\r\n                if (entry) {\r\n                    if (entry === lru._head && entry !== lru._tail) {\r\n                        lru._head = entry.newer;\r\n                        lru._head.older = null;\r\n                    }\r\n                    if (entry !== lru._tail) {\r\n                        if (entry.older) {\r\n                            entry.older.newer = entry.newer;\r\n                            entry.newer.older = entry.older;\r\n                        }\r\n                        entry.older = lru._tail;\r\n                        entry.newer = null;\r\n                        lru._tail.newer = entry;\r\n                        lru._tail = entry;\r\n                    }\r\n                    return entry.value;\r\n                }\r\n            }\r\n        });\r\n        var defaultMeasureBox = $('<div style=\\'position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;' + 'padding: 0 !important; margin: 0 !important; border: 0 !important;' + 'line-height: normal !important; visibility: hidden !important; white-space: nowrap!important;\\' />')[0];\r\n        function zeroSize() {\r\n            return {\r\n                width: 0,\r\n                height: 0,\r\n                baseline: 0\r\n            };\r\n        }\r\n        var TextMetrics = Class.extend({\r\n            init: function (options) {\r\n                this._cache = new LRUCache(1000);\r\n                this._initOptions(options);\r\n            },\r\n            options: { baselineMarkerSize: 1 },\r\n            measure: function (text, style, box) {\r\n                if (!text) {\r\n                    return zeroSize();\r\n                }\r\n                var styleKey = util.objectKey(style), cacheKey = util.hashKey(text + styleKey), cachedResult = this._cache.get(cacheKey);\r\n                if (cachedResult) {\r\n                    return cachedResult;\r\n                }\r\n                var size = zeroSize();\r\n                var measureBox = box ? box : defaultMeasureBox;\r\n                var baselineMarker = this._baselineMarker().cloneNode(false);\r\n                for (var key in style) {\r\n                    var value = style[key];\r\n                    if (defined(value)) {\r\n                        measureBox.style[key] = value;\r\n                    }\r\n                }\r\n                $(measureBox).text(text);\r\n                measureBox.appendChild(baselineMarker);\r\n                doc.body.appendChild(measureBox);\r\n                if ((text + '').length) {\r\n                    size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\r\n                    size.height = measureBox.offsetHeight;\r\n                    size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\r\n                }\r\n                if (size.width > 0 && size.height > 0) {\r\n                    this._cache.put(cacheKey, size);\r\n                }\r\n                measureBox.parentNode.removeChild(measureBox);\r\n                return size;\r\n            },\r\n            _baselineMarker: function () {\r\n                return $('<div class=\\'k-baseline-marker\\' ' + 'style=\\'display: inline-block; vertical-align: baseline;' + 'width: ' + this.options.baselineMarkerSize + 'px; height: ' + this.options.baselineMarkerSize + 'px;' + 'overflow: hidden;\\' />')[0];\r\n            }\r\n        });\r\n        TextMetrics.current = new TextMetrics();\r\n        function measureText(text, style, measureBox) {\r\n            return TextMetrics.current.measure(text, style, measureBox);\r\n        }\r\n        function loadFonts(fonts, callback) {\r\n            var promises = [];\r\n            if (fonts.length > 0 && document.fonts) {\r\n                try {\r\n                    promises = fonts.map(function (font) {\r\n                        return document.fonts.load(font);\r\n                    });\r\n                } catch (e) {\r\n                    kendo.logToConsole(e);\r\n                }\r\n                Promise.all(promises).then(callback, callback);\r\n            } else {\r\n                callback();\r\n            }\r\n        }\r\n        kendo.util.TextMetrics = TextMetrics;\r\n        kendo.util.LRUCache = LRUCache;\r\n        kendo.util.loadFonts = loadFonts;\r\n        kendo.util.measureText = measureText;\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('util/base64', ['util/main'], f);\r\n}(function () {\r\n    (function () {\r\n        var kendo = window.kendo, deepExtend = kendo.deepExtend, fromCharCode = String.fromCharCode;\r\n        var KEY_STR = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\r\n        function encodeBase64(input) {\r\n            var output = '';\r\n            var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n            var i = 0;\r\n            input = encodeUTF8(input);\r\n            while (i < input.length) {\r\n                chr1 = input.charCodeAt(i++);\r\n                chr2 = input.charCodeAt(i++);\r\n                chr3 = input.charCodeAt(i++);\r\n                enc1 = chr1 >> 2;\r\n                enc2 = (chr1 & 3) << 4 | chr2 >> 4;\r\n                enc3 = (chr2 & 15) << 2 | chr3 >> 6;\r\n                enc4 = chr3 & 63;\r\n                if (isNaN(chr2)) {\r\n                    enc3 = enc4 = 64;\r\n                } else if (isNaN(chr3)) {\r\n                    enc4 = 64;\r\n                }\r\n                output = output + KEY_STR.charAt(enc1) + KEY_STR.charAt(enc2) + KEY_STR.charAt(enc3) + KEY_STR.charAt(enc4);\r\n            }\r\n            return output;\r\n        }\r\n        function encodeUTF8(input) {\r\n            var output = '';\r\n            for (var i = 0; i < input.length; i++) {\r\n                var c = input.charCodeAt(i);\r\n                if (c < 128) {\r\n                    output += fromCharCode(c);\r\n                } else if (c < 2048) {\r\n                    output += fromCharCode(192 | c >>> 6);\r\n                    output += fromCharCode(128 | c & 63);\r\n                } else if (c < 65536) {\r\n                    output += fromCharCode(224 | c >>> 12);\r\n                    output += fromCharCode(128 | c >>> 6 & 63);\r\n                    output += fromCharCode(128 | c & 63);\r\n                }\r\n            }\r\n            return output;\r\n        }\r\n        deepExtend(kendo.util, {\r\n            encodeBase64: encodeBase64,\r\n            encodeUTF8: encodeUTF8\r\n        });\r\n    }());\r\n    return window.kendo;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('mixins/observers', ['kendo.core'], f);\r\n}(function () {\r\n    (function ($) {\r\n        var math = Math, kendo = window.kendo, deepExtend = kendo.deepExtend, inArray = $.inArray;\r\n        var ObserversMixin = {\r\n            observers: function () {\r\n                this._observers = this._observers || [];\r\n                return this._observers;\r\n            },\r\n            addObserver: function (element) {\r\n                if (!this._observers) {\r\n                    this._observers = [element];\r\n                } else {\r\n                    this._observers.push(element);\r\n                }\r\n                return this;\r\n            },\r\n            removeObserver: function (element) {\r\n                var observers = this.observers();\r\n                var index = inArray(element, observers);\r\n                if (index != -1) {\r\n                    observers.splice(index, 1);\r\n                }\r\n                return this;\r\n            },\r\n            trigger: function (methodName, event) {\r\n                var observers = this._observers;\r\n                var observer;\r\n                var idx;\r\n                if (observers && !this._suspended) {\r\n                    for (idx = 0; idx < observers.length; idx++) {\r\n                        observer = observers[idx];\r\n                        if (observer[methodName]) {\r\n                            observer[methodName](event);\r\n                        }\r\n                    }\r\n                }\r\n                return this;\r\n            },\r\n            optionsChange: function (e) {\r\n                e = e || {};\r\n                e.element = this;\r\n                this.trigger('optionsChange', e);\r\n            },\r\n            geometryChange: function () {\r\n                this.trigger('geometryChange', { element: this });\r\n            },\r\n            suspend: function () {\r\n                this._suspended = (this._suspended || 0) + 1;\r\n                return this;\r\n            },\r\n            resume: function () {\r\n                this._suspended = math.max((this._suspended || 0) - 1, 0);\r\n                return this;\r\n            },\r\n            _observerField: function (field, value) {\r\n                if (this[field]) {\r\n                    this[field].removeObserver(this);\r\n                }\r\n                this[field] = value;\r\n                value.addObserver(this);\r\n            }\r\n        };\r\n        deepExtend(kendo, { mixins: { ObserversMixin: ObserversMixin } });\r\n    }(window.kendo.jQuery));\r\n    return window.kendo;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('pdf/drawing', [\r\n        'kendo.core',\r\n        'kendo.color',\r\n        'kendo.drawing',\r\n        'pdf/core'\r\n    ], f);\r\n}(function () {\r\n    (function (kendo, $) {\r\n        'use strict';\r\n        var drawing = kendo.drawing;\r\n        var geo = kendo.geometry;\r\n        var TEXT_RENDERING_MODE = kendo.pdf.TEXT_RENDERING_MODE;\r\n        var DASH_PATTERNS = {\r\n            dash: [4],\r\n            dashDot: [\r\n                4,\r\n                2,\r\n                1,\r\n                2\r\n            ],\r\n            dot: [\r\n                1,\r\n                2\r\n            ],\r\n            longDash: [\r\n                8,\r\n                2\r\n            ],\r\n            longDashDot: [\r\n                8,\r\n                2,\r\n                1,\r\n                2\r\n            ],\r\n            longDashDotDot: [\r\n                8,\r\n                2,\r\n                1,\r\n                2,\r\n                1,\r\n                2\r\n            ],\r\n            solid: []\r\n        };\r\n        var LINE_CAP = {\r\n            butt: 0,\r\n            round: 1,\r\n            square: 2\r\n        };\r\n        var LINE_JOIN = {\r\n            miter: 0,\r\n            round: 1,\r\n            bevel: 2\r\n        };\r\n        function render(group, callback) {\r\n            var fonts = [], images = [], options = group.options;\r\n            function getOption(name, defval, hash) {\r\n                if (!hash) {\r\n                    hash = options;\r\n                }\r\n                if (hash.pdf && hash.pdf[name] != null) {\r\n                    return hash.pdf[name];\r\n                }\r\n                return defval;\r\n            }\r\n            var multiPage = getOption('multiPage');\r\n            group.traverse(function (element) {\r\n                dispatch({\r\n                    Image: function (element) {\r\n                        if (images.indexOf(element.src()) < 0) {\r\n                            images.push(element.src());\r\n                        }\r\n                    },\r\n                    Text: function (element) {\r\n                        var style = kendo.pdf.parseFontDef(element.options.font);\r\n                        var url = kendo.pdf.getFontURL(style);\r\n                        if (fonts.indexOf(url) < 0) {\r\n                            fonts.push(url);\r\n                        }\r\n                    }\r\n                }, element);\r\n            });\r\n            function doIt() {\r\n                if (--count > 0) {\r\n                    return;\r\n                }\r\n                var pdf = new kendo.pdf.Document({\r\n                    producer: getOption('producer'),\r\n                    title: getOption('title'),\r\n                    author: getOption('author'),\r\n                    subject: getOption('subject'),\r\n                    keywords: getOption('keywords'),\r\n                    creator: getOption('creator'),\r\n                    date: getOption('date')\r\n                });\r\n                function drawPage(group) {\r\n                    var options = group.options;\r\n                    var tmp = optimize(group);\r\n                    var bbox = tmp.bbox;\r\n                    group = tmp.root;\r\n                    var paperSize = getOption('paperSize', getOption('paperSize', 'auto'), options), addMargin = false;\r\n                    if (paperSize == 'auto') {\r\n                        if (bbox) {\r\n                            var size = bbox.getSize();\r\n                            paperSize = [\r\n                                size.width,\r\n                                size.height\r\n                            ];\r\n                            addMargin = true;\r\n                            var origin = bbox.getOrigin();\r\n                            tmp = new drawing.Group();\r\n                            tmp.transform(new geo.Matrix(1, 0, 0, 1, -origin.x, -origin.y));\r\n                            tmp.append(group);\r\n                            group = tmp;\r\n                        } else {\r\n                            paperSize = 'A4';\r\n                        }\r\n                    }\r\n                    var page;\r\n                    page = pdf.addPage({\r\n                        paperSize: paperSize,\r\n                        margin: getOption('margin', getOption('margin'), options),\r\n                        addMargin: addMargin,\r\n                        landscape: getOption('landscape', getOption('landscape', false), options)\r\n                    });\r\n                    drawElement(group, page, pdf);\r\n                }\r\n                if (multiPage) {\r\n                    group.children.forEach(drawPage);\r\n                } else {\r\n                    drawPage(group);\r\n                }\r\n                callback(pdf.render(), pdf);\r\n            }\r\n            var count = 2;\r\n            kendo.pdf.loadFonts(fonts, doIt);\r\n            kendo.pdf.loadImages(images, doIt);\r\n        }\r\n        function toDataURL(group, callback) {\r\n            render(group, function (data) {\r\n                callback('data:application/pdf;base64,' + data.base64());\r\n            });\r\n        }\r\n        function toBlob(group, callback) {\r\n            render(group, function (data) {\r\n                callback(new Blob([data.get()], { type: 'application/pdf' }));\r\n            });\r\n        }\r\n        function saveAs(group, filename, proxy, callback) {\r\n            if (window.Blob && !kendo.support.browser.safari) {\r\n                toBlob(group, function (blob) {\r\n                    kendo.saveAs({\r\n                        dataURI: blob,\r\n                        fileName: filename\r\n                    });\r\n                    if (callback) {\r\n                        callback(blob);\r\n                    }\r\n                });\r\n            } else {\r\n                toDataURL(group, function (dataURL) {\r\n                    kendo.saveAs({\r\n                        dataURI: dataURL,\r\n                        fileName: filename,\r\n                        proxyURL: proxy\r\n                    });\r\n                    if (callback) {\r\n                        callback(dataURL);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        function dispatch(handlers, element) {\r\n            var handler = handlers[element.nodeType];\r\n            if (handler) {\r\n                return handler.call.apply(handler, arguments);\r\n            }\r\n            return element;\r\n        }\r\n        function drawElement(element, page, pdf) {\r\n            if (element.options._pdfDebug) {\r\n                page.comment('BEGIN: ' + element.options._pdfDebug);\r\n            }\r\n            var transform = element.transform();\r\n            var opacity = element.opacity();\r\n            page.save();\r\n            if (opacity != null && opacity < 1) {\r\n                page.setOpacity(opacity);\r\n            }\r\n            setStrokeOptions(element, page, pdf);\r\n            setFillOptions(element, page, pdf);\r\n            if (transform) {\r\n                var m = transform.matrix();\r\n                page.transform(m.a, m.b, m.c, m.d, m.e, m.f);\r\n            }\r\n            setClipping(element, page, pdf);\r\n            dispatch({\r\n                Path: drawPath,\r\n                MultiPath: drawMultiPath,\r\n                Circle: drawCircle,\r\n                Arc: drawArc,\r\n                Text: drawText,\r\n                Image: drawImage,\r\n                Group: drawGroup,\r\n                Rect: drawRect\r\n            }, element, page, pdf);\r\n            page.restore();\r\n            if (element.options._pdfDebug) {\r\n                page.comment('END: ' + element.options._pdfDebug);\r\n            }\r\n        }\r\n        function setStrokeOptions(element, page) {\r\n            var stroke = element.stroke && element.stroke();\r\n            if (!stroke) {\r\n                return;\r\n            }\r\n            var color = stroke.color;\r\n            if (color) {\r\n                color = parseColor(color);\r\n                if (color == null) {\r\n                    return;\r\n                }\r\n                page.setStrokeColor(color.r, color.g, color.b);\r\n                if (color.a != 1) {\r\n                    page.setStrokeOpacity(color.a);\r\n                }\r\n            }\r\n            var width = stroke.width;\r\n            if (width != null) {\r\n                if (width === 0) {\r\n                    return;\r\n                }\r\n                page.setLineWidth(width);\r\n            }\r\n            var dashType = stroke.dashType;\r\n            if (dashType) {\r\n                page.setDashPattern(DASH_PATTERNS[dashType], 0);\r\n            }\r\n            var lineCap = stroke.lineCap;\r\n            if (lineCap) {\r\n                page.setLineCap(LINE_CAP[lineCap]);\r\n            }\r\n            var lineJoin = stroke.lineJoin;\r\n            if (lineJoin) {\r\n                page.setLineJoin(LINE_JOIN[lineJoin]);\r\n            }\r\n            var opacity = stroke.opacity;\r\n            if (opacity != null) {\r\n                page.setStrokeOpacity(opacity);\r\n            }\r\n        }\r\n        function setFillOptions(element, page) {\r\n            var fill = element.fill && element.fill();\r\n            if (!fill) {\r\n                return;\r\n            }\r\n            if (fill instanceof drawing.Gradient) {\r\n                return;\r\n            }\r\n            var color = fill.color;\r\n            if (color) {\r\n                color = parseColor(color);\r\n                if (color == null) {\r\n                    return;\r\n                }\r\n                page.setFillColor(color.r, color.g, color.b);\r\n                if (color.a != 1) {\r\n                    page.setFillOpacity(color.a);\r\n                }\r\n            }\r\n            var opacity = fill.opacity;\r\n            if (opacity != null) {\r\n                page.setFillOpacity(opacity);\r\n            }\r\n        }\r\n        function setClipping(element, page, pdf) {\r\n            var clip = element.clip();\r\n            if (clip) {\r\n                _drawPath(clip, page, pdf);\r\n                page.clip();\r\n            }\r\n        }\r\n        function shouldDraw(thing) {\r\n            return thing && (thing instanceof drawing.Gradient || thing.color && !/^(none|transparent)$/i.test(thing.color) && (thing.width == null || thing.width > 0) && (thing.opacity == null || thing.opacity > 0));\r\n        }\r\n        function maybeGradient(element, page, pdf, stroke) {\r\n            var fill = element.fill();\r\n            if (fill instanceof drawing.Gradient) {\r\n                if (stroke) {\r\n                    page.clipStroke();\r\n                } else {\r\n                    page.clip();\r\n                }\r\n                var isRadial = fill instanceof drawing.RadialGradient;\r\n                var start, end;\r\n                if (isRadial) {\r\n                    start = {\r\n                        x: fill.center().x,\r\n                        y: fill.center().y,\r\n                        r: 0\r\n                    };\r\n                    end = {\r\n                        x: fill.center().x,\r\n                        y: fill.center().y,\r\n                        r: fill.radius()\r\n                    };\r\n                } else {\r\n                    start = {\r\n                        x: fill.start().x,\r\n                        y: fill.start().y\r\n                    };\r\n                    end = {\r\n                        x: fill.end().x,\r\n                        y: fill.end().y\r\n                    };\r\n                }\r\n                var stops = fill.stops.elements().map(function (stop) {\r\n                    var offset = stop.offset();\r\n                    if (/%$/.test(offset)) {\r\n                        offset = parseFloat(offset) / 100;\r\n                    } else {\r\n                        offset = parseFloat(offset);\r\n                    }\r\n                    var color = parseColor(stop.color());\r\n                    color.a *= stop.opacity();\r\n                    return {\r\n                        offset: offset,\r\n                        color: color\r\n                    };\r\n                });\r\n                stops.unshift(stops[0]);\r\n                stops.push(stops[stops.length - 1]);\r\n                var gradient = {\r\n                    userSpace: fill.userSpace(),\r\n                    type: isRadial ? 'radial' : 'linear',\r\n                    start: start,\r\n                    end: end,\r\n                    stops: stops\r\n                };\r\n                var box = element.rawBBox();\r\n                var tl = box.topLeft(), size = box.getSize();\r\n                box = {\r\n                    left: tl.x,\r\n                    top: tl.y,\r\n                    width: size.width,\r\n                    height: size.height\r\n                };\r\n                page.gradient(gradient, box);\r\n                return true;\r\n            }\r\n        }\r\n        function maybeFillStroke(element, page, pdf) {\r\n            if (shouldDraw(element.fill()) && shouldDraw(element.stroke())) {\r\n                if (!maybeGradient(element, page, pdf, true)) {\r\n                    page.fillStroke();\r\n                }\r\n            } else if (shouldDraw(element.fill())) {\r\n                if (!maybeGradient(element, page, pdf, false)) {\r\n                    page.fill();\r\n                }\r\n            } else if (shouldDraw(element.stroke())) {\r\n                page.stroke();\r\n            } else {\r\n                page.nop();\r\n            }\r\n        }\r\n        function maybeDrawRect(path, page) {\r\n            var segments = path.segments;\r\n            if (segments.length == 4 && path.options.closed) {\r\n                var a = [];\r\n                for (var i = 0; i < segments.length; ++i) {\r\n                    if (segments[i].controlIn()) {\r\n                        return false;\r\n                    }\r\n                    a[i] = segments[i].anchor();\r\n                }\r\n                var isRect = a[0].y == a[1].y && a[1].x == a[2].x && a[2].y == a[3].y && a[3].x == a[0].x || a[0].x == a[1].x && a[1].y == a[2].y && a[2].x == a[3].x && a[3].y == a[0].y;\r\n                if (isRect) {\r\n                    page.rect(a[0].x, a[0].y, a[2].x - a[0].x, a[2].y - a[0].y);\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        function _drawPath(element, page, pdf) {\r\n            var segments = element.segments;\r\n            if (segments.length === 0) {\r\n                return;\r\n            }\r\n            if (!maybeDrawRect(element, page, pdf)) {\r\n                for (var prev, i = 0; i < segments.length; ++i) {\r\n                    var seg = segments[i];\r\n                    var anchor = seg.anchor();\r\n                    if (!prev) {\r\n                        page.moveTo(anchor.x, anchor.y);\r\n                    } else {\r\n                        var prevOut = prev.controlOut();\r\n                        var controlIn = seg.controlIn();\r\n                        if (prevOut && controlIn) {\r\n                            page.bezier(prevOut.x, prevOut.y, controlIn.x, controlIn.y, anchor.x, anchor.y);\r\n                        } else {\r\n                            page.lineTo(anchor.x, anchor.y);\r\n                        }\r\n                    }\r\n                    prev = seg;\r\n                }\r\n                if (element.options.closed) {\r\n                    page.close();\r\n                }\r\n            }\r\n        }\r\n        function drawPath(element, page, pdf) {\r\n            _drawPath(element, page, pdf);\r\n            maybeFillStroke(element, page, pdf);\r\n        }\r\n        function drawMultiPath(element, page, pdf) {\r\n            var paths = element.paths;\r\n            for (var i = 0; i < paths.length; ++i) {\r\n                _drawPath(paths[i], page, pdf);\r\n            }\r\n            maybeFillStroke(element, page, pdf);\r\n        }\r\n        function drawCircle(element, page, pdf) {\r\n            var g = element.geometry();\r\n            page.circle(g.center.x, g.center.y, g.radius);\r\n            maybeFillStroke(element, page, pdf);\r\n        }\r\n        function drawArc(element, page, pdf) {\r\n            var points = element.geometry().curvePoints();\r\n            page.moveTo(points[0].x, points[0].y);\r\n            for (var i = 1; i < points.length;) {\r\n                page.bezier(points[i].x, points[i++].y, points[i].x, points[i++].y, points[i].x, points[i++].y);\r\n            }\r\n            maybeFillStroke(element, page, pdf);\r\n        }\r\n        function drawText(element, page) {\r\n            var style = kendo.pdf.parseFontDef(element.options.font);\r\n            var pos = element._position;\r\n            var mode;\r\n            if (element.fill() && element.stroke()) {\r\n                mode = TEXT_RENDERING_MODE.fillAndStroke;\r\n            } else if (element.fill()) {\r\n                mode = TEXT_RENDERING_MODE.fill;\r\n            } else if (element.stroke()) {\r\n                mode = TEXT_RENDERING_MODE.stroke;\r\n            }\r\n            page.transform(1, 0, 0, -1, pos.x, pos.y + style.fontSize);\r\n            page.beginText();\r\n            page.setFont(kendo.pdf.getFontURL(style), style.fontSize);\r\n            page.setTextRenderingMode(mode);\r\n            page.showText(element.content(), element._pdfRect ? element._pdfRect.width() : null);\r\n            page.endText();\r\n        }\r\n        function drawGroup(element, page, pdf) {\r\n            if (element._pdfLink) {\r\n                page.addLink(element._pdfLink.url, element._pdfLink);\r\n            }\r\n            var children = element.children;\r\n            for (var i = 0; i < children.length; ++i) {\r\n                drawElement(children[i], page, pdf);\r\n            }\r\n        }\r\n        function drawImage(element, page) {\r\n            var url = element.src();\r\n            if (!url) {\r\n                return;\r\n            }\r\n            var rect = element.rect();\r\n            var tl = rect.getOrigin();\r\n            var sz = rect.getSize();\r\n            page.transform(sz.width, 0, 0, -sz.height, tl.x, tl.y + sz.height);\r\n            page.drawImage(url);\r\n        }\r\n        function drawRect(element, page, pdf) {\r\n            var geometry = element.geometry();\r\n            page.rect(geometry.origin.x, geometry.origin.y, geometry.size.width, geometry.size.height);\r\n            maybeFillStroke(element, page, pdf);\r\n        }\r\n        function exportPDF(group, options) {\r\n            var defer = $.Deferred();\r\n            for (var i in options) {\r\n                if (i == 'margin' && group.options.pdf && group.options.pdf._ignoreMargin) {\r\n                    continue;\r\n                }\r\n                group.options.set('pdf.' + i, options[i]);\r\n            }\r\n            drawing.pdf.toDataURL(group, defer.resolve);\r\n            return defer.promise();\r\n        }\r\n        function parseColor(x) {\r\n            var color = kendo.parseColor(x, true);\r\n            return color ? color.toRGB() : null;\r\n        }\r\n        function optimize(root) {\r\n            var clipbox = false;\r\n            var matrix = geo.Matrix.unit();\r\n            var currentBox = null;\r\n            var changed;\r\n            do {\r\n                changed = false;\r\n                root = opt(root);\r\n            } while (root && changed);\r\n            return {\r\n                root: root,\r\n                bbox: currentBox\r\n            };\r\n            function change(newShape) {\r\n                changed = true;\r\n                return newShape;\r\n            }\r\n            function visible(shape) {\r\n                return shape.visible() && shape.opacity() > 0 && (shouldDraw(shape.fill()) || shouldDraw(shape.stroke()));\r\n            }\r\n            function optArray(a) {\r\n                var b = [];\r\n                for (var i = 0; i < a.length; ++i) {\r\n                    var el = opt(a[i]);\r\n                    if (el != null) {\r\n                        b.push(el);\r\n                    }\r\n                }\r\n                return b;\r\n            }\r\n            function withClipping(shape, f) {\r\n                var saveclipbox = clipbox;\r\n                var savematrix = matrix;\r\n                if (shape.transform()) {\r\n                    matrix = matrix.multiplyCopy(shape.transform().matrix());\r\n                }\r\n                var clip = shape.clip();\r\n                if (clip) {\r\n                    clip = clip.bbox();\r\n                    if (clip) {\r\n                        clip = clip.bbox(matrix);\r\n                        clipbox = clipbox ? geo.Rect.intersect(clipbox, clip) : clip;\r\n                    }\r\n                }\r\n                try {\r\n                    return f();\r\n                } finally {\r\n                    clipbox = saveclipbox;\r\n                    matrix = savematrix;\r\n                }\r\n            }\r\n            function inClipbox(shape) {\r\n                if (clipbox == null) {\r\n                    return false;\r\n                }\r\n                var box = shape.rawBBox().bbox(matrix);\r\n                if (clipbox && box) {\r\n                    box = geo.Rect.intersect(box, clipbox);\r\n                }\r\n                return box;\r\n            }\r\n            function opt(shape) {\r\n                return withClipping(shape, function () {\r\n                    if (!(shape instanceof drawing.Group || shape instanceof drawing.MultiPath)) {\r\n                        var box = inClipbox(shape);\r\n                        if (!box) {\r\n                            return change(null);\r\n                        }\r\n                        currentBox = currentBox ? geo.Rect.union(currentBox, box) : box;\r\n                    }\r\n                    return dispatch({\r\n                        Path: function (shape) {\r\n                            if (shape.segments.length === 0 || !visible(shape)) {\r\n                                return change(null);\r\n                            }\r\n                            return shape;\r\n                        },\r\n                        MultiPath: function (shape) {\r\n                            if (!visible(shape)) {\r\n                                return change(null);\r\n                            }\r\n                            var el = new drawing.MultiPath(shape.options);\r\n                            el.paths = optArray(shape.paths);\r\n                            if (el.paths.length === 0) {\r\n                                return change(null);\r\n                            }\r\n                            return el;\r\n                        },\r\n                        Circle: function (shape) {\r\n                            if (!visible(shape)) {\r\n                                return change(null);\r\n                            }\r\n                            return shape;\r\n                        },\r\n                        Arc: function (shape) {\r\n                            if (!visible(shape)) {\r\n                                return change(null);\r\n                            }\r\n                            return shape;\r\n                        },\r\n                        Text: function (shape) {\r\n                            if (!/\\S/.test(shape.content()) || !visible(shape)) {\r\n                                return change(null);\r\n                            }\r\n                            return shape;\r\n                        },\r\n                        Image: function (shape) {\r\n                            if (!(shape.visible() && shape.opacity() > 0)) {\r\n                                return change(null);\r\n                            }\r\n                            return shape;\r\n                        },\r\n                        Group: function (shape) {\r\n                            var el = new drawing.Group(shape.options);\r\n                            el.children = optArray(shape.children);\r\n                            el._pdfLink = shape._pdfLink;\r\n                            if (shape !== root && el.children.length === 0 && !shape._pdfLink) {\r\n                                return change(null);\r\n                            }\r\n                            return el;\r\n                        },\r\n                        Rect: function (shape) {\r\n                            if (!visible(shape)) {\r\n                                return change(null);\r\n                            }\r\n                            return shape;\r\n                        }\r\n                    }, shape);\r\n                });\r\n            }\r\n        }\r\n        kendo.deepExtend(drawing, {\r\n            exportPDF: exportPDF,\r\n            pdf: {\r\n                toDataURL: toDataURL,\r\n                toBlob: toBlob,\r\n                saveAs: saveAs,\r\n                toStream: render\r\n            }\r\n        });\r\n    }(window.kendo, window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('kendo.pdf', [\r\n        'kendo.core',\r\n        'pdf/core',\r\n        'pdf/ttf',\r\n        'pdf/drawing',\r\n        'kendo.drawing'\r\n    ], f);\r\n}(function () {\r\n    var __meta__ = {\r\n        id: 'pdf',\r\n        name: 'PDF export',\r\n        description: 'PDF Generation framework',\r\n        mixin: true,\r\n        category: 'framework',\r\n        depends: [\r\n            'core',\r\n            'drawing'\r\n        ]\r\n    };\r\n    (function (kendo, $) {\r\n        kendo.PDFMixin = {\r\n            extend: function (proto) {\r\n                proto.events.push('pdfExport');\r\n                proto.options.pdf = this.options;\r\n                proto.saveAsPDF = this.saveAsPDF;\r\n                proto._drawPDF = this._drawPDF;\r\n                proto._drawPDFShadow = this._drawPDFShadow;\r\n            },\r\n            options: {\r\n                fileName: 'Export.pdf',\r\n                proxyURL: '',\r\n                paperSize: 'auto',\r\n                allPages: false,\r\n                landscape: false,\r\n                margin: null,\r\n                title: null,\r\n                author: null,\r\n                subject: null,\r\n                keywords: null,\r\n                creator: 'Kendo UI PDF Generator v.' + kendo.version,\r\n                date: null\r\n            },\r\n            saveAsPDF: function () {\r\n                var progress = new $.Deferred();\r\n                var promise = progress.promise();\r\n                var args = { promise: promise };\r\n                if (this.trigger('pdfExport', args)) {\r\n                    return;\r\n                }\r\n                var options = this.options.pdf;\r\n                options.multiPage = options.multiPage || options.allPages;\r\n                this._drawPDF(progress).then(function (root) {\r\n                    return kendo.drawing.exportPDF(root, options);\r\n                }).done(function (dataURI) {\r\n                    kendo.saveAs({\r\n                        dataURI: dataURI,\r\n                        fileName: options.fileName,\r\n                        proxyURL: options.proxyURL,\r\n                        forceProxy: options.forceProxy,\r\n                        proxyTarget: options.proxyTarget\r\n                    });\r\n                    progress.resolve();\r\n                }).fail(function (err) {\r\n                    progress.reject(err);\r\n                });\r\n                return promise;\r\n            },\r\n            _drawPDF: function (progress) {\r\n                var promise = new $.Deferred();\r\n                kendo.drawing.drawDOM(this.wrapper).done(function (group) {\r\n                    var args = {\r\n                        page: group,\r\n                        pageNumber: 1,\r\n                        progress: 1,\r\n                        totalPages: 1\r\n                    };\r\n                    progress.notify(args);\r\n                    promise.resolve(args.page);\r\n                }).fail(function (err) {\r\n                    promise.reject(err);\r\n                });\r\n                return promise;\r\n            },\r\n            _drawPDFShadow: function (settings, drawOptions) {\r\n                settings = settings || {};\r\n                var wrapper = this.wrapper;\r\n                var shadow = $('<div class=\\'k-pdf-export-shadow\\'>');\r\n                if (settings.width) {\r\n                    shadow.css({\r\n                        width: settings.width,\r\n                        overflow: 'visible'\r\n                    });\r\n                }\r\n                wrapper.before(shadow);\r\n                shadow.append(settings.content || wrapper.clone(true, true));\r\n                var defer = $.Deferred();\r\n                setTimeout(function () {\r\n                    var promise = kendo.drawing.drawDOM(shadow, drawOptions);\r\n                    promise.always(function () {\r\n                        shadow.remove();\r\n                    }).then(function () {\r\n                        defer.resolve.apply(defer, arguments);\r\n                    }).fail(function () {\r\n                        defer.reject.apply(defer, arguments);\r\n                    }).progress(function () {\r\n                        defer.progress.apply(defer, arguments);\r\n                    });\r\n                }, 15);\r\n                return defer.promise();\r\n            }\r\n        };\r\n    }(kendo, window.kendo.jQuery));\r\n    return kendo;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\n/** \r\n * Kendo UI v2016.2.714 (http://www.telerik.com/kendo-ui)                                                                                                                                               \r\n * Copyright 2016 Telerik AD. All rights reserved.                                                                                                                                                      \r\n *                                                                                                                                                                                                      \r\n * Kendo UI commercial licenses may be obtained at                                                                                                                                                      \r\n * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete                                                                                                                                  \r\n * If you do not own a commercial license, this file shall be governed by the trial license terms.                                                                                                      \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n                                                                                                                                                                                                       \r\n\r\n*/\r\n(function (f, define) {\r\n    define('util/undoredostack', ['kendo.core'], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        var UndoRedoStack = kendo.Observable.extend({\r\n            init: function (options) {\r\n                kendo.Observable.fn.init.call(this, options);\r\n                this.clear();\r\n            },\r\n            events: [\r\n                'undo',\r\n                'redo'\r\n            ],\r\n            push: function (command) {\r\n                this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\r\n                this.currentCommandIndex = this.stack.push(command) - 1;\r\n            },\r\n            undo: function () {\r\n                if (this.canUndo()) {\r\n                    var command = this.stack[this.currentCommandIndex--];\r\n                    command.undo();\r\n                    this.trigger('undo', { command: command });\r\n                }\r\n            },\r\n            redo: function () {\r\n                if (this.canRedo()) {\r\n                    var command = this.stack[++this.currentCommandIndex];\r\n                    command.redo();\r\n                    this.trigger('redo', { command: command });\r\n                }\r\n            },\r\n            clear: function () {\r\n                this.stack = [];\r\n                this.currentCommandIndex = -1;\r\n            },\r\n            canUndo: function () {\r\n                return this.currentCommandIndex >= 0;\r\n            },\r\n            canRedo: function () {\r\n                return this.currentCommandIndex != this.stack.length - 1;\r\n            }\r\n        });\r\n        kendo.deepExtend(kendo, { util: { UndoRedoStack: UndoRedoStack } });\r\n    }(kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('util/main', ['kendo.core'], f);\r\n}(function () {\r\n    (function () {\r\n        var math = Math, kendo = window.kendo, deepExtend = kendo.deepExtend;\r\n        var DEG_TO_RAD = math.PI / 180, MAX_NUM = Number.MAX_VALUE, MIN_NUM = -Number.MAX_VALUE, UNDEFINED = 'undefined';\r\n        function defined(value) {\r\n            return typeof value !== UNDEFINED;\r\n        }\r\n        function round(value, precision) {\r\n            var power = pow(precision);\r\n            return math.round(value * power) / power;\r\n        }\r\n        function pow(p) {\r\n            if (p) {\r\n                return math.pow(10, p);\r\n            } else {\r\n                return 1;\r\n            }\r\n        }\r\n        function limitValue(value, min, max) {\r\n            return math.max(math.min(value, max), min);\r\n        }\r\n        function rad(degrees) {\r\n            return degrees * DEG_TO_RAD;\r\n        }\r\n        function deg(radians) {\r\n            return radians / DEG_TO_RAD;\r\n        }\r\n        function isNumber(val) {\r\n            return typeof val === 'number' && !isNaN(val);\r\n        }\r\n        function valueOrDefault(value, defaultValue) {\r\n            return defined(value) ? value : defaultValue;\r\n        }\r\n        function sqr(value) {\r\n            return value * value;\r\n        }\r\n        function objectKey(object) {\r\n            var parts = [];\r\n            for (var key in object) {\r\n                parts.push(key + object[key]);\r\n            }\r\n            return parts.sort().join('');\r\n        }\r\n        function hashKey(str) {\r\n            var hash = 2166136261;\r\n            for (var i = 0; i < str.length; ++i) {\r\n                hash += (hash << 1) + (hash << 4) + (hash << 7) + (hash << 8) + (hash << 24);\r\n                hash ^= str.charCodeAt(i);\r\n            }\r\n            return hash >>> 0;\r\n        }\r\n        function hashObject(object) {\r\n            return hashKey(objectKey(object));\r\n        }\r\n        var now = Date.now;\r\n        if (!now) {\r\n            now = function () {\r\n                return new Date().getTime();\r\n            };\r\n        }\r\n        function arrayLimits(arr) {\r\n            var length = arr.length, i, min = MAX_NUM, max = MIN_NUM;\r\n            for (i = 0; i < length; i++) {\r\n                max = math.max(max, arr[i]);\r\n                min = math.min(min, arr[i]);\r\n            }\r\n            return {\r\n                min: min,\r\n                max: max\r\n            };\r\n        }\r\n        function arrayMin(arr) {\r\n            return arrayLimits(arr).min;\r\n        }\r\n        function arrayMax(arr) {\r\n            return arrayLimits(arr).max;\r\n        }\r\n        function sparseArrayMin(arr) {\r\n            return sparseArrayLimits(arr).min;\r\n        }\r\n        function sparseArrayMax(arr) {\r\n            return sparseArrayLimits(arr).max;\r\n        }\r\n        function sparseArrayLimits(arr) {\r\n            var min = MAX_NUM, max = MIN_NUM;\r\n            for (var i = 0, length = arr.length; i < length; i++) {\r\n                var n = arr[i];\r\n                if (n !== null && isFinite(n)) {\r\n                    min = math.min(min, n);\r\n                    max = math.max(max, n);\r\n                }\r\n            }\r\n            return {\r\n                min: min === MAX_NUM ? undefined : min,\r\n                max: max === MIN_NUM ? undefined : max\r\n            };\r\n        }\r\n        function last(array) {\r\n            if (array) {\r\n                return array[array.length - 1];\r\n            }\r\n        }\r\n        function append(first, second) {\r\n            first.push.apply(first, second);\r\n            return first;\r\n        }\r\n        function renderTemplate(text) {\r\n            return kendo.template(text, {\r\n                useWithBlock: false,\r\n                paramName: 'd'\r\n            });\r\n        }\r\n        function renderAttr(name, value) {\r\n            return defined(value) && value !== null ? ' ' + name + '=\\'' + value + '\\' ' : '';\r\n        }\r\n        function renderAllAttr(attrs) {\r\n            var output = '';\r\n            for (var i = 0; i < attrs.length; i++) {\r\n                output += renderAttr(attrs[i][0], attrs[i][1]);\r\n            }\r\n            return output;\r\n        }\r\n        function renderStyle(attrs) {\r\n            var output = '';\r\n            for (var i = 0; i < attrs.length; i++) {\r\n                var value = attrs[i][1];\r\n                if (defined(value)) {\r\n                    output += attrs[i][0] + ':' + value + ';';\r\n                }\r\n            }\r\n            if (output !== '') {\r\n                return output;\r\n            }\r\n        }\r\n        function renderSize(size) {\r\n            if (typeof size !== 'string') {\r\n                size += 'px';\r\n            }\r\n            return size;\r\n        }\r\n        function renderPos(pos) {\r\n            var result = [];\r\n            if (pos) {\r\n                var parts = kendo.toHyphens(pos).split('-');\r\n                for (var i = 0; i < parts.length; i++) {\r\n                    result.push('k-pos-' + parts[i]);\r\n                }\r\n            }\r\n            return result.join(' ');\r\n        }\r\n        function isTransparent(color) {\r\n            return color === '' || color === null || color === 'none' || color === 'transparent' || !defined(color);\r\n        }\r\n        function arabicToRoman(n) {\r\n            var literals = {\r\n                1: 'i',\r\n                10: 'x',\r\n                100: 'c',\r\n                2: 'ii',\r\n                20: 'xx',\r\n                200: 'cc',\r\n                3: 'iii',\r\n                30: 'xxx',\r\n                300: 'ccc',\r\n                4: 'iv',\r\n                40: 'xl',\r\n                400: 'cd',\r\n                5: 'v',\r\n                50: 'l',\r\n                500: 'd',\r\n                6: 'vi',\r\n                60: 'lx',\r\n                600: 'dc',\r\n                7: 'vii',\r\n                70: 'lxx',\r\n                700: 'dcc',\r\n                8: 'viii',\r\n                80: 'lxxx',\r\n                800: 'dccc',\r\n                9: 'ix',\r\n                90: 'xc',\r\n                900: 'cm',\r\n                1000: 'm'\r\n            };\r\n            var values = [\r\n                1000,\r\n                900,\r\n                800,\r\n                700,\r\n                600,\r\n                500,\r\n                400,\r\n                300,\r\n                200,\r\n                100,\r\n                90,\r\n                80,\r\n                70,\r\n                60,\r\n                50,\r\n                40,\r\n                30,\r\n                20,\r\n                10,\r\n                9,\r\n                8,\r\n                7,\r\n                6,\r\n                5,\r\n                4,\r\n                3,\r\n                2,\r\n                1\r\n            ];\r\n            var roman = '';\r\n            while (n > 0) {\r\n                if (n < values[0]) {\r\n                    values.shift();\r\n                } else {\r\n                    roman += literals[values[0]];\r\n                    n -= values[0];\r\n                }\r\n            }\r\n            return roman;\r\n        }\r\n        function romanToArabic(r) {\r\n            r = r.toLowerCase();\r\n            var digits = {\r\n                i: 1,\r\n                v: 5,\r\n                x: 10,\r\n                l: 50,\r\n                c: 100,\r\n                d: 500,\r\n                m: 1000\r\n            };\r\n            var value = 0, prev = 0;\r\n            for (var i = 0; i < r.length; ++i) {\r\n                var v = digits[r.charAt(i)];\r\n                if (!v) {\r\n                    return null;\r\n                }\r\n                value += v;\r\n                if (v > prev) {\r\n                    value -= 2 * prev;\r\n                }\r\n                prev = v;\r\n            }\r\n            return value;\r\n        }\r\n        function memoize(f) {\r\n            var cache = Object.create(null);\r\n            return function () {\r\n                var id = '';\r\n                for (var i = arguments.length; --i >= 0;) {\r\n                    id += ':' + arguments[i];\r\n                }\r\n                if (id in cache) {\r\n                    return cache[id];\r\n                }\r\n                return f.apply(this, arguments);\r\n            };\r\n        }\r\n        function ucs2decode(string) {\r\n            var output = [], counter = 0, length = string.length, value, extra;\r\n            while (counter < length) {\r\n                value = string.charCodeAt(counter++);\r\n                if (value >= 55296 && value <= 56319 && counter < length) {\r\n                    extra = string.charCodeAt(counter++);\r\n                    if ((extra & 64512) == 56320) {\r\n                        output.push(((value & 1023) << 10) + (extra & 1023) + 65536);\r\n                    } else {\r\n                        output.push(value);\r\n                        counter--;\r\n                    }\r\n                } else {\r\n                    output.push(value);\r\n                }\r\n            }\r\n            return output;\r\n        }\r\n        function ucs2encode(array) {\r\n            return array.map(function (value) {\r\n                var output = '';\r\n                if (value > 65535) {\r\n                    value -= 65536;\r\n                    output += String.fromCharCode(value >>> 10 & 1023 | 55296);\r\n                    value = 56320 | value & 1023;\r\n                }\r\n                output += String.fromCharCode(value);\r\n                return output;\r\n            }).join('');\r\n        }\r\n        deepExtend(kendo, {\r\n            util: {\r\n                MAX_NUM: MAX_NUM,\r\n                MIN_NUM: MIN_NUM,\r\n                append: append,\r\n                arrayLimits: arrayLimits,\r\n                arrayMin: arrayMin,\r\n                arrayMax: arrayMax,\r\n                defined: defined,\r\n                deg: deg,\r\n                hashKey: hashKey,\r\n                hashObject: hashObject,\r\n                isNumber: isNumber,\r\n                isTransparent: isTransparent,\r\n                last: last,\r\n                limitValue: limitValue,\r\n                now: now,\r\n                objectKey: objectKey,\r\n                round: round,\r\n                rad: rad,\r\n                renderAttr: renderAttr,\r\n                renderAllAttr: renderAllAttr,\r\n                renderPos: renderPos,\r\n                renderSize: renderSize,\r\n                renderStyle: renderStyle,\r\n                renderTemplate: renderTemplate,\r\n                sparseArrayLimits: sparseArrayLimits,\r\n                sparseArrayMin: sparseArrayMin,\r\n                sparseArrayMax: sparseArrayMax,\r\n                sqr: sqr,\r\n                valueOrDefault: valueOrDefault,\r\n                romanToArabic: romanToArabic,\r\n                arabicToRoman: arabicToRoman,\r\n                memoize: memoize,\r\n                ucs2encode: ucs2encode,\r\n                ucs2decode: ucs2decode\r\n            }\r\n        });\r\n        kendo.drawing.util = kendo.util;\r\n        kendo.dataviz.util = kendo.util;\r\n    }());\r\n    return window.kendo;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('util/text-metrics', [\r\n        'kendo.core',\r\n        'util/main'\r\n    ], f);\r\n}(function () {\r\n    (function ($) {\r\n        var doc = document, kendo = window.kendo, Class = kendo.Class, util = kendo.util, defined = util.defined;\r\n        var LRUCache = Class.extend({\r\n            init: function (size) {\r\n                this._size = size;\r\n                this._length = 0;\r\n                this._map = {};\r\n            },\r\n            put: function (key, value) {\r\n                var lru = this, map = lru._map, entry = {\r\n                        key: key,\r\n                        value: value\r\n                    };\r\n                map[key] = entry;\r\n                if (!lru._head) {\r\n                    lru._head = lru._tail = entry;\r\n                } else {\r\n                    lru._tail.newer = entry;\r\n                    entry.older = lru._tail;\r\n                    lru._tail = entry;\r\n                }\r\n                if (lru._length >= lru._size) {\r\n                    map[lru._head.key] = null;\r\n                    lru._head = lru._head.newer;\r\n                    lru._head.older = null;\r\n                } else {\r\n                    lru._length++;\r\n                }\r\n            },\r\n            get: function (key) {\r\n                var lru = this, entry = lru._map[key];\r\n                if (entry) {\r\n                    if (entry === lru._head && entry !== lru._tail) {\r\n                        lru._head = entry.newer;\r\n                        lru._head.older = null;\r\n                    }\r\n                    if (entry !== lru._tail) {\r\n                        if (entry.older) {\r\n                            entry.older.newer = entry.newer;\r\n                            entry.newer.older = entry.older;\r\n                        }\r\n                        entry.older = lru._tail;\r\n                        entry.newer = null;\r\n                        lru._tail.newer = entry;\r\n                        lru._tail = entry;\r\n                    }\r\n                    return entry.value;\r\n                }\r\n            }\r\n        });\r\n        var defaultMeasureBox = $('<div style=\\'position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;' + 'padding: 0 !important; margin: 0 !important; border: 0 !important;' + 'line-height: normal !important; visibility: hidden !important; white-space: nowrap!important;\\' />')[0];\r\n        function zeroSize() {\r\n            return {\r\n                width: 0,\r\n                height: 0,\r\n                baseline: 0\r\n            };\r\n        }\r\n        var TextMetrics = Class.extend({\r\n            init: function (options) {\r\n                this._cache = new LRUCache(1000);\r\n                this._initOptions(options);\r\n            },\r\n            options: { baselineMarkerSize: 1 },\r\n            measure: function (text, style, box) {\r\n                if (!text) {\r\n                    return zeroSize();\r\n                }\r\n                var styleKey = util.objectKey(style), cacheKey = util.hashKey(text + styleKey), cachedResult = this._cache.get(cacheKey);\r\n                if (cachedResult) {\r\n                    return cachedResult;\r\n                }\r\n                var size = zeroSize();\r\n                var measureBox = box ? box : defaultMeasureBox;\r\n                var baselineMarker = this._baselineMarker().cloneNode(false);\r\n                for (var key in style) {\r\n                    var value = style[key];\r\n                    if (defined(value)) {\r\n                        measureBox.style[key] = value;\r\n                    }\r\n                }\r\n                $(measureBox).text(text);\r\n                measureBox.appendChild(baselineMarker);\r\n                doc.body.appendChild(measureBox);\r\n                if ((text + '').length) {\r\n                    size.width = measureBox.offsetWidth - this.options.baselineMarkerSize;\r\n                    size.height = measureBox.offsetHeight;\r\n                    size.baseline = baselineMarker.offsetTop + this.options.baselineMarkerSize;\r\n                }\r\n                if (size.width > 0 && size.height > 0) {\r\n                    this._cache.put(cacheKey, size);\r\n                }\r\n                measureBox.parentNode.removeChild(measureBox);\r\n                return size;\r\n            },\r\n            _baselineMarker: function () {\r\n                return $('<div class=\\'k-baseline-marker\\' ' + 'style=\\'display: inline-block; vertical-align: baseline;' + 'width: ' + this.options.baselineMarkerSize + 'px; height: ' + this.options.baselineMarkerSize + 'px;' + 'overflow: hidden;\\' />')[0];\r\n            }\r\n        });\r\n        TextMetrics.current = new TextMetrics();\r\n        function measureText(text, style, measureBox) {\r\n            return TextMetrics.current.measure(text, style, measureBox);\r\n        }\r\n        function loadFonts(fonts, callback) {\r\n            var promises = [];\r\n            if (fonts.length > 0 && document.fonts) {\r\n                try {\r\n                    promises = fonts.map(function (font) {\r\n                        return document.fonts.load(font);\r\n                    });\r\n                } catch (e) {\r\n                    kendo.logToConsole(e);\r\n                }\r\n                Promise.all(promises).then(callback, callback);\r\n            } else {\r\n                callback();\r\n            }\r\n        }\r\n        kendo.util.TextMetrics = TextMetrics;\r\n        kendo.util.LRUCache = LRUCache;\r\n        kendo.util.loadFonts = loadFonts;\r\n        kendo.util.measureText = measureText;\r\n    }(window.kendo.jQuery));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('util/parse-xml', [\r\n        'kendo.core',\r\n        'util/main'\r\n    ], f);\r\n}(function () {\r\n    'use strict';\r\n    var STRING = String.fromCharCode;\r\n    var ENTITIES = {\r\n        'amp': 38,\r\n        'lt': 60,\r\n        'gt': 62,\r\n        'quot': 34,\r\n        'apos': 39,\r\n        'nbsp': 160\r\n    };\r\n    function CODE(str) {\r\n        var out = [];\r\n        for (var i = 0; i < str.length; ++i) {\r\n            out.push(str.charCodeAt(i));\r\n        }\r\n        return out;\r\n    }\r\n    function UCS2(out, code) {\r\n        if (code > 65535) {\r\n            code -= 65536;\r\n            out.push(code >>> 10 & 1023 | 55296, 56320 | code & 1023);\r\n        } else {\r\n            out.push(code);\r\n        }\r\n    }\r\n    var START_CDATA = CODE('<![CDATA[');\r\n    var END_CDATA = CODE(']]>');\r\n    var END_COMMENT = CODE('-->');\r\n    var START_COMMENT = CODE('!--');\r\n    var END_SHORT_TAG = CODE('/>');\r\n    var END_TAG = CODE('</');\r\n    var END_DECLARATION = CODE('?>');\r\n    var QUESTION_MARK = CODE('?');\r\n    var LESS_THAN = CODE('<');\r\n    var GREATER_THAN = CODE('>');\r\n    var SEMICOLON = CODE(';');\r\n    var EQUAL = CODE('=');\r\n    var AMPERSAND = CODE('&');\r\n    var QUOTE = CODE('\"');\r\n    var APOSTROPHE = CODE('\\'');\r\n    var SHARP = CODE('#');\r\n    var LOWERCASE_X = CODE('x');\r\n    var UPPERCASE_X = CODE('X');\r\n    var EXIT = {};\r\n    function parse(data, callbacks) {\r\n        var index = 0;\r\n        var stack = [];\r\n        var object = {\r\n            is: function (selector) {\r\n                var i = stack.length, j = selector.length;\r\n                while (--i >= 0 && --j >= 0) {\r\n                    if (stack[i].$tag != selector[j] && selector[j] != '*') {\r\n                        return false;\r\n                    }\r\n                }\r\n                return j < 0 ? stack[stack.length - 1] : null;\r\n            },\r\n            exit: function () {\r\n                throw EXIT;\r\n            },\r\n            stack: stack\r\n        };\r\n        function readChar(body) {\r\n            var code = data[index++];\r\n            if (!(code & 240 ^ 240)) {\r\n                UCS2(body, (code & 3) << 18 | (data[index++] & 63) << 12 | (data[index++] & 63) << 6 | data[index++] & 63);\r\n            } else if (!(code & 224 ^ 224)) {\r\n                UCS2(body, (code & 15) << 12 | (data[index++] & 63) << 6 | data[index++] & 63);\r\n            } else if (!(code & 192 ^ 192)) {\r\n                UCS2(body, (code & 31) << 6 | data[index++] & 63);\r\n            } else {\r\n                body.push(code);\r\n            }\r\n        }\r\n        function croak(msg) {\r\n            throw new Error(msg + ', at ' + index);\r\n        }\r\n        function readWhile(pred) {\r\n            var a = [];\r\n            while (index < data.length && pred(data[index])) {\r\n                a.push(data[index++]);\r\n            }\r\n            return a;\r\n        }\r\n        function readAsciiWhile(pred) {\r\n            return STRING.apply(0, readWhile(pred));\r\n        }\r\n        function skipWhitespace() {\r\n            readWhile(isWhitespace);\r\n        }\r\n        function eat(a) {\r\n            var save = index;\r\n            for (var i = 0; i < a.length; ++i) {\r\n                if (data[index++] != a[i]) {\r\n                    index = save;\r\n                    return false;\r\n                }\r\n            }\r\n            return a;\r\n        }\r\n        function skip(code) {\r\n            if (!eat(code)) {\r\n                croak('Expecting ' + code.join(', '));\r\n            }\r\n        }\r\n        function isWhitespace(code) {\r\n            return code == 9 || code == 10 || code == 13 || code == 32;\r\n        }\r\n        function isDigit(code) {\r\n            return code >= 48 && code <= 57;\r\n        }\r\n        function isHexDigit(code) {\r\n            return code >= 48 && code <= 57 || (code |= 32) >= 97 && code <= 102;\r\n        }\r\n        function isNameStart(code) {\r\n            return code == 58 || code == 95 || (code |= 32) >= 97 && code <= 122;\r\n        }\r\n        function isName(code) {\r\n            return code == 45 || isDigit(code) || isNameStart(code);\r\n        }\r\n        function xmlComment() {\r\n            var body = [];\r\n            while (index < data.length) {\r\n                if (eat(END_COMMENT)) {\r\n                    return call('comment', STRING.apply(0, body));\r\n                }\r\n                readChar(body);\r\n            }\r\n        }\r\n        function xmlTag() {\r\n            var name, attrs;\r\n            if (eat(QUESTION_MARK)) {\r\n                xmlDecl();\r\n            } else if (eat(START_COMMENT)) {\r\n                xmlComment();\r\n            } else {\r\n                name = xmlName();\r\n                attrs = xmlAttrs(name);\r\n                stack.push(attrs);\r\n                if (eat(END_SHORT_TAG)) {\r\n                    call('enter', name, attrs, true);\r\n                } else {\r\n                    skip(GREATER_THAN);\r\n                    call('enter', name, attrs);\r\n                    xmlContent(name);\r\n                    if (name != xmlName()) {\r\n                        croak('Bad closing tag');\r\n                    }\r\n                    call('leave', name, attrs);\r\n                    skipWhitespace();\r\n                    skip(GREATER_THAN);\r\n                }\r\n                stack.pop();\r\n            }\r\n        }\r\n        function xmlContent(name) {\r\n            var body = [];\r\n            while (index < data.length) {\r\n                if (eat(END_TAG)) {\r\n                    return body.length && call('text', STRING.apply(0, body));\r\n                } else if (eat(START_CDATA)) {\r\n                    while (index < data.length && !eat(END_CDATA)) {\r\n                        readChar(body);\r\n                    }\r\n                } else if (eat(LESS_THAN)) {\r\n                    if (body.length) {\r\n                        call('text', STRING.apply(0, body));\r\n                    }\r\n                    xmlTag();\r\n                    body = [];\r\n                } else if (eat(AMPERSAND)) {\r\n                    xmlEntity(body);\r\n                } else {\r\n                    readChar(body);\r\n                }\r\n            }\r\n            croak('Unclosed tag ' + name);\r\n        }\r\n        function xmlName() {\r\n            if (!isNameStart(data[index])) {\r\n                croak('Expecting XML name');\r\n            }\r\n            return readAsciiWhile(isName);\r\n        }\r\n        function xmlString() {\r\n            var quote = eat(QUOTE) || eat(APOSTROPHE);\r\n            if (!quote) {\r\n                croak('Expecting string');\r\n            }\r\n            var body = [];\r\n            while (index < data.length) {\r\n                if (eat(quote)) {\r\n                    return STRING.apply(0, body);\r\n                } else if (eat(AMPERSAND)) {\r\n                    xmlEntity(body);\r\n                } else {\r\n                    readChar(body);\r\n                }\r\n            }\r\n            croak('Unfinished string');\r\n        }\r\n        function xmlEntity(body) {\r\n            var code;\r\n            if (eat(SHARP)) {\r\n                if (eat(LOWERCASE_X) || eat(UPPERCASE_X)) {\r\n                    code = parseInt(readAsciiWhile(isHexDigit), 16);\r\n                } else {\r\n                    code = parseInt(readAsciiWhile(isDigit), 10);\r\n                }\r\n                if (isNaN(code)) {\r\n                    croak('Bad numeric entity');\r\n                }\r\n            } else {\r\n                var name = xmlName();\r\n                code = ENTITIES[name];\r\n                if (code === undefined) {\r\n                    croak('Unknown entity ' + name);\r\n                }\r\n            }\r\n            UCS2(body, code);\r\n            skip(SEMICOLON);\r\n        }\r\n        function xmlDecl() {\r\n            call('decl', xmlName(), xmlAttrs());\r\n            skip(END_DECLARATION);\r\n        }\r\n        function xmlAttrs(name) {\r\n            var map = { $tag: name };\r\n            while (index < data.length) {\r\n                skipWhitespace();\r\n                var code = data[index];\r\n                if (code == 63 || code == 62 || code == 47) {\r\n                    break;\r\n                }\r\n                map[xmlName()] = (skip(EQUAL), xmlString());\r\n            }\r\n            return map;\r\n        }\r\n        function call(what, thing, arg1, arg2) {\r\n            var f = callbacks && callbacks[what];\r\n            if (f) {\r\n                f.call(object, thing, arg1, arg2);\r\n            }\r\n        }\r\n        var tmp = [];\r\n        readChar(tmp);\r\n        if (tmp[0] != 65279) {\r\n            index = 0;\r\n        }\r\n        while (index < data.length) {\r\n            skipWhitespace();\r\n            skip(LESS_THAN);\r\n            xmlTag();\r\n            skipWhitespace();\r\n        }\r\n    }\r\n    kendo.util.parseXML = function parseXML() {\r\n        try {\r\n            return parse.apply(this, arguments);\r\n        } catch (ex) {\r\n            if (ex !== EXIT) {\r\n                throw ex;\r\n            }\r\n        }\r\n    };\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('util/base64', ['util/main'], f);\r\n}(function () {\r\n    (function () {\r\n        var kendo = window.kendo, deepExtend = kendo.deepExtend, fromCharCode = String.fromCharCode;\r\n        var KEY_STR = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\r\n        function encodeBase64(input) {\r\n            var output = '';\r\n            var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\r\n            var i = 0;\r\n            input = encodeUTF8(input);\r\n            while (i < input.length) {\r\n                chr1 = input.charCodeAt(i++);\r\n                chr2 = input.charCodeAt(i++);\r\n                chr3 = input.charCodeAt(i++);\r\n                enc1 = chr1 >> 2;\r\n                enc2 = (chr1 & 3) << 4 | chr2 >> 4;\r\n                enc3 = (chr2 & 15) << 2 | chr3 >> 6;\r\n                enc4 = chr3 & 63;\r\n                if (isNaN(chr2)) {\r\n                    enc3 = enc4 = 64;\r\n                } else if (isNaN(chr3)) {\r\n                    enc4 = 64;\r\n                }\r\n                output = output + KEY_STR.charAt(enc1) + KEY_STR.charAt(enc2) + KEY_STR.charAt(enc3) + KEY_STR.charAt(enc4);\r\n            }\r\n            return output;\r\n        }\r\n        function encodeUTF8(input) {\r\n            var output = '';\r\n            for (var i = 0; i < input.length; i++) {\r\n                var c = input.charCodeAt(i);\r\n                if (c < 128) {\r\n                    output += fromCharCode(c);\r\n                } else if (c < 2048) {\r\n                    output += fromCharCode(192 | c >>> 6);\r\n                    output += fromCharCode(128 | c & 63);\r\n                } else if (c < 65536) {\r\n                    output += fromCharCode(224 | c >>> 12);\r\n                    output += fromCharCode(128 | c >>> 6 & 63);\r\n                    output += fromCharCode(128 | c & 63);\r\n                }\r\n            }\r\n            return output;\r\n        }\r\n        deepExtend(kendo.util, {\r\n            encodeBase64: encodeBase64,\r\n            encodeUTF8: encodeUTF8\r\n        });\r\n    }());\r\n    return window.kendo;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('mixins/observers', ['kendo.core'], f);\r\n}(function () {\r\n    (function ($) {\r\n        var math = Math, kendo = window.kendo, deepExtend = kendo.deepExtend, inArray = $.inArray;\r\n        var ObserversMixin = {\r\n            observers: function () {\r\n                this._observers = this._observers || [];\r\n                return this._observers;\r\n            },\r\n            addObserver: function (element) {\r\n                if (!this._observers) {\r\n                    this._observers = [element];\r\n                } else {\r\n                    this._observers.push(element);\r\n                }\r\n                return this;\r\n            },\r\n            removeObserver: function (element) {\r\n                var observers = this.observers();\r\n                var index = inArray(element, observers);\r\n                if (index != -1) {\r\n                    observers.splice(index, 1);\r\n                }\r\n                return this;\r\n            },\r\n            trigger: function (methodName, event) {\r\n                var observers = this._observers;\r\n                var observer;\r\n                var idx;\r\n                if (observers && !this._suspended) {\r\n                    for (idx = 0; idx < observers.length; idx++) {\r\n                        observer = observers[idx];\r\n                        if (observer[methodName]) {\r\n                            observer[methodName](event);\r\n                        }\r\n                    }\r\n                }\r\n                return this;\r\n            },\r\n            optionsChange: function (e) {\r\n                e = e || {};\r\n                e.element = this;\r\n                this.trigger('optionsChange', e);\r\n            },\r\n            geometryChange: function () {\r\n                this.trigger('geometryChange', { element: this });\r\n            },\r\n            suspend: function () {\r\n                this._suspended = (this._suspended || 0) + 1;\r\n                return this;\r\n            },\r\n            resume: function () {\r\n                this._suspended = math.max((this._suspended || 0) - 1, 0);\r\n                return this;\r\n            },\r\n            _observerField: function (field, value) {\r\n                if (this[field]) {\r\n                    this[field].removeObserver(this);\r\n                }\r\n                this[field] = value;\r\n                value.addObserver(this);\r\n            }\r\n        };\r\n        deepExtend(kendo, { mixins: { ObserversMixin: ObserversMixin } });\r\n    }(window.kendo.jQuery));\r\n    return window.kendo;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/commands', [\r\n        'kendo.core',\r\n        'kendo.binder',\r\n        'kendo.window',\r\n        'kendo.list',\r\n        'kendo.tabstrip'\r\n    ], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var $ = kendo.jQuery;\r\n        var Command = kendo.spreadsheet.Command = kendo.Class.extend({\r\n            init: function (options) {\r\n                this.options = options;\r\n                this._workbook = options.workbook;\r\n                this._property = options && options.property;\r\n                this._state = {};\r\n            },\r\n            range: function (range) {\r\n                if (range !== undefined) {\r\n                    this._setRange(range);\r\n                }\r\n                return this._range;\r\n            },\r\n            _setRange: function (range) {\r\n                this._range = range;\r\n            },\r\n            redo: function () {\r\n                this.exec();\r\n            },\r\n            undo: function () {\r\n                this.setState(this._state);\r\n            },\r\n            getState: function () {\r\n                this._state = this.range().getState(this._property);\r\n            },\r\n            setState: function (state) {\r\n                this.range().setState(state);\r\n            },\r\n            _forEachCell: function (callback) {\r\n                var range = this.range();\r\n                var ref = range._ref;\r\n                ref.forEach(function (ref) {\r\n                    range.sheet().forEach(ref.toRangeRef(), callback.bind(this));\r\n                }.bind(this));\r\n            }\r\n        });\r\n        var TargetValueCommand = Command.extend({\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n                this._target = options.target;\r\n                this._value = options.value;\r\n            },\r\n            exec: function () {\r\n                this.getState();\r\n                this.setState(this._value);\r\n            }\r\n        });\r\n        kendo.spreadsheet.ColumnWidthCommand = TargetValueCommand.extend({\r\n            getState: function () {\r\n                this._state = this.range().sheet().columnWidth(this._target);\r\n            },\r\n            setState: function (state) {\r\n                this.range().sheet().columnWidth(this._target, state);\r\n            }\r\n        });\r\n        kendo.spreadsheet.RowHeightCommand = TargetValueCommand.extend({\r\n            getState: function () {\r\n                this._state = this.range().sheet().rowHeight(this._target);\r\n            },\r\n            setState: function (state) {\r\n                this.range().sheet().rowHeight(this._target, state);\r\n            }\r\n        });\r\n        kendo.spreadsheet.HyperlinkCommand = Command.extend({\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n                this._link = options.link;\r\n            },\r\n            exec: function () {\r\n                var range = this.range();\r\n                this._prevLink = range.link();\r\n                range.link(this._link);\r\n                if (range.value() == null) {\r\n                    this._hasSetValue = true;\r\n                    range.value(this._link);\r\n                }\r\n            },\r\n            undo: function () {\r\n                var range = this.range();\r\n                range.link(this._prevLink);\r\n                if (this._hasSetValue) {\r\n                    range.value(null);\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.GridLinesChangeCommand = TargetValueCommand.extend({\r\n            getState: function () {\r\n                this._state = this._range.sheet().showGridLines();\r\n            },\r\n            setState: function (v) {\r\n                this._range.sheet().showGridLines(v);\r\n            }\r\n        });\r\n        var PropertyChangeCommand = kendo.spreadsheet.PropertyChangeCommand = Command.extend({\r\n            _setRange: function (range) {\r\n                Command.prototype._setRange.call(this, range.skipHiddenCells());\r\n            },\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n                this._value = options.value;\r\n            },\r\n            exec: function () {\r\n                var range = this.range();\r\n                if (range.enable()) {\r\n                    this.getState();\r\n                    range[this._property](this._value);\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.ClearContentCommand = Command.extend({\r\n            exec: function () {\r\n                this.getState();\r\n                this.range().clearContent();\r\n            }\r\n        });\r\n        kendo.spreadsheet.EditCommand = PropertyChangeCommand.extend({\r\n            init: function (options) {\r\n                options.property = 'input';\r\n                PropertyChangeCommand.fn.init.call(this, options);\r\n            },\r\n            rejectState: function (validationState) {\r\n                this.undo();\r\n                return {\r\n                    title: validationState.title,\r\n                    body: validationState.message,\r\n                    reason: 'error',\r\n                    type: 'validationError'\r\n                };\r\n            },\r\n            getState: function () {\r\n                this._state = this.range().getState();\r\n            },\r\n            exec: function () {\r\n                var range = this.range();\r\n                var value = this._value;\r\n                this.getState();\r\n                try {\r\n                    range.link(null);\r\n                    range.input(value);\r\n                    range._adjustRowHeight();\r\n                    var validationState = range._getValidationState();\r\n                    if (validationState) {\r\n                        return this.rejectState(validationState);\r\n                    }\r\n                } catch (ex1) {\r\n                    if (ex1 instanceof kendo.spreadsheet.calc.ParseError) {\r\n                        try {\r\n                            range.input(value + ')');\r\n                            var validationState = range._getValidationState();\r\n                            if (validationState) {\r\n                                return this.rejectState(validationState);\r\n                            }\r\n                        } catch (ex2) {\r\n                            if (ex2 instanceof kendo.spreadsheet.calc.ParseError) {\r\n                                range.input('\\'' + value);\r\n                                return {\r\n                                    title: 'Error in formula',\r\n                                    body: ex1 + '',\r\n                                    reason: 'error'\r\n                                };\r\n                            }\r\n                        }\r\n                    } else {\r\n                        throw ex1;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.TextWrapCommand = PropertyChangeCommand.extend({\r\n            init: function (options) {\r\n                options.property = 'wrap';\r\n                PropertyChangeCommand.fn.init.call(this, options);\r\n                this._value = options.value;\r\n            },\r\n            getState: function () {\r\n                var rowHeight = {};\r\n                this.range().forEachRow(function (range) {\r\n                    var index = range.topLeft().row;\r\n                    rowHeight[index] = range.sheet().rowHeight(index);\r\n                });\r\n                this._state = this.range().getState(this._property);\r\n                this._rowHeight = rowHeight;\r\n            },\r\n            undo: function () {\r\n                var sheet = this.range().sheet();\r\n                var rowHeight = this._rowHeight;\r\n                this.range().setState(this._state);\r\n                for (var row in rowHeight) {\r\n                    sheet.rowHeight(row, rowHeight[row]);\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.AdjustDecimalsCommand = Command.extend({\r\n            init: function (options) {\r\n                this._decimals = options.value;\r\n                options.property = 'format';\r\n                Command.fn.init.call(this, options);\r\n            },\r\n            exec: function () {\r\n                var sheet = this.range().sheet();\r\n                var decimals = this._decimals;\r\n                var formatting = kendo.spreadsheet.formatting;\r\n                this.getState();\r\n                sheet.batch(function () {\r\n                    this.range().forEachCell(function (row, col, cell) {\r\n                        var format = cell.format;\r\n                        if (format || decimals > 0) {\r\n                            format = formatting.adjustDecimals(format || '#', decimals);\r\n                            sheet.range(row, col).format(format);\r\n                        }\r\n                    });\r\n                }.bind(this));\r\n            }\r\n        });\r\n        kendo.spreadsheet.BorderChangeCommand = Command.extend({\r\n            init: function (options) {\r\n                options.property = 'border';\r\n                Command.fn.init.call(this, options);\r\n                this._type = options.border;\r\n                this._style = options.style;\r\n            },\r\n            exec: function () {\r\n                this.getState();\r\n                this[this._type](this._style);\r\n            },\r\n            noBorders: function () {\r\n                var range = this.range();\r\n                range.sheet().batch(function () {\r\n                    range.borderLeft(null).borderTop(null).borderRight(null).borderBottom(null);\r\n                }.bind(this), {});\r\n            },\r\n            allBorders: function (style) {\r\n                var range = this.range();\r\n                range.sheet().batch(function () {\r\n                    range.borderLeft(style).borderTop(style).borderRight(style).borderBottom(style);\r\n                }.bind(this), {});\r\n            },\r\n            leftBorder: function (style) {\r\n                this.range().leftColumn().borderLeft(style);\r\n            },\r\n            rightBorder: function (style) {\r\n                this.range().rightColumn().borderRight(style);\r\n            },\r\n            topBorder: function (style) {\r\n                this.range().topRow().borderTop(style);\r\n            },\r\n            bottomBorder: function (style) {\r\n                this.range().bottomRow().borderBottom(style);\r\n            },\r\n            outsideBorders: function (style) {\r\n                var range = this.range();\r\n                range.sheet().batch(function () {\r\n                    range.leftColumn().borderLeft(style);\r\n                    range.topRow().borderTop(style);\r\n                    range.rightColumn().borderRight(style);\r\n                    range.bottomRow().borderBottom(style);\r\n                }.bind(this), {});\r\n            },\r\n            insideBorders: function (style) {\r\n                this.range().sheet().batch(function () {\r\n                    this.allBorders(style);\r\n                    this.outsideBorders(null);\r\n                }.bind(this), {});\r\n            },\r\n            insideHorizontalBorders: function (style) {\r\n                var range = this.range();\r\n                range.sheet().batch(function () {\r\n                    range.borderBottom(style);\r\n                    range.bottomRow().borderBottom(null);\r\n                }.bind(this), {});\r\n            },\r\n            insideVerticalBorders: function (style) {\r\n                var range = this.range();\r\n                range.sheet().batch(function () {\r\n                    range.borderRight(style);\r\n                    range.rightColumn().borderRight(null);\r\n                }.bind(this), {});\r\n            }\r\n        });\r\n        kendo.spreadsheet.MergeCellCommand = Command.extend({\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n                this._type = options.value;\r\n            },\r\n            exec: function () {\r\n                this.getState();\r\n                this[this._type]();\r\n            },\r\n            activate: function (ref) {\r\n                this.range().sheet().activeCell(ref);\r\n            },\r\n            getState: function () {\r\n                this._state = this.range().getState();\r\n            },\r\n            undo: function () {\r\n                if (this._type !== 'unmerge') {\r\n                    this.range().unmerge();\r\n                    this.activate(this.range().topLeft());\r\n                }\r\n                this.range().setState(this._state);\r\n            },\r\n            cells: function () {\r\n                var range = this.range();\r\n                var ref = range._ref;\r\n                range.merge();\r\n                this.activate(ref);\r\n            },\r\n            horizontally: function () {\r\n                var ref = this.range().topRow()._ref;\r\n                this.range().forEachRow(function (range) {\r\n                    range.merge();\r\n                });\r\n                this.activate(ref);\r\n            },\r\n            vertically: function () {\r\n                var ref = this.range().leftColumn()._ref;\r\n                this.range().forEachColumn(function (range) {\r\n                    range.merge();\r\n                });\r\n                this.activate(ref);\r\n            },\r\n            unmerge: function () {\r\n                var range = this.range();\r\n                var ref = range._ref.topLeft;\r\n                range.unmerge();\r\n                this.activate(ref);\r\n            }\r\n        });\r\n        kendo.spreadsheet.FreezePanesCommand = Command.extend({\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n                this._type = options.value;\r\n            },\r\n            exec: function () {\r\n                this.getState();\r\n                this._topLeft = this.range().topLeft();\r\n                this[this._type]();\r\n            },\r\n            getState: function () {\r\n                this._state = this.range().sheet().getState();\r\n            },\r\n            undo: function () {\r\n                this.range().sheet().setState(this._state);\r\n            },\r\n            panes: function () {\r\n                var topLeft = this._topLeft;\r\n                var sheet = this.range().sheet();\r\n                sheet.frozenColumns(topLeft.col).frozenRows(topLeft.row);\r\n            },\r\n            rows: function () {\r\n                var topLeft = this._topLeft;\r\n                var sheet = this.range().sheet();\r\n                sheet.frozenRows(topLeft.row);\r\n            },\r\n            columns: function () {\r\n                var topLeft = this._topLeft;\r\n                var sheet = this.range().sheet();\r\n                sheet.frozenColumns(topLeft.col);\r\n            },\r\n            unfreeze: function () {\r\n                var sheet = this.range().sheet();\r\n                sheet.frozenRows(0).frozenColumns(0);\r\n            }\r\n        });\r\n        kendo.spreadsheet.PasteCommand = Command.extend({\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n                this._clipboard = this._workbook.clipboard();\r\n            },\r\n            getState: function () {\r\n                this._range = this._workbook.activeSheet().range(this._clipboard.pasteRef());\r\n                this._state = this._range.getState();\r\n            },\r\n            exec: function () {\r\n                var status = this._clipboard.canPaste();\r\n                this._clipboard.menuInvoked = true;\r\n                if (!status.canPaste) {\r\n                    if (status.menuInvoked) {\r\n                        return {\r\n                            reason: 'error',\r\n                            type: 'useKeyboard'\r\n                        };\r\n                    }\r\n                    if (status.pasteOnMerged) {\r\n                        return {\r\n                            reason: 'error',\r\n                            type: 'modifyMerged'\r\n                        };\r\n                    }\r\n                    if (status.overflow) {\r\n                        return {\r\n                            reason: 'error',\r\n                            type: 'overflow'\r\n                        };\r\n                    }\r\n                    return { reason: 'error' };\r\n                }\r\n                this.getState();\r\n                this._clipboard.paste();\r\n                var range = this._workbook.activeSheet().range(this._clipboard.pasteRef());\r\n                range._adjustRowHeight();\r\n            }\r\n        });\r\n        kendo.spreadsheet.AdjustRowHeightCommand = Command.extend({\r\n            exec: function () {\r\n                var options = this.options;\r\n                var sheet = this._workbook.activeSheet();\r\n                var range = options.range || sheet.range(options.rowIndex);\r\n                range._adjustRowHeight();\r\n            }\r\n        });\r\n        kendo.spreadsheet.ToolbarPasteCommand = Command.extend({\r\n            exec: function () {\r\n                if (kendo.support.clipboard.paste) {\r\n                    this._workbook._view.clipboard.focus().select();\r\n                    document.execCommand('paste');\r\n                } else {\r\n                    return {\r\n                        reason: 'error',\r\n                        type: 'useKeyboard'\r\n                    };\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.CopyCommand = Command.extend({\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n                this._clipboard = options.workbook.clipboard();\r\n            },\r\n            undo: $.noop,\r\n            exec: function () {\r\n                var status = this._clipboard.canCopy();\r\n                this._clipboard.menuInvoked = true;\r\n                if (!status.canCopy) {\r\n                    if (status.menuInvoked) {\r\n                        return {\r\n                            reason: 'error',\r\n                            type: 'useKeyboard'\r\n                        };\r\n                    } else if (status.multiSelection) {\r\n                        return {\r\n                            reason: 'error',\r\n                            type: 'unsupportedSelection'\r\n                        };\r\n                    }\r\n                    return;\r\n                }\r\n                this._clipboard.copy();\r\n            }\r\n        });\r\n        function copyToClipboard(html) {\r\n            var textarea = document.createElement('textarea');\r\n            $(textarea).addClass('k-spreadsheet-clipboard').val(html).appendTo(document.body).focus().select();\r\n            document.execCommand('copy');\r\n            $(textarea).remove();\r\n        }\r\n        kendo.spreadsheet.ToolbarCopyCommand = Command.extend({\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n                this._clipboard = options.workbook.clipboard();\r\n            },\r\n            undo: $.noop,\r\n            exec: function () {\r\n                if (kendo.support.clipboard.copy) {\r\n                    var clipboard = this._workbook._view.clipboard;\r\n                    copyToClipboard(clipboard.html());\r\n                    clipboard.trigger('copy');\r\n                } else {\r\n                    return {\r\n                        reason: 'error',\r\n                        type: 'useKeyboard'\r\n                    };\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.CutCommand = Command.extend({\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n                this._clipboard = options.workbook.clipboard();\r\n            },\r\n            exec: function () {\r\n                if (this.range().enable() && this._clipboard.canCopy()) {\r\n                    this.getState();\r\n                    this._clipboard.cut();\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.AutoFillCommand = Command.extend({\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n            },\r\n            origin: function (origin) {\r\n                this._origin = origin;\r\n            },\r\n            exec: function () {\r\n                this.getState();\r\n                try {\r\n                    this.range().fillFrom(this._origin);\r\n                } catch (ex) {\r\n                    if (ex instanceof kendo.spreadsheet.Range.FillError) {\r\n                        return {\r\n                            reason: 'error',\r\n                            body: ex + ''\r\n                        };\r\n                    }\r\n                    throw ex;\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.ToolbarCutCommand = Command.extend({\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n                this._clipboard = options.workbook.clipboard();\r\n            },\r\n            exec: function () {\r\n                if (kendo.support.clipboard.copy) {\r\n                    var clipboard = this._workbook._view.clipboard;\r\n                    copyToClipboard(clipboard.html());\r\n                    clipboard.trigger('cut');\r\n                } else {\r\n                    return {\r\n                        reason: 'error',\r\n                        type: 'useKeyboard'\r\n                    };\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.FilterCommand = Command.extend({\r\n            undo: function () {\r\n                this.range().filter(this._state);\r\n            },\r\n            exec: function () {\r\n                var range = this.range();\r\n                this._state = range.hasFilter();\r\n                if (range.hasFilter()) {\r\n                    range.filter(false);\r\n                } else if (!range.intersectingMerged().length) {\r\n                    range.filter(true);\r\n                } else {\r\n                    return {\r\n                        reason: 'error',\r\n                        type: 'filterRangeContainingMerges'\r\n                    };\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.SortCommand = Command.extend({\r\n            undo: function () {\r\n                var sheet = this.range().sheet();\r\n                sheet.setState(this._state);\r\n            },\r\n            exec: function () {\r\n                var range = this.range();\r\n                var sheet = range.sheet();\r\n                var activeCell = sheet.activeCell();\r\n                var col = this.options.sheet ? activeCell.topLeft.col : this.options.column || 0;\r\n                var ascending = this.options.value === 'asc' ? true : false;\r\n                this._state = sheet.getState();\r\n                if (this.options.sheet) {\r\n                    range = this.expandRange();\r\n                }\r\n                if (!range.intersectingMerged().length) {\r\n                    range.sort({\r\n                        column: col,\r\n                        ascending: ascending\r\n                    });\r\n                } else {\r\n                    return {\r\n                        reason: 'error',\r\n                        type: 'sortRangeContainingMerges'\r\n                    };\r\n                }\r\n            },\r\n            expandRange: function () {\r\n                var sheet = this.range().sheet();\r\n                return new kendo.spreadsheet.Range(sheet._sheetRef, sheet);\r\n            }\r\n        });\r\n        var ApplyFilterCommand = kendo.spreadsheet.ApplyFilterCommand = Command.extend({\r\n            column: function () {\r\n                return this.options.column || 0;\r\n            },\r\n            undo: function () {\r\n                var sheet = this.range().sheet();\r\n                sheet.clearFilter(this.column());\r\n                if (this._state.length) {\r\n                    this.range().filter(this._state);\r\n                }\r\n            },\r\n            getState: function () {\r\n                var sheet = this.range().sheet();\r\n                var current = sheet.filter();\r\n                if (current) {\r\n                    this._state = current.columns.filter(function (c) {\r\n                        return c.index == this.column();\r\n                    }.bind(this));\r\n                }\r\n            },\r\n            exec: function () {\r\n                var range = this.range();\r\n                var column = this.column();\r\n                var current = range.sheet().filter();\r\n                var options;\r\n                var filterRule;\r\n                var exists = false;\r\n                if (this.options.valueFilter) {\r\n                    filterRule = {\r\n                        column: column,\r\n                        filter: new kendo.spreadsheet.ValueFilter(this.options.valueFilter)\r\n                    };\r\n                } else if (this.options.customFilter) {\r\n                    filterRule = {\r\n                        column: column,\r\n                        filter: new kendo.spreadsheet.CustomFilter(this.options.customFilter)\r\n                    };\r\n                }\r\n                this.getState();\r\n                if (current && current.ref.eq(range._ref) && current.columns.length) {\r\n                    current.columns.forEach(function (element) {\r\n                        if (element.index === column) {\r\n                            exists = true;\r\n                        }\r\n                    });\r\n                    options = current.columns.map(function (element) {\r\n                        return element.index === column ? filterRule : {\r\n                            column: element.index,\r\n                            filter: element.filter\r\n                        };\r\n                    });\r\n                    if (!exists) {\r\n                        options.push(filterRule);\r\n                    }\r\n                } else {\r\n                    options = filterRule;\r\n                }\r\n                range.filter(options);\r\n            }\r\n        });\r\n        kendo.spreadsheet.ClearFilterCommand = ApplyFilterCommand.extend({\r\n            exec: function () {\r\n                var range = this.range();\r\n                var column = this.column();\r\n                this.getState();\r\n                range.clearFilter(column);\r\n            }\r\n        });\r\n        kendo.spreadsheet.HideLineCommand = Command.extend({\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n                this.axis = options.axis;\r\n            },\r\n            undo: function () {\r\n                var sheet = this.range().sheet();\r\n                sheet.setAxisState(this._state);\r\n            },\r\n            exec: function () {\r\n                var sheet = this.range().sheet();\r\n                this._state = sheet.getAxisState();\r\n                if (this.axis == 'row') {\r\n                    sheet.axisManager().hideSelectedRows();\r\n                } else {\r\n                    sheet.axisManager().hideSelectedColumns();\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.UnHideLineCommand = kendo.spreadsheet.HideLineCommand.extend({\r\n            exec: function () {\r\n                var sheet = this.range().sheet();\r\n                this._state = sheet.getAxisState();\r\n                if (this.axis == 'row') {\r\n                    sheet.axisManager().unhideSelectedRows();\r\n                } else {\r\n                    sheet.axisManager().unhideSelectedColumns();\r\n                }\r\n            }\r\n        });\r\n        var DeleteCommand = kendo.spreadsheet.DeleteCommand = Command.extend({\r\n            undo: function () {\r\n                var sheet = this.range().sheet();\r\n                sheet.setState(this._state);\r\n            }\r\n        });\r\n        kendo.spreadsheet.DeleteRowCommand = DeleteCommand.extend({\r\n            exec: function () {\r\n                var sheet = this.range().sheet();\r\n                this._state = sheet.getState();\r\n                sheet.axisManager().deleteSelectedRows();\r\n            }\r\n        });\r\n        kendo.spreadsheet.DeleteColumnCommand = DeleteCommand.extend({\r\n            exec: function () {\r\n                var sheet = this.range().sheet();\r\n                this._state = sheet.getState();\r\n                sheet.axisManager().deleteSelectedColumns();\r\n            }\r\n        });\r\n        var AddCommand = Command.extend({\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n                this._value = options.value;\r\n            },\r\n            undo: function () {\r\n                var sheet = this.range().sheet();\r\n                sheet.setState(this._state);\r\n            }\r\n        });\r\n        kendo.spreadsheet.AddColumnCommand = AddCommand.extend({\r\n            exec: function () {\r\n                var sheet = this.range().sheet();\r\n                this._state = sheet.getState();\r\n                if (this._value === 'left') {\r\n                    sheet.axisManager().addColumnLeft();\r\n                } else {\r\n                    sheet.axisManager().addColumnRight();\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.AddRowCommand = AddCommand.extend({\r\n            exec: function () {\r\n                var sheet = this.range().sheet();\r\n                if (!sheet.axisManager().canAddRow()) {\r\n                    return {\r\n                        reason: 'error',\r\n                        type: 'shiftingNonblankCells'\r\n                    };\r\n                }\r\n                this._state = sheet.getState();\r\n                if (this._value === 'above') {\r\n                    sheet.axisManager().addRowAbove();\r\n                } else {\r\n                    sheet.axisManager().addRowBelow();\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.EditValidationCommand = Command.extend({\r\n            init: function (options) {\r\n                Command.fn.init.call(this, options);\r\n                this._value = options.value;\r\n            },\r\n            exec: function () {\r\n                this.range().validation(this._value);\r\n            }\r\n        });\r\n        kendo.spreadsheet.OpenCommand = Command.extend({\r\n            exec: function () {\r\n                var file = this.options.file;\r\n                if (file.name.match(/.xlsx$/i) === null) {\r\n                    return {\r\n                        reason: 'error',\r\n                        type: 'openUnsupported'\r\n                    };\r\n                }\r\n                this.options.workbook.fromFile(this.options.file);\r\n            }\r\n        });\r\n        kendo.spreadsheet.SaveAsCommand = Command.extend({\r\n            exec: function () {\r\n                var fileName = this.options.name + this.options.extension;\r\n                if (this.options.extension === '.xlsx') {\r\n                    this.options.workbook.saveAsExcel({ fileName: fileName });\r\n                } else if (this.options.extension === '.pdf') {\r\n                    this.options.workbook.saveAsPDF($.extend(this.options.pdf, {\r\n                        workbook: this.options.workbook,\r\n                        fileName: fileName\r\n                    }));\r\n                }\r\n            }\r\n        });\r\n    }(kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/formulabar', ['kendo.core'], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var $ = kendo.jQuery;\r\n        var classNames = { wrapper: 'k-spreadsheet-formula-bar' };\r\n        var FormulaBar = kendo.ui.Widget.extend({\r\n            init: function (element, options) {\r\n                kendo.ui.Widget.call(this, element, options);\r\n                element = this.element.addClass(FormulaBar.classNames.wrapper);\r\n                this.formulaInput = new kendo.spreadsheet.FormulaInput($('<div/>').appendTo(element));\r\n            },\r\n            destroy: function () {\r\n                if (this.formulaInput) {\r\n                    this.formulaInput.destroy();\r\n                }\r\n                this.formulaInput = null;\r\n            }\r\n        });\r\n        kendo.spreadsheet.FormulaBar = FormulaBar;\r\n        $.extend(true, FormulaBar, { classNames: classNames });\r\n    }(window.kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/formulainput', ['kendo.core'], f);\r\n}(function () {\r\n    (function (kendo, window) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var $ = kendo.jQuery;\r\n        var Widget = kendo.ui.Widget;\r\n        var ns = '.kendoFormulaInput';\r\n        var keys = kendo.keys;\r\n        var classNames = {\r\n            wrapper: 'k-spreadsheet-formula-input',\r\n            listWrapper: 'k-spreadsheet-formula-list'\r\n        };\r\n        var styles = [\r\n            'font-family',\r\n            'font-size',\r\n            'font-stretch',\r\n            'font-style',\r\n            'font-weight',\r\n            'letter-spacing',\r\n            'text-transform',\r\n            'line-height'\r\n        ];\r\n        var KEY_NAMES = {\r\n            27: 'esc',\r\n            37: 'left',\r\n            39: 'right',\r\n            35: 'end',\r\n            36: 'home',\r\n            32: 'spacebar'\r\n        };\r\n        var PRIVATE_FORMULA_CHECK = /(^_|[^a-z0-9]$)/i;\r\n        var FormulaInput = Widget.extend({\r\n            init: function (element, options) {\r\n                Widget.call(this, element, options);\r\n                element = this.element;\r\n                element.addClass(FormulaInput.classNames.wrapper).attr('contenteditable', true).attr('spellcheck', false).css('white-space', 'pre');\r\n                if (this.options.autoScale) {\r\n                    element.on('input', this.scale.bind(this));\r\n                }\r\n                this._highlightedRefs = [];\r\n                this._staticTokens = [];\r\n                this._formulaSource();\r\n                this._formulaList();\r\n                this._popup();\r\n                this._tooltip();\r\n                element.on('keydown', this._keydown.bind(this)).on('keyup', this._keyup.bind(this)).on('blur', this._blur.bind(this)).on('input click', this._input.bind(this)).on('focus', this._focus.bind(this)).on('paste', this._paste.bind(this));\r\n            },\r\n            options: {\r\n                name: 'FormulaInput',\r\n                autoScale: false,\r\n                filterOperator: 'startswith',\r\n                scalePadding: 30,\r\n                minLength: 1\r\n            },\r\n            events: [\r\n                'keyup',\r\n                'focus'\r\n            ],\r\n            enable: function (enable) {\r\n                if (enable === undefined) {\r\n                    return this.element.attr('contenteditable') === 'true';\r\n                }\r\n                this.enableEditing(enable);\r\n                this.element.toggleClass('k-state-disabled', !enable);\r\n            },\r\n            enableEditing: function (enable) {\r\n                if (enable) {\r\n                    this.element.attr('contenteditable', enable);\r\n                } else {\r\n                    this.element.removeAttr('contenteditable');\r\n                }\r\n            },\r\n            getPos: function () {\r\n                var div = this.element[0];\r\n                var sel = window.getSelection();\r\n                var a = lookup(sel.focusNode, sel.focusOffset);\r\n                var b = lookup(sel.anchorNode, sel.anchorOffset);\r\n                if (a != null && b != null) {\r\n                    if (a > b) {\r\n                        var tmp = a;\r\n                        a = b;\r\n                        b = tmp;\r\n                    }\r\n                    return {\r\n                        begin: a,\r\n                        end: b,\r\n                        collapsed: a == b\r\n                    };\r\n                }\r\n                function lookup(lookupNode, pos) {\r\n                    try {\r\n                        (function loop(node) {\r\n                            if (node === lookupNode) {\r\n                                throw pos;\r\n                            } else if (node.nodeType == 1) {\r\n                                for (var i = node.firstChild; i; i = i.nextSibling) {\r\n                                    loop(i);\r\n                                }\r\n                            } else if (node.nodeType == 3) {\r\n                                pos += node.nodeValue.length;\r\n                            }\r\n                        }(div));\r\n                    } catch (index) {\r\n                        return index;\r\n                    }\r\n                }\r\n            },\r\n            setPos: function (begin, end) {\r\n                var eiv = this.element[0];\r\n                begin = lookup(eiv, begin);\r\n                if (end != null) {\r\n                    end = lookup(eiv, end);\r\n                } else {\r\n                    end = begin;\r\n                }\r\n                if (begin && end) {\r\n                    var range = document.createRange();\r\n                    range.setStart(begin.node, begin.pos);\r\n                    range.setEnd(end.node, end.pos);\r\n                    var sel = window.getSelection();\r\n                    var currentRange = sel.getRangeAt(0);\r\n                    if (differ(range, currentRange)) {\r\n                        sel.removeAllRanges();\r\n                        sel.addRange(range);\r\n                    }\r\n                }\r\n                function differ(a, b) {\r\n                    return a.startOffset != b.startOffset || a.endOffset != b.endOffset || a.startContainer != b.endContainer || a.endContainer != b.endContainer;\r\n                }\r\n                function lookup(node, pos) {\r\n                    try {\r\n                        (function loop(node) {\r\n                            if (node.nodeType == 3) {\r\n                                var len = node.nodeValue.length;\r\n                                if (len >= pos) {\r\n                                    throw node;\r\n                                }\r\n                                pos -= len;\r\n                            } else if (node.nodeType == 1) {\r\n                                for (var i = node.firstChild; i; i = i.nextSibling) {\r\n                                    loop(i);\r\n                                }\r\n                            }\r\n                        }(node));\r\n                    } catch (el) {\r\n                        return {\r\n                            node: el,\r\n                            pos: pos\r\n                        };\r\n                    }\r\n                }\r\n            },\r\n            end: function () {\r\n                this.setPos(this.length());\r\n            },\r\n            home: function () {\r\n                this.setPos(0);\r\n            },\r\n            length: function () {\r\n                return this.value().length;\r\n            },\r\n            _formulaSource: function () {\r\n                var result = [];\r\n                var value;\r\n                for (var key in kendo.spreadsheet.calc.runtime.FUNCS) {\r\n                    if (!PRIVATE_FORMULA_CHECK.test(key)) {\r\n                        value = key.toUpperCase();\r\n                        result.push({\r\n                            value: value,\r\n                            text: value\r\n                        });\r\n                    }\r\n                }\r\n                this.formulaSource = new kendo.data.DataSource({ data: result });\r\n            },\r\n            _formulaList: function () {\r\n                this.list = new kendo.ui.StaticList($('<ul />').addClass(FormulaInput.classNames.listWrapper).insertAfter(this.element), {\r\n                    autoBind: false,\r\n                    selectable: true,\r\n                    change: this._formulaListChange.bind(this),\r\n                    dataSource: this.formulaSource,\r\n                    dataValueField: 'value',\r\n                    template: '#:data.value#'\r\n                });\r\n                this.list.element.on('mousedown', function (e) {\r\n                    e.preventDefault();\r\n                });\r\n            },\r\n            _formulaListChange: function () {\r\n                var tokenCtx = this._tokenContext();\r\n                if (!tokenCtx || this._mute) {\r\n                    return;\r\n                }\r\n                var activeToken = tokenCtx.token;\r\n                var completion = this.list.value()[0];\r\n                var ctx = {\r\n                    replace: true,\r\n                    token: activeToken,\r\n                    end: activeToken.end\r\n                };\r\n                if (!tokenCtx.nextToken || tokenCtx.nextToken.value != '(') {\r\n                    completion += '(';\r\n                }\r\n                this._replaceAt(ctx, completion);\r\n                this.popup.close();\r\n            },\r\n            _popup: function () {\r\n                this.popup = new kendo.ui.Popup(this.list.element, { anchor: this.element });\r\n            },\r\n            _blur: function () {\r\n                this.popup.close();\r\n                clearTimeout(this._focusId);\r\n                this.trigger('blur');\r\n            },\r\n            _isFormula: function () {\r\n                return /^=/.test(this.value());\r\n            },\r\n            _keydown: function (e) {\r\n                var key = e.keyCode;\r\n                if (KEY_NAMES[key]) {\r\n                    this.popup.close();\r\n                    this._navigated = true;\r\n                } else if (this._move(key)) {\r\n                    this._navigated = true;\r\n                    e.preventDefault();\r\n                }\r\n                this._keyDownTimeout = setTimeout(this._syntaxHighlight.bind(this));\r\n            },\r\n            _keyup: function () {\r\n                var popup = this.popup;\r\n                var value;\r\n                if (this._isFormula() && !this._navigated) {\r\n                    value = ((this._tokenContext() || {}).token || {}).value;\r\n                    this.filter(value);\r\n                    if (!value || !this.formulaSource.view().length) {\r\n                        popup.close();\r\n                    } else {\r\n                        popup[popup.visible() ? 'position' : 'open']();\r\n                        this.list.focusFirst();\r\n                    }\r\n                }\r\n                this._navigated = false;\r\n                this._syntaxHighlight();\r\n                this.trigger('keyup');\r\n            },\r\n            _input: function () {\r\n                this._syntaxHighlight();\r\n            },\r\n            _focus: function () {\r\n                this._focusTimeout = setTimeout(this._syntaxHighlight.bind(this));\r\n                this.trigger('focus');\r\n            },\r\n            _paste: function (ev) {\r\n                ev.preventDefault();\r\n                var pos = this.getPos();\r\n                var clipboard = ev.originalEvent.clipboardData;\r\n                var text = clipboard.getData('text/plain');\r\n                var val = this.value();\r\n                val = val.substr(0, pos.begin) + text + val.substr(pos.end);\r\n                this.value(val);\r\n                this.setPos(pos.begin + text.length);\r\n                this.scale();\r\n            },\r\n            _move: function (key) {\r\n                var list = this.list;\r\n                var pressed = false;\r\n                var popup = this.popup;\r\n                if (key === keys.DOWN) {\r\n                    list.focusNext();\r\n                    if (!list.focus()) {\r\n                        list.focusFirst();\r\n                    }\r\n                    pressed = true;\r\n                } else if (key === keys.UP) {\r\n                    list.focusPrev();\r\n                    if (!list.focus()) {\r\n                        list.focusLast();\r\n                    }\r\n                    pressed = true;\r\n                } else if (key === keys.ENTER) {\r\n                    if (popup.visible()) {\r\n                        list.select(list.focus());\r\n                    }\r\n                    popup.close();\r\n                    pressed = true;\r\n                } else if (key === keys.TAB) {\r\n                    list.select(list.focus());\r\n                    popup.close();\r\n                    pressed = true;\r\n                } else if (key === keys.PAGEUP) {\r\n                    list.focusFirst();\r\n                    pressed = true;\r\n                } else if (key === keys.PAGEDOWN) {\r\n                    list.focusLast();\r\n                    pressed = true;\r\n                }\r\n                return pressed;\r\n            },\r\n            _tokenContext: function () {\r\n                var point = this.getPos();\r\n                var value = this.value();\r\n                if (!value || !point || !point.collapsed) {\r\n                    return null;\r\n                }\r\n                var tokens = kendo.spreadsheet.calc.tokenize(value, this.row(), this.col());\r\n                var tok;\r\n                for (var i = 0; i < tokens.length; ++i) {\r\n                    tok = tokens[i];\r\n                    if (touches(tok, point) && /^(?:str|sym|func)$/.test(tok.type)) {\r\n                        return {\r\n                            token: tok,\r\n                            nextToken: tokens[i + 1]\r\n                        };\r\n                    }\r\n                }\r\n                return null;\r\n            },\r\n            _sync: function () {\r\n                if (this._editorToSync && this.isActive()) {\r\n                    this._editorToSync.value(this.value());\r\n                }\r\n            },\r\n            _textContainer: function () {\r\n                var computedStyles = kendo.getComputedStyles(this.element[0], styles);\r\n                computedStyles.position = 'absolute';\r\n                computedStyles.visibility = 'hidden';\r\n                computedStyles.whiteSpace = 'pre';\r\n                computedStyles.top = -3333;\r\n                computedStyles.left = -3333;\r\n                this._span = $('<span style=\\'white-space: pre\\'/>').css(computedStyles).insertAfter(this.element);\r\n            },\r\n            _tooltip: function () {\r\n                this._cellTooltip = $('<div class=\"k-widget k-tooltip\" style=\"position:absolute; display:none\">A1</div>').insertAfter(this.element);\r\n            },\r\n            tooltip: function (value) {\r\n                this._cellTooltip.text(value);\r\n            },\r\n            toggleTooltip: function (show) {\r\n                this._cellTooltip.toggle(show);\r\n            },\r\n            isActive: function () {\r\n                return this.element[0] === kendo._activeElement();\r\n            },\r\n            filter: function (value) {\r\n                if (!value || value.length < this.options.minLength) {\r\n                    return;\r\n                }\r\n                this._mute = true;\r\n                this.list.select(-1);\r\n                this._mute = false;\r\n                this.formulaSource.filter({\r\n                    field: this.list.options.dataValueField,\r\n                    operator: this.options.filterOperator,\r\n                    value: value\r\n                });\r\n            },\r\n            hide: function () {\r\n                this.enableEditing(false);\r\n                this.element.hide();\r\n                this._cellTooltip.hide();\r\n            },\r\n            show: function () {\r\n                this.enableEditing(true);\r\n                this.element.show();\r\n            },\r\n            row: function () {\r\n                if (this.activeCell) {\r\n                    return this.activeCell.row;\r\n                }\r\n            },\r\n            col: function () {\r\n                if (this.activeCell) {\r\n                    return this.activeCell.col;\r\n                }\r\n            },\r\n            position: function (rectangle) {\r\n                if (!rectangle) {\r\n                    return;\r\n                }\r\n                this.show();\r\n                this.element.css({\r\n                    'top': rectangle.top + 1 + 'px',\r\n                    'left': rectangle.left + 1 + 'px'\r\n                });\r\n                this._cellTooltip.css({\r\n                    'top': rectangle.top - this._cellTooltip.height() - 10 + 'px',\r\n                    'left': rectangle.left\r\n                });\r\n            },\r\n            resize: function (rectangle) {\r\n                if (!rectangle) {\r\n                    return;\r\n                }\r\n                this.element.css({\r\n                    width: rectangle.width - 1,\r\n                    height: rectangle.height - 1\r\n                });\r\n            },\r\n            canInsertRef: function (isKeyboardAction) {\r\n                var result = this._canInsertRef(isKeyboardAction);\r\n                var token = result && result.token;\r\n                var idx;\r\n                if (token) {\r\n                    for (idx = 0; idx < this._staticTokens.length; idx++) {\r\n                        if (isEqualToken(token, this._staticTokens[idx])) {\r\n                            return null;\r\n                        }\r\n                    }\r\n                }\r\n                return result;\r\n            },\r\n            _canInsertRef: function (isKeyboardAction) {\r\n                if (this.popup.visible()) {\r\n                    return null;\r\n                }\r\n                var strictMode = isKeyboardAction;\r\n                var point = this.getPos();\r\n                var tokens, tok;\r\n                if (point && this._isFormula()) {\r\n                    if (point.begin === 0) {\r\n                        return null;\r\n                    }\r\n                    tokens = kendo.spreadsheet.calc.tokenize(this.value(), this.row(), this.col());\r\n                    for (var i = 0; i < tokens.length; ++i) {\r\n                        tok = tokens[i];\r\n                        if (touches(tok, point)) {\r\n                            return canReplace(tok);\r\n                        }\r\n                        if (afterPoint(tok)) {\r\n                            return canInsertBetween(tokens[i - 1], tok);\r\n                        }\r\n                    }\r\n                    return canInsertBetween(tok, null);\r\n                }\r\n                return null;\r\n                function afterPoint(tok) {\r\n                    return tok.begin > point.begin;\r\n                }\r\n                function canReplace(tok) {\r\n                    if (tok) {\r\n                        if (/^(?:num|str|bool|sym|ref)$/.test(tok.type)) {\r\n                            return {\r\n                                replace: true,\r\n                                token: tok,\r\n                                end: tok.end\r\n                            };\r\n                        }\r\n                        if (/^(?:op|punc|startexp)$/.test(tok.type)) {\r\n                            if (tok.end == point.end) {\r\n                                return canInsertBetween(tok, tokens[i + 1]);\r\n                            }\r\n                            return canInsertBetween(tokens[i - 1], tok);\r\n                        }\r\n                    }\r\n                }\r\n                function canInsertBetween(left, right) {\r\n                    if (left == null) {\r\n                        return null;\r\n                    }\r\n                    if (right == null) {\r\n                        if (/^(?:op|startexp)$/.test(left.type) || isOpenParen(left.value)) {\r\n                            return {\r\n                                token: left,\r\n                                end: point.end\r\n                            };\r\n                        }\r\n                        return null;\r\n                    }\r\n                    if (strictMode) {\r\n                        if (left.type == 'op' && /^(?:punc|op)$/.test(right.type)) {\r\n                            return {\r\n                                token: left,\r\n                                end: point.end\r\n                            };\r\n                        }\r\n                    } else {\r\n                        if (left.type == 'startexp') {\r\n                            return {\r\n                                token: left,\r\n                                end: point.end\r\n                            };\r\n                        }\r\n                        if (/^(?:ref|op|punc)$/.test(left.type)) {\r\n                            return {\r\n                                token: left,\r\n                                end: point.end\r\n                            };\r\n                        }\r\n                        if (/^(?:punc|op)$/.test(left.type)) {\r\n                            return /^[,;({]$/.test(left.value) ? {\r\n                                token: left,\r\n                                end: point.end\r\n                            } : null;\r\n                        }\r\n                    }\r\n                    return false;\r\n                }\r\n            },\r\n            refAtPoint: function (ref) {\r\n                var x = this._canInsertRef();\r\n                if (x) {\r\n                    this._replaceAt(x, ref.simplify().toString());\r\n                }\r\n            },\r\n            _replaceAt: function (ctx, newValue) {\r\n                var value = this.value();\r\n                var tok = ctx.token;\r\n                var rest = value.substr(ctx.end);\r\n                value = value.substr(0, ctx.replace ? tok.begin : ctx.end) + newValue;\r\n                var point = value.length;\r\n                value += rest;\r\n                this._value(value);\r\n                this.setPos(point);\r\n                this.scale();\r\n                this._syntaxHighlight();\r\n                this._sync();\r\n            },\r\n            syncWith: function (formulaInput) {\r\n                var self = this;\r\n                var eventName = 'input' + ns;\r\n                var handler = self._sync.bind(self), iehandler;\r\n                if (kendo.support.browser.msie) {\r\n                    eventName = 'keydown' + ns;\r\n                    iehandler = function () {\r\n                        setTimeout(handler);\r\n                    };\r\n                }\r\n                self._editorToSync = formulaInput;\r\n                self.element.off(eventName).on(eventName, iehandler || handler);\r\n            },\r\n            scale: function () {\r\n                var element = this.element;\r\n                var width, height;\r\n                if (!this._span) {\r\n                    this._textContainer();\r\n                }\r\n                this._span.html(element.html());\r\n                width = this._span.width() + this.options.scalePadding;\r\n                height = this._span.height();\r\n                if (width > element.width()) {\r\n                    element.width(width);\r\n                }\r\n                if (height > element.height()) {\r\n                    element.height(height);\r\n                }\r\n            },\r\n            _value: function (value) {\r\n                this.element.text(value);\r\n            },\r\n            value: function (value) {\r\n                if (value === undefined) {\r\n                    return this.element[0].innerText;\r\n                }\r\n                this._value(value);\r\n                this._syntaxHighlight();\r\n            },\r\n            highlightedRefs: function () {\r\n                return this._highlightedRefs.slice();\r\n            },\r\n            _syntaxHighlight: function () {\r\n                var pos = this.getPos();\r\n                var value = this.value();\r\n                var refClasses = kendo.spreadsheet.Pane.classNames.series;\r\n                var highlightedRefs = [];\r\n                var refIndex = 0;\r\n                var parens = [];\r\n                var tokens = [];\r\n                var activeToken;\r\n                if (pos && !pos.collapsed) {\r\n                    return;\r\n                }\r\n                if (!/^=/.test(value)) {\r\n                    if (this._staticTokens.length || this._highlightedRefs.length) {\r\n                        this._staticTokens = [];\r\n                        this._highlightedRefs = [];\r\n                        this.element.text(value);\r\n                    }\r\n                    if (this.popup) {\r\n                        this.popup.close();\r\n                    }\r\n                    return;\r\n                } else {\r\n                    tokens = kendo.spreadsheet.calc.tokenize(value, this.row(), this.col());\r\n                    tokens.forEach(function (tok) {\r\n                        tok.active = false;\r\n                        tok.cls = ['k-syntax-' + tok.type];\r\n                        if (tok.type == 'ref') {\r\n                            tok.colorClass = refClasses[refIndex++ % refClasses.length];\r\n                            tok.cls.push(tok.colorClass);\r\n                            highlightedRefs.push(tok);\r\n                        }\r\n                        if (pos && tok.type == 'punc') {\r\n                            if (isOpenParen(tok.value)) {\r\n                                parens.unshift(tok);\r\n                            } else if (isCloseParen(tok.value)) {\r\n                                var open = parens.shift();\r\n                                if (open) {\r\n                                    if (isMatchingParen(tok.value, open.value)) {\r\n                                        if (touches(tok, pos) || touches(open, pos)) {\r\n                                            tok.cls.push('k-syntax-paren-match');\r\n                                            open.cls.push('k-syntax-paren-match');\r\n                                        }\r\n                                    } else {\r\n                                        tok.cls.push('k-syntax-error');\r\n                                        open.cls.push('k-syntax-error');\r\n                                    }\r\n                                } else {\r\n                                    tok.cls.push('k-syntax-error');\r\n                                }\r\n                            }\r\n                        }\r\n                        if (pos && touches(tok, pos)) {\r\n                            tok.cls.push('k-syntax-at-point');\r\n                            tok.active = true;\r\n                            activeToken = tok;\r\n                        }\r\n                        if (tok.type == 'func' && !knownFunction(tok.value) && (!pos || !touches(tok, pos))) {\r\n                            tok.cls.push('k-syntax-error');\r\n                        }\r\n                    });\r\n                    tokens.reverse().forEach(function (tok) {\r\n                        var begin = tok.begin, end = tok.end;\r\n                        var text = kendo.htmlEncode(value.substring(begin, end));\r\n                        value = value.substr(0, begin) + '<span class=\\'' + tok.cls.join(' ') + '\\'>' + text + '</span>' + value.substr(end);\r\n                    });\r\n                    this.element.html(value);\r\n                }\r\n                if (pos) {\r\n                    this.setPos(pos.begin, pos.end);\r\n                }\r\n                if (activeToken && /^(?:startexp|op|punc)$/.test(activeToken.type)) {\r\n                    this._setStaticTokens(tokens);\r\n                }\r\n                this._highlightedRefs = highlightedRefs;\r\n            },\r\n            _setStaticTokens: function (tokens) {\r\n                var idx, tok;\r\n                this._staticTokens = [];\r\n                for (idx = 0; idx < tokens.length; idx++) {\r\n                    tok = tokens[idx];\r\n                    if (/^(?:num|str|bool|sym|ref)$/.test(tok.type)) {\r\n                        this._staticTokens.push(tok);\r\n                    }\r\n                }\r\n            },\r\n            destroy: function () {\r\n                this._editorToSync = null;\r\n                this.element.off(ns);\r\n                clearTimeout(this._focusTimeout);\r\n                clearTimeout(this._keyDownTimeout);\r\n                this._cellTooltip = null;\r\n                this._span = null;\r\n                this.popup.destroy();\r\n                this.popup = null;\r\n                Widget.fn.destroy.call(this);\r\n            },\r\n            insertNewline: function () {\r\n                var val = this.value();\r\n                var pos = this.getPos();\r\n                var eof = pos.end == val.length;\r\n                val = val.substr(0, pos.begin) + (eof ? '\\n\\n' : '\\n' + val.substr(pos.end));\r\n                this.value(val);\r\n                this.setPos(pos.begin + 1);\r\n            }\r\n        });\r\n        function isOpenParen(ch) {\r\n            return ch == '(' || ch == '[' || ch == '{';\r\n        }\r\n        function isCloseParen(ch) {\r\n            return ch == ')' || ch == ']' || ch == '}';\r\n        }\r\n        function isMatchingParen(close, open) {\r\n            return open == '(' ? close == ')' : open == '[' ? close == ']' : open == '{' ? close == '}' : false;\r\n        }\r\n        function touches(pos, target) {\r\n            return pos.begin <= target.begin && pos.end >= target.end;\r\n        }\r\n        function knownFunction(name) {\r\n            return kendo.spreadsheet.calc.runtime.FUNCS[name.toLowerCase()];\r\n        }\r\n        function isEqualToken(tok1, tok2) {\r\n            if (!tok1 || !tok2) {\r\n                return false;\r\n            }\r\n            if (tok1.type == 'ref' && tok2.type == 'ref') {\r\n                return tok1.ref.eq(tok2.ref);\r\n            } else {\r\n                return tok1.value === tok2.value;\r\n            }\r\n        }\r\n        kendo.spreadsheet.FormulaInput = FormulaInput;\r\n        $.extend(true, FormulaInput, { classNames: classNames });\r\n    }(kendo, window));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/eventlistener', ['kendo.core'], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var $ = kendo.jQuery;\r\n        var KEY_NAMES = {\r\n            8: 'backspace',\r\n            9: 'tab',\r\n            13: 'enter',\r\n            27: 'esc',\r\n            37: 'left',\r\n            38: 'up',\r\n            39: 'right',\r\n            40: 'down',\r\n            35: 'end',\r\n            36: 'home',\r\n            32: 'spacebar',\r\n            33: 'pageup',\r\n            34: 'pagedown',\r\n            46: 'delete',\r\n            113: ':edit'\r\n        };\r\n        var Mac = navigator.platform.toUpperCase().indexOf('MAC') >= 0;\r\n        var isAlphaNum = function (keyCode) {\r\n            if (keyCode > 47 && keyCode < 58 || keyCode > 64 && keyCode < 91 || keyCode > 95 && keyCode < 112 || keyCode > 185 && keyCode < 193 || keyCode > 218 && keyCode < 223) {\r\n                return true;\r\n            }\r\n            return false;\r\n        };\r\n        var keyName = function (keyCode) {\r\n            var name = KEY_NAMES[keyCode];\r\n            if (!name && isAlphaNum(keyCode)) {\r\n                name = ':alphanum';\r\n            }\r\n            return name;\r\n        };\r\n        var EventListener = kendo.Class.extend({\r\n            init: function (target, observer, handlers) {\r\n                this._handlers = {};\r\n                this.target = target;\r\n                this._observer = observer || window;\r\n                this.keyDownProxy = this.keyDown.bind(this);\r\n                this.mouseProxy = this.mouse.bind(this);\r\n                this.threshold = 5;\r\n                this._pressLocation = null;\r\n                target.on('keydown', this.keyDownProxy);\r\n                target.on('contextmenu mousedown cut copy paste scroll wheel click dblclick focus', this.mouseProxy);\r\n                $(document.documentElement).on('mousemove mouseup', this.mouseProxy);\r\n                if (handlers) {\r\n                    for (var key in handlers) {\r\n                        this.on(key, handlers[key]);\r\n                    }\r\n                }\r\n            },\r\n            keyDown: function (e) {\r\n                this.handleEvent(e, keyName(e.keyCode));\r\n            },\r\n            mouse: function (e) {\r\n                var rightClick;\r\n                if (e.which) {\r\n                    rightClick = e.which == 3;\r\n                } else if (e.button) {\r\n                    rightClick = e.button == 2;\r\n                }\r\n                var type = e.type;\r\n                if (type === 'mousedown') {\r\n                    if (rightClick) {\r\n                        type = 'rightmousedown';\r\n                    } else {\r\n                        this._pressLocation = {\r\n                            x: e.pageX,\r\n                            y: e.pageY\r\n                        };\r\n                    }\r\n                }\r\n                if (type === 'mouseup') {\r\n                    if (!rightClick) {\r\n                        this._pressLocation = null;\r\n                    }\r\n                }\r\n                if (type === 'mousemove' && this._pressLocation) {\r\n                    var dx = this._pressLocation.x - e.pageX;\r\n                    var dy = this._pressLocation.y - e.pageY;\r\n                    var distance = Math.sqrt(dx * dx + dy * dy);\r\n                    if (distance > this.threshold) {\r\n                        type = 'mousedrag';\r\n                    }\r\n                }\r\n                this.handleEvent(e, type);\r\n            },\r\n            handleEvent: function (e, name) {\r\n                var eventKey = '';\r\n                e.mod = Mac ? e.metaKey : e.ctrlKey && !e.altKey;\r\n                if (e.altKey) {\r\n                    eventKey += 'alt+';\r\n                }\r\n                if (e.shiftKey) {\r\n                    eventKey += 'shift+';\r\n                }\r\n                if (e.ctrlKey) {\r\n                    eventKey += 'ctrl+';\r\n                }\r\n                eventKey += name;\r\n                var catchAllHandler = this._handlers['*+' + name];\r\n                if (catchAllHandler) {\r\n                    catchAllHandler.call(this._observer, e, eventKey);\r\n                }\r\n                var handler = this._handlers[eventKey];\r\n                if (handler) {\r\n                    handler.call(this._observer, e, eventKey);\r\n                }\r\n            },\r\n            on: function (event, callback) {\r\n                var handlers = this._handlers;\r\n                if (typeof callback === 'string') {\r\n                    callback = this._observer[callback];\r\n                }\r\n                if (typeof event === 'string') {\r\n                    event = event.split(',');\r\n                }\r\n                event.forEach(function (e) {\r\n                    handlers[e] = callback;\r\n                });\r\n            },\r\n            destroy: function () {\r\n                this.target.off('keydown', this.keyDownProxy);\r\n                this.target.off('keydown', this.mouseProxy);\r\n                $(document.documentElement).off('mousemove mouseup', this.mouseProxy);\r\n            }\r\n        });\r\n        kendo.spreadsheet.EventListener = EventListener;\r\n    }(window.kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/rangelist', ['kendo.core'], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var RangeTreeNode = kendo.Class.extend({\r\n            init: function Node(level, value, left, right) {\r\n                this.level = level;\r\n                this.value = value;\r\n                this.left = left;\r\n                this.right = right;\r\n            }\r\n        });\r\n        var NilNode = new function NIL() {\r\n            this.left = this;\r\n            this.right = this;\r\n            this.level = 0;\r\n        }();\r\n        function passThrough(value) {\r\n            return value;\r\n        }\r\n        function skew(node) {\r\n            if (node.left.level === node.level) {\r\n                var temp = node;\r\n                node = node.left;\r\n                temp.left = node.right;\r\n                node.right = temp;\r\n            }\r\n            return node;\r\n        }\r\n        function split(node) {\r\n            if (node.right.right.level === node.level) {\r\n                var temp = node;\r\n                node = node.right;\r\n                temp.right = node.left;\r\n                node.left = temp;\r\n                node.level += 1;\r\n            }\r\n            return node;\r\n        }\r\n        function insert(node, value) {\r\n            if (node === NilNode) {\r\n                return new RangeTreeNode(1, value, NilNode, NilNode);\r\n            } else if (node.value.start - value.start > 0) {\r\n                node.left = insert(node.left, value);\r\n            } else {\r\n                node.right = insert(node.right, value);\r\n            }\r\n            return split(skew(node));\r\n        }\r\n        function remove(node, value) {\r\n            if (node === NilNode) {\r\n                return node;\r\n            }\r\n            var diff = node.value.start - value.start;\r\n            if (diff === 0) {\r\n                if (node.left !== NilNode && node.right !== NilNode) {\r\n                    var heir = node.left;\r\n                    while (heir.right !== NilNode) {\r\n                        heir = heir.right;\r\n                    }\r\n                    node.value = heir.value;\r\n                    node.left = remove(node.left, node.value);\r\n                } else if (node.left === NilNode) {\r\n                    node = node.right;\r\n                } else {\r\n                    node = node.left;\r\n                }\r\n            } else if (diff > 0) {\r\n                node.left = remove(node.left, value);\r\n            } else {\r\n                node.right = remove(node.right, value);\r\n            }\r\n            if (node.left.level < node.level - 1 || node.right.level < node.level - 1) {\r\n                node.level -= 1;\r\n                if (node.right.level > node.level) {\r\n                    node.right.level = node.level;\r\n                }\r\n                node = skew(node);\r\n                node.right = skew(node.right);\r\n                node.right.right = skew(node.right.right);\r\n                node = split(node);\r\n                node.right = split(node.right);\r\n            }\r\n            return node;\r\n        }\r\n        var Range = kendo.Class.extend({\r\n            init: function Value(start, end, value) {\r\n                this.start = start;\r\n                this.end = end;\r\n                this.value = value;\r\n            },\r\n            intersects: function (range) {\r\n                return range.start <= this.end && range.end >= this.start;\r\n            }\r\n        });\r\n        var RangeTree = kendo.Class.extend({\r\n            init: function () {\r\n                this.root = NilNode;\r\n            },\r\n            insert: function (value) {\r\n                this.root = insert(this.root, value);\r\n            },\r\n            remove: function (value) {\r\n                this.root = remove(this.root, value);\r\n            },\r\n            findrange: function (value) {\r\n                var node = this.root;\r\n                while (node != NilNode) {\r\n                    if (value < node.value.start) {\r\n                        node = node.left;\r\n                    } else if (value > node.value.end) {\r\n                        node = node.right;\r\n                    } else {\r\n                        return node.value;\r\n                    }\r\n                }\r\n                return null;\r\n            },\r\n            values: function () {\r\n                var result = [];\r\n                values(this.root, result);\r\n                return result;\r\n            },\r\n            intersecting: function (start, end) {\r\n                var ranges = [];\r\n                intersecting(this.root, new Range(start, end), ranges);\r\n                return ranges;\r\n            },\r\n            map: function (callback) {\r\n                var tree = new RangeTree();\r\n                map(tree, this.root, callback);\r\n                return tree;\r\n            },\r\n            clone: function () {\r\n                return this.map(passThrough);\r\n            },\r\n            first: function () {\r\n                var first = this.root;\r\n                while (first.left != NilNode) {\r\n                    first = first.left;\r\n                }\r\n                return first;\r\n            },\r\n            last: function () {\r\n                var last = this.root;\r\n                while (last.right != NilNode) {\r\n                    last = last.right;\r\n                }\r\n                return last;\r\n            }\r\n        });\r\n        function values(node, result) {\r\n            if (node === NilNode) {\r\n                return;\r\n            }\r\n            values(node.left, result);\r\n            result.push(node.value);\r\n            values(node.right, result);\r\n        }\r\n        function intersecting(node, range, ranges) {\r\n            if (node === NilNode) {\r\n                return;\r\n            }\r\n            var value = node.value;\r\n            if (range.start < value.start) {\r\n                intersecting(node.left, range, ranges);\r\n            }\r\n            if (value.intersects(range)) {\r\n                ranges.push(value);\r\n            }\r\n            if (range.end > value.end) {\r\n                intersecting(node.right, range, ranges);\r\n            }\r\n        }\r\n        function map(tree, root, callback) {\r\n            if (root === NilNode) {\r\n                return;\r\n            }\r\n            map(tree, root.left, callback);\r\n            tree.insert(callback(root.value));\r\n            map(tree, root.right, callback);\r\n        }\r\n        var RangeList = kendo.Class.extend({\r\n            init: function (start, end, value) {\r\n                if (end === undefined) {\r\n                    this.tree = start;\r\n                } else {\r\n                    this.tree = new RangeTree();\r\n                    this.tree.insert(new Range(start, end, value));\r\n                }\r\n            },\r\n            values: function () {\r\n                return this.tree.values();\r\n            },\r\n            map: function (callback) {\r\n                return new RangeList(this.tree.map(callback));\r\n            },\r\n            intersecting: function (start, end) {\r\n                return this.tree.intersecting(start, end);\r\n            },\r\n            first: function () {\r\n                return this.tree.first().value;\r\n            },\r\n            last: function () {\r\n                return this.tree.last().value;\r\n            },\r\n            insert: function (start, end, value) {\r\n                return this.tree.insert(new Range(start, end, value));\r\n            },\r\n            value: function (start, end, value) {\r\n                if (value === undefined) {\r\n                    if (end === undefined) {\r\n                        end = start;\r\n                    }\r\n                    return this.intersecting(start, end)[0].value;\r\n                }\r\n                var ranges = this.tree.intersecting(start - 1, end + 1);\r\n                if (ranges.length) {\r\n                    var firstRange = ranges[0], lastRange = ranges[ranges.length - 1];\r\n                    if (firstRange.end < start) {\r\n                        if (firstRange.value === value) {\r\n                            start = firstRange.start;\r\n                        } else {\r\n                            ranges.shift();\r\n                        }\r\n                    }\r\n                    if (lastRange.start > end) {\r\n                        if (lastRange.value === value) {\r\n                            end = lastRange.end;\r\n                        } else {\r\n                            ranges.pop();\r\n                        }\r\n                    }\r\n                    for (var i = 0, length = ranges.length; i < length; i++) {\r\n                        var range = ranges[i];\r\n                        var rangeValue = range.value;\r\n                        var rangeStart = range.start;\r\n                        var rangeEnd = range.end;\r\n                        this.tree.remove(range);\r\n                        if (rangeStart < start) {\r\n                            if (rangeValue !== value) {\r\n                                this.insert(rangeStart, start - 1, rangeValue);\r\n                            } else {\r\n                                start = rangeStart;\r\n                            }\r\n                        }\r\n                        if (rangeEnd > end) {\r\n                            if (rangeValue !== value) {\r\n                                this.insert(end + 1, rangeEnd, rangeValue);\r\n                            } else {\r\n                                end = rangeEnd;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                this.insert(start, end, value);\r\n            },\r\n            expandedValues: function (start, end) {\r\n                var ranges = this.intersecting(start, end);\r\n                var result = [];\r\n                var rangeIndex = 0;\r\n                for (var i = start; i <= end; i++) {\r\n                    if (ranges[rangeIndex].end < i) {\r\n                        rangeIndex++;\r\n                    }\r\n                    result.push({\r\n                        index: i - start,\r\n                        value: ranges[rangeIndex].value\r\n                    });\r\n                }\r\n                return result;\r\n            },\r\n            sortedIndices: function (start, end, valueComparer, indices) {\r\n                var result = this.expandedValues(start, end);\r\n                var comparer = function (a, b) {\r\n                    if (a.value === b.value) {\r\n                        return a.index - b.index;\r\n                    }\r\n                    return valueComparer(a.value, b.value);\r\n                };\r\n                if (indices) {\r\n                    comparer = function (a, b) {\r\n                        var x = indices[a.index];\r\n                        var y = indices[b.index];\r\n                        if (x.value === y.value) {\r\n                            return valueComparer(a.value, b.value);\r\n                        }\r\n                        return a.index - b.index;\r\n                    };\r\n                }\r\n                result.sort(comparer);\r\n                return result;\r\n            },\r\n            sort: function (start, end, indices) {\r\n                if (this.intersecting(start, end).length === 1) {\r\n                    return;\r\n                }\r\n                var values = this.expandedValues(start, end);\r\n                for (var i = 0, len = indices.length; i < len; i++) {\r\n                    this.value(i + start, i + start, values[indices[i].index].value);\r\n                }\r\n            },\r\n            copy: function (sourceStart, sourceEnd, targetStart) {\r\n                var values = this.intersecting(sourceStart, sourceEnd);\r\n                var start = targetStart;\r\n                var end;\r\n                for (var i = 0, len = values.length; i < len; i++) {\r\n                    var rangeStart = values[i].start;\r\n                    if (rangeStart < sourceStart) {\r\n                        rangeStart = sourceStart;\r\n                    }\r\n                    var rangeEnd = values[i].end;\r\n                    if (rangeEnd > sourceEnd) {\r\n                        rangeEnd = sourceEnd;\r\n                    }\r\n                    end = start + (rangeEnd - rangeStart);\r\n                    this.value(start, end, values[i].value);\r\n                    start = ++end;\r\n                }\r\n            },\r\n            iterator: function (start, end) {\r\n                return new Iterator(start, end, this.intersecting(start, end));\r\n            },\r\n            getState: function () {\r\n                return this.tree.clone();\r\n            },\r\n            setState: function (state) {\r\n                this.tree = state;\r\n            }\r\n        });\r\n        var Iterator = kendo.Class.extend({\r\n            init: function (start, end, ranges) {\r\n                this.start = start;\r\n                this.end = end;\r\n                this.index = 0;\r\n                this.ranges = ranges;\r\n            },\r\n            unique: function () {\r\n                return this.ranges.map(function (range) {\r\n                    return range.value;\r\n                });\r\n            },\r\n            at: function (index) {\r\n                while (this.ranges[this.index].end < index) {\r\n                    this.index++;\r\n                }\r\n                return this.ranges[this.index].value;\r\n            },\r\n            forEach: function (callback) {\r\n                for (var i = this.start; i <= this.end; i++) {\r\n                    callback(this.at(i), i);\r\n                }\r\n                this.index = 0;\r\n            }\r\n        });\r\n        var SparseRangeList = RangeList.extend({\r\n            init: function (start, end, value) {\r\n                this.tree = new RangeTree();\r\n                this.range = new Range(start, end, value);\r\n            },\r\n            intersecting: function (start, end) {\r\n                var ranges = this.tree.intersecting(start, end);\r\n                var result = [];\r\n                var range;\r\n                if (!ranges.length) {\r\n                    return [this.range];\r\n                }\r\n                for (var i = 0, len = ranges.length; i < len; i++) {\r\n                    range = ranges[i];\r\n                    if (range.start > start) {\r\n                        result.push(new Range(start, range.start - 1, this.range.value));\r\n                    }\r\n                    result.push(range);\r\n                    start = range.end + 1;\r\n                }\r\n                if (range.end < end) {\r\n                    result.push(new Range(range.end + 1, end, this.range.value));\r\n                }\r\n                return result;\r\n            },\r\n            insert: function (start, end, value) {\r\n                if (value !== this.range.value) {\r\n                    this.tree.insert(new Range(start, end, value));\r\n                }\r\n            },\r\n            lastRangeStart: function () {\r\n                var node = this.tree.root;\r\n                if (node === NilNode) {\r\n                    return this.range.start;\r\n                }\r\n                while (node.right !== NilNode) {\r\n                    node = node.right;\r\n                }\r\n                return node.value.end + 1;\r\n            }\r\n        });\r\n        kendo.spreadsheet.RangeTree = RangeTree;\r\n        kendo.spreadsheet.RangeList = RangeList;\r\n        kendo.spreadsheet.SparseRangeList = SparseRangeList;\r\n        kendo.spreadsheet.ValueRange = Range;\r\n    }(kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/propertybag', ['kendo.core'], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var $ = kendo.jQuery;\r\n        var Property = kendo.Class.extend({\r\n            init: function (list) {\r\n                this.list = list;\r\n            },\r\n            get: function (index) {\r\n                return this.parse(this.list.value(index, index));\r\n            },\r\n            set: function (start, end, value) {\r\n                if (value === undefined) {\r\n                    value = end;\r\n                    end = start;\r\n                }\r\n                this.list.value(start, end, value);\r\n            },\r\n            parse: function (value) {\r\n                return value;\r\n            },\r\n            copy: function (start, end, dst) {\r\n                this.list.copy(start, end, dst);\r\n            },\r\n            iterator: function (start, end) {\r\n                return this.list.iterator(start, end);\r\n            }\r\n        });\r\n        var JsonProperty = Property.extend({\r\n            set: function (start, end, value) {\r\n                this.list.value(start, end, JSON.stringify(value));\r\n            },\r\n            parse: function (value) {\r\n                return JSON.parse(value);\r\n            }\r\n        });\r\n        var ValueProperty = Property.extend({\r\n            init: function (values, formats, validations) {\r\n                Property.prototype.init.call(this, values);\r\n                this.validations = validations;\r\n                this.formats = formats;\r\n            },\r\n            set: function (start, end, value) {\r\n                if (value instanceof Date) {\r\n                    value = kendo.spreadsheet.dateToNumber(value);\r\n                    this.formats.value(start, end, toExcelFormat(kendo.culture().calendar.patterns.d));\r\n                }\r\n                this.list.value(start, end, value);\r\n            }\r\n        });\r\n        function toExcelFormat(format) {\r\n            return format.replace(/M/g, 'm').replace(/'/g, '\"').replace(/tt/, 'am/pm');\r\n        }\r\n        kendo.spreadsheet.PropertyBag = kendo.Class.extend({\r\n            specs: [\r\n                {\r\n                    property: ValueProperty,\r\n                    name: 'value',\r\n                    value: null,\r\n                    sortable: true,\r\n                    serializable: true,\r\n                    depends: 'format'\r\n                },\r\n                {\r\n                    property: Property,\r\n                    name: 'format',\r\n                    value: null,\r\n                    sortable: true,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: Property,\r\n                    name: 'formula',\r\n                    value: null,\r\n                    sortable: true,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: Property,\r\n                    name: 'background',\r\n                    value: null,\r\n                    sortable: true,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: JsonProperty,\r\n                    name: 'borderBottom',\r\n                    value: null,\r\n                    sortable: false,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: JsonProperty,\r\n                    name: 'borderRight',\r\n                    value: null,\r\n                    sortable: false,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: JsonProperty,\r\n                    name: 'borderLeft',\r\n                    value: null,\r\n                    sortable: false,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: JsonProperty,\r\n                    name: 'borderTop',\r\n                    value: null,\r\n                    sortable: false,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: Property,\r\n                    name: 'color',\r\n                    value: null,\r\n                    sortable: true,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: Property,\r\n                    name: 'fontFamily',\r\n                    value: null,\r\n                    sortable: true,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: Property,\r\n                    name: 'underline',\r\n                    value: null,\r\n                    sortable: true,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: Property,\r\n                    name: 'fontSize',\r\n                    value: null,\r\n                    sortable: true,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: Property,\r\n                    name: 'italic',\r\n                    value: null,\r\n                    sortable: true,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: Property,\r\n                    name: 'bold',\r\n                    value: null,\r\n                    sortable: true,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: Property,\r\n                    name: 'textAlign',\r\n                    value: null,\r\n                    sortable: true,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: Property,\r\n                    name: 'verticalAlign',\r\n                    value: null,\r\n                    sortable: true,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: Property,\r\n                    name: 'wrap',\r\n                    value: null,\r\n                    sortable: true,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: Property,\r\n                    name: 'validation',\r\n                    value: null,\r\n                    sortable: false,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: Property,\r\n                    name: 'enable',\r\n                    value: null,\r\n                    sortable: false,\r\n                    serializable: true\r\n                },\r\n                {\r\n                    property: Property,\r\n                    name: 'link',\r\n                    value: null,\r\n                    sortable: false,\r\n                    serializable: true\r\n                }\r\n            ],\r\n            init: function (cellCount) {\r\n                this.properties = {};\r\n                this.lists = {};\r\n                this.specs.forEach(function (spec) {\r\n                    this.lists[spec.name] = new kendo.spreadsheet.SparseRangeList(0, cellCount, spec.value);\r\n                }, this);\r\n                this.specs.forEach(function (spec) {\r\n                    this.properties[spec.name] = new spec.property(this.lists[spec.name], this.lists[spec.depends]);\r\n                }, this);\r\n            },\r\n            getState: function () {\r\n                var state = {};\r\n                this.specs.forEach(function (spec) {\r\n                    state[spec.name] = this.lists[spec.name].getState();\r\n                }, this);\r\n                return state;\r\n            },\r\n            setState: function (state) {\r\n                this.specs.forEach(function (spec) {\r\n                    this.lists[spec.name].setState(state[spec.name]);\r\n                }, this);\r\n            },\r\n            get: function (name, index) {\r\n                if (index === undefined) {\r\n                    return this.lists[name];\r\n                }\r\n                return this.properties[name].get(index);\r\n            },\r\n            set: function (name, start, end, value) {\r\n                this.properties[name].set(start, end, value);\r\n            },\r\n            fromJSON: function (index, value) {\r\n                for (var si = 0; si < this.specs.length; si++) {\r\n                    var spec = this.specs[si];\r\n                    if (spec.serializable) {\r\n                        if (value[spec.name] !== undefined) {\r\n                            this.set(spec.name, index, index, value[spec.name], false);\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            copy: function (sourceStart, sourceEnd, targetStart) {\r\n                this.specs.forEach(function (spec) {\r\n                    this.properties[spec.name].copy(sourceStart, sourceEnd, targetStart);\r\n                }, this);\r\n            },\r\n            iterator: function (name, start, end) {\r\n                return this.properties[name].iterator(start, end);\r\n            },\r\n            sortable: function () {\r\n                return this.specs.filter(function (spec) {\r\n                    return spec.sortable;\r\n                }).map(function (spec) {\r\n                    return this.lists[spec.name];\r\n                }, this);\r\n            },\r\n            iterators: function (start, end) {\r\n                var specs = this.specs.filter(function (spec) {\r\n                    return spec.serializable;\r\n                });\r\n                return specs.map(function (spec) {\r\n                    var iterator = this.iterator(spec.name, start, end);\r\n                    return {\r\n                        name: spec.name,\r\n                        value: spec.value,\r\n                        at: function (index) {\r\n                            return spec.property.fn.parse(iterator.at(index));\r\n                        }\r\n                    };\r\n                }, this);\r\n            },\r\n            forEach: function (start, end, callback) {\r\n                var iterators = this.iterators(start, end);\r\n                for (var index = start; index <= end; index++) {\r\n                    var values = {};\r\n                    for (var i = 0; i < iterators.length; i++) {\r\n                        var iterator = iterators[i];\r\n                        var value = iterator.at(index);\r\n                        if (value !== iterator.value) {\r\n                            values[iterator.name] = value;\r\n                        }\r\n                    }\r\n                    callback(values);\r\n                }\r\n            },\r\n            forEachProperty: function (callback) {\r\n                for (var name in this.properties) {\r\n                    callback(this.properties[name]);\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.ALL_PROPERTIES = $.map(kendo.spreadsheet.PropertyBag.prototype.specs, function (spec) {\r\n            return spec.name;\r\n        });\r\n    }(window.kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/references', ['kendo.core'], f);\r\n}(function () {\r\n    'use strict';\r\n    if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n        return;\r\n    }\r\n    var spreadsheet = kendo.spreadsheet;\r\n    var Class = kendo.Class;\r\n    function columnName(colIndex) {\r\n        var letter = Math.floor(colIndex / 26) - 1;\r\n        return (letter >= 0 ? columnName(letter) : '') + String.fromCharCode(65 + colIndex % 26);\r\n    }\r\n    function displaySheet(sheet) {\r\n        if (/^[a-z0-9_]*$/i.test(sheet)) {\r\n            return sheet;\r\n        }\r\n        return '\\'' + sheet.replace(/\\x27/g, '\\\\\\'') + '\\'';\r\n    }\r\n    function displayRef(sheet, row, col, rel) {\r\n        var aa = '';\r\n        ++row;\r\n        if (!isFinite(row)) {\r\n            row = '';\r\n        } else if (rel != null && !(rel & 2)) {\r\n            row = '$' + row;\r\n        }\r\n        if (!isFinite(col)) {\r\n            col = '';\r\n        } else {\r\n            aa = columnName(col);\r\n            if (rel != null && !(rel & 1)) {\r\n                aa = '$' + aa;\r\n            }\r\n        }\r\n        if (sheet) {\r\n            return displaySheet(sheet) + '!' + aa + row;\r\n        } else {\r\n            return aa + row;\r\n        }\r\n    }\r\n    var Ref = Class.extend({\r\n        type: 'ref',\r\n        hasSheet: function () {\r\n            return this._hasSheet;\r\n        },\r\n        simplify: function () {\r\n            return this;\r\n        },\r\n        setSheet: function (sheet, hasSheet) {\r\n            this.sheet = sheet;\r\n            if (hasSheet != null) {\r\n                this._hasSheet = hasSheet;\r\n            }\r\n            return this;\r\n        },\r\n        absolute: function () {\r\n            return this;\r\n        },\r\n        relative: function () {\r\n            return this;\r\n        },\r\n        adjust: function () {\r\n            return this;\r\n        },\r\n        toString: function () {\r\n            return this.relative(0, 0, 3, 3).print(0, 0);\r\n        },\r\n        forEach: function (callback, obj) {\r\n            callback.call(obj, this);\r\n        },\r\n        map: function (callback, obj) {\r\n            return callback.call(obj, this);\r\n        },\r\n        intersects: function (ref) {\r\n            return this.intersect(ref) !== NULL;\r\n        },\r\n        isCell: function () {\r\n            return false;\r\n        },\r\n        toRow: function () {\r\n            return this;\r\n        },\r\n        toColumn: function () {\r\n            return this;\r\n        },\r\n        first: function () {\r\n            return this;\r\n        },\r\n        lastRange: function () {\r\n            return this;\r\n        },\r\n        size: function () {\r\n            return 1;\r\n        },\r\n        rangeAt: function () {\r\n            return this;\r\n        },\r\n        nextRangeIndex: function () {\r\n            return 0;\r\n        },\r\n        previousRangeIndex: function () {\r\n            return 0;\r\n        },\r\n        eq: function (reference) {\r\n            var r1 = this;\r\n            var r2 = reference;\r\n            if (r1 === NULL || r2 === NULL) {\r\n                return r1 === r2;\r\n            }\r\n            if (r2 instanceof CellRef || r2 instanceof RangeRef && !(r1 instanceof CellRef)) {\r\n                r1 = reference;\r\n                r2 = this;\r\n            }\r\n            if (r1 instanceof CellRef) {\r\n                r2 = r2.simplify();\r\n                return r2 instanceof CellRef && r1.row == r2.row && r1.col == r2.col && r1.sheet == r2.sheet;\r\n            } else if (r1 instanceof RangeRef) {\r\n                if (r2 instanceof RangeRef) {\r\n                    return r2.topLeft.eq(r1.topLeft) && r2.bottomRight.eq(r1.bottomRight);\r\n                }\r\n                if (r2 instanceof UnionRef) {\r\n                    return r2.single() && r1.eq(r2.refs[0]);\r\n                }\r\n            } else if (r1 instanceof UnionRef && r2 instanceof UnionRef) {\r\n                var refs1 = r1.refs;\r\n                var refs2 = r2.refs;\r\n                if (refs1.length != refs2.length) {\r\n                    return false;\r\n                }\r\n                for (var i = 0, len = refs1.length; i < len; i++) {\r\n                    if (!refs1[i].eq(refs2[i])) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            }\r\n            return r1 === r2;\r\n        },\r\n        concat: function (ref) {\r\n            return new UnionRef([\r\n                this,\r\n                ref\r\n            ]);\r\n        },\r\n        replaceAt: function (index, ref) {\r\n            return ref;\r\n        },\r\n        forEachColumnIndex: function (callback) {\r\n            this.forEachAxisIndex('col', callback);\r\n        },\r\n        forEachRowIndex: function (callback) {\r\n            this.forEachAxisIndex('row', callback);\r\n        },\r\n        forEachAxisIndex: function (axis, callback) {\r\n            var sorted = [];\r\n            var method = axis === 'row' ? 'forEachRow' : 'forEachColumn';\r\n            this[method](function (ref) {\r\n                var index = ref.first()[axis];\r\n                if (sorted.indexOf(index) === -1) {\r\n                    sorted.push(index);\r\n                }\r\n            });\r\n            sorted.sort(function (a, b) {\r\n                return a > b ? 1 : a < b ? -1 : 0;\r\n            }).forEach(callback);\r\n        },\r\n        valid: function () {\r\n            return false;\r\n        }\r\n    });\r\n    Ref.display = displayRef;\r\n    var NULL = new (Ref.extend({\r\n        init: function NullRef() {\r\n        },\r\n        print: function () {\r\n            return '#NULL!';\r\n        },\r\n        clone: function () {\r\n            return this;\r\n        },\r\n        eq: function (ref) {\r\n            return ref === this;\r\n        },\r\n        forEach: function () {\r\n        }\r\n    }))();\r\n    var NameRef = Ref.extend({\r\n        ref: 'name',\r\n        init: function NameRef(name) {\r\n            this.name = name;\r\n        },\r\n        print: function () {\r\n            var ret = displaySheet(this.name);\r\n            if (this.hasSheet()) {\r\n                ret = displaySheet(this.sheet) + '!' + ret;\r\n            }\r\n            return ret;\r\n        }\r\n    });\r\n    var CellRef = Ref.extend({\r\n        ref: 'cell',\r\n        init: function CellRef(row, col, rel) {\r\n            this.row = row;\r\n            this.col = col;\r\n            this.rel = rel || 0;\r\n        },\r\n        clone: function () {\r\n            return new CellRef(this.row, this.col, this.rel).setSheet(this.sheet, this.hasSheet());\r\n        },\r\n        intersect: function (ref) {\r\n            if (ref instanceof CellRef) {\r\n                if (this.eq(ref)) {\r\n                    return this;\r\n                } else {\r\n                    return NULL;\r\n                }\r\n            }\r\n            return ref.intersect(this);\r\n        },\r\n        print: function (trow, tcol) {\r\n            var col = this.col, row = this.row, rel = this.rel, abs;\r\n            if (trow == null) {\r\n                var sheet = this.hasSheet() ? displaySheet(this.sheet) + '!' : '';\r\n                if (isFinite(col)) {\r\n                    col = rel & 1 ? 'C[' + col + ']' : 'C' + (col + 1);\r\n                } else {\r\n                    col = '';\r\n                }\r\n                if (isFinite(row)) {\r\n                    row = rel & 2 ? 'R[' + row + ']' : 'R' + (row + 1);\r\n                } else {\r\n                    row = '';\r\n                }\r\n                return sheet + row + col;\r\n            } else {\r\n                abs = this.absolute(trow, tcol);\r\n                return abs.valid() ? displayRef(this._hasSheet && this.sheet, abs.row, abs.col, rel) : '#REF!';\r\n            }\r\n        },\r\n        absolute: function (arow, acol) {\r\n            var ret = this.clone();\r\n            if (ret.rel & 3 === 0) {\r\n                return ret;\r\n            }\r\n            if (ret.rel & 1) {\r\n                ret.col += acol;\r\n            }\r\n            if (ret.rel & 2) {\r\n                ret.row += arow;\r\n            }\r\n            ret.rel = 0;\r\n            return ret;\r\n        },\r\n        toRangeRef: function () {\r\n            return new RangeRef(this, this);\r\n        },\r\n        relative: function (arow, acol, rel) {\r\n            if (rel == null) {\r\n                rel = this.rel;\r\n            }\r\n            var row = rel & 2 ? this.row - arow : this.row;\r\n            var col = rel & 1 ? this.col - acol : this.col;\r\n            return new CellRef(row, col, rel).setSheet(this.sheet, this.hasSheet());\r\n        },\r\n        height: function () {\r\n            return 1;\r\n        },\r\n        width: function () {\r\n            return 1;\r\n        },\r\n        toString: function () {\r\n            return displayRef(null, this.row, this.col, 3);\r\n        },\r\n        isCell: function () {\r\n            return true;\r\n        },\r\n        leftColumn: function () {\r\n            return this;\r\n        },\r\n        rightColumn: function () {\r\n            return this;\r\n        },\r\n        topRow: function () {\r\n            return this;\r\n        },\r\n        bottomRow: function () {\r\n            return this;\r\n        },\r\n        forEachRow: function (callback) {\r\n            callback(this.toRangeRef());\r\n        },\r\n        forEachColumn: function (callback) {\r\n            callback(this.toRangeRef());\r\n        },\r\n        adjust: function (row, col, trow, tcol, forRow, start, delta) {\r\n            var ref = this.absolute(row, col);\r\n            if (forRow) {\r\n                if (ref.row >= start) {\r\n                    if (delta < 0 && ref.row < start - delta) {\r\n                        return NULL;\r\n                    }\r\n                    ref.row += delta;\r\n                }\r\n            } else {\r\n                if (ref.col >= start) {\r\n                    if (delta < 0 && ref.col < start - delta) {\r\n                        return NULL;\r\n                    }\r\n                    ref.col += delta;\r\n                }\r\n            }\r\n            if (trow != null && tcol != null) {\r\n                ref = ref.relative(trow, tcol, this.rel);\r\n            }\r\n            return ref;\r\n        },\r\n        valid: function () {\r\n            if (this.rel) {\r\n                throw new Error('valid() called on relative reference');\r\n            }\r\n            var col = this.col, row = this.row;\r\n            return !(isFinite(col) && col < 0 || isFinite(row) && row < 0);\r\n        }\r\n    });\r\n    var RangeRef = Ref.extend({\r\n        ref: 'range',\r\n        init: function RangeRef(tl, br) {\r\n            if (tl._hasSheet && br._hasSheet && tl.sheet.toLowerCase() != br.sheet.toLowerCase()) {\r\n                this.endSheet = br.sheet;\r\n            }\r\n            this.topLeft = new CellRef(tl.row, tl.col, tl.rel);\r\n            this.bottomRight = new CellRef(br.row, br.col, br.rel);\r\n            this.normalize();\r\n        },\r\n        clone: function () {\r\n            return new RangeRef(this.topLeft.clone(), this.bottomRight.clone()).setSheet(this.sheet, this.hasSheet());\r\n        },\r\n        _containsRange: function (range) {\r\n            return this._containsCell(range.topLeft) && this._containsCell(range.bottomRight);\r\n        },\r\n        _containsCell: function (cell) {\r\n            return cell.sheet == this.sheet && cell.row >= this.topLeft.row && cell.col >= this.topLeft.col && cell.row <= this.bottomRight.row && cell.col <= this.bottomRight.col;\r\n        },\r\n        contains: function (ref) {\r\n            if (ref instanceof Array) {\r\n                var that = this;\r\n                return ref.some(function (_ref) {\r\n                    return that.contains(_ref);\r\n                });\r\n            }\r\n            if (ref instanceof CellRef) {\r\n                return this._containsCell(ref);\r\n            }\r\n            if (ref instanceof RangeRef) {\r\n                return this._containsRange(ref);\r\n            }\r\n            return false;\r\n        },\r\n        _intersectRange: function (ref) {\r\n            if (this.sheet != ref.sheet) {\r\n                return NULL;\r\n            }\r\n            var a_left = this.topLeft.col;\r\n            var a_top = this.topLeft.row;\r\n            var a_right = this.bottomRight.col;\r\n            var a_bottom = this.bottomRight.row;\r\n            var b_left = ref.topLeft.col;\r\n            var b_top = ref.topLeft.row;\r\n            var b_right = ref.bottomRight.col;\r\n            var b_bottom = ref.bottomRight.row;\r\n            if (a_left <= b_right && b_left <= a_right && a_top <= b_bottom && b_top <= a_bottom) {\r\n                return new RangeRef(new CellRef(Math.max(a_top, b_top), Math.max(a_left, b_left)), new CellRef(Math.min(a_bottom, b_bottom), Math.min(a_right, b_right))).setSheet(this.sheet, this.hasSheet());\r\n            } else {\r\n                return NULL;\r\n            }\r\n        },\r\n        intersect: function (ref) {\r\n            if (ref === NULL) {\r\n                return ref;\r\n            }\r\n            if (ref instanceof CellRef) {\r\n                return this._containsCell(ref) ? ref : NULL;\r\n            }\r\n            if (ref instanceof RangeRef) {\r\n                return this._intersectRange(ref).simplify();\r\n            }\r\n            if (ref instanceof UnionRef) {\r\n                return ref.intersect(this);\r\n            }\r\n            throw new Error('Unknown reference');\r\n        },\r\n        simplify: function () {\r\n            if (this.isCell()) {\r\n                return new CellRef(this.topLeft.row, this.topLeft.col, this.topLeft.rel).setSheet(this.sheet, this.hasSheet());\r\n            }\r\n            return this;\r\n        },\r\n        normalize: function () {\r\n            var a = this.topLeft, b = this.bottomRight;\r\n            var r1 = a.row, c1 = a.col, r2 = b.row, c2 = b.col;\r\n            var rr1 = a.rel & 2, rc1 = a.rel & 1;\r\n            var rr2 = b.rel & 2, rc2 = b.rel & 1;\r\n            var tmp, changes = false;\r\n            if (r1 > r2) {\r\n                changes = true;\r\n                tmp = r1;\r\n                r1 = r2;\r\n                r2 = tmp;\r\n                tmp = rr1;\r\n                rr1 = rr2;\r\n                rr2 = tmp;\r\n            }\r\n            if (c1 > c2) {\r\n                changes = true;\r\n                tmp = c1;\r\n                c1 = c2;\r\n                c2 = tmp;\r\n                tmp = rc1;\r\n                rc1 = rc2;\r\n                rc2 = tmp;\r\n            }\r\n            if (changes) {\r\n                this.topLeft = new CellRef(r1, c1, rc1 | rr1);\r\n                this.bottomRight = new CellRef(r2, c2, rc2 | rr2);\r\n            }\r\n            return this;\r\n        },\r\n        print: function (trow, tcol) {\r\n            var abs = this.absolute(trow, tcol);\r\n            if (abs.valid()) {\r\n                var ret = this.topLeft.print(trow, tcol) + ':' + this.bottomRight.print(trow, tcol);\r\n                if (this.hasSheet()) {\r\n                    ret = displaySheet(this.sheet) + (this.endSheet ? ':' + displaySheet(this.endSheet) : '') + '!' + ret;\r\n                }\r\n                return ret;\r\n            }\r\n            return '#REF!';\r\n        },\r\n        absolute: function (arow, acol) {\r\n            return new RangeRef(this.topLeft.absolute(arow, acol), this.bottomRight.absolute(arow, acol)).setSheet(this.sheet, this.hasSheet());\r\n        },\r\n        relative: function (arow, acol, relTL, relBR) {\r\n            if (relBR == null) {\r\n                relBR = relTL;\r\n            }\r\n            return new RangeRef(this.topLeft.relative(arow, acol, relTL), this.bottomRight.relative(arow, acol, relBR)).setSheet(this.sheet, this.hasSheet());\r\n        },\r\n        height: function () {\r\n            if (this.topLeft.rel != this.bottomRight.rel) {\r\n                throw new Error('Mixed relative/absolute references');\r\n            }\r\n            return this.bottomRight.row - this.topLeft.row + 1;\r\n        },\r\n        width: function () {\r\n            if (this.topLeft.rel != this.bottomRight.rel) {\r\n                throw new Error('Mixed relative/absolute references');\r\n            }\r\n            return this.bottomRight.col - this.topLeft.col + 1;\r\n        },\r\n        collapse: function () {\r\n            return this.topLeft.toRangeRef();\r\n        },\r\n        leftColumn: function () {\r\n            return new RangeRef(this.topLeft, new CellRef(this.bottomRight.row, this.topLeft.col));\r\n        },\r\n        rightColumn: function () {\r\n            return new RangeRef(new CellRef(this.topLeft.row, this.bottomRight.col), this.bottomRight);\r\n        },\r\n        topRow: function () {\r\n            return new RangeRef(this.topLeft, new CellRef(this.topLeft.row, this.bottomRight.col));\r\n        },\r\n        bottomRow: function () {\r\n            return new RangeRef(new CellRef(this.bottomRight.row, this.topLeft.col), this.bottomRight);\r\n        },\r\n        toRangeRef: function () {\r\n            return this;\r\n        },\r\n        toRow: function (row) {\r\n            return new RangeRef(new CellRef(this.topLeft.row + row, this.topLeft.col), new CellRef(this.topLeft.row + row, this.bottomRight.col));\r\n        },\r\n        toColumn: function (col) {\r\n            return new RangeRef(new CellRef(this.topLeft.row, this.topLeft.col + col), new CellRef(this.bottomRight.row, this.topLeft.col + col));\r\n        },\r\n        forEachRow: function (callback) {\r\n            var startRow = this.topLeft.row;\r\n            var endRow = this.bottomRight.row;\r\n            var startCol = this.topLeft.col;\r\n            var endCol = this.bottomRight.col;\r\n            for (var i = startRow; i <= endRow; i++) {\r\n                callback(new RangeRef(new CellRef(i, startCol), new CellRef(i, endCol)));\r\n            }\r\n        },\r\n        forEachColumn: function (callback) {\r\n            var startRow = this.topLeft.row;\r\n            var endRow = this.bottomRight.row;\r\n            var startCol = this.topLeft.col;\r\n            var endCol = this.bottomRight.col;\r\n            for (var i = startCol; i <= endCol; i++) {\r\n                callback(new RangeRef(new CellRef(startRow, i), new CellRef(endRow, i)));\r\n            }\r\n        },\r\n        intersecting: function (refs) {\r\n            return refs.filter(function (ref) {\r\n                return ref.toRangeRef().intersects(this);\r\n            }, this);\r\n        },\r\n        union: function (refs, callback) {\r\n            var intersecting = this.intersecting(refs);\r\n            var topLeftRow = this.topLeft.row;\r\n            var topLeftCol = this.topLeft.col;\r\n            var bottomRightRow = this.bottomRight.row;\r\n            var bottomRightCol = this.bottomRight.col;\r\n            var modified = false;\r\n            intersecting.forEach(function (ref) {\r\n                ref = ref.toRangeRef();\r\n                if (ref.topLeft.row < topLeftRow) {\r\n                    modified = true;\r\n                    topLeftRow = ref.topLeft.row;\r\n                }\r\n                if (ref.topLeft.col < topLeftCol) {\r\n                    modified = true;\r\n                    topLeftCol = ref.topLeft.col;\r\n                }\r\n                if (ref.bottomRight.row > bottomRightRow) {\r\n                    modified = true;\r\n                    bottomRightRow = ref.bottomRight.row;\r\n                }\r\n                if (ref.bottomRight.col > bottomRightCol) {\r\n                    modified = true;\r\n                    bottomRightCol = ref.bottomRight.col;\r\n                }\r\n                if (callback) {\r\n                    callback(ref);\r\n                }\r\n            });\r\n            var result = new RangeRef(new CellRef(topLeftRow, topLeftCol), new CellRef(bottomRightRow, bottomRightCol));\r\n            if (modified) {\r\n                return result.union(refs, callback);\r\n            } else {\r\n                return result;\r\n            }\r\n        },\r\n        resize: function (options) {\r\n            var limit = Math.max.bind(Math, 0);\r\n            function num(value) {\r\n                return value || 0;\r\n            }\r\n            var top = this.topLeft.row + num(options.top);\r\n            var left = this.topLeft.col + num(options.left);\r\n            var bottom = this.bottomRight.row + num(options.bottom);\r\n            var right = this.bottomRight.col + num(options.right);\r\n            if (left < 0 && right < 0 || top < 0 && bottom < 0) {\r\n                return NULL;\r\n            } else if (top <= bottom && left <= right) {\r\n                return new RangeRef(new CellRef(limit(top), limit(left)), new CellRef(limit(bottom), limit(right)));\r\n            } else {\r\n                return NULL;\r\n            }\r\n        },\r\n        move: function (rows, cols) {\r\n            return new RangeRef(new CellRef(this.topLeft.row + rows, this.topLeft.col + cols), new CellRef(this.bottomRight.row + rows, this.bottomRight.col + cols));\r\n        },\r\n        first: function () {\r\n            return this.topLeft;\r\n        },\r\n        isCell: function () {\r\n            return !this.endSheet && this.topLeft.eq(this.bottomRight);\r\n        },\r\n        toString: function () {\r\n            return this.topLeft + ':' + this.bottomRight;\r\n        },\r\n        adjust: function (row, col, trow, tcol, forRow, start, delta) {\r\n            var tl = this.topLeft.adjust(row, col, trow, tcol, forRow, start, delta);\r\n            var tr = this.bottomRight.adjust(row, col, trow, tcol, forRow, start, delta);\r\n            if (tl === NULL && tr === NULL) {\r\n                return NULL;\r\n            }\r\n            if (tl === NULL) {\r\n                tl = this.topLeft.absolute(row, col);\r\n                if (forRow) {\r\n                    tl.row = start;\r\n                } else {\r\n                    tl.col = start;\r\n                }\r\n                if (trow != null && tcol != null) {\r\n                    tl = tl.relative(trow, tcol, this.topLeft.rel);\r\n                }\r\n            } else if (tr === NULL) {\r\n                tr = this.bottomRight.absolute(row, col);\r\n                if (forRow) {\r\n                    tr.row = start - 1;\r\n                } else {\r\n                    tr.col = start - 1;\r\n                }\r\n                if (trow != null && tcol != null) {\r\n                    tr = tr.relative(trow, tcol, this.bottomRight.rel);\r\n                }\r\n            }\r\n            return new RangeRef(tl, tr).setSheet(this.sheet, this.hasSheet()).simplify();\r\n        },\r\n        valid: function () {\r\n            return this.topLeft.valid() && this.bottomRight.valid();\r\n        }\r\n    });\r\n    var UnionRef = Ref.extend({\r\n        init: function UnionRef(refs) {\r\n            this.refs = refs;\r\n            this.length = refs.length;\r\n        },\r\n        clone: function () {\r\n            return new UnionRef(this.refs.slice());\r\n        },\r\n        intersect: function (ref) {\r\n            var a = [];\r\n            for (var i = 0; i < this.length; ++i) {\r\n                var x = ref.intersect(this.refs[i]);\r\n                if (x !== NULL) {\r\n                    a.push(x);\r\n                }\r\n            }\r\n            if (a.length > 0) {\r\n                return new UnionRef(a).simplify();\r\n            }\r\n            return NULL;\r\n        },\r\n        simplify: function () {\r\n            var u = new UnionRef(this.refs.reduce(function (a, ref) {\r\n                ref = ref.simplify();\r\n                if (ref !== NULL) {\r\n                    a.push(ref);\r\n                }\r\n                return a;\r\n            }, []));\r\n            if (u.empty()) {\r\n                return NULL;\r\n            }\r\n            if (u.single()) {\r\n                return u.refs[0];\r\n            }\r\n            return u;\r\n        },\r\n        absolute: function (arow, acol) {\r\n            return new UnionRef(this.refs.map(function (ref) {\r\n                return ref.absolute(arow, acol);\r\n            }));\r\n        },\r\n        forEach: function (callback, obj) {\r\n            this.refs.forEach(callback, obj);\r\n        },\r\n        toRangeRef: function () {\r\n            return this.refs[0].toRangeRef();\r\n        },\r\n        contains: function (theRef) {\r\n            return this.refs.some(function (ref) {\r\n                return ref.contains(theRef);\r\n            });\r\n        },\r\n        map: function (callback, obj) {\r\n            return new UnionRef(this.refs.map(callback, obj));\r\n        },\r\n        first: function () {\r\n            return this.refs[0].first();\r\n        },\r\n        lastRange: function () {\r\n            return this.refs[this.length - 1];\r\n        },\r\n        size: function () {\r\n            return this.length;\r\n        },\r\n        single: function () {\r\n            return this.length == 1;\r\n        },\r\n        empty: function () {\r\n            return this.length === 0;\r\n        },\r\n        isCell: function () {\r\n            return this.single() && this.refs[0].isCell();\r\n        },\r\n        rangeAt: function (index) {\r\n            return this.refs[index];\r\n        },\r\n        nextRangeIndex: function (index) {\r\n            if (index === this.length - 1) {\r\n                return 0;\r\n            } else {\r\n                return index + 1;\r\n            }\r\n        },\r\n        previousRangeIndex: function (index) {\r\n            if (index === 0) {\r\n                return this.length - 1;\r\n            } else {\r\n                return index - 1;\r\n            }\r\n        },\r\n        concat: function (ref) {\r\n            return new UnionRef(this.refs.concat([ref]));\r\n        },\r\n        print: function (row, col) {\r\n            return this.refs.map(function (ref) {\r\n                return ref.print(row, col);\r\n            }).join(',');\r\n        },\r\n        replaceAt: function (index, ref) {\r\n            var newRefs = this.refs.slice();\r\n            newRefs.splice(index, 1, ref);\r\n            return new UnionRef(newRefs);\r\n        },\r\n        leftColumn: function () {\r\n            return this.map(function (ref) {\r\n                return ref.leftColumn();\r\n            });\r\n        },\r\n        rightColumn: function () {\r\n            return this.map(function (ref) {\r\n                return ref.rightColumn();\r\n            });\r\n        },\r\n        topRow: function () {\r\n            return this.map(function (ref) {\r\n                return ref.topRow();\r\n            });\r\n        },\r\n        bottomRow: function () {\r\n            return this.map(function (ref) {\r\n                return ref.bottomRow();\r\n            });\r\n        },\r\n        forEachRow: function (callback) {\r\n            this.forEach(function (ref) {\r\n                ref.forEachRow(callback);\r\n            });\r\n        },\r\n        forEachColumn: function (callback) {\r\n            this.forEach(function (ref) {\r\n                ref.forEachColumn(callback);\r\n            });\r\n        },\r\n        adjust: function (row, col, trow, tcol, forRow, start, delta) {\r\n            return this.map(function (ref) {\r\n                return ref.adjust(row, col, trow, tcol, forRow, start, delta);\r\n            }).simplify();\r\n        },\r\n        toString: function () {\r\n            return this.refs.map(function (ref) {\r\n                return ref.toString();\r\n            }).join(', ');\r\n        },\r\n        valid: function () {\r\n            for (var i = this.refs.length; --i >= 0;) {\r\n                if (this.refs[i].valid()) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n    });\r\n    spreadsheet.NULLREF = NULL;\r\n    spreadsheet.SHEETREF = new RangeRef(new CellRef(0, 0), new CellRef(Infinity, Infinity));\r\n    spreadsheet.FIRSTREF = new CellRef(0, 0);\r\n    spreadsheet.Ref = Ref;\r\n    spreadsheet.NameRef = NameRef;\r\n    spreadsheet.CellRef = CellRef;\r\n    spreadsheet.RangeRef = RangeRef;\r\n    spreadsheet.UnionRef = UnionRef;\r\n    spreadsheet.SHEETREF.print = function () {\r\n        return '#SHEET';\r\n    };\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/autofillcalculator', ['kendo.core'], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var RangeRef = kendo.spreadsheet.RangeRef;\r\n        var CellRef = kendo.spreadsheet.CellRef;\r\n        var AutoFillCalculator = kendo.Class.extend({\r\n            init: function (grid) {\r\n                this._grid = grid;\r\n            },\r\n            rectIsVertical: function (start, end, x, y) {\r\n                var startRect = this._grid.rectangle(start.toRangeRef());\r\n                var endRect = this._grid.rectangle(end.toRangeRef());\r\n                return Math.abs(endRect[y] - startRect[y]) > Math.abs(startRect[x] - endRect[x]);\r\n            },\r\n            autoFillDest: function (selection, cursor) {\r\n                var topLeft = selection.topLeft;\r\n                var bottomRight = selection.bottomRight;\r\n                var quadrant;\r\n                var lower = cursor.row >= topLeft.row;\r\n                var further = cursor.col >= topLeft.col;\r\n                if (lower) {\r\n                    quadrant = further ? 4 : 3;\r\n                } else {\r\n                    quadrant = further ? 2 : 1;\r\n                }\r\n                var pivot, opposite, cornerResult, expanding;\r\n                if (quadrant === 4) {\r\n                    pivot = topLeft;\r\n                    opposite = bottomRight;\r\n                    expanding = cursor.row > opposite.row || cursor.col > opposite.col;\r\n                    if (expanding) {\r\n                        cursor = new CellRef(Math.max(cursor.row, opposite.row), Math.max(cursor.col, opposite.col));\r\n                    }\r\n                    if (this.rectIsVertical(opposite, cursor, 'right', 'bottom')) {\r\n                        cornerResult = new CellRef(cursor.row, opposite.col);\r\n                    } else {\r\n                        cornerResult = new CellRef(opposite.row, cursor.col);\r\n                    }\r\n                } else if (quadrant === 3) {\r\n                    var bottomLeft = new CellRef(topLeft.col, bottomRight.row);\r\n                    if (cursor.row > bottomRight.row && this.rectIsVertical(bottomLeft, cursor, 'left', 'bottom')) {\r\n                        pivot = topLeft;\r\n                        cornerResult = new CellRef(cursor.row, bottomRight.col);\r\n                    } else {\r\n                        pivot = bottomRight;\r\n                        cornerResult = new CellRef(topLeft.row, cursor.col);\r\n                    }\r\n                } else if (quadrant === 2) {\r\n                    var topRight = new CellRef(topLeft.row, bottomRight.col);\r\n                    if (cursor.col > bottomRight.col && !this.rectIsVertical(topRight, cursor, 'right', 'top')) {\r\n                        pivot = topLeft;\r\n                        cornerResult = new CellRef(bottomRight.row, cursor.col);\r\n                    } else {\r\n                        pivot = bottomRight;\r\n                        cornerResult = new CellRef(cursor.row, topLeft.col);\r\n                    }\r\n                } else {\r\n                    pivot = bottomRight;\r\n                    if (this.rectIsVertical(topLeft, cursor, 'left', 'top')) {\r\n                        cornerResult = new CellRef(cursor.row, topLeft.col);\r\n                    } else {\r\n                        cornerResult = new CellRef(topLeft.row, cursor.col);\r\n                    }\r\n                }\r\n                return this._grid.normalize(new RangeRef(pivot, cornerResult));\r\n            }\r\n        });\r\n        kendo.spreadsheet.AutoFillCalculator = AutoFillCalculator;\r\n    }(kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/navigator', [\r\n        'kendo.core',\r\n        'spreadsheet/autofillcalculator'\r\n    ], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var RangeRef = kendo.spreadsheet.RangeRef;\r\n        var CellRef = kendo.spreadsheet.CellRef;\r\n        var EdgeNavigator = kendo.Class.extend({\r\n            init: function (field, axis, rangeGetter, union) {\r\n                this.rangeGetter = rangeGetter;\r\n                this.prevLeft = function (index) {\r\n                    var current = union(this.range(index));\r\n                    var range = this.range(axis.prevVisible(current.topLeft[field]));\r\n                    return union(range).topLeft[field];\r\n                };\r\n                this.nextRight = function (index) {\r\n                    var current = union(this.range(index));\r\n                    var range = this.range(axis.nextVisible(current.bottomRight[field]));\r\n                    return union(range).bottomRight[field];\r\n                };\r\n                this.nextLeft = function (index) {\r\n                    var range = union(this.range(index));\r\n                    return axis.nextVisible(range.bottomRight[field]);\r\n                };\r\n                this.prevRight = function (index) {\r\n                    var range = union(this.range(index));\r\n                    return axis.prevVisible(range.topLeft[field]);\r\n                };\r\n            },\r\n            boundary: function (top, bottom) {\r\n                this.top = top;\r\n                this.bottom = bottom;\r\n            },\r\n            range: function (index) {\r\n                return this.rangeGetter(index, this.top, this.bottom);\r\n            }\r\n        });\r\n        var SheetNavigator = kendo.Class.extend({\r\n            init: function (sheet) {\r\n                this._sheet = sheet;\r\n                this.columns = this._sheet._grid._columns;\r\n                this.autoFillCalculator = new kendo.spreadsheet.AutoFillCalculator(sheet._grid);\r\n                this.colEdge = new EdgeNavigator('col', this._sheet._grid._columns, this.columnRange.bind(this), this.union.bind(this));\r\n                this.rowEdge = new EdgeNavigator('row', this._sheet._grid._rows, this.rowRange.bind(this), this.union.bind(this));\r\n            },\r\n            height: function (height) {\r\n                this._viewPortHeight = height;\r\n            },\r\n            union: function (ref) {\r\n                return this._sheet.unionWithMerged(ref);\r\n            },\r\n            columnRange: function (col, topRow, bottomRow) {\r\n                return this._sheet._ref(topRow, col, bottomRow - topRow, 1);\r\n            },\r\n            rowRange: function (row, leftCol, rightCol) {\r\n                return this._sheet._ref(row, leftCol, 1, rightCol - leftCol);\r\n            },\r\n            selectionIncludesMergedCells: function () {\r\n                return this._sheet.select().contains(this._sheet._mergedCells);\r\n            },\r\n            setSelectionValue: function (value) {\r\n                var selection = this._sheet.selection();\r\n                setTimeout(function () {\r\n                    selection.value(value());\r\n                });\r\n            },\r\n            selectAll: function () {\r\n                this._sheet.select(this._sheet._sheetRef);\r\n            },\r\n            select: function (ref, mode, addToExisting) {\r\n                ref = this.refForMode(ref, mode);\r\n                if (addToExisting) {\r\n                    ref = this._sheet.select().concat(ref);\r\n                }\r\n                this._sheet.select(ref);\r\n            },\r\n            refForMode: function (ref, mode) {\r\n                var grid = this._sheet._grid;\r\n                switch (mode) {\r\n                case 'range':\r\n                    ref = grid.normalize(ref);\r\n                    break;\r\n                case 'row':\r\n                    ref = grid.rowRef(ref.row);\r\n                    break;\r\n                case 'column':\r\n                    ref = grid.colRef(ref.col);\r\n                    break;\r\n                case 'sheet':\r\n                    ref = this._sheet._sheetRef;\r\n                    break;\r\n                }\r\n                return ref;\r\n            },\r\n            startSelection: function (ref, mode, addToExisting, shiftKey) {\r\n                if (mode == 'autofill') {\r\n                    this._sheet.startAutoFill();\r\n                } else if (shiftKey && mode == 'range') {\r\n                    var range = new RangeRef(this._sheet.activeCell().first(), ref);\r\n                    this._sheet.select(range, false, false);\r\n                    this._sheet.startSelection();\r\n                } else {\r\n                    this._sheet.startSelection();\r\n                    this.select(ref, mode, addToExisting);\r\n                }\r\n            },\r\n            completeSelection: function () {\r\n                this._sheet.completeSelection();\r\n            },\r\n            selectForContextMenu: function (ref, mode) {\r\n                var sheet = this._sheet;\r\n                if (!sheet.select().contains(this.refForMode(ref, mode))) {\r\n                    this.select(ref, mode);\r\n                }\r\n            },\r\n            modifySelection: function (action) {\r\n                var direction = this.determineDirection(action);\r\n                var sheet = this._sheet;\r\n                var viewPortHeight = this._viewPortHeight;\r\n                var rows = sheet._grid._rows;\r\n                var columns = sheet._grid._columns;\r\n                var originalSelection = sheet.currentOriginalSelectionRange();\r\n                var selection = sheet.select().toRangeRef();\r\n                var activeCell = sheet.activeCell();\r\n                var topLeft = originalSelection.topLeft.clone();\r\n                var bottomRight = originalSelection.bottomRight.clone();\r\n                var scrollInto;\r\n                this.colEdge.boundary(selection.topLeft.row, selection.bottomRight.row);\r\n                this.rowEdge.boundary(selection.topLeft.col, selection.bottomRight.col);\r\n                switch (direction) {\r\n                case 'expand-left':\r\n                    topLeft.col = this.colEdge.prevLeft(topLeft.col);\r\n                    scrollInto = topLeft;\r\n                    break;\r\n                case 'shrink-right':\r\n                    topLeft.col = this.colEdge.nextLeft(topLeft.col);\r\n                    scrollInto = topLeft;\r\n                    break;\r\n                case 'expand-right':\r\n                    bottomRight.col = this.colEdge.nextRight(bottomRight.col);\r\n                    scrollInto = bottomRight;\r\n                    break;\r\n                case 'shrink-left':\r\n                    bottomRight.col = this.colEdge.prevRight(bottomRight.col);\r\n                    scrollInto = bottomRight;\r\n                    break;\r\n                case 'expand-up':\r\n                    topLeft.row = this.rowEdge.prevLeft(topLeft.row);\r\n                    scrollInto = topLeft;\r\n                    break;\r\n                case 'shrink-down':\r\n                    topLeft.row = this.rowEdge.nextLeft(topLeft.row);\r\n                    scrollInto = topLeft;\r\n                    break;\r\n                case 'expand-down':\r\n                    bottomRight.row = this.rowEdge.nextRight(bottomRight.row);\r\n                    scrollInto = bottomRight;\r\n                    break;\r\n                case 'shrink-up':\r\n                    bottomRight.row = this.rowEdge.prevRight(bottomRight.row);\r\n                    scrollInto = bottomRight;\r\n                    break;\r\n                case 'expand-page-up':\r\n                    topLeft.row = rows.prevPage(topLeft.row, viewPortHeight);\r\n                    break;\r\n                case 'shrink-page-up':\r\n                    bottomRight.row = rows.prevPage(bottomRight.row, viewPortHeight);\r\n                    break;\r\n                case 'expand-page-down':\r\n                    bottomRight.row = rows.nextPage(bottomRight.row, viewPortHeight);\r\n                    break;\r\n                case 'shrink-page-down':\r\n                    topLeft.row = rows.nextPage(topLeft.row, viewPortHeight);\r\n                    break;\r\n                case 'first-col':\r\n                    topLeft.col = columns.firstVisible();\r\n                    bottomRight.col = activeCell.bottomRight.col;\r\n                    scrollInto = topLeft;\r\n                    break;\r\n                case 'last-col':\r\n                    bottomRight.col = columns.lastVisible();\r\n                    topLeft.col = activeCell.topLeft.col;\r\n                    scrollInto = bottomRight;\r\n                    break;\r\n                case 'first-row':\r\n                    topLeft.row = rows.firstVisible();\r\n                    bottomRight.row = activeCell.bottomRight.row;\r\n                    scrollInto = topLeft;\r\n                    break;\r\n                case 'last-row':\r\n                    bottomRight.row = rows.lastVisible();\r\n                    topLeft.row = activeCell.topLeft.row;\r\n                    scrollInto = bottomRight;\r\n                    break;\r\n                case 'last':\r\n                    bottomRight.row = rows.lastVisible();\r\n                    bottomRight.col = columns.lastVisible();\r\n                    topLeft = activeCell.topLeft;\r\n                    scrollInto = bottomRight;\r\n                    break;\r\n                case 'first':\r\n                    topLeft.row = rows.firstVisible();\r\n                    topLeft.col = columns.firstVisible();\r\n                    bottomRight = activeCell.bottomRight;\r\n                    scrollInto = topLeft;\r\n                    break;\r\n                }\r\n                var newSelection = new RangeRef(topLeft, bottomRight);\r\n                if (!this.union(newSelection).intersects(activeCell)) {\r\n                    this.modifySelection(direction.replace('shrink', 'expand'));\r\n                    return;\r\n                }\r\n                if (scrollInto) {\r\n                    sheet.focus(scrollInto);\r\n                }\r\n                this.updateCurrentSelectionRange(newSelection);\r\n            },\r\n            moveActiveCell: function (direction) {\r\n                var sheet = this._sheet;\r\n                var activeCell = sheet.activeCell();\r\n                var topLeft = activeCell.topLeft;\r\n                var bottomRight = activeCell.bottomRight;\r\n                var cell = sheet.originalActiveCell();\r\n                var rows = sheet._grid._rows;\r\n                var columns = sheet._grid._columns;\r\n                var row = cell.row;\r\n                var column = cell.col;\r\n                switch (direction) {\r\n                case 'left':\r\n                    column = columns.prevVisible(topLeft.col);\r\n                    break;\r\n                case 'up':\r\n                    row = rows.prevVisible(topLeft.row);\r\n                    break;\r\n                case 'right':\r\n                    column = columns.nextVisible(bottomRight.col);\r\n                    break;\r\n                case 'down':\r\n                    row = rows.nextVisible(bottomRight.row);\r\n                    break;\r\n                case 'first-col':\r\n                    column = columns.firstVisible();\r\n                    break;\r\n                case 'last-col':\r\n                    column = columns.lastVisible();\r\n                    break;\r\n                case 'first-row':\r\n                    row = rows.firstVisible();\r\n                    break;\r\n                case 'last-row':\r\n                    row = rows.lastVisible();\r\n                    break;\r\n                case 'last':\r\n                    row = rows.lastVisible();\r\n                    column = columns.lastVisible();\r\n                    break;\r\n                case 'first':\r\n                    row = rows.firstVisible();\r\n                    column = columns.firstVisible();\r\n                    break;\r\n                case 'next-page':\r\n                    row = rows.nextPage(bottomRight.row, this._viewPortHeight);\r\n                    break;\r\n                case 'prev-page':\r\n                    row = rows.prevPage(bottomRight.row, this._viewPortHeight);\r\n                    break;\r\n                }\r\n                sheet.select(new CellRef(row, column));\r\n            },\r\n            navigateInSelection: function (direction) {\r\n                var sheet = this._sheet;\r\n                var activeCell = sheet.activeCell();\r\n                var topLeft = activeCell.topLeft;\r\n                var cell = sheet.originalActiveCell();\r\n                var rows = sheet._grid._rows;\r\n                var columns = sheet._grid._columns;\r\n                var row = cell.row;\r\n                var column = cell.col;\r\n                var selection = sheet.currentNavigationRange();\r\n                var selTopLeft = selection.topLeft;\r\n                var selBottomRight = selection.bottomRight;\r\n                var done = false;\r\n                var topLeftCol = topLeft.col;\r\n                var topLeftRow = topLeft.row;\r\n                while (!done) {\r\n                    var current = new CellRef(row, column);\r\n                    switch (direction) {\r\n                    case 'next':\r\n                        if (selBottomRight.eq(current)) {\r\n                            selection = sheet.nextNavigationRange();\r\n                            row = selection.topLeft.row;\r\n                            column = selection.topLeft.col;\r\n                        } else {\r\n                            column = columns.nextVisible(topLeftCol, true);\r\n                            if (column > selBottomRight.col) {\r\n                                column = selTopLeft.col;\r\n                                row = rows.nextVisible(row, true);\r\n                            }\r\n                        }\r\n                        break;\r\n                    case 'previous':\r\n                        if (selTopLeft.eq(current)) {\r\n                            selection = sheet.previousNavigationRange();\r\n                            row = selection.bottomRight.row;\r\n                            column = selection.bottomRight.col;\r\n                        } else {\r\n                            column = columns.prevVisible(topLeftCol, true);\r\n                            if (column < selTopLeft.col) {\r\n                                column = selBottomRight.col;\r\n                                row = rows.prevVisible(row, true);\r\n                            }\r\n                        }\r\n                        break;\r\n                    case 'lower':\r\n                        if (selBottomRight.eq(current)) {\r\n                            selection = sheet.nextNavigationRange();\r\n                            row = selection.topLeft.row;\r\n                            column = selection.topLeft.col;\r\n                        } else {\r\n                            row = rows.nextVisible(topLeftRow, true);\r\n                            if (row > selBottomRight.row) {\r\n                                row = selTopLeft.row;\r\n                                column = columns.nextVisible(column, true);\r\n                            }\r\n                        }\r\n                        break;\r\n                    case 'upper':\r\n                        if (selTopLeft.eq(current)) {\r\n                            selection = sheet.previousNavigationRange();\r\n                            row = selection.bottomRight.row;\r\n                            column = selection.bottomRight.col;\r\n                        } else {\r\n                            row = rows.prevVisible(topLeftRow, true);\r\n                            if (row < selTopLeft.row) {\r\n                                row = selBottomRight.row;\r\n                                column = columns.prevVisible(column, true);\r\n                            }\r\n                        }\r\n                        break;\r\n                    default:\r\n                        throw new Error('Unknown entry navigation: ' + direction);\r\n                    }\r\n                    done = !this.shouldSkip(row, column);\r\n                    topLeftCol = column;\r\n                    topLeftRow = row;\r\n                }\r\n                if (sheet.singleCellSelection()) {\r\n                    sheet.select(new CellRef(row, column));\r\n                } else {\r\n                    sheet.activeCell(new CellRef(row, column));\r\n                }\r\n            },\r\n            extendSelection: function (ref, mode) {\r\n                var sheet = this._sheet;\r\n                var grid = sheet._grid;\r\n                if (mode === 'autofill') {\r\n                    this.resizeAutoFill(ref);\r\n                    return;\r\n                }\r\n                if (mode === 'range') {\r\n                    ref = grid.normalize(ref);\r\n                } else if (mode === 'row') {\r\n                    ref = grid.rowRef(ref.row).bottomRight;\r\n                } else if (mode === 'column') {\r\n                    ref = grid.colRef(ref.col).bottomRight;\r\n                }\r\n                var activeCell = sheet.originalActiveCell().toRangeRef();\r\n                this.updateCurrentSelectionRange(new RangeRef(activeCell.topLeft, ref));\r\n            },\r\n            shouldSkip: function (row, col) {\r\n                var ref = new CellRef(row, col);\r\n                var isMerged = false;\r\n                this._sheet.forEachMergedCell(function (merged) {\r\n                    if (merged.intersects(ref) && !merged.collapse().eq(ref)) {\r\n                        isMerged = true;\r\n                    }\r\n                });\r\n                return isMerged;\r\n            },\r\n            resizeAutoFill: function (ref) {\r\n                var sheet = this._sheet;\r\n                var selection = sheet.select();\r\n                var origin = sheet._autoFillOrigin;\r\n                var dest = this.autoFillCalculator.autoFillDest(selection, ref);\r\n                var punch = this.punch(selection, dest);\r\n                var hint, direction, row;\r\n                if (!punch) {\r\n                    var preview = sheet.range(dest)._previewFillFrom(sheet.range(origin));\r\n                    if (preview) {\r\n                        direction = preview.direction;\r\n                        var props = preview.props;\r\n                        if (direction === 0 || direction == 1) {\r\n                            row = props[props.length - 1];\r\n                            hint = row[row.length - 1].value;\r\n                        } else if (direction === 2) {\r\n                            row = props[0];\r\n                            hint = row[row.length - 1].value;\r\n                        } else if (direction === 3) {\r\n                            row = props[props.length - 1];\r\n                            hint = row[0].value;\r\n                        }\r\n                    }\r\n                }\r\n                sheet.updateAutoFill(dest, punch, hint, direction);\r\n            },\r\n            determineDirection: function (action) {\r\n                var selection = this._sheet.currentSelectionRange();\r\n                var activeCell = this._sheet.activeCell();\r\n                var leftMode = activeCell.topLeft.col == selection.topLeft.col;\r\n                var rightMode = activeCell.bottomRight.col == selection.bottomRight.col;\r\n                var topMode = activeCell.topLeft.row == selection.topLeft.row;\r\n                var bottomMode = activeCell.bottomRight.row == selection.bottomRight.row;\r\n                switch (action) {\r\n                case 'left':\r\n                    action = rightMode ? 'expand-left' : 'shrink-left';\r\n                    break;\r\n                case 'right':\r\n                    action = leftMode ? 'expand-right' : 'shrink-right';\r\n                    break;\r\n                case 'up':\r\n                    action = bottomMode ? 'expand-up' : 'shrink-up';\r\n                    break;\r\n                case 'down':\r\n                    action = topMode ? 'expand-down' : 'shrink-down';\r\n                    break;\r\n                case 'prev-page':\r\n                    action = bottomMode ? 'expand-page-up' : 'shrink-page-up';\r\n                    break;\r\n                case 'next-page':\r\n                    action = topMode ? 'expand-page-down' : 'shrink-page-down';\r\n                    break;\r\n                }\r\n                return action;\r\n            },\r\n            updateCurrentSelectionRange: function (ref) {\r\n                var sheet = this._sheet;\r\n                sheet.select(sheet.originalSelect().replaceAt(sheet.selectionRangeIndex(), ref), false);\r\n            },\r\n            punch: function (selection, subset) {\r\n                var punch;\r\n                if (subset.topLeft.eq(selection.topLeft)) {\r\n                    if (subset.bottomRight.row < selection.bottomRight.row) {\r\n                        var bottomRow = this.rowEdge.nextRight(subset.bottomRight.row);\r\n                        punch = new RangeRef(new CellRef(bottomRow, selection.topLeft.col), selection.bottomRight);\r\n                    } else if (subset.bottomRight.col < selection.bottomRight.col) {\r\n                        var bottomCol = this.colEdge.nextRight(subset.bottomRight.col);\r\n                        punch = new RangeRef(new CellRef(selection.topLeft.row, bottomCol), selection.bottomRight);\r\n                    }\r\n                }\r\n                return punch;\r\n            }\r\n        });\r\n        kendo.spreadsheet.SheetNavigator = SheetNavigator;\r\n    }(kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/axismanager', ['kendo.core'], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var AxisManager = kendo.Class.extend({\r\n            init: function (sheet) {\r\n                this._sheet = sheet;\r\n            },\r\n            forEachSelectedColumn: function (callback) {\r\n                var sheet = this._sheet;\r\n                sheet.batch(function () {\r\n                    sheet.select().forEachColumnIndex(function (index, i) {\r\n                        callback(sheet, index, i);\r\n                    });\r\n                }, {\r\n                    layout: true,\r\n                    recalc: true\r\n                });\r\n            },\r\n            forEachSelectedRow: function (callback) {\r\n                var sheet = this._sheet;\r\n                sheet.batch(function () {\r\n                    sheet.select().forEachRowIndex(function (index, i) {\r\n                        callback(sheet, index, i);\r\n                    });\r\n                }, {\r\n                    layout: true,\r\n                    recalc: true\r\n                });\r\n            },\r\n            includesHiddenColumns: function (ref) {\r\n                return this._sheet._grid._columns.includesHidden(ref.topLeft.col, ref.bottomRight.col);\r\n            },\r\n            includesHiddenRows: function (ref) {\r\n                return this._sheet._grid._rows.includesHidden(ref.topLeft.row, ref.bottomRight.row);\r\n            },\r\n            selectionIncludesHiddenColumns: function () {\r\n                return this.includesHiddenColumns(this._sheet.select());\r\n            },\r\n            selectionIncludesHiddenRows: function () {\r\n                return this.includesHiddenRows(this._sheet.select());\r\n            },\r\n            deleteSelectedColumns: function () {\r\n                this.forEachSelectedColumn(function (sheet, index, i) {\r\n                    sheet.deleteColumn(index - i);\r\n                });\r\n            },\r\n            deleteSelectedRows: function () {\r\n                this.forEachSelectedRow(function (sheet, index, i) {\r\n                    sheet.deleteRow(index - i);\r\n                });\r\n            },\r\n            hideSelectedColumns: function () {\r\n                this.forEachSelectedColumn(function (sheet, index) {\r\n                    sheet.hideColumn(index);\r\n                });\r\n                var sheet = this._sheet;\r\n                var ref = sheet.select().toRangeRef();\r\n                var left = ref.topLeft.col;\r\n                var right = ref.bottomRight.col;\r\n                var sel = null;\r\n                while (true) {\r\n                    var hasRight = right < sheet._columns._count;\r\n                    var hasLeft = left >= 0;\r\n                    if (!hasLeft && !hasRight) {\r\n                        break;\r\n                    }\r\n                    if (hasRight && !sheet.isHiddenColumn(right)) {\r\n                        sel = right;\r\n                        break;\r\n                    }\r\n                    if (hasLeft && !sheet.isHiddenColumn(left)) {\r\n                        sel = left;\r\n                        break;\r\n                    }\r\n                    left--;\r\n                    right++;\r\n                }\r\n                if (sel !== null) {\r\n                    ref = new kendo.spreadsheet.RangeRef(new kendo.spreadsheet.CellRef(0, sel), new kendo.spreadsheet.CellRef(sheet._rows._count - 1, sel));\r\n                    sheet.range(ref).select();\r\n                }\r\n            },\r\n            hideSelectedRows: function () {\r\n                this.forEachSelectedRow(function (sheet, index) {\r\n                    sheet.hideRow(index);\r\n                });\r\n                var sheet = this._sheet;\r\n                var ref = sheet.select().toRangeRef();\r\n                var top = ref.topLeft.row;\r\n                var bottom = ref.bottomRight.row;\r\n                var sel = null;\r\n                while (true) {\r\n                    var hasBottom = bottom < sheet._rows._count;\r\n                    var hasTop = top >= 0;\r\n                    if (!hasTop && !hasBottom) {\r\n                        break;\r\n                    }\r\n                    if (hasBottom && !sheet.isHiddenRow(bottom)) {\r\n                        sel = bottom;\r\n                        break;\r\n                    }\r\n                    if (hasTop && !sheet.isHiddenRow(top)) {\r\n                        sel = top;\r\n                        break;\r\n                    }\r\n                    top--;\r\n                    bottom++;\r\n                }\r\n                if (sel !== null) {\r\n                    ref = new kendo.spreadsheet.RangeRef(new kendo.spreadsheet.CellRef(sel, 0), new kendo.spreadsheet.CellRef(sel, sheet._columns._count - 1));\r\n                    sheet.range(ref).select();\r\n                }\r\n            },\r\n            unhideSelectedColumns: function () {\r\n                this.forEachSelectedColumn(function (sheet, index) {\r\n                    sheet.unhideColumn(index);\r\n                });\r\n            },\r\n            unhideSelectedRows: function () {\r\n                this.forEachSelectedRow(function (sheet, index) {\r\n                    sheet.unhideRow(index);\r\n                });\r\n            },\r\n            addColumnLeft: function () {\r\n                this.forEachSelectedColumn(function (sheet, index, i) {\r\n                    sheet.insertColumn(index - i);\r\n                });\r\n            },\r\n            addColumnRight: function () {\r\n                this.forEachSelectedColumn(function (sheet, index, i) {\r\n                    sheet.insertColumn(index + (i + 1));\r\n                });\r\n            },\r\n            canAddRow: function () {\r\n                var range = this._sheet.select().toRangeRef();\r\n                var rowCount = range.height();\r\n                return this._sheet.canInsertRow(0, rowCount);\r\n            },\r\n            addRowAbove: function () {\r\n                this.forEachSelectedRow(function (sheet, index, i) {\r\n                    sheet.insertRow(index - i);\r\n                });\r\n            },\r\n            addRowBelow: function () {\r\n                this.forEachSelectedRow(function (sheet, index, i) {\r\n                    sheet.insertRow(index + (i + 1));\r\n                });\r\n            }\r\n        });\r\n        kendo.spreadsheet.AxisManager = AxisManager;\r\n    }(kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/clipboard', ['kendo.core'], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var $ = kendo.jQuery;\r\n        var CellRef = kendo.spreadsheet.CellRef;\r\n        var Clipboard = kendo.Class.extend({\r\n            init: function (workbook) {\r\n                this.workbook = workbook;\r\n                this.origin = kendo.spreadsheet.NULLREF;\r\n                this.iframe = document.createElement('iframe');\r\n                this.iframe.className = 'k-spreadsheet-clipboard-paste';\r\n                this.menuInvoked = true;\r\n                this._external = {};\r\n                this._uid = kendo.guid();\r\n                document.body.appendChild(this.iframe);\r\n            },\r\n            canCopy: function () {\r\n                var status = { canCopy: true };\r\n                var selection = this.workbook.activeSheet().select();\r\n                if (selection === kendo.spreadsheet.NULLREF) {\r\n                    status.canCopy = false;\r\n                }\r\n                if (selection instanceof kendo.spreadsheet.UnionRef) {\r\n                    status.canCopy = false;\r\n                    status.multiSelection = true;\r\n                }\r\n                if (this.menuInvoked) {\r\n                    status.canCopy = false;\r\n                    status.menuInvoked = true;\r\n                }\r\n                return status;\r\n            },\r\n            canPaste: function () {\r\n                var sheet = this.workbook.activeSheet();\r\n                var ref = this.pasteRef();\r\n                var status = { canPaste: true };\r\n                if (ref === kendo.spreadsheet.NULLREF) {\r\n                    var external = this.isExternal();\r\n                    status.pasteOnMerged = this.intersectsMerged();\r\n                    status.canPaste = status.pasteOnMerged ? false : external;\r\n                    return status;\r\n                }\r\n                if (!ref.eq(sheet.unionWithMerged(ref))) {\r\n                    status.canPaste = false;\r\n                    status.pasteOnMerged = true;\r\n                }\r\n                if (this.menuInvoked) {\r\n                    status.canPaste = false;\r\n                    status.menuInvoked = true;\r\n                }\r\n                if (ref.bottomRight.row >= sheet._rows._count || ref.bottomRight.col >= sheet._columns._count) {\r\n                    status.canPaste = false;\r\n                    status.overflow = true;\r\n                }\r\n                return status;\r\n            },\r\n            intersectsMerged: function () {\r\n                var sheet = this.workbook.activeSheet();\r\n                var state = this.parse(this._external);\r\n                this.origin = getSourceRef(state);\r\n                var ref = this.pasteRef();\r\n                return !ref.eq(sheet.unionWithMerged(ref));\r\n            },\r\n            copy: function () {\r\n                var sheet = this.workbook.activeSheet();\r\n                this.origin = sheet.select();\r\n                this.contents = sheet.selection().getState();\r\n                delete this._external.html;\r\n                delete this._external.plain;\r\n            },\r\n            cut: function () {\r\n                var sheet = this.workbook.activeSheet();\r\n                this.copy();\r\n                sheet.range(sheet.select()).clear();\r\n            },\r\n            pasteRef: function () {\r\n                var sheet = this.workbook.activeSheet();\r\n                var destination = sheet.activeCell().first();\r\n                var originActiveCell = this.origin.first();\r\n                var rowDelta = originActiveCell.row - destination.row;\r\n                var colDelta = originActiveCell.col - destination.col;\r\n                return this.origin.relative(rowDelta, colDelta, 3);\r\n            },\r\n            destroy: function () {\r\n                document.body.removeChild(this.iframe);\r\n            },\r\n            paste: function () {\r\n                var state = {};\r\n                var sheet = this.workbook.activeSheet();\r\n                if (this._isInternal()) {\r\n                    state = this.contents;\r\n                } else {\r\n                    state = this.parse(this._external);\r\n                    this.origin = getSourceRef(state);\r\n                }\r\n                var pasteRef = this.pasteRef();\r\n                sheet.range(pasteRef).setState(state, this);\r\n                sheet.triggerChange({\r\n                    recalc: true,\r\n                    ref: pasteRef\r\n                });\r\n            },\r\n            external: function (data) {\r\n                if (data && (data.html || data.plain)) {\r\n                    this._external = data;\r\n                } else {\r\n                    return this._external;\r\n                }\r\n            },\r\n            isExternal: function () {\r\n                return !this._isInternal();\r\n            },\r\n            parse: function (data) {\r\n                var state = newState();\r\n                if (data.html) {\r\n                    var doc = this.iframe.contentWindow.document;\r\n                    doc.open();\r\n                    doc.write(data.html);\r\n                    doc.close();\r\n                    var table = $(doc).find('table:first');\r\n                    if (table.length) {\r\n                        state = parseHTML(table.find('tbody:first'));\r\n                    } else if (!data.plain) {\r\n                        var element = $(doc.body).find(':not(style)');\r\n                        setStateData(state, 0, 0, cellState(element.text()));\r\n                    } else {\r\n                        state = parseTSV(data.plain);\r\n                    }\r\n                } else {\r\n                    state = parseTSV(data.plain);\r\n                }\r\n                return state;\r\n            },\r\n            _isInternal: function () {\r\n                if (this._external.html === undefined) {\r\n                    return true;\r\n                }\r\n                var internalHTML = $('<div/>').html(this._external.html).find('table.kendo-clipboard-' + this._uid).length ? true : false;\r\n                var internalPlain = $('<div/>').html(this._external.plain).find('table.kendo-clipboard-' + this._uid).length ? true : false;\r\n                if (internalHTML || internalPlain) {\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n        });\r\n        kendo.spreadsheet.Clipboard = Clipboard;\r\n        function newState() {\r\n            var ref = new CellRef(0, 0, 0);\r\n            return {\r\n                ref: ref,\r\n                mergedCells: [],\r\n                data: [],\r\n                foreign: true,\r\n                origRef: ref.toRangeRef()\r\n            };\r\n        }\r\n        function setStateData(state, row, col, value) {\r\n            var data = state.data || (state.data = []);\r\n            if (!data[row]) {\r\n                data[row] = [];\r\n            }\r\n            data[row][col] = value;\r\n            var br = state.origRef.bottomRight;\r\n            br.row = Math.max(br.row, row);\r\n            br.col = Math.max(br.col, col);\r\n        }\r\n        function getSourceRef(state) {\r\n            return state.origRef;\r\n        }\r\n        function stripStyle(style) {\r\n            return style.replace(/^-(?:ms|moz|webkit)-/, '');\r\n        }\r\n        function borderObject(styles) {\r\n            var obj = {};\r\n            [\r\n                'borderBottom',\r\n                'borderRight',\r\n                'borderLeft',\r\n                'borderTop'\r\n            ].forEach(function (key) {\r\n                obj[key] = styles[key + 'Style'] == 'none' ? null : {\r\n                    size: 1,\r\n                    color: styles[key + 'Color']\r\n                };\r\n            });\r\n            return obj;\r\n        }\r\n        function cellState(element) {\r\n            var styles = window.getComputedStyle(element[0]);\r\n            var text = element.text();\r\n            var borders = borderObject(styles);\r\n            var state = {\r\n                value: text === '' ? null : text,\r\n                borderBottom: borders.borderBottom,\r\n                borderRight: borders.borderRight,\r\n                borderLeft: borders.borderLeft,\r\n                borderTop: borders.borderTop,\r\n                fontSize: parseInt(styles['font-size'], 10)\r\n            };\r\n            if (styles['background-color'] !== 'rgb(0, 0, 0)' && styles['background-color'] !== 'rgba(0, 0, 0, 0)') {\r\n                state.background = styles['background-color'];\r\n            }\r\n            if (styles.color !== 'rgb(0, 0, 0)' && styles.color !== 'rgba(0, 0, 0, 0)') {\r\n                state.color = styles.color;\r\n            }\r\n            if (styles['text-decoration'] == 'underline') {\r\n                state.underline = true;\r\n            }\r\n            if (styles['font-style'] == 'italic') {\r\n                state.italic = true;\r\n            }\r\n            if (styles['font-weight'] == 'bold') {\r\n                state.bold = true;\r\n            }\r\n            if (stripStyle(styles['text-align']) !== 'right') {\r\n                state.textAlign = stripStyle(styles['text-align']);\r\n            }\r\n            if (styles['vertical-align'] !== 'middle') {\r\n                state.verticalAlign = styles['vertical-align'];\r\n            }\r\n            if (styles['word-wrap'] !== 'normal') {\r\n                state.wrap = true;\r\n            }\r\n            return state;\r\n        }\r\n        function parseHTML(tbody) {\r\n            var state = newState();\r\n            tbody.find('tr').each(function (rowIndex, tr) {\r\n                $(tr).find('td').each(function (colIndex, td) {\r\n                    var rowspan = parseInt($(td).attr('rowspan'), 10) - 1 || 0;\r\n                    var colspan = parseInt($(td).attr('colspan'), 10) - 1 || 0;\r\n                    var blankCell = '<td/>';\r\n                    var ci;\r\n                    if (rowspan) {\r\n                        var endRow = rowIndex + rowspan;\r\n                        for (var ri = rowIndex; ri <= endRow; ri++) {\r\n                            var row = tbody.find('tr').eq(ri);\r\n                            if (ri > rowIndex) {\r\n                                blankCell = '<td class=\\'rowspan\\'></td>';\r\n                                if (colIndex === 0) {\r\n                                    row.find('td').eq(colIndex).after(blankCell);\r\n                                } else {\r\n                                    var last = Math.min(row.find('td').length, colIndex);\r\n                                    row.find('td').eq(last - 1).after(blankCell);\r\n                                }\r\n                            }\r\n                            if (colspan) {\r\n                                for (ci = colIndex; ci < colspan + colIndex; ci++) {\r\n                                    blankCell = '<td class=\\'rowspan colspan\\'></td>';\r\n                                    row.find('td').eq(ci).after(blankCell);\r\n                                }\r\n                            }\r\n                        }\r\n                    } else {\r\n                        if (colspan) {\r\n                            for (ci = colIndex; ci < colspan + colIndex; ci++) {\r\n                                blankCell = '<td class=\\'colspan\\'></td>';\r\n                                $(tr).find('td').eq(ci).after(blankCell);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n            tbody.find('tr').each(function (rowIndex, tr) {\r\n                $(tr).find('td').each(function (colIndex, td) {\r\n                    var rowspan = parseInt($(td).attr('rowspan'), 10) - 1 || 0;\r\n                    var colspan = parseInt($(td).attr('colspan'), 10) - 1 || 0;\r\n                    setStateData(state, rowIndex, colIndex, cellState($(td)));\r\n                    if (rowspan || colspan) {\r\n                        var startCol = String.fromCharCode(65 + colIndex);\r\n                        var endCol = String.fromCharCode(65 + colIndex + colspan);\r\n                        var address = startCol + (rowIndex + 1) + ':' + endCol + (rowIndex + 1 + rowspan);\r\n                        state.mergedCells.push(address);\r\n                    }\r\n                });\r\n            });\r\n            return state;\r\n        }\r\n        function parseTSV(data) {\r\n            var state = newState();\r\n            if (data.indexOf('\\t') === -1 && data.indexOf('\\n') == -1) {\r\n                setStateData(state, 0, 0, { value: data });\r\n            } else {\r\n                var rows = data.split('\\n');\r\n                for (var ri = 0; ri < rows.length; ri++) {\r\n                    var cols = rows[ri].split('\\t');\r\n                    for (var ci = 0; ci < cols.length; ci++) {\r\n                        setStateData(state, ri, ci, { value: cols[ci] });\r\n                    }\r\n                }\r\n            }\r\n            return state;\r\n        }\r\n    }(kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/range', [\r\n        'kendo.core',\r\n        'util/text-metrics'\r\n    ], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var $ = kendo.jQuery;\r\n        var UnionRef = kendo.spreadsheet.UnionRef;\r\n        var CellRef = kendo.spreadsheet.CellRef;\r\n        var RangeRef = kendo.spreadsheet.RangeRef;\r\n        var PROPERTIES = [\r\n            'color',\r\n            'fontFamily',\r\n            'underline',\r\n            'italic',\r\n            'bold',\r\n            'textAlign',\r\n            'verticalAlign',\r\n            'background',\r\n            'format',\r\n            'link'\r\n        ];\r\n        var borders = {\r\n            borderTop: {\r\n                complement: 'borderBottom',\r\n                direction: {\r\n                    top: -1,\r\n                    bottom: -1\r\n                }\r\n            },\r\n            borderLeft: {\r\n                complement: 'borderRight',\r\n                direction: {\r\n                    left: -1,\r\n                    right: -1\r\n                }\r\n            },\r\n            borderRight: {\r\n                complement: 'borderLeft',\r\n                direction: {\r\n                    left: 1,\r\n                    right: 1\r\n                }\r\n            },\r\n            borderBottom: {\r\n                complement: 'borderTop',\r\n                direction: {\r\n                    top: 1,\r\n                    bottom: 1\r\n                }\r\n            }\r\n        };\r\n        var Range = kendo.Class.extend({\r\n            init: function (ref, sheet) {\r\n                this._sheet = sheet;\r\n                this._ref = ref;\r\n            },\r\n            clone: function () {\r\n                return new Range(this._ref.clone(), this._sheet);\r\n            },\r\n            skipHiddenCells: function () {\r\n                var refs = [];\r\n                var self = this, sheet = self._sheet;\r\n                var skipHiddenRows = sheet.isHiddenRow.bind(sheet);\r\n                var skipHiddenCols = sheet.isHiddenColumn.bind(sheet);\r\n                self._ref.forEach(function add(ref) {\r\n                    if (ref instanceof UnionRef) {\r\n                        ref.forEach(add);\r\n                    } else {\r\n                        ref = self._normalize(ref.toRangeRef());\r\n                        var tl = ref.topLeft, br = ref.bottomRight;\r\n                        var rows = partition(tl.row, br.row, skipHiddenRows);\r\n                        var cols = partition(tl.col, br.col, skipHiddenCols);\r\n                        for (var i = 0; i < rows.length; ++i) {\r\n                            for (var j = 0; j < cols.length; ++j) {\r\n                                refs.push(new RangeRef(new CellRef(rows[i].begin, cols[j].begin), new CellRef(rows[i].end, cols[j].end)));\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                return sheet.range(refs.length > 1 ? new UnionRef(refs) : refs[0]);\r\n            },\r\n            _normalize: function (ref) {\r\n                return this._sheet._grid.normalize(ref);\r\n            },\r\n            _set: function (name, value, noTrigger) {\r\n                var self = this;\r\n                var sheet = self._sheet;\r\n                self._ref.forEach(function (ref) {\r\n                    sheet._set(ref.toRangeRef(), name, value);\r\n                });\r\n                if (!noTrigger) {\r\n                    sheet.triggerChange({\r\n                        recalc: name == 'formula' || name == 'value' || name == 'validation',\r\n                        value: value,\r\n                        ref: self._ref\r\n                    });\r\n                }\r\n                return self;\r\n            },\r\n            _get: function (name) {\r\n                return this._sheet._get(this._ref.toRangeRef(), name);\r\n            },\r\n            _property: function (name, value) {\r\n                if (value === undefined) {\r\n                    return this._get(name);\r\n                } else {\r\n                    return this._set(name, value);\r\n                }\r\n            },\r\n            value: function (value) {\r\n                if (value !== undefined) {\r\n                    this._set('formula', null, true);\r\n                }\r\n                return this._property('value', value);\r\n            },\r\n            resize: function (direction) {\r\n                var ref = this._resizedRef(direction);\r\n                return new Range(ref, this._sheet);\r\n            },\r\n            _resizedRef: function (direction) {\r\n                return this._ref.map(function (ref) {\r\n                    return ref.toRangeRef().resize(direction);\r\n                });\r\n            },\r\n            _border: function (property, value) {\r\n                var result;\r\n                var complement = borders[property].complement;\r\n                var direction = borders[property].direction;\r\n                var sheet = this._sheet;\r\n                sheet.batch(function () {\r\n                    result = this._property(property, value);\r\n                    if (value !== undefined) {\r\n                        this._resizedRef(direction).forEach(function (ref) {\r\n                            if (ref !== kendo.spreadsheet.NULLREF) {\r\n                                new Range(ref, sheet)._property(complement, null);\r\n                            }\r\n                        });\r\n                    }\r\n                }.bind(this), {});\r\n                return result;\r\n            },\r\n            _collapsedBorder: function (property) {\r\n                var result = this._property(property);\r\n                var complement = borders[property].complement;\r\n                var direction = borders[property].direction;\r\n                this._resizedRef(direction).forEach(function (ref) {\r\n                    if (!result && ref !== kendo.spreadsheet.NULLREF) {\r\n                        var range = new Range(ref, this._sheet);\r\n                        result = range._property(complement);\r\n                    }\r\n                }.bind(this));\r\n                return result;\r\n            },\r\n            borderTop: function (value) {\r\n                return this._border('borderTop', value);\r\n            },\r\n            borderRight: function (value) {\r\n                return this._border('borderRight', value);\r\n            },\r\n            borderBottom: function (value) {\r\n                return this._border('borderBottom', value);\r\n            },\r\n            borderLeft: function (value) {\r\n                return this._border('borderLeft', value);\r\n            },\r\n            collapsedBorderTop: function () {\r\n                return this._collapsedBorder('borderTop');\r\n            },\r\n            collapsedBorderRight: function () {\r\n                return this._collapsedBorder('borderRight');\r\n            },\r\n            collapsedBorderBottom: function () {\r\n                return this._collapsedBorder('borderBottom');\r\n            },\r\n            collapsedBorderLeft: function () {\r\n                return this._collapsedBorder('borderLeft');\r\n            },\r\n            input: function (value) {\r\n                var existingFormat = this._get('format'), x;\r\n                if (value !== undefined) {\r\n                    var tl = this._ref.toRangeRef().topLeft;\r\n                    x = kendo.spreadsheet.calc.parse(this._sheet.name(), tl.row, tl.col, value);\r\n                    this._sheet.batch(function () {\r\n                        var formula = null;\r\n                        if (x.type == 'exp') {\r\n                            formula = kendo.spreadsheet.calc.compile(x);\r\n                        } else if (existingFormat != '@') {\r\n                            if (x.type == 'date') {\r\n                                this.format(x.format || toExcelFormat(kendo.culture().calendar.patterns.d));\r\n                            } else if (x.type == 'percent') {\r\n                                this.format(x.value * 100 == (x.value * 100 | 0) ? '0%' : '0.00%');\r\n                            } else if (x.format && !existingFormat) {\r\n                                this.format(x.format);\r\n                            }\r\n                        } else if (x.type != 'string') {\r\n                            x.value = value;\r\n                        }\r\n                        this.formula(formula);\r\n                        if (!formula) {\r\n                            this.value(x.value);\r\n                        }\r\n                    }.bind(this), {\r\n                        recalc: true,\r\n                        value: value,\r\n                        ref: this._ref,\r\n                        editorChange: this._sheet.isInEditMode()\r\n                    });\r\n                    return this;\r\n                } else {\r\n                    value = this._get('value');\r\n                    var formula = this._get('formula');\r\n                    var type = existingFormat && !formula && kendo.spreadsheet.formatting.type(value, existingFormat);\r\n                    if (formula) {\r\n                        value = '=' + formula;\r\n                    } else\r\n                        OUT: {\r\n                            if (existingFormat && type == 'date') {\r\n                                var t1 = kendo.spreadsheet.formatting.text(value, existingFormat);\r\n                                x = kendo.spreadsheet.calc.parse(null, null, null, t1);\r\n                                if (typeof x.value == 'number') {\r\n                                    var t2 = kendo.spreadsheet.formatting.text(x.value, existingFormat);\r\n                                    if (t1 == t2) {\r\n                                        value = t1;\r\n                                        break OUT;\r\n                                    }\r\n                                }\r\n                            }\r\n                            if (type === 'date') {\r\n                                value = kendo.toString(kendo.spreadsheet.numberToDate(value), kendo.culture().calendar.patterns.d);\r\n                            } else if (type === 'percent') {\r\n                                value = value * 100 + '%';\r\n                            } else if (typeof value == 'string' && (/^[=']/.test(value) || /^(?:true|false)$/i.test(value) || looksLikeANumber(value))) {\r\n                                value = '\\'' + value;\r\n                            }\r\n                        }\r\n                    return value;\r\n                }\r\n            },\r\n            enable: function (value) {\r\n                if (value === undefined) {\r\n                    value = true;\r\n                    this._sheet.forEach(this._ref.toRangeRef(), function (_, __, data) {\r\n                        if (data.enable === false) {\r\n                            value = false;\r\n                        }\r\n                    });\r\n                    return value;\r\n                }\r\n                this._property('enable', value);\r\n            },\r\n            formula: function (value) {\r\n                if (value === undefined) {\r\n                    var f = this._get('formula');\r\n                    return f ? '' + f : null;\r\n                }\r\n                return this._property('formula', value);\r\n            },\r\n            validation: function (value) {\r\n                if (value === undefined) {\r\n                    var f = this._get('validation');\r\n                    return f ? f.toJSON() : null;\r\n                }\r\n                return this._property('validation', value);\r\n            },\r\n            _getValidationState: function () {\r\n                var ref = this._ref.toRangeRef();\r\n                var topLeftRow = ref.topLeft.row;\r\n                var topLeftCol = ref.topLeft.col;\r\n                var bottomRightRow = ref.bottomRight.row;\r\n                var bottomRightCol = ref.bottomRight.col;\r\n                var ci, ri;\r\n                for (ci = topLeftCol; ci <= bottomRightCol; ci++) {\r\n                    for (ri = topLeftRow; ri <= bottomRightRow; ri++) {\r\n                        var validation = this._sheet._validation(ri, ci);\r\n                        if (validation && validation.type === 'reject' && validation.value === false) {\r\n                            return validation;\r\n                        }\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n            merge: function () {\r\n                this._ref = this._sheet._merge(this._ref);\r\n                return this;\r\n            },\r\n            unmerge: function () {\r\n                var mergedCells = this._sheet._mergedCells;\r\n                this._ref.forEach(function (ref) {\r\n                    ref.toRangeRef().intersecting(mergedCells).forEach(function (mergedRef) {\r\n                        mergedCells.splice(mergedCells.indexOf(mergedRef), 1);\r\n                    });\r\n                });\r\n                this._sheet.triggerChange({});\r\n                return this;\r\n            },\r\n            select: function () {\r\n                this._sheet.select(this._ref);\r\n                return this;\r\n            },\r\n            values: function (values) {\r\n                if (this._ref instanceof UnionRef) {\r\n                    throw new Error('Unsupported for multiple ranges.');\r\n                }\r\n                if (this._ref === kendo.spreadsheet.NULLREF) {\r\n                    if (values !== undefined) {\r\n                        throw new Error('Unsupported for NULLREF.');\r\n                    } else {\r\n                        return [];\r\n                    }\r\n                }\r\n                var ref = this._ref.toRangeRef();\r\n                var topLeftRow = ref.topLeft.row;\r\n                var topLeftCol = ref.topLeft.col;\r\n                var bottomRightRow = ref.bottomRight.row;\r\n                var bottomRightCol = ref.bottomRight.col;\r\n                var ci, ri;\r\n                if (values === undefined) {\r\n                    values = new Array(ref.height());\r\n                    for (var vi = 0; vi < values.length; vi++) {\r\n                        values[vi] = new Array(ref.width());\r\n                    }\r\n                    for (ci = topLeftCol; ci <= bottomRightCol; ci++) {\r\n                        for (ri = topLeftRow; ri <= bottomRightRow; ri++) {\r\n                            values[ri - topLeftRow][ci - topLeftCol] = this._sheet._value(ri, ci);\r\n                        }\r\n                    }\r\n                    return values;\r\n                } else {\r\n                    this._sheet._set(ref, 'formula', null);\r\n                    for (ci = topLeftCol; ci <= bottomRightCol; ci++) {\r\n                        for (ri = topLeftRow; ri <= bottomRightRow; ri++) {\r\n                            var row = values[ri - topLeftRow];\r\n                            if (row) {\r\n                                var value = row[ci - topLeftCol];\r\n                                if (value !== undefined) {\r\n                                    this._sheet._value(ri, ci, value);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    this._sheet.triggerChange({\r\n                        recalc: true,\r\n                        ref: ref\r\n                    });\r\n                    return this;\r\n                }\r\n            },\r\n            _properties: function (props) {\r\n                if (this._ref instanceof UnionRef) {\r\n                    throw new Error('Unsupported for multiple ranges.');\r\n                }\r\n                if (this._ref === kendo.spreadsheet.NULLREF) {\r\n                    if (props !== undefined) {\r\n                        throw new Error('Unsupported for NULLREF.');\r\n                    } else {\r\n                        return [];\r\n                    }\r\n                }\r\n                var ref = this._ref.toRangeRef();\r\n                var topLeftRow = ref.topLeft.row;\r\n                var topLeftCol = ref.topLeft.col;\r\n                var bottomRightRow = ref.bottomRight.row;\r\n                var bottomRightCol = ref.bottomRight.col;\r\n                var ci, ri;\r\n                var sheet = this._sheet;\r\n                if (props === undefined) {\r\n                    props = new Array(ref.height());\r\n                    sheet.forEach(ref, function (row, col, data) {\r\n                        row -= topLeftRow;\r\n                        col -= topLeftCol;\r\n                        var line = props[row] || (props[row] = []);\r\n                        line[col] = data;\r\n                    });\r\n                    return props;\r\n                } else {\r\n                    var data;\r\n                    ref = ref.clone();\r\n                    var setProp = function (propName) {\r\n                        var propValue = data[propName];\r\n                        ref.topLeft.row = ref.bottomRight.row = ri;\r\n                        ref.topLeft.col = ref.bottomRight.col = ci;\r\n                        if (propName == 'value') {\r\n                            sheet._set(ref, 'formula', null);\r\n                        }\r\n                        sheet._set(ref, propName, propValue);\r\n                    };\r\n                    for (ci = topLeftCol; ci <= bottomRightCol; ci++) {\r\n                        for (ri = topLeftRow; ri <= bottomRightRow; ri++) {\r\n                            var row = props[ri - topLeftRow];\r\n                            if (row) {\r\n                                data = row[ci - topLeftCol];\r\n                                if (data) {\r\n                                    Object.keys(data).forEach(setProp);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    sheet.triggerChange({\r\n                        recalc: true,\r\n                        ref: this._ref\r\n                    });\r\n                    return this;\r\n                }\r\n            },\r\n            clear: function (options) {\r\n                var clearAll = !options || !Object.keys(options).length;\r\n                var sheet = this._sheet;\r\n                var reason = {\r\n                    recalc: clearAll || options && options.contentsOnly === true,\r\n                    ref: this._ref\r\n                };\r\n                sheet.batch(function () {\r\n                    if (reason.recalc) {\r\n                        this.formula(null);\r\n                    }\r\n                    if (clearAll) {\r\n                        this.validation(null);\r\n                    }\r\n                    if (clearAll || options && options.formatOnly === true) {\r\n                        PROPERTIES.forEach(function (x) {\r\n                            this[x](null);\r\n                        }.bind(this));\r\n                        this.unmerge();\r\n                    }\r\n                }.bind(this), reason);\r\n                return this;\r\n            },\r\n            clearContent: function () {\r\n                return this.clear({ contentsOnly: true });\r\n            },\r\n            clearFormat: function () {\r\n                return this.clear({ formatOnly: true });\r\n            },\r\n            isSortable: function () {\r\n                return !(this._ref instanceof UnionRef || this._ref === kendo.spreadsheet.NULLREF);\r\n            },\r\n            sort: function (spec) {\r\n                if (this._ref instanceof UnionRef) {\r\n                    throw new Error('Unsupported for multiple ranges.');\r\n                }\r\n                if (this._ref === kendo.spreadsheet.NULLREF) {\r\n                    throw new Error('Unsupported for NULLREF.');\r\n                }\r\n                if (spec === undefined) {\r\n                    spec = { column: 0 };\r\n                }\r\n                spec = spec instanceof Array ? spec : [spec];\r\n                this._sheet._sortBy(this._ref.toRangeRef(), spec.map(function (spec, index) {\r\n                    if (typeof spec === 'number') {\r\n                        spec = { column: spec };\r\n                    }\r\n                    return {\r\n                        index: spec.column === undefined ? index : spec.column,\r\n                        ascending: spec.ascending === undefined ? true : spec.ascending\r\n                    };\r\n                }));\r\n                return this;\r\n            },\r\n            isFilterable: function () {\r\n                return !(this._ref instanceof UnionRef);\r\n            },\r\n            filter: function (spec) {\r\n                if (this._ref instanceof UnionRef) {\r\n                    throw new Error('Unsupported for multiple ranges.');\r\n                }\r\n                if (spec === false) {\r\n                    this.clearFilters();\r\n                } else {\r\n                    spec = spec === true ? [] : spec instanceof Array ? spec : [spec];\r\n                    this._sheet._filterBy(this._ref.toRangeRef(), spec.map(function (spec, index) {\r\n                        return {\r\n                            index: spec.column === undefined ? index : spec.column,\r\n                            filter: spec.filter\r\n                        };\r\n                    }));\r\n                }\r\n                return this;\r\n            },\r\n            clearFilter: function (spec) {\r\n                this._sheet.clearFilter(spec);\r\n            },\r\n            clearFilters: function () {\r\n                var filter = this._sheet.filter();\r\n                var spec = [];\r\n                if (filter) {\r\n                    for (var i = 0; i < filter.columns.length; i++) {\r\n                        spec.push(i);\r\n                    }\r\n                    this._sheet.batch(function () {\r\n                        this.clearFilter(spec);\r\n                        this._filter = null;\r\n                    }, {\r\n                        layout: true,\r\n                        filter: true\r\n                    });\r\n                }\r\n            },\r\n            hasFilter: function () {\r\n                var filter = this._sheet.filter();\r\n                return !!filter;\r\n            },\r\n            leftColumn: function () {\r\n                return new Range(this._ref.leftColumn(), this._sheet);\r\n            },\r\n            rightColumn: function () {\r\n                return new Range(this._ref.rightColumn(), this._sheet);\r\n            },\r\n            topRow: function () {\r\n                return new Range(this._ref.topRow(), this._sheet);\r\n            },\r\n            bottomRow: function () {\r\n                return new Range(this._ref.bottomRow(), this._sheet);\r\n            },\r\n            column: function (column) {\r\n                return new Range(this._ref.toColumn(column), this._sheet);\r\n            },\r\n            row: function (row) {\r\n                return new Range(this._ref.toRow(row), this._sheet);\r\n            },\r\n            forEachRow: function (callback) {\r\n                this._ref.forEachRow(function (ref) {\r\n                    callback(new Range(ref, this._sheet));\r\n                }.bind(this));\r\n            },\r\n            forEachColumn: function (callback) {\r\n                this._ref.forEachColumn(function (ref) {\r\n                    callback(new Range(ref, this._sheet));\r\n                }.bind(this));\r\n            },\r\n            sheet: function () {\r\n                return this._sheet;\r\n            },\r\n            topLeft: function () {\r\n                return this._ref.toRangeRef().topLeft;\r\n            },\r\n            intersectingMerged: function () {\r\n                var sheet = this._sheet;\r\n                var mergedCells = [];\r\n                sheet._mergedCells.forEach(function (ref) {\r\n                    if (ref.intersects(this._ref)) {\r\n                        mergedCells.push(ref.toString());\r\n                    }\r\n                }.bind(this));\r\n                return mergedCells;\r\n            },\r\n            getState: function (propertyName) {\r\n                var topLeft = this._ref.first();\r\n                var state = {\r\n                    ref: topLeft,\r\n                    data: [],\r\n                    origRef: this._ref\r\n                };\r\n                var properties;\r\n                if (!propertyName) {\r\n                    properties = kendo.spreadsheet.ALL_PROPERTIES;\r\n                    state.mergedCells = this.intersectingMerged();\r\n                } else if (propertyName === 'input') {\r\n                    properties = [\r\n                        'value',\r\n                        'formula'\r\n                    ];\r\n                } else if (propertyName === 'border') {\r\n                    properties = [\r\n                        'borderLeft',\r\n                        'borderTop',\r\n                        'borderRight',\r\n                        'borderBottom'\r\n                    ];\r\n                } else {\r\n                    properties = [propertyName];\r\n                }\r\n                var data = state.data;\r\n                this.forEachCell(function (row, col, cell) {\r\n                    var cellState = {};\r\n                    var dr = row - topLeft.row;\r\n                    var dc = col - topLeft.col;\r\n                    if (!data[dr]) {\r\n                        data[dr] = [];\r\n                    }\r\n                    data[dr][dc] = cellState;\r\n                    properties.forEach(function (property) {\r\n                        cellState[property] = typeof cell[property] == 'undefined' ? null : cell[property];\r\n                    });\r\n                });\r\n                return state;\r\n            },\r\n            setState: function (state, clipboard) {\r\n                var sheet = this._sheet;\r\n                var origin = this._ref.first();\r\n                var rowDelta = state.ref.row - origin.row;\r\n                var colDelta = state.ref.col - origin.col;\r\n                sheet.batch(function () {\r\n                    if (state.mergedCells) {\r\n                        this.unmerge();\r\n                    }\r\n                    var row = origin.row;\r\n                    state.data.forEach(function (data, dr) {\r\n                        if (clipboard && !clipboard.isExternal() && sheet.isHiddenRow(state.ref.row + dr)) {\r\n                            return;\r\n                        }\r\n                        var col = origin.col;\r\n                        data.forEach(function (cellState, dc) {\r\n                            if (clipboard && !clipboard.isExternal() && sheet.isHiddenColumn(state.ref.col + dc)) {\r\n                                return;\r\n                            }\r\n                            var range = clipboard ? sheet.range(row, col) : sheet.range(origin.row + dr, origin.col + dc);\r\n                            if (range.enable()) {\r\n                                for (var property in cellState) {\r\n                                    if (property != 'value') {\r\n                                        range._set(property, cellState[property]);\r\n                                    }\r\n                                }\r\n                                if (!cellState.formula) {\r\n                                    if (clipboard && clipboard.isExternal()) {\r\n                                        try {\r\n                                            if (cellState.value == null) {\r\n                                                range._set('value', null);\r\n                                            } else {\r\n                                                range.input(cellState.value);\r\n                                            }\r\n                                        } catch (ex) {\r\n                                            range._set('value', cellState.value);\r\n                                        }\r\n                                    } else {\r\n                                        range._set('value', cellState.value);\r\n                                    }\r\n                                }\r\n                            }\r\n                            col++;\r\n                        });\r\n                        row++;\r\n                    });\r\n                    if (state.mergedCells) {\r\n                        state.mergedCells.forEach(function (merged) {\r\n                            merged = sheet._ref(merged).relative(rowDelta, colDelta, 3);\r\n                            sheet.range(merged).merge();\r\n                        }, this);\r\n                    }\r\n                }.bind(this), { recalc: true });\r\n            },\r\n            _adjustRowHeight: function () {\r\n                var sheet = this._sheet;\r\n                var state = this.getState();\r\n                var mergedCells = [];\r\n                for (var i = 0; i < state.mergedCells.length; i++) {\r\n                    mergedCells.push(sheet.range(state.mergedCells[i]));\r\n                }\r\n                this.forEachRow(function (row) {\r\n                    if (row.topLeft().row >= row.sheet()._rows._count) {\r\n                        return;\r\n                    }\r\n                    var maxHeight = row.sheet().rowHeight(row.topLeft().row);\r\n                    row.forEachCell(function (rowIndex, colIndex, cell) {\r\n                        var cellRange = sheet.range(rowIndex, colIndex);\r\n                        var totalWidth = 0;\r\n                        for (var i = 0; i < mergedCells.length; i++) {\r\n                            if (cellRange._ref.intersects(mergedCells[i]._ref)) {\r\n                                totalWidth += cell.width;\r\n                                break;\r\n                            }\r\n                        }\r\n                        var width = Math.max(sheet.columnWidth(colIndex), totalWidth);\r\n                        maxHeight = Math.max(maxHeight, kendo.spreadsheet.util.getTextHeight(cell.value, width, cell.fontSize, cell.wrap));\r\n                    });\r\n                    sheet.rowHeight(row.topLeft().row, Math.max(sheet.rowHeight(row.topLeft().row), maxHeight));\r\n                });\r\n            },\r\n            forEachCell: function (callback) {\r\n                this._ref.forEach(function (ref) {\r\n                    this._sheet.forEach(ref.toRangeRef(), callback.bind(this));\r\n                }.bind(this));\r\n            },\r\n            hasValue: function () {\r\n                var result = false;\r\n                this.forEachCell(function (row, col, cell) {\r\n                    if (Object.keys(cell).length !== 0) {\r\n                        result = true;\r\n                    }\r\n                });\r\n                return result;\r\n            },\r\n            wrap: function (flag) {\r\n                if (flag === undefined) {\r\n                    return !!this._property('wrap');\r\n                }\r\n                this.forEachRow(function (range) {\r\n                    var maxHeight = range.sheet().rowHeight(range.topLeft().row);\r\n                    range.forEachCell(function (row, col, cell) {\r\n                        var width = this._sheet.columnWidth(col);\r\n                        if (cell.value !== null && cell.value !== undefined) {\r\n                            maxHeight = Math.max(maxHeight, kendo.spreadsheet.util.getTextHeight(cell.value, width, cell.fontSize, true));\r\n                        }\r\n                    });\r\n                    range.sheet().rowHeight(range.topLeft().row, maxHeight);\r\n                }.bind(this));\r\n                this._property('wrap', flag);\r\n                return this;\r\n            },\r\n            fontSize: function (size) {\r\n                if (size === undefined) {\r\n                    return this._property('fontSize');\r\n                }\r\n                this.forEachRow(function (range) {\r\n                    var maxHeight = range.sheet().rowHeight(range.topLeft().row);\r\n                    range.forEachCell(function (row, col, cell) {\r\n                        var width = this._sheet.columnWidth(col);\r\n                        if (cell.value !== null && cell.value !== undefined) {\r\n                            maxHeight = Math.max(maxHeight, kendo.spreadsheet.util.getTextHeight(cell.value, width, size, cell.wrap));\r\n                        }\r\n                    });\r\n                    range.sheet().rowHeight(range.topLeft().row, maxHeight);\r\n                }.bind(this));\r\n                this._property('fontSize', size);\r\n                return this;\r\n            },\r\n            draw: function (options, callback) {\r\n                this._sheet.draw(this, options, callback);\r\n            }\r\n        });\r\n        function partition(begin, end, predicate) {\r\n            while (begin <= end && predicate(begin)) {\r\n                begin++;\r\n            }\r\n            if (begin > end) {\r\n                return [];\r\n            }\r\n            for (var i = begin + 1; i <= end; ++i) {\r\n                if (predicate(i)) {\r\n                    return [{\r\n                            begin: begin,\r\n                            end: i - 1\r\n                        }].concat(partition(i + 1, end, predicate));\r\n                }\r\n            }\r\n            return [{\r\n                    begin: begin,\r\n                    end: end\r\n                }];\r\n        }\r\n        $.each(PROPERTIES, function (i, property) {\r\n            Range.prototype[property] = function (value) {\r\n                return this._property(property, value);\r\n            };\r\n        });\r\n        function toExcelFormat(format) {\r\n            return format.replace(/M/g, 'm').replace(/'/g, '\"').replace(/tt/, 'am/pm');\r\n        }\r\n        function looksLikeANumber(str) {\r\n            return !/^=/.test(str) && /number|percent/.test(kendo.spreadsheet.calc.parse(null, 0, 0, str).type);\r\n        }\r\n        var measureBox = $('<div style=\"position: absolute !important; top: -4000px !important; height: auto !important;' + 'padding: 1px !important; margin: 0 !important; border: 1px solid black !important;' + 'line-height: normal !important; visibility: hidden !important;' + 'white-space: pre-wrap !important; word-break: break-all !important;\" />')[0];\r\n        function getTextHeight(text, width, fontSize, wrap) {\r\n            var styles = {\r\n                'baselineMarkerSize': 0,\r\n                'width': width + 'px',\r\n                'font-size': (fontSize || 12) + 'px',\r\n                'word-break': wrap === true ? 'break-all' : 'normal',\r\n                'white-space': wrap === true ? 'pre-wrap' : 'pre'\r\n            };\r\n            return kendo.util.measureText(text, styles, measureBox).height;\r\n        }\r\n        kendo.spreadsheet.util = { getTextHeight: getTextHeight };\r\n        kendo.spreadsheet.Range = Range;\r\n    }(window.kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/runtime', ['spreadsheet/references'], f);\r\n}(function () {\r\n    'use strict';\r\n    if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n        return;\r\n    }\r\n    var calc = {};\r\n    var spreadsheet = kendo.spreadsheet;\r\n    spreadsheet.calc = calc;\r\n    var exports = calc.runtime = {};\r\n    var Class = kendo.Class;\r\n    var Ref = spreadsheet.Ref;\r\n    var CellRef = spreadsheet.CellRef;\r\n    var RangeRef = spreadsheet.RangeRef;\r\n    var UnionRef = spreadsheet.UnionRef;\r\n    var NULL = spreadsheet.NULLREF;\r\n    function CalcError(code) {\r\n        if (code instanceof CalcError) {\r\n            return code;\r\n        }\r\n        this.code = code;\r\n    }\r\n    CalcError.prototype.toString = function () {\r\n        return '#' + this.code + (this.code == 'NAME' ? '?' : '!');\r\n    };\r\n    var Context = Class.extend({\r\n        init: function Context(callback, formula, ss, parent) {\r\n            this.callback = callback;\r\n            this.formula = formula;\r\n            this.ss = ss;\r\n            this.parent = parent;\r\n        },\r\n        resolve: function (val) {\r\n            var self = this;\r\n            if (val instanceof Ref) {\r\n                self.resolveCells([val], function () {\r\n                    val = self.getRefData(val);\r\n                    if (Array.isArray(val)) {\r\n                        val = val[0];\r\n                    }\r\n                    self._resolve(val);\r\n                });\r\n            } else {\r\n                self._resolve(val);\r\n            }\r\n        },\r\n        error: function (val) {\r\n            return new CalcError(val);\r\n        },\r\n        _resolve: function (val) {\r\n            if (val === undefined) {\r\n                val = null;\r\n            }\r\n            var f = this.formula;\r\n            f.value = val;\r\n            if (this.ss.onFormula(f) && this.callback) {\r\n                this.callback.call(f, val);\r\n            }\r\n        },\r\n        resolveCells: function (a, f) {\r\n            var context = this, formulas = [];\r\n            (function loop(a) {\r\n                for (var i = 0; i < a.length; ++i) {\r\n                    var x = a[i];\r\n                    if (x instanceof Ref) {\r\n                        add(context.getRefCells(x));\r\n                    }\r\n                    if (Array.isArray(x)) {\r\n                        loop(x);\r\n                    }\r\n                }\r\n            }(a));\r\n            if (!formulas.length) {\r\n                return f.call(context);\r\n            }\r\n            for (var pending = formulas.length, i = 0; i < formulas.length; ++i) {\r\n                fetch(formulas[i]);\r\n            }\r\n            function fetch(cell) {\r\n                cell.formula.exec(context.ss, function () {\r\n                    if (!--pending) {\r\n                        f.call(context);\r\n                    }\r\n                }, context);\r\n            }\r\n            function add(a) {\r\n                for (var i = 0; i < a.length; ++i) {\r\n                    var cell = a[i];\r\n                    if (cell.formula) {\r\n                        formulas.push(cell);\r\n                    }\r\n                }\r\n                return true;\r\n            }\r\n        },\r\n        cellValues: function (a, f) {\r\n            var ret = [];\r\n            for (var i = 0; i < a.length; ++i) {\r\n                var val = a[i];\r\n                if (val instanceof Ref) {\r\n                    val = this.getRefData(val);\r\n                    ret = ret.concat(val);\r\n                } else if (Array.isArray(val)) {\r\n                    ret = ret.concat(this.cellValues(val));\r\n                } else if (val instanceof Matrix) {\r\n                    ret = ret.concat(this.cellValues(val.data));\r\n                } else {\r\n                    ret.push(val);\r\n                }\r\n            }\r\n            if (f) {\r\n                return f.apply(this, ret);\r\n            }\r\n            return ret;\r\n        },\r\n        force: function (val) {\r\n            if (val instanceof Ref) {\r\n                return this.getRefData(val);\r\n            }\r\n            return val;\r\n        },\r\n        func: function (fname, callback, args) {\r\n            fname = fname.toLowerCase();\r\n            var f = FUNCS[fname];\r\n            if (f) {\r\n                return f.call(this, callback, args);\r\n            }\r\n            callback(new CalcError('NAME'));\r\n        },\r\n        bool: function (val) {\r\n            if (val instanceof Ref) {\r\n                val = this.getRefData(val);\r\n            }\r\n            if (typeof val == 'string') {\r\n                return val.toLowerCase() == 'true';\r\n            }\r\n            if (typeof val == 'number') {\r\n                return val !== 0;\r\n            }\r\n            if (typeof val == 'boolean') {\r\n                return val;\r\n            }\r\n            return val != null;\r\n        },\r\n        asMatrix: function (range) {\r\n            if (range instanceof Matrix) {\r\n                return range;\r\n            }\r\n            var self = this;\r\n            if (range instanceof RangeRef) {\r\n                var tl = range.topLeft;\r\n                var top = tl.row, left = tl.col;\r\n                var cells = self.getRefCells(range);\r\n                var m = new Matrix(self);\r\n                if (isFinite(range.width())) {\r\n                    m.width = range.width();\r\n                }\r\n                if (isFinite(range.height())) {\r\n                    m.height = range.height();\r\n                }\r\n                if (!isFinite(top)) {\r\n                    top = 0;\r\n                }\r\n                if (!isFinite(left)) {\r\n                    left = 0;\r\n                }\r\n                cells.forEach(function (cell) {\r\n                    m.set(cell.row - top, cell.col - left, cell.value);\r\n                });\r\n                return m;\r\n            }\r\n            if (Array.isArray(range) && range.length > 0) {\r\n                var m = new Matrix(self), row = 0;\r\n                range.forEach(function (line) {\r\n                    var col = 0;\r\n                    var h = 1;\r\n                    line.forEach(function (el) {\r\n                        var isRange = el instanceof RangeRef;\r\n                        if (el instanceof Ref && !isRange) {\r\n                            el = self.getRefData(el);\r\n                        }\r\n                        if (isRange || Array.isArray(el)) {\r\n                            el = self.asMatrix(el);\r\n                        }\r\n                        if (el instanceof Matrix) {\r\n                            el.each(function (el, r, c) {\r\n                                m.set(row + r, col + c, el);\r\n                            });\r\n                            h = Math.max(h, el.height);\r\n                            col += el.width;\r\n                        } else {\r\n                            m.set(row, col++, el);\r\n                        }\r\n                    });\r\n                    row += h;\r\n                });\r\n                return m;\r\n            }\r\n        },\r\n        getRefCells: function (refs, hiddenInfo) {\r\n            return this.ss.getRefCells(refs, hiddenInfo);\r\n        },\r\n        getRefData: function (ref) {\r\n            return this.ss.getData(ref);\r\n        },\r\n        workbook: function () {\r\n            return this.ss.workbook;\r\n        }\r\n    });\r\n    var Matrix = Class.extend({\r\n        init: function Matrix(context) {\r\n            this.context = context;\r\n            this.height = 0;\r\n            this.width = 0;\r\n            this.data = [];\r\n        },\r\n        clone: function () {\r\n            var m = new Matrix(this.context);\r\n            m.height = this.height;\r\n            m.width = this.width;\r\n            m.data = this.data.map(function (row) {\r\n                return row.slice();\r\n            });\r\n            return m;\r\n        },\r\n        get: function (row, col) {\r\n            var line = this.data[row];\r\n            var val = line ? line[col] : null;\r\n            return val instanceof Ref ? this.context.getRefData(val) : val;\r\n        },\r\n        set: function (row, col, data) {\r\n            var line = this.data[row];\r\n            if (line == null) {\r\n                line = this.data[row] = [];\r\n            }\r\n            line[col] = data;\r\n            if (row >= this.height) {\r\n                this.height = row + 1;\r\n            }\r\n            if (col >= this.width) {\r\n                this.width = col + 1;\r\n            }\r\n        },\r\n        each: function (f, includeEmpty) {\r\n            for (var row = 0; row < this.height; ++row) {\r\n                for (var col = 0; col < this.width; ++col) {\r\n                    var val = this.get(row, col);\r\n                    if (includeEmpty || val != null) {\r\n                        val = f.call(this.context, val, row, col);\r\n                        if (val !== undefined) {\r\n                            return val;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        map: function (f, includeEmpty) {\r\n            var m = new Matrix(this.context);\r\n            this.each(function (el, row, col) {\r\n                m.set(row, col, f.call(this, el, row, col));\r\n            }, includeEmpty);\r\n            return m;\r\n        },\r\n        eachRow: function (f) {\r\n            for (var row = 0; row < this.height; ++row) {\r\n                var val = f.call(this.context, row);\r\n                if (val !== undefined) {\r\n                    return val;\r\n                }\r\n            }\r\n        },\r\n        eachCol: function (f) {\r\n            for (var col = 0; col < this.width; ++col) {\r\n                var val = f.call(this.context, col);\r\n                if (val !== undefined) {\r\n                    return val;\r\n                }\r\n            }\r\n        },\r\n        mapRow: function (f) {\r\n            var m = new Matrix(this.context);\r\n            this.eachRow(function (row) {\r\n                m.set(row, 0, f.call(this.context, row));\r\n            });\r\n            return m;\r\n        },\r\n        mapCol: function (f) {\r\n            var m = new Matrix(this.context);\r\n            this.eachCol(function (col) {\r\n                m.set(0, col, f.call(this.context, col));\r\n            });\r\n            return m;\r\n        },\r\n        toString: function () {\r\n            return JSON.stringify(this.data);\r\n        },\r\n        transpose: function () {\r\n            var m = new Matrix(this.context);\r\n            this.each(function (el, row, col) {\r\n                m.set(col, row, el);\r\n            });\r\n            return m;\r\n        },\r\n        unit: function (n) {\r\n            this.width = this.height = n;\r\n            var a = this.data = new Array(n);\r\n            for (var i = n; --i >= 0;) {\r\n                var row = a[i] = new Array(n);\r\n                for (var j = n; --j >= 0;) {\r\n                    row[j] = i == j ? 1 : 0;\r\n                }\r\n            }\r\n            return this;\r\n        },\r\n        multiply: function (b) {\r\n            var a = this, m = new Matrix(a.context);\r\n            for (var row = 0; row < a.height; ++row) {\r\n                for (var col = 0; col < b.width; ++col) {\r\n                    var s = 0;\r\n                    for (var i = 0; i < a.width; ++i) {\r\n                        var va = a.get(row, i);\r\n                        var vb = b.get(i, col);\r\n                        if (typeof va != 'number' || typeof vb != 'number') {\r\n                            throw new CalcError('VALUE');\r\n                        }\r\n                        s += va * vb;\r\n                    }\r\n                    m.set(row, col, s);\r\n                }\r\n            }\r\n            return m;\r\n        },\r\n        adds: function (b, s) {\r\n            var a = this, m = new Matrix(a.context);\r\n            var sign = s ? -1 : 1;\r\n            for (var row = 0; row < a.height; ++row) {\r\n                for (var col = 0; col < a.width; ++col) {\r\n                    var x = a.get(row, col), y = b.get(row, col);\r\n                    m.set(row, col, x + sign * y);\r\n                }\r\n            }\r\n            return m;\r\n        },\r\n        determinant: function () {\r\n            var a = this.clone().data;\r\n            var n = a.length;\r\n            var d = 1, C, L, i, k;\r\n            for (C = 0; C < n; C++) {\r\n                for (L = C; L < n && !a[L][C]; L++) {\r\n                }\r\n                if (L == n) {\r\n                    return 0;\r\n                }\r\n                if (L != C) {\r\n                    d = -d;\r\n                    for (k = C; k < n; k++) {\r\n                        var t = a[C][k];\r\n                        a[C][k] = a[L][k];\r\n                        a[L][k] = t;\r\n                    }\r\n                }\r\n                for (i = C + 1; i < n; i++) {\r\n                    for (k = C + 1; k < n; k++) {\r\n                        a[i][k] -= a[C][k] * a[i][C] / a[C][C];\r\n                    }\r\n                }\r\n                d *= a[C][C];\r\n            }\r\n            return d;\r\n        },\r\n        inverse: function () {\r\n            var n = this.width;\r\n            var m = this.augment(new Matrix(this.context).unit(n));\r\n            var a = m.data;\r\n            var tmp;\r\n            for (var k = 0; k < n; ++k) {\r\n                var imax = argmax(k, n, function (i) {\r\n                    return a[i][k];\r\n                });\r\n                if (!a[imax][k]) {\r\n                    return null;\r\n                }\r\n                if (k != imax) {\r\n                    tmp = a[k];\r\n                    a[k] = a[imax];\r\n                    a[imax] = tmp;\r\n                }\r\n                for (var i = k + 1; i < n; ++i) {\r\n                    for (var j = k + 1; j < 2 * n; ++j) {\r\n                        a[i][j] -= a[k][j] * a[i][k] / a[k][k];\r\n                    }\r\n                    a[i][k] = 0;\r\n                }\r\n            }\r\n            for (var i = 0; i < n; ++i) {\r\n                for (var f = a[i][i], j = 0; j < 2 * n; ++j) {\r\n                    a[i][j] /= f;\r\n                }\r\n            }\r\n            for (var k = n; --k >= 0;) {\r\n                for (var i = k; --i >= 0;) {\r\n                    if (a[i][k]) {\r\n                        for (var j = 2 * n; --j >= n;) {\r\n                            a[i][j] -= a[k][j] * a[i][k];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return m.slice(0, n, n, n);\r\n        },\r\n        augment: function (m) {\r\n            var ret = this.clone(), n = ret.width;\r\n            m.each(function (val, row, col) {\r\n                ret.set(row, col + n, val);\r\n            });\r\n            return ret;\r\n        },\r\n        slice: function (row, col, height, width) {\r\n            var m = new Matrix(this.context);\r\n            for (var i = 0; i < height; ++i) {\r\n                for (var j = 0; j < width; ++j) {\r\n                    m.set(i, j, this.get(row + i, col + j));\r\n                }\r\n            }\r\n            return m;\r\n        }\r\n    });\r\n    function argmax(i, end, f) {\r\n        var max = f(i), pos = i;\r\n        while (++i < end) {\r\n            var v = f(i);\r\n            if (v > max) {\r\n                max = v;\r\n                pos = i;\r\n            }\r\n        }\r\n        return pos;\r\n    }\r\n    var Formula = Class.extend({\r\n        init: function Formula(refs, handler, printer, sheet, row, col) {\r\n            this.refs = refs;\r\n            this.handler = handler;\r\n            this.print = printer;\r\n            this.absrefs = null;\r\n            this.sheet = sheet;\r\n            this.row = row;\r\n            this.col = col;\r\n            this.onReady = [];\r\n            this.pending = false;\r\n        },\r\n        clone: function (sheet, row, col) {\r\n            var lcsheet = sheet.toLowerCase();\r\n            var refs = this.refs;\r\n            if (lcsheet != this.sheet.toLowerCase()) {\r\n                refs = refs.map(function (ref) {\r\n                    if (!ref.hasSheet() && ref.sheet.toLowerCase() != lcsheet) {\r\n                        ref = ref.clone().setSheet(sheet);\r\n                    }\r\n                    return ref;\r\n                });\r\n            }\r\n            return new Formula(refs, this.handler, this.print, sheet, row, col);\r\n        },\r\n        resolve: function (val) {\r\n            this.pending = false;\r\n            this.onReady.forEach(function (callback) {\r\n                callback(val);\r\n            });\r\n        },\r\n        exec: function (ss, callback, parentContext) {\r\n            if ('value' in this) {\r\n                if (callback) {\r\n                    callback(this.value);\r\n                }\r\n            } else {\r\n                if (callback) {\r\n                    this.onReady.push(callback);\r\n                }\r\n                var ctx = new Context(this.resolve, this, ss, parentContext);\r\n                while (parentContext) {\r\n                    if (parentContext.formula === this) {\r\n                        this.pending = false;\r\n                        ctx.resolve(new CalcError('CIRCULAR'));\r\n                        return;\r\n                    }\r\n                    parentContext = parentContext.parent;\r\n                }\r\n                if (this.pending) {\r\n                    return;\r\n                }\r\n                this.pending = true;\r\n                if (!this.absrefs) {\r\n                    this.absrefs = this.refs.map(function (ref) {\r\n                        return ref.absolute(this.row, this.col);\r\n                    }, this);\r\n                }\r\n                this.handler.call(ctx);\r\n            }\r\n        },\r\n        reset: function () {\r\n            this.onReady = [];\r\n            this.pending = false;\r\n            delete this.value;\r\n        },\r\n        renameSheet: function (oldSheetName, newSheetName) {\r\n            oldSheetName = oldSheetName.toLowerCase();\r\n            this.absrefs = null;\r\n            if (this.sheet.toLowerCase() == oldSheetName) {\r\n                this.sheet = newSheetName;\r\n            }\r\n            this.refs.forEach(function (ref) {\r\n                if (ref.sheet.toLowerCase() == oldSheetName) {\r\n                    ref.sheet = newSheetName;\r\n                }\r\n            });\r\n        },\r\n        adjust: function (affectedSheet, operation, start, delta) {\r\n            affectedSheet = affectedSheet.toLowerCase();\r\n            var formulaRow = this.row;\r\n            var formulaCol = this.col;\r\n            var formulaSheet = this.sheet.toLowerCase();\r\n            var formulaMoves = false;\r\n            if (formulaSheet == affectedSheet) {\r\n                if (operation == 'row' && formulaRow >= start) {\r\n                    this.row += delta;\r\n                    formulaMoves = true;\r\n                }\r\n                if (operation == 'col' && formulaCol >= start) {\r\n                    this.col += delta;\r\n                    formulaMoves = true;\r\n                }\r\n            }\r\n            var newFormulaRow = this.row;\r\n            var newFormulaCol = this.col;\r\n            this.absrefs = null;\r\n            this.refs = this.refs.map(function (ref) {\r\n                if (ref === NULL) {\r\n                    return ref;\r\n                }\r\n                if (ref.sheet.toLowerCase() != affectedSheet) {\r\n                    if (formulaMoves) {\r\n                        if (operation == 'row' && formulaRow >= start) {\r\n                            ref = ref.relative(delta, 0);\r\n                        }\r\n                        if (operation == 'col' && formulaCol >= start) {\r\n                            ref = ref.relative(0, delta);\r\n                        }\r\n                    }\r\n                    return ref;\r\n                }\r\n                return ref.adjust(formulaRow, formulaCol, newFormulaRow, newFormulaCol, operation == 'row', start, delta);\r\n            }, this);\r\n        },\r\n        toString: function () {\r\n            return this.print(this.row, this.col);\r\n        }\r\n    });\r\n    var FUNCS = Object.create(null);\r\n    FUNCS['if'] = function (callback, args) {\r\n        var self = this;\r\n        var co = args[0], th = args[1], el = args[2];\r\n        this.resolveCells([co], function () {\r\n            var comatrix = self.asMatrix(co);\r\n            if (comatrix) {\r\n                th(function (th) {\r\n                    el(function (el) {\r\n                        var thmatrix = self.asMatrix(th);\r\n                        var elmatrix = self.asMatrix(el);\r\n                        callback(comatrix.map(function (val, row, col) {\r\n                            if (val instanceof CalcError) {\r\n                                return val;\r\n                            } else if (self.bool(val)) {\r\n                                return thmatrix ? thmatrix.get(row, col) : th;\r\n                            } else {\r\n                                return elmatrix ? elmatrix.get(row, col) : el;\r\n                            }\r\n                        }));\r\n                    });\r\n                });\r\n            } else {\r\n                co = this.force(co);\r\n                if (co instanceof CalcError) {\r\n                    callback(co);\r\n                } else if (self.bool(co)) {\r\n                    th(callback);\r\n                } else {\r\n                    el(callback);\r\n                }\r\n            }\r\n        });\r\n    };\r\n    FUNCS[''] = function (callback) {\r\n        callback((1 + Math.sqrt(5)) / 2);\r\n    };\r\n    function compileArgumentChecks(functionName, args) {\r\n        var arrayArgs = 'function arrayArgs(args) { var xargs = [], width = 0, height = 0, arrays = [], i = 0; ';\r\n        var resolve = 'function resolve(args, callback) { var toResolve = [], i = 0; ';\r\n        var name, forced, main = '\\'use strict\\'; function check(args) { var stack = [], tmp, xargs = [], i = 0, m, err = \\'VALUE\\'; ', haveForced = false;\r\n        var canBeArrayArg = false, hasArrayArgs = false;\r\n        main += args.map(comp).join('');\r\n        main += 'if (i < args.length) return new CalcError(\\'N/A\\'); ';\r\n        main += 'return xargs; } ';\r\n        arrayArgs += 'return { args: xargs, width: width, height: height, arrays: arrays }; } ';\r\n        var f;\r\n        if (haveForced) {\r\n            resolve += 'this.resolveCells(toResolve, callback); } ';\r\n            f = new Function('CalcError', main + resolve + arrayArgs + ' return { resolve: resolve, check: check, arrayArgs: arrayArgs };');\r\n        } else {\r\n            f = new Function('CalcError', main + ' return { check: check };');\r\n        }\r\n        f = f(CalcError);\r\n        if (!hasArrayArgs) {\r\n            delete f.arrayArgs;\r\n        }\r\n        return f;\r\n        function comp(x) {\r\n            name = x[0];\r\n            var code = '{ ';\r\n            if (Array.isArray(name)) {\r\n                arrayArgs += 'while (i < args.length) { ';\r\n                resolve += 'while (i < args.length) { ';\r\n                code += 'xargs.push(tmp = []); stack.push(xargs); xargs = tmp; ';\r\n                code += 'while (i < args.length) { ';\r\n                code += x.map(comp).join('');\r\n                code += '} ';\r\n                code += 'xargs = stack.pop(); ';\r\n                resolve += '} ';\r\n                arrayArgs += '} ';\r\n            } else if (name == '+') {\r\n                arrayArgs += 'while (i < args.length) { ';\r\n                resolve += 'while (i < args.length) { ';\r\n                code += 'xargs.push(tmp = []); stack.push(xargs); xargs = tmp; ';\r\n                code += 'do { ';\r\n                code += x.slice(1).map(comp).join('');\r\n                code += '} while (i < args.length); ';\r\n                code += 'xargs = stack.pop(); ';\r\n                resolve += '} ';\r\n                arrayArgs += '} ';\r\n            } else if (name == '?') {\r\n                code += 'if (!(' + cond(x[1]) + ')) return new CalcError(err); ';\r\n            } else {\r\n                var type = x[1];\r\n                if (Array.isArray(type) && /^#?collect/.test(type[0])) {\r\n                    var n = type[2];\r\n                    force();\r\n                    code += 'try {' + 'var $' + name + ' = this.cellValues(args.slice(i';\r\n                    if (n) {\r\n                        code += ', i + ' + n;\r\n                    }\r\n                    code += ')).filter(function($' + name + '){ ';\r\n                    if (type[0] == 'collect') {\r\n                        code += 'if ($' + name + ' instanceof CalcError) throw $' + name + '; ';\r\n                    }\r\n                    code += 'return ' + cond(type[1]) + '; }, this); ';\r\n                    if (n) {\r\n                        code += 'i += ' + n + '; ';\r\n                    } else {\r\n                        code += 'i = args.length; ';\r\n                    }\r\n                    code += 'xargs.push($' + name + ')' + '} catch(ex) { if (ex instanceof CalcError) return ex; throw ex; } ';\r\n                    resolve += 'toResolve.push(args.slice(i)); ';\r\n                } else if (type == 'rest') {\r\n                    code += 'xargs.push(args.slice(i)); i = args.length; ';\r\n                } else {\r\n                    if (canBeArrayArg = /^\\*/.test(name)) {\r\n                        hasArrayArgs = true;\r\n                        name = name.substr(1);\r\n                    }\r\n                    code += 'var $' + name + ' = args[i++]; ';\r\n                    var allowError = false;\r\n                    if (/!$/.test(type)) {\r\n                        type = type.substr(0, type.length - 1);\r\n                        allowError = true;\r\n                    } else {\r\n                        code += 'if ($' + name + ' instanceof CalcError) return $' + name + '; ';\r\n                    }\r\n                    code += typeCheck(type, allowError) + 'xargs.push($' + name + '); ';\r\n                }\r\n            }\r\n            code += '} ';\r\n            return code;\r\n        }\r\n        function force() {\r\n            if (forced) {\r\n                return '$' + name + '';\r\n            }\r\n            haveForced = true;\r\n            forced = true;\r\n            resolve += 'toResolve.push(args[i++]); ';\r\n            return '($' + name + ' = this.force($' + name + '))';\r\n        }\r\n        function forceNum() {\r\n            return '(' + '(typeof ' + force() + ' == \\'number\\') || ' + '(typeof $' + name + ' == \\'boolean\\') || ' + '(typeof $' + name + ' == \\'string\\' && !/^(?:=|true|false)/i.test($' + name + ') ? (' + 'tmp = kendo.spreadsheet.calc.parse(0, 0, 0, $' + name + '), ' + '/^date|number|percent$/.test(tmp.type) ? ($' + name + ' = +tmp.value, true) : false' + ') : false)' + ')';\r\n        }\r\n        function typeCheck(type, allowError) {\r\n            forced = false;\r\n            var ret = 'if (!(' + cond(type) + ')) { ';\r\n            if (forced && !allowError) {\r\n                ret += ' if ($' + name + ' instanceof CalcError) return $' + name + '; ';\r\n            }\r\n            ret += 'return new CalcError(err); } ';\r\n            if (!forced) {\r\n                resolve += 'i++; ';\r\n            }\r\n            if (canBeArrayArg) {\r\n                arrayArgs += 'var $' + name + ' = this.asMatrix(args[i]); ' + 'if ($' + name + ') { ' + 'xargs.push($' + name + '); ' + 'width = Math.max(width, $' + name + '.width); ' + 'height = Math.max(height, $' + name + '.height); ' + 'arrays.push(true) } else { ' + 'xargs.push(args[i]); ' + 'arrays.push(false); } i++; ';\r\n            } else {\r\n                arrayArgs += 'xargs.push(args[i++]); arrays.push(false); ';\r\n            }\r\n            return ret;\r\n        }\r\n        function cond(type) {\r\n            if (Array.isArray(type)) {\r\n                if (type[0] == 'or') {\r\n                    return '(' + type.slice(1).map(cond).join(') || (') + ')';\r\n                }\r\n                if (type[0] == 'and') {\r\n                    return '(' + type.slice(1).map(cond).join(') && (') + ')';\r\n                }\r\n                if (type[0] == 'values') {\r\n                    return '(' + type.slice(1).map(function (val) {\r\n                        return force() + ' === ' + val;\r\n                    }).join(') || (') + ')';\r\n                }\r\n                if (type[0] == 'null') {\r\n                    return '(' + cond('null') + ' ? (($' + name + ' = ' + type[1] + '), true) : false)';\r\n                }\r\n                if (type[0] == 'between' || type[0] == '[between]') {\r\n                    return '(' + force() + ' >= ' + type[1] + ' && ' + '$' + name + ' <= ' + type[2] + ' ? true : ((err = \\'NUM\\'), false))';\r\n                }\r\n                if (type[0] == '(between)') {\r\n                    return '(' + force() + ' > ' + type[1] + ' && ' + '$' + name + ' < ' + type[2] + ' ? true : ((err = \\'NUM\\'), false))';\r\n                }\r\n                if (type[0] == '(between]') {\r\n                    return '(' + force() + ' > ' + type[1] + ' && ' + '$' + name + ' <= ' + type[2] + ' ? true : ((err = \\'NUM\\'), false))';\r\n                }\r\n                if (type[0] == '[between)') {\r\n                    return '(' + force() + ' >= ' + type[1] + ' && ' + '$' + name + ' < ' + type[2] + ' ? true : ((err = \\'NUM\\'), false))';\r\n                }\r\n                if (type[0] == 'assert') {\r\n                    var err = type[2] || 'N/A';\r\n                    return '((' + type[1] + ') ? true : (err = ' + JSON.stringify(err) + ', false))';\r\n                }\r\n                if (type[0] == 'not') {\r\n                    return '!(' + cond(type[1]) + ')';\r\n                }\r\n                throw new Error('Unknown array type condition: ' + type[0]);\r\n            }\r\n            if (type == 'number' || type == 'datetime') {\r\n                return forceNum();\r\n            }\r\n            if (type == 'integer' || type == 'date') {\r\n                return '(' + forceNum() + ' && (($' + name + ' |= 0), true))';\r\n            }\r\n            if (type == 'divisor') {\r\n                return '(' + forceNum() + ' && ($' + name + ' == 0 ? ((err = \\'DIV/0\\'), false) : true))';\r\n            }\r\n            if (type == 'number+') {\r\n                return '(' + forceNum() + ' && ($' + name + ' >= 0 ? true : ((err = \\'NUM\\'), false)))';\r\n            }\r\n            if (type == 'integer+') {\r\n                return '(' + forceNum() + ' && (($' + name + ' |= 0) >= 0 ? true : ((err = \\'NUM\\'), false)))';\r\n            }\r\n            if (type == 'number++') {\r\n                return '(' + forceNum() + ' && ($' + name + ' > 0 ? true : ((err = \\'NUM\\'), false)))';\r\n            }\r\n            if (type == 'integer++') {\r\n                return '(' + forceNum() + ' && (($' + name + ' |= 0) > 0 ? true : ((err = \\'NUM\\'), false)))';\r\n            }\r\n            if (type == 'string') {\r\n                return '((typeof ' + force() + ' == \\'string\\' || typeof $' + name + ' == \\'boolean\\' || typeof $' + name + ' == \\'number\\') ? ($' + name + ' += \\'\\', true) : false)';\r\n            }\r\n            if (type == 'boolean') {\r\n                return '(typeof ' + force() + ' == \\'boolean\\')';\r\n            }\r\n            if (type == 'logical') {\r\n                return '(typeof ' + force() + ' == \\'boolean\\' || (typeof $' + name + ' == \\'number\\' ? ($' + name + ' = !!$' + name + ', true) : false))';\r\n            }\r\n            if (type == 'matrix') {\r\n                force();\r\n                return '((m = this.asMatrix($' + name + ')) ? ($' + name + ' = m) : false)';\r\n            }\r\n            if (type == '#matrix') {\r\n                return '((m = this.asMatrix($' + name + ')) ? ($' + name + ' = m) : false)';\r\n            }\r\n            if (type == 'ref') {\r\n                return '($' + name + ' instanceof kendo.spreadsheet.Ref)';\r\n            }\r\n            if (type == 'area') {\r\n                return '($' + name + ' instanceof kendo.spreadsheet.CellRef || $' + name + ' instanceof kendo.spreadsheet.RangeRef)';\r\n            }\r\n            if (type == 'cell') {\r\n                return '($' + name + ' instanceof kendo.spreadsheet.CellRef)';\r\n            }\r\n            if (type == 'null') {\r\n                return '(' + force() + ' == null)';\r\n            }\r\n            if (type == 'anyvalue') {\r\n                return '(' + force() + ' != null && i <= args.length)';\r\n            }\r\n            if (type == 'forced') {\r\n                return '(' + force() + ', i <= args.length)';\r\n            }\r\n            if (type == 'anything') {\r\n                return '(i <= args.length)';\r\n            }\r\n            if (type == 'blank') {\r\n                return '(' + force() + ' == null || $' + name + ' === \\'\\')';\r\n            }\r\n            throw new Error('Can\\'t check for type: ' + type);\r\n        }\r\n    }\r\n    function withErrorHandling(obj, f, args) {\r\n        if (args instanceof CalcError) {\r\n            return args;\r\n        }\r\n        try {\r\n            return f.apply(obj, args);\r\n        } catch (ex) {\r\n            if (ex instanceof CalcError) {\r\n                return ex;\r\n            } else {\r\n                throw ex;\r\n            }\r\n        }\r\n    }\r\n    function makeSyncFunction(handler, resolve, check, arrayArgs) {\r\n        return function (callback, args) {\r\n            function doit() {\r\n                if (arrayArgs) {\r\n                    var x = arrayArgs.call(this, args);\r\n                    args = x.args;\r\n                    if (x.width > 0 && x.height > 0) {\r\n                        var result = new Matrix(this);\r\n                        for (var row = 0; row < x.height; ++row) {\r\n                            for (var col = 0; col < x.width; ++col) {\r\n                                var xargs = [];\r\n                                for (var i = 0; i < args.length; ++i) {\r\n                                    if (x.arrays[i]) {\r\n                                        var m = args[i];\r\n                                        xargs[i] = m.get(row % m.height, col % m.width);\r\n                                    } else {\r\n                                        xargs[i] = args[i];\r\n                                    }\r\n                                }\r\n                                xargs = check.call(this, xargs);\r\n                                result.set(row, col, withErrorHandling(this, handler, xargs));\r\n                            }\r\n                        }\r\n                        return callback(result);\r\n                    }\r\n                }\r\n                var xargs = check.call(this, args);\r\n                callback(withErrorHandling(this, handler, xargs));\r\n            }\r\n            if (resolve) {\r\n                resolve.call(this, args, doit);\r\n            } else {\r\n                doit.call(this);\r\n            }\r\n        };\r\n    }\r\n    function makeAsyncFunction(handler, resolve, check, arrayArgs) {\r\n        return function (callback, args) {\r\n            function doit() {\r\n                if (arrayArgs) {\r\n                    var x = arrayArgs.call(this, args);\r\n                    args = x.args;\r\n                    if (x.width > 0 && x.height > 0) {\r\n                        var result = new Matrix(this);\r\n                        var count = x.width * x.height;\r\n                        var makeCallback = function (row, col) {\r\n                            return function (value) {\r\n                                result.set(row, col, value);\r\n                                --count;\r\n                                if (count === 0) {\r\n                                    return callback(result);\r\n                                }\r\n                            };\r\n                        };\r\n                        for (var row = 0; row < x.height && count > 0; ++row) {\r\n                            for (var col = 0; col < x.width && count > 0; ++col) {\r\n                                var xargs = [];\r\n                                for (var i = 0; i < args.length; ++i) {\r\n                                    if (x.arrays[i]) {\r\n                                        var m = args[i];\r\n                                        xargs[i] = m.get(row % m.height, col % m.width);\r\n                                    } else {\r\n                                        xargs[i] = args[i];\r\n                                    }\r\n                                }\r\n                                xargs = check.call(this, xargs);\r\n                                if (xargs instanceof CalcError) {\r\n                                    result.set(row, col, xargs);\r\n                                    --count;\r\n                                    if (count === 0) {\r\n                                        return callback(result);\r\n                                    }\r\n                                } else {\r\n                                    xargs.unshift(makeCallback(row, col));\r\n                                    handler.apply(this, xargs);\r\n                                }\r\n                            }\r\n                        }\r\n                        return;\r\n                    }\r\n                }\r\n                var x = check.call(this, args);\r\n                if (x instanceof CalcError) {\r\n                    callback(x);\r\n                } else {\r\n                    x.unshift(callback);\r\n                    handler.apply(this, x);\r\n                }\r\n            }\r\n            if (resolve) {\r\n                resolve.call(this, args, doit);\r\n            } else {\r\n                doit.call(this);\r\n            }\r\n        };\r\n    }\r\n    function defineFunction(name, func) {\r\n        name = name.toLowerCase();\r\n        FUNCS[name] = func;\r\n        return {\r\n            args: function (args, log) {\r\n                var code = compileArgumentChecks(name, args);\r\n                if (log) {\r\n                    if (code.arrayArgs) {\r\n                        console.log(code.arrayArgs.toString());\r\n                    }\r\n                    if (code.resolve) {\r\n                        console.log(code.resolve.toString());\r\n                    }\r\n                    if (code.check) {\r\n                        console.log(code.check.toString());\r\n                    }\r\n                }\r\n                var f = FUNCS[name] = makeSyncFunction(func, code.resolve, code.check, code.arrayArgs);\r\n                f.kendoSpreadsheetArgs = args;\r\n                return this;\r\n            },\r\n            argsAsync: function (args, log) {\r\n                var code = compileArgumentChecks(name, args);\r\n                if (log) {\r\n                    if (code.arrayArgs) {\r\n                        console.log(code.arrayArgs.toString());\r\n                    }\r\n                    if (code.resolve) {\r\n                        console.log(code.resolve.toString());\r\n                    }\r\n                    if (code.check) {\r\n                        console.log(code.check.toString());\r\n                    }\r\n                }\r\n                var f = FUNCS[name] = makeAsyncFunction(func, code.resolve, code.check, code.arrayArgs);\r\n                f.kendoSpreadsheetArgs = args;\r\n                return this;\r\n            }\r\n        };\r\n    }\r\n    function dateToJulianDays(y, m, d) {\r\n        m++;\r\n        return (1461 * (y + 4800 + ((m - 14) / 12 | 0)) / 4 | 0) + (367 * (m - 2 - 12 * ((m - 14) / 12 | 0)) / 12 | 0) - (3 * ((y + 4900 + ((m - 14) / 12 | 0)) / 100 | 0) / 4 | 0) + d - 32075;\r\n    }\r\n    function julianDaysToDate(jd) {\r\n        var l, n, j, i, m, d, y;\r\n        l = jd + 68569;\r\n        n = 4 * l / 146097 | 0;\r\n        l = l - ((146097 * n + 3) / 4 | 0);\r\n        i = 4000 * (l + 1) / 1461001 | 0;\r\n        l = l - (1461 * i / 4 | 0) + 31;\r\n        j = 80 * l / 2447 | 0;\r\n        d = l - (2447 * j / 80 | 0);\r\n        l = j / 11 | 0;\r\n        m = j + 2 - 12 * l;\r\n        y = 100 * (n - 49) + i + l;\r\n        m--;\r\n        return {\r\n            year: y,\r\n            month: m,\r\n            date: d,\r\n            day: (jd + 1) % 7,\r\n            ord: ORDINAL_ADD_DAYS[isLeapYear(y)][m] + d\r\n        };\r\n    }\r\n    var BASE_DATE = dateToJulianDays(1900, 0, -1);\r\n    var DAYS_IN_MONTH = [\r\n        31,\r\n        28,\r\n        31,\r\n        30,\r\n        31,\r\n        30,\r\n        31,\r\n        31,\r\n        30,\r\n        31,\r\n        30,\r\n        31\r\n    ];\r\n    var ORDINAL_ADD_DAYS = [\r\n        [\r\n            0,\r\n            31,\r\n            59,\r\n            90,\r\n            120,\r\n            151,\r\n            181,\r\n            212,\r\n            243,\r\n            273,\r\n            304,\r\n            334\r\n        ],\r\n        [\r\n            0,\r\n            31,\r\n            60,\r\n            91,\r\n            121,\r\n            152,\r\n            182,\r\n            213,\r\n            244,\r\n            274,\r\n            305,\r\n            335\r\n        ]\r\n    ];\r\n    function isLeapYear(yr) {\r\n        if (yr % 4) {\r\n            return 0;\r\n        }\r\n        if (yr % 100) {\r\n            return 1;\r\n        }\r\n        if (yr % 400) {\r\n            return 0;\r\n        }\r\n        return 1;\r\n    }\r\n    function daysInYear(yr) {\r\n        return isLeapYear(yr) ? 366 : 365;\r\n    }\r\n    function daysInMonth(yr, mo) {\r\n        return isLeapYear(yr) && mo == 1 ? 29 : DAYS_IN_MONTH[mo];\r\n    }\r\n    function unpackDate(serial) {\r\n        return julianDaysToDate((serial | 0) + BASE_DATE);\r\n    }\r\n    function packDate(year, month, date) {\r\n        return dateToJulianDays(year, month, date) - BASE_DATE;\r\n    }\r\n    var MS_IN_MIN = 60 * 1000;\r\n    var MS_IN_HOUR = 60 * MS_IN_MIN;\r\n    var MS_IN_DAY = 24 * MS_IN_HOUR;\r\n    function unpackTime(serial) {\r\n        var frac = serial - (serial | 0);\r\n        if (frac < 0) {\r\n            frac++;\r\n        }\r\n        var ms = Math.round(MS_IN_DAY * frac);\r\n        var hours = Math.floor(ms / MS_IN_HOUR);\r\n        ms -= hours * MS_IN_HOUR;\r\n        var minutes = Math.floor(ms / MS_IN_MIN);\r\n        ms -= minutes * MS_IN_MIN;\r\n        var seconds = Math.floor(ms / 1000);\r\n        ms -= seconds * 1000;\r\n        return {\r\n            hours: hours,\r\n            minutes: minutes,\r\n            seconds: seconds,\r\n            milliseconds: ms\r\n        };\r\n    }\r\n    function serialToDate(serial) {\r\n        var d = unpackDate(serial), t = unpackTime(serial);\r\n        return new Date(d.year, d.month, d.date, t.hours, t.minutes, t.seconds, t.milliseconds);\r\n    }\r\n    function packTime(hh, mm, ss, ms) {\r\n        return (hh + (mm + (ss + ms / 1000) / 60) / 60) / 24;\r\n    }\r\n    function dateToSerial(date) {\r\n        var time = packTime(date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds());\r\n        date = packDate(date.getFullYear(), date.getMonth(), date.getDate());\r\n        if (date < 0) {\r\n            return date - 1 + time;\r\n        } else {\r\n            return date + time;\r\n        }\r\n    }\r\n    function parseDate(str) {\r\n        return kendo.parseDate(str) || kendo.parseDate(str, [\r\n            'MMMM dd yyyy',\r\n            'MMMM dd yy',\r\n            'MMM dd yyyy',\r\n            'MMM dd yy',\r\n            'dd MMMM yyyy',\r\n            'dd MMMM yy',\r\n            'dd MMM yyyy',\r\n            'dd MMM yy',\r\n            'MMMM dd, yyyy',\r\n            'MMMM dd, yy',\r\n            'MMM dd, yyyy',\r\n            'MMM dd, yy',\r\n            'MMMM dd',\r\n            'MMM dd',\r\n            'MMMM yyyy',\r\n            'MMM yyyy',\r\n            'dd MMMM',\r\n            'dd MMM'\r\n        ]);\r\n    }\r\n    exports.CalcError = CalcError;\r\n    exports.Formula = Formula;\r\n    exports.Matrix = Matrix;\r\n    exports.packDate = packDate;\r\n    exports.unpackDate = unpackDate;\r\n    exports.packTime = packTime;\r\n    exports.unpackTime = unpackTime;\r\n    exports.serialToDate = serialToDate;\r\n    exports.dateToSerial = dateToSerial;\r\n    exports.daysInMonth = daysInMonth;\r\n    exports.isLeapYear = isLeapYear;\r\n    exports.daysInYear = daysInYear;\r\n    exports.parseDate = parseDate;\r\n    spreadsheet.dateToNumber = dateToSerial;\r\n    spreadsheet.numberToDate = serialToDate;\r\n    spreadsheet.defineFunction = defineFunction;\r\n    spreadsheet.CalcError = CalcError;\r\n    exports.defineFunction = defineFunction;\r\n    exports.defineAlias = function (alias, name) {\r\n        var orig = FUNCS[name];\r\n        if (!orig) {\r\n            throw new Error('Function ' + name + ' is not yet defined');\r\n        }\r\n        if (!orig.kendoSpreadsheetAliases) {\r\n            orig.kendoSpreadsheetAliases = [name];\r\n        }\r\n        orig.kendoSpreadsheetAliases.push(alias);\r\n        FUNCS[alias] = orig;\r\n    };\r\n    exports.FUNCS = FUNCS;\r\n    var NUMBER_OR_ZERO = [\r\n        'or',\r\n        'number',\r\n        [\r\n            'null',\r\n            0\r\n        ]\r\n    ];\r\n    var ARGS_NUMERIC = [\r\n        [\r\n            '*a',\r\n            NUMBER_OR_ZERO\r\n        ],\r\n        [\r\n            '*b',\r\n            NUMBER_OR_ZERO\r\n        ]\r\n    ];\r\n    var ARGS_ANYVALUE = [\r\n        [\r\n            '*a',\r\n            [\r\n                'or',\r\n                'anyvalue',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '*b',\r\n            [\r\n                'or',\r\n                'anyvalue',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ]\r\n    ];\r\n    defineFunction('binary+', function (a, b) {\r\n        return a + b;\r\n    }).args(ARGS_NUMERIC);\r\n    defineFunction('binary-', function (a, b) {\r\n        return a - b;\r\n    }).args(ARGS_NUMERIC);\r\n    defineFunction('binary*', function (a, b) {\r\n        return a * b;\r\n    }).args(ARGS_NUMERIC);\r\n    defineFunction('binary/', function (a, b) {\r\n        return a / b;\r\n    }).args([\r\n        [\r\n            '*a',\r\n            NUMBER_OR_ZERO\r\n        ],\r\n        [\r\n            '*b',\r\n            'divisor'\r\n        ]\r\n    ]);\r\n    defineFunction('binary^', function (a, b) {\r\n        return Math.pow(a, b);\r\n    }).args(ARGS_NUMERIC);\r\n    defineFunction('binary&', function (a, b) {\r\n        if (a == null) {\r\n            a = '';\r\n        }\r\n        if (b == null) {\r\n            b = '';\r\n        }\r\n        return '' + a + b;\r\n    }).args([\r\n        [\r\n            '*a',\r\n            [\r\n                'or',\r\n                'number',\r\n                'string',\r\n                'boolean',\r\n                'null'\r\n            ]\r\n        ],\r\n        [\r\n            '*b',\r\n            [\r\n                'or',\r\n                'number',\r\n                'string',\r\n                'boolean',\r\n                'null'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('binary=', function (a, b) {\r\n        return a === b;\r\n    }).args(ARGS_ANYVALUE);\r\n    defineFunction('binary<>', function (a, b) {\r\n        return a !== b;\r\n    }).args(ARGS_ANYVALUE);\r\n    defineFunction('binary<', binaryCompare(function (a, b) {\r\n        return a < b;\r\n    })).args(ARGS_ANYVALUE);\r\n    defineFunction('binary<=', binaryCompare(function (a, b) {\r\n        return a <= b;\r\n    })).args(ARGS_ANYVALUE);\r\n    defineFunction('binary>', binaryCompare(function (a, b) {\r\n        return a > b;\r\n    })).args(ARGS_ANYVALUE);\r\n    defineFunction('binary>=', binaryCompare(function (a, b) {\r\n        return a >= b;\r\n    })).args(ARGS_ANYVALUE);\r\n    defineFunction('unary+', function (a) {\r\n        return a;\r\n    }).args([[\r\n            '*a',\r\n            NUMBER_OR_ZERO\r\n        ]]);\r\n    defineFunction('unary-', function (a) {\r\n        return -a;\r\n    }).args([[\r\n            '*a',\r\n            NUMBER_OR_ZERO\r\n        ]]);\r\n    defineFunction('unary%', function (a) {\r\n        return a / 100;\r\n    }).args([[\r\n            '*a',\r\n            NUMBER_OR_ZERO\r\n        ]]);\r\n    defineFunction('binary:', function (a, b) {\r\n        return new RangeRef(a, b).setSheet(a.sheet || this.formula.sheet, a.hasSheet());\r\n    }).args([\r\n        [\r\n            'a',\r\n            'cell'\r\n        ],\r\n        [\r\n            'b',\r\n            'cell'\r\n        ]\r\n    ]);\r\n    defineFunction('binary,', function (a, b) {\r\n        return new UnionRef([\r\n            a,\r\n            b\r\n        ]);\r\n    }).args([\r\n        [\r\n            'a',\r\n            'ref'\r\n        ],\r\n        [\r\n            'b',\r\n            'ref'\r\n        ]\r\n    ]);\r\n    defineFunction('binary ', function (a, b) {\r\n        return a.intersect(b);\r\n    }).args([\r\n        [\r\n            'a',\r\n            'ref'\r\n        ],\r\n        [\r\n            'b',\r\n            'ref'\r\n        ]\r\n    ]);\r\n    defineFunction('not', function (a) {\r\n        return !this.bool(a);\r\n    }).args([[\r\n            '*a',\r\n            [\r\n                'or',\r\n                'anyvalue',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ]]);\r\n    defineFunction('isblank', function (val) {\r\n        if (val instanceof CellRef) {\r\n            val = this.getRefData(val);\r\n            return val == null;\r\n        }\r\n        return false;\r\n    }).args([[\r\n            '*value',\r\n            'anything!'\r\n        ]]);\r\n    defineFunction('iserror', function (val) {\r\n        return val instanceof CalcError;\r\n    }).args([[\r\n            '*value',\r\n            'forced!'\r\n        ]]);\r\n    defineFunction('iserr', function (val) {\r\n        return val instanceof CalcError && val.code != 'N/A';\r\n    }).args([[\r\n            '*value',\r\n            'forced!'\r\n        ]]);\r\n    defineFunction('isna', function (val) {\r\n        return val instanceof CalcError && val.code == 'N/A';\r\n    }).args([[\r\n            '*value',\r\n            'forced!'\r\n        ]]);\r\n    defineFunction('islogical', function (val) {\r\n        return typeof val == 'boolean';\r\n    }).args([[\r\n            '*value',\r\n            'forced!'\r\n        ]]);\r\n    defineFunction('isnontext', function (val) {\r\n        return typeof val != 'string';\r\n    }).args([[\r\n            '*value',\r\n            'forced!'\r\n        ]]);\r\n    defineFunction('istext', function (val) {\r\n        return typeof val == 'string';\r\n    }).args([[\r\n            '*value',\r\n            'forced!'\r\n        ]]);\r\n    defineFunction('isnumber', function (val) {\r\n        return typeof val == 'number';\r\n    }).args([[\r\n            '*value',\r\n            'forced!'\r\n        ]]);\r\n    defineFunction('isref', function (val) {\r\n        return val instanceof CellRef || val instanceof RangeRef;\r\n    }).args([[\r\n            '*value',\r\n            'anything!'\r\n        ]]);\r\n    function binaryCompare(func) {\r\n        return function (left, right) {\r\n            if (typeof left == 'string' && typeof right != 'string') {\r\n                right = right == null ? '' : right + '';\r\n            }\r\n            if (typeof left != 'string' && typeof right == 'string') {\r\n                left = left == null ? '' : left + '';\r\n            }\r\n            if (typeof left == 'number' && right == null) {\r\n                right = 0;\r\n            }\r\n            if (typeof right == 'number' && left == null) {\r\n                left = 0;\r\n            }\r\n            if (typeof left == 'string' && typeof right == 'string') {\r\n                left = left.toLowerCase();\r\n                right = right.toLowerCase();\r\n            }\r\n            if (typeof right == typeof left) {\r\n                return func(left, right);\r\n            } else {\r\n                return new CalcError('VALUE');\r\n            }\r\n        };\r\n    }\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/validation', ['spreadsheet/runtime'], f);\r\n}(function () {\r\n    'use strict';\r\n    var $ = kendo.jQuery;\r\n    if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n        return;\r\n    }\r\n    var spreadsheet = kendo.spreadsheet;\r\n    var exports = {};\r\n    spreadsheet.validation = exports;\r\n    var calc = spreadsheet.calc;\r\n    var Class = kendo.Class;\r\n    var TRANSPOSE_FORMAT = '_matrix({0})';\r\n    var DATE_FORMAT = 'DATEVALUE(\"{0}\")';\r\n    calc.runtime.defineFunction('_matrix', function (m) {\r\n        return m;\r\n    }).args([[\r\n            'm',\r\n            'matrix'\r\n        ]]);\r\n    function compileValidation(sheet, row, col, validation) {\r\n        var validationHandler;\r\n        var comparer;\r\n        var parsedFromDate;\r\n        var parsedToDate;\r\n        if (typeof validation === 'string') {\r\n            validation = JSON.parse(validation);\r\n        }\r\n        if (validation.from) {\r\n            if (validation.dataType === 'list') {\r\n                validation.from = kendo.format(TRANSPOSE_FORMAT, validation.from);\r\n            }\r\n            if (validation.dataType === 'date') {\r\n                parsedFromDate = calc.runtime.parseDate(validation.from);\r\n                if (parsedFromDate) {\r\n                    validation.from = kendo.format(DATE_FORMAT, validation.from);\r\n                    validation.fromIsDateValue = true;\r\n                }\r\n            }\r\n            validation.from = calc.compile(calc.parseFormula(sheet, row, col, validation.from));\r\n        }\r\n        if (validation.to) {\r\n            if (validation.dataType === 'date') {\r\n                parsedToDate = calc.runtime.parseDate(validation.to);\r\n                if (parsedToDate) {\r\n                    validation.to = kendo.format(DATE_FORMAT, validation.to);\r\n                    validation.toIsDateValue = true;\r\n                }\r\n            }\r\n            validation.to = calc.compile(calc.parseFormula(sheet, row, col, validation.to));\r\n        }\r\n        if (validation.dataType == 'custom') {\r\n            comparer = exports.validationComparers.custom;\r\n        } else if (validation.dataType == 'list') {\r\n            comparer = exports.validationComparers.list;\r\n        } else {\r\n            comparer = exports.validationComparers[validation.comparerType];\r\n        }\r\n        if (!comparer) {\r\n            throw kendo.format('\\'{0}\\' comparer is not implemented.', validation.comparerType);\r\n        }\r\n        validationHandler = function (valueToCompare) {\r\n            var toValue = this.to && this.to.value ? this.to.value : undefined;\r\n            if (valueToCompare === null || valueToCompare === '') {\r\n                if (this.allowNulls) {\r\n                    this.value = true;\r\n                } else {\r\n                    this.value = false;\r\n                }\r\n            } else if (this.dataType == 'custom') {\r\n                this.value = comparer(valueToCompare, this.from.value, toValue);\r\n            } else if (this.dataType == 'list') {\r\n                var data = this._getListData();\r\n                this.value = comparer(valueToCompare, data, toValue);\r\n            } else {\r\n                this.value = comparer(valueToCompare, this.from.value, toValue);\r\n            }\r\n            return this.value;\r\n        };\r\n        return new kendo.spreadsheet.validation.Validation($.extend(validation, {\r\n            handler: validationHandler,\r\n            sheet: sheet,\r\n            row: row,\r\n            col: col\r\n        }));\r\n    }\r\n    var Validation = Class.extend({\r\n        init: function Validation(options) {\r\n            this.handler = options.handler;\r\n            this.from = options.from;\r\n            this.to = options.to;\r\n            this.dataType = options.dataType;\r\n            this.comparerType = options.comparerType;\r\n            this.type = options.type ? options.type : 'warning';\r\n            this.allowNulls = options.allowNulls ? true : false;\r\n            this.fromIsDateValue = options.fromIsDateValue ? true : false;\r\n            this.toIsDateValue = options.toIsDateValue ? true : false;\r\n            this.sheet = options.sheet;\r\n            this.row = options.row;\r\n            this.col = options.col;\r\n            if (options.tooltipMessageTemplate) {\r\n                this.tooltipMessageTemplate = options.tooltipMessageTemplate;\r\n            }\r\n            if (options.tooltipTitleTemplate) {\r\n                this.tooltipTitleTemplate = options.tooltipTitleTemplate;\r\n            }\r\n            if (options.messageTemplate) {\r\n                this.messageTemplate = options.messageTemplate;\r\n            }\r\n            if (options.titleTemplate) {\r\n                this.titleTemplate = options.titleTemplate;\r\n            }\r\n        },\r\n        _formatMessages: function (format) {\r\n            var from = this.from ? this.from.value : '';\r\n            var to = this.to ? this.to.value : '';\r\n            var fromFormula = this.from ? this.from.toString() : '';\r\n            var toFormula = this.to ? this.to.toString() : '';\r\n            var dataType = this.dataType;\r\n            var type = this.type;\r\n            var comparerType = this.comparerType;\r\n            return kendo.format(format, from, to, fromFormula, toFormula, dataType, type, comparerType);\r\n        },\r\n        _setMessages: function () {\r\n            this.title = '';\r\n            this.message = '';\r\n            if (this.tooltipTitleTemplate) {\r\n                this.tooltipTitle = this._formatMessages(this.tooltipTitleTemplate);\r\n            }\r\n            if (this.tooltipMessageTemplate) {\r\n                this.tooltipMessage = this._formatMessages(this.tooltipMessageTemplate);\r\n            }\r\n            if (this.titleTemplate) {\r\n                this.title = this._formatMessages(this.titleTemplate);\r\n            }\r\n            if (this.messageTemplate) {\r\n                this.message = this._formatMessages(this.messageTemplate);\r\n            }\r\n        },\r\n        _getListData: function () {\r\n            if (!this.from.value || !this.from.value.data) {\r\n                return [];\r\n            }\r\n            var cube = this.from.value.data;\r\n            var i;\r\n            var y;\r\n            var data = [];\r\n            for (i = 0; i < cube.length; i++) {\r\n                var array = cube[i];\r\n                if (array) {\r\n                    for (y = 0; y < array.length; y++) {\r\n                        data.push(array[y]);\r\n                    }\r\n                }\r\n            }\r\n            return data;\r\n        },\r\n        clone: function (sheet, row, col) {\r\n            var options = this._getOptions();\r\n            if (options.from) {\r\n                options.from = options.from.clone(sheet, row, col);\r\n            }\r\n            if (options.to) {\r\n                options.to = options.to.clone(sheet, row, col);\r\n            }\r\n            return new Validation($.extend(options, { handler: this.handler }, {\r\n                sheet: sheet,\r\n                row: row,\r\n                col: col\r\n            }));\r\n        },\r\n        exec: function (ss, compareValue, compareFormat, callback) {\r\n            var self = this;\r\n            var calculateFromCallBack = function () {\r\n                self.value = self.handler.call(self, compareValue, compareFormat);\r\n                self._setMessages();\r\n                if (callback) {\r\n                    callback(self.value);\r\n                }\r\n            };\r\n            if (self.to) {\r\n                self.to.exec(ss, function () {\r\n                    self.from.exec(ss, calculateFromCallBack);\r\n                });\r\n            } else {\r\n                self.from.exec(ss, calculateFromCallBack);\r\n            }\r\n        },\r\n        reset: function () {\r\n            if (this.from) {\r\n                this.from.reset();\r\n            }\r\n            if (this.to) {\r\n                this.to.reset();\r\n            }\r\n            delete this.value;\r\n        },\r\n        adjust: function (affectedSheet, operation, start, delta) {\r\n            if (this.from) {\r\n                this.from.adjust(affectedSheet, operation, start, delta);\r\n            }\r\n            if (this.to) {\r\n                this.to.adjust(affectedSheet, operation, start, delta);\r\n            }\r\n            if (this.sheet.toLowerCase() == affectedSheet.toLowerCase()) {\r\n                var formulaRow = this.row;\r\n                var formulaCol = this.col;\r\n                switch (operation) {\r\n                case 'row':\r\n                    if (formulaRow >= start) {\r\n                        this.row += delta;\r\n                    }\r\n                    break;\r\n                case 'col':\r\n                    if (formulaCol >= start) {\r\n                        this.col += delta;\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n        toJSON: function () {\r\n            var options = this._getOptions();\r\n            if (options.from) {\r\n                options.from = options.from.toString();\r\n                if (options.dataType === 'list') {\r\n                    options.from = options.from.replace(/^_matrix\\((.*)\\)$/i, '$1');\r\n                }\r\n                if (options.dataType === 'date') {\r\n                    if (this.fromIsDateValue) {\r\n                        options.from = options.from.replace(/^DATEVALUE\\(\"(.*)\"\\)$/i, '$1');\r\n                    }\r\n                }\r\n            }\r\n            if (options.to) {\r\n                options.to = options.to.toString();\r\n                if (options.dataType === 'date') {\r\n                    if (this.toIsDateValue) {\r\n                        options.to = options.to.replace(/^DATEVALUE\\(\"(.*)\"\\)$/i, '$1');\r\n                    }\r\n                }\r\n            }\r\n            return options;\r\n        },\r\n        _getOptions: function () {\r\n            return {\r\n                from: this.from,\r\n                to: this.to,\r\n                dataType: this.dataType,\r\n                type: this.type,\r\n                comparerType: this.comparerType,\r\n                row: this.row,\r\n                col: this.col,\r\n                sheet: this.sheet,\r\n                allowNulls: this.allowNulls,\r\n                tooltipMessageTemplate: this.tooltipMessageTemplate,\r\n                tooltipTitleTemplate: this.tooltipTitleTemplate,\r\n                messageTemplate: this.messageTemplate,\r\n                titleTemplate: this.titleTemplate\r\n            };\r\n        }\r\n    });\r\n    exports.compile = compileValidation;\r\n    exports.validationComparers = {\r\n        greaterThan: function (valueToCompare, from) {\r\n            return valueToCompare > from;\r\n        },\r\n        lessThan: function (valueToCompare, from) {\r\n            return valueToCompare < from;\r\n        },\r\n        between: function (valueToCompare, from, to) {\r\n            return valueToCompare >= from && valueToCompare <= to;\r\n        },\r\n        equalTo: function (valueToCompare, from) {\r\n            return valueToCompare == from;\r\n        },\r\n        notEqualTo: function (valueToCompare, from) {\r\n            return valueToCompare != from;\r\n        },\r\n        greaterThanOrEqualTo: function (valueToCompare, from) {\r\n            return valueToCompare >= from;\r\n        },\r\n        lessThanOrEqualTo: function (valueToCompare, from) {\r\n            return valueToCompare <= from;\r\n        },\r\n        notBetween: function (valueToCompare, from, to) {\r\n            return valueToCompare < from || valueToCompare > to;\r\n        },\r\n        custom: function (valueToCompare, from) {\r\n            return from;\r\n        },\r\n        list: function (valueToCompare, data) {\r\n            return data.indexOf(valueToCompare) > -1;\r\n        }\r\n    };\r\n    exports.Validation = Validation;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/sheet', [\r\n        'kendo.core',\r\n        'kendo.color',\r\n        'spreadsheet/runtime',\r\n        'spreadsheet/validation',\r\n        'spreadsheet/references'\r\n    ], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var RangeRef = kendo.spreadsheet.RangeRef;\r\n        var CellRef = kendo.spreadsheet.CellRef;\r\n        var Range = kendo.spreadsheet.Range;\r\n        var Selection = kendo.Class.extend({\r\n            init: function (sheet) {\r\n                this._sheet = sheet;\r\n                this.selection = kendo.spreadsheet.FIRSTREF.toRangeRef();\r\n                this.originalSelection = kendo.spreadsheet.FIRSTREF.toRangeRef();\r\n                this._activeCell = kendo.spreadsheet.FIRSTREF.toRangeRef();\r\n                this.originalActiveCell = kendo.spreadsheet.FIRSTREF;\r\n            },\r\n            currentSelectionRange: function () {\r\n                return this.selection.rangeAt(this.selectionRangeIndex).toRangeRef();\r\n            },\r\n            currentOriginalNavigationRange: function () {\r\n                return this.originalSelection.rangeAt(this.selectionRangeIndex).toRangeRef();\r\n            },\r\n            currentNavigationRange: function () {\r\n                if (this.singleCellSelection()) {\r\n                    return this._sheet._sheetRef;\r\n                } else {\r\n                    return this.selection.rangeAt(this.selectionRangeIndex).toRangeRef();\r\n                }\r\n            },\r\n            nextNavigationRange: function () {\r\n                if (!this.singleCellSelection()) {\r\n                    this.selectionRangeIndex = this.selection.nextRangeIndex(this.selectionRangeIndex);\r\n                }\r\n                return this.currentNavigationRange();\r\n            },\r\n            previousNavigationRange: function () {\r\n                if (!this.singleCellSelection()) {\r\n                    this.selectionRangeIndex = this.selection.previousRangeIndex(this.selectionRangeIndex);\r\n                }\r\n                return this.currentNavigationRange();\r\n            },\r\n            activeCell: function (ref) {\r\n                if (ref) {\r\n                    this.originalActiveCell = ref.first();\r\n                    this._activeCell = this._sheet.unionWithMerged(ref.toRangeRef());\r\n                    this._sheet.focus(ref);\r\n                    this._sheet.triggerChange({\r\n                        activeCell: true,\r\n                        selection: true\r\n                    });\r\n                }\r\n                return this._activeCell;\r\n            },\r\n            select: function (ref, expanded, changeActiveCell) {\r\n                if (ref) {\r\n                    if (ref.eq(this.originalSelection)) {\r\n                        return;\r\n                    }\r\n                    this.originalSelection = ref;\r\n                    this.selection = expanded;\r\n                    if (changeActiveCell !== false) {\r\n                        if (ref.isCell()) {\r\n                            this.activeCell(ref);\r\n                        } else {\r\n                            this.activeCell(this.selection.lastRange().first());\r\n                        }\r\n                        this.selectionRangeIndex = this.selection.size() - 1;\r\n                    } else {\r\n                        this._sheet.triggerChange({ selection: true });\r\n                    }\r\n                }\r\n                return this.selection;\r\n            },\r\n            singleCellSelection: function () {\r\n                return this._activeCell.eq(this.selection);\r\n            }\r\n        });\r\n        var Sheet = kendo.Observable.extend({\r\n            init: function () {\r\n                kendo.Observable.prototype.init.call(this);\r\n                this._reinit.apply(this, arguments);\r\n            },\r\n            _reinit: function (rowCount, columnCount, rowHeight, columnWidth, headerHeight, headerWidth) {\r\n                var cellCount = rowCount * columnCount - 1;\r\n                this._rows = new kendo.spreadsheet.Axis(rowCount, rowHeight);\r\n                this._columns = new kendo.spreadsheet.Axis(columnCount, columnWidth);\r\n                this._mergedCells = [];\r\n                this._frozenRows = 0;\r\n                this._frozenColumns = 0;\r\n                this._suspendChanges = false;\r\n                this._filter = null;\r\n                this._showGridLines = true;\r\n                this._grid = new kendo.spreadsheet.Grid(this._rows, this._columns, rowCount, columnCount, headerHeight, headerWidth);\r\n                this._sheetRef = this._grid.normalize(kendo.spreadsheet.SHEETREF);\r\n                this._properties = new kendo.spreadsheet.PropertyBag(cellCount);\r\n                this._sorter = new kendo.spreadsheet.Sorter(this._grid, this._properties.sortable());\r\n                this._viewSelection = new Selection(this);\r\n                this._editSelection = new Selection(this);\r\n                this._formulaSelections = [];\r\n            },\r\n            _selectionState: function () {\r\n                return this._inEdit ? this._editSelection : this._viewSelection;\r\n            },\r\n            navigator: function () {\r\n                if (!this._navigator) {\r\n                    this._navigator = new kendo.spreadsheet.SheetNavigator(this);\r\n                }\r\n                return this._navigator;\r\n            },\r\n            axisManager: function () {\r\n                if (!this._axisManager) {\r\n                    this._axisManager = new kendo.spreadsheet.AxisManager(this);\r\n                }\r\n                return this._axisManager;\r\n            },\r\n            _name: function (value) {\r\n                if (!value) {\r\n                    return this._sheetName;\r\n                }\r\n                this._sheetName = value;\r\n                return this;\r\n            },\r\n            name: function () {\r\n                return this._name();\r\n            },\r\n            _property: function (accessor, value, reason) {\r\n                if (value === undefined) {\r\n                    return accessor();\r\n                } else {\r\n                    accessor(value);\r\n                    return this.triggerChange(reason);\r\n                }\r\n            },\r\n            _field: function (name, value, reason) {\r\n                if (value === undefined) {\r\n                    return this[name];\r\n                } else {\r\n                    this[name] = value;\r\n                    return this.triggerChange(reason);\r\n                }\r\n            },\r\n            suspendChanges: function (value) {\r\n                if (value === undefined) {\r\n                    return this._suspendChanges;\r\n                }\r\n                this._suspendChanges = value;\r\n                return this;\r\n            },\r\n            triggerChange: function (reason) {\r\n                if (!this._suspendChanges) {\r\n                    this.trigger('change', reason);\r\n                }\r\n                return this;\r\n            },\r\n            setDataSource: function (dataSource, columns) {\r\n                if (this.dataSourceBinder) {\r\n                    this.dataSourceBinder.destroy();\r\n                }\r\n                this.dataSourceBinder = new kendo.spreadsheet.SheetDataSourceBinder({\r\n                    dataSource: dataSource,\r\n                    sheet: this,\r\n                    columns: columns\r\n                });\r\n                this.dataSource = this.dataSourceBinder.dataSource;\r\n            },\r\n            hideColumn: function (columnIndex) {\r\n                return this._property(this._columns.hide.bind(this._columns), columnIndex, { layout: true });\r\n            },\r\n            unhideColumn: function (columnIndex) {\r\n                return this._property(this._columns.unhide.bind(this._columns), columnIndex, { layout: true });\r\n            },\r\n            isHiddenColumn: function (columnIndex) {\r\n                return this._grid._columns.hidden(columnIndex);\r\n            },\r\n            _copyRange: function (sourceRangeRef, targetRef) {\r\n                var grid = this._grid;\r\n                var rowCount = grid.rowCount;\r\n                var nextRefTopLeft = grid.normalize(sourceRangeRef.topLeft);\r\n                var nextRefBottomRight = grid.normalize(sourceRangeRef.bottomRight);\r\n                var nextIndex = nextRefTopLeft.col * rowCount + nextRefTopLeft.row;\r\n                var nextBottomIndex = nextRefBottomRight.col * rowCount + nextRefBottomRight.row;\r\n                var targetIndex = targetRef.col * rowCount + targetRef.row;\r\n                this._properties.copy(nextIndex, nextBottomIndex, targetIndex);\r\n            },\r\n            _adjustReferences: function (operation, start, delta, mergedCells) {\r\n                this._mergedCells = mergedCells.reduce(function (a, ref) {\r\n                    ref = ref.adjust(null, null, null, null, operation == 'row', start, delta);\r\n                    if (ref instanceof RangeRef) {\r\n                        a.push(ref);\r\n                    }\r\n                    return a;\r\n                }, []);\r\n                if (this._workbook) {\r\n                    var affectedSheet = this._name();\r\n                    this._workbook._sheets.forEach(function (sheet) {\r\n                        sheet._forFormulas(function (formula) {\r\n                            formula.adjust(affectedSheet, operation, start, delta);\r\n                        });\r\n                        sheet._forValidations(function (validation) {\r\n                            validation.adjust(affectedSheet, operation, start, delta);\r\n                        });\r\n                    });\r\n                    this._workbook.adjustNames(affectedSheet, operation == 'row', start, delta);\r\n                }\r\n                var selection = this.select();\r\n                selection = selection.adjust(null, null, null, null, operation == 'row', start, delta);\r\n                if (selection !== kendo.spreadsheet.NULLREF) {\r\n                    this.select(selection);\r\n                }\r\n                var axis = operation == 'col' ? this._columns : this._rows;\r\n                axis.adjust(start, delta);\r\n            },\r\n            _forFormulas: function (callback) {\r\n                var props = this._properties;\r\n                var formulas = props.get('formula').values();\r\n                var n = formulas.length;\r\n                formulas.forEach(function (f, i) {\r\n                    callback.call(this, f.value, i, n);\r\n                }, this);\r\n            },\r\n            _forValidations: function (callback) {\r\n                var props = this._properties;\r\n                props.get('validation').values().forEach(function (v) {\r\n                    callback.call(this, v.value);\r\n                }, this);\r\n            },\r\n            canInsertRow: function (rowIndex, count) {\r\n                count = count || 1;\r\n                var grid = this._grid;\r\n                var range = this.range(grid.rowCount - count, 0, count, grid.columnCount);\r\n                return !range.hasValue();\r\n            },\r\n            insertRow: function (rowIndex) {\r\n                if (!this.canInsertRow(rowIndex)) {\r\n                    throw new Error('Shifting nonblank cells off the worksheet is not supported!');\r\n                }\r\n                this.batch(function () {\r\n                    var grid = this._grid;\r\n                    var columnCount = grid.columnCount;\r\n                    var rowCount = grid.rowCount;\r\n                    var frozenRows = this.frozenRows();\r\n                    if (rowIndex < frozenRows) {\r\n                        this.frozenRows(frozenRows + 1);\r\n                    }\r\n                    var mergedCells = this._mergedCells.slice();\r\n                    for (var ci = 0; ci < columnCount; ci++) {\r\n                        var ref = new RangeRef(new CellRef(rowIndex, ci), new CellRef(rowIndex, ci));\r\n                        var topLeft = grid.normalize(ref.topLeft);\r\n                        var bottomRight = grid.normalize(ref.bottomRight);\r\n                        var nextRef = new RangeRef(new CellRef(topLeft.row, topLeft.col), new CellRef(rowCount - 2, bottomRight.col));\r\n                        this._copyRange(nextRef, new CellRef(topLeft.row + 1, topLeft.col));\r\n                        new Range(ref, this).clear();\r\n                    }\r\n                    this._adjustReferences('row', rowIndex, 1, mergedCells);\r\n                }, {\r\n                    recalc: true,\r\n                    layout: true,\r\n                    insertRow: { index: rowIndex },\r\n                    ref: new RangeRef(new CellRef(rowIndex, 0), new CellRef(Infinity, Infinity))\r\n                });\r\n                return this;\r\n            },\r\n            isEnabledRow: function (rowIndex) {\r\n                var ref = new RangeRef(new CellRef(rowIndex, 0), new CellRef(rowIndex, this._grid.columnCount));\r\n                return new Range(ref, this).enable();\r\n            },\r\n            deleteRow: function (rowIndex) {\r\n                if (!this.isEnabledRow(rowIndex)) {\r\n                    return this;\r\n                }\r\n                this.batch(function () {\r\n                    var grid = this._grid;\r\n                    var columnCount = grid.columnCount;\r\n                    var frozenRows = this.frozenRows();\r\n                    if (rowIndex < frozenRows) {\r\n                        this.frozenRows(frozenRows - 1);\r\n                    }\r\n                    var mergedCells = this._mergedCells.slice();\r\n                    for (var ci = 0; ci < columnCount; ci++) {\r\n                        var ref = new RangeRef(new CellRef(rowIndex, ci), new CellRef(rowIndex, ci));\r\n                        new Range(ref, this).clear();\r\n                        var topLeft = grid.normalize(ref.topLeft);\r\n                        var bottomRight = grid.normalize(ref.bottomRight);\r\n                        var nextRef = new RangeRef(new CellRef(topLeft.row + 1, topLeft.col), new CellRef(Infinity, bottomRight.col));\r\n                        this._copyRange(nextRef, topLeft);\r\n                        var nextRefBottomRight = grid.normalize(nextRef.bottomRight);\r\n                        new Range(new RangeRef(nextRefBottomRight, nextRefBottomRight), this).clear();\r\n                    }\r\n                    this._adjustReferences('row', rowIndex, -1, mergedCells);\r\n                }, {\r\n                    recalc: true,\r\n                    layout: true,\r\n                    deleteRow: { index: rowIndex },\r\n                    ref: new RangeRef(new CellRef(rowIndex, 0), new CellRef(Infinity, Infinity))\r\n                });\r\n                return this;\r\n            },\r\n            insertColumn: function (columnIndex) {\r\n                this.batch(function () {\r\n                    var grid = this._grid;\r\n                    var columnCount = grid.columnCount;\r\n                    var frozenColumns = this.frozenColumns();\r\n                    if (columnIndex < frozenColumns) {\r\n                        this.frozenColumns(frozenColumns + 1);\r\n                    }\r\n                    var mergedCells = this._mergedCells.slice();\r\n                    for (var ci = columnCount; ci >= columnIndex; ci--) {\r\n                        var ref = new RangeRef(new CellRef(0, ci), new CellRef(Infinity, ci));\r\n                        new Range(ref, this).clear();\r\n                        if (ci == columnIndex) {\r\n                            break;\r\n                        }\r\n                        var topLeft = grid.normalize(ref.topLeft);\r\n                        var bottomRight = grid.normalize(ref.bottomRight);\r\n                        var nextRef = new RangeRef(new CellRef(topLeft.row, topLeft.col - 1), new CellRef(bottomRight.row, bottomRight.col - 1));\r\n                        this._copyRange(nextRef, topLeft);\r\n                    }\r\n                    this._adjustReferences('col', columnIndex, 1, mergedCells);\r\n                }, {\r\n                    recalc: true,\r\n                    layout: true,\r\n                    insertColumn: { index: columnIndex },\r\n                    ref: new RangeRef(new CellRef(0, columnIndex), new CellRef(Infinity, Infinity))\r\n                });\r\n                return this;\r\n            },\r\n            isEnabledColumn: function (columnIndex) {\r\n                var ref = new RangeRef(new CellRef(0, columnIndex), new CellRef(Infinity, columnIndex));\r\n                return new Range(ref, this).enable();\r\n            },\r\n            deleteColumn: function (columnIndex) {\r\n                if (!this.isEnabledColumn(columnIndex)) {\r\n                    return this;\r\n                }\r\n                this.batch(function () {\r\n                    var grid = this._grid;\r\n                    var columnCount = grid.columnCount;\r\n                    var frozenColumns = this.frozenColumns();\r\n                    if (columnIndex < frozenColumns) {\r\n                        this.frozenColumns(frozenColumns - 1);\r\n                    }\r\n                    var mergedCells = this._mergedCells.slice();\r\n                    for (var ci = columnIndex; ci < columnCount; ci++) {\r\n                        var ref = new RangeRef(new CellRef(0, ci), new CellRef(Infinity, ci));\r\n                        new Range(ref, this).clear();\r\n                        if (ci == columnCount - 1) {\r\n                            break;\r\n                        }\r\n                        var topLeft = grid.normalize(ref.topLeft);\r\n                        var bottomRight = grid.normalize(ref.bottomRight);\r\n                        var nextRef = new RangeRef(new CellRef(topLeft.row, topLeft.col + 1), new CellRef(bottomRight.row, bottomRight.col + 1));\r\n                        this._copyRange(nextRef, topLeft);\r\n                    }\r\n                    this._adjustReferences('col', columnIndex, -1, mergedCells);\r\n                }, {\r\n                    recalc: true,\r\n                    layout: true,\r\n                    deleteColumn: { index: columnIndex },\r\n                    ref: new RangeRef(new CellRef(0, columnIndex), new CellRef(Infinity, Infinity))\r\n                });\r\n                return this;\r\n            },\r\n            hideRow: function (rowIndex) {\r\n                return this._property(this._rows.hide.bind(this._rows), rowIndex, { layout: true });\r\n            },\r\n            unhideRow: function (rowIndex) {\r\n                return this._property(this._rows.unhide.bind(this._rows), rowIndex, { layout: true });\r\n            },\r\n            isHiddenRow: function (rowIndex) {\r\n                return this._grid._rows.hidden(rowIndex);\r\n            },\r\n            columnWidth: function (columnIndex, width) {\r\n                return this._property(this._columns.value.bind(this._columns, columnIndex, columnIndex), width, { layout: true });\r\n            },\r\n            rowHeight: function (rowIndex, height) {\r\n                return this._property(this._rows.value.bind(this._rows, rowIndex, rowIndex), height, { layout: true });\r\n            },\r\n            frozenRows: function (value) {\r\n                return this._field('_frozenRows', value, { layout: true });\r\n            },\r\n            frozenColumns: function (value) {\r\n                return this._field('_frozenColumns', value, { layout: true });\r\n            },\r\n            showGridLines: function (value) {\r\n                return this._field('_showGridLines', value, { layout: true });\r\n            },\r\n            _ref: function (row, column, numRows, numColumns) {\r\n                var ref = null;\r\n                if (row instanceof kendo.spreadsheet.Ref) {\r\n                    return row;\r\n                }\r\n                if (row instanceof kendo.spreadsheet.Range) {\r\n                    return row._ref.toRangeRef();\r\n                }\r\n                if (typeof row === 'string') {\r\n                    ref = kendo.spreadsheet.calc.parseReference(row);\r\n                } else {\r\n                    if (!numRows) {\r\n                        numRows = 1;\r\n                    }\r\n                    if (!numColumns) {\r\n                        numColumns = 1;\r\n                    }\r\n                    ref = new RangeRef(new CellRef(row, column), new CellRef(row + numRows - 1, column + numColumns - 1));\r\n                }\r\n                return ref;\r\n            },\r\n            range: function (row, column, numRows, numColumns) {\r\n                return new Range(this._ref(row, column, numRows, numColumns), this);\r\n            },\r\n            forEachMergedCell: function (ref, callback) {\r\n                var selectAll = false;\r\n                if (typeof callback === 'undefined') {\r\n                    callback = ref;\r\n                    selectAll = true;\r\n                }\r\n                this._mergedCells.forEach(function (merged) {\r\n                    if (selectAll || merged.intersects(ref)) {\r\n                        callback(merged);\r\n                    }\r\n                });\r\n            },\r\n            forEachFilterHeader: function (ref, callback) {\r\n                var selectAll = false;\r\n                if (typeof callback === 'undefined') {\r\n                    callback = ref;\r\n                    selectAll = true;\r\n                }\r\n                if (this._filter) {\r\n                    var refs = [];\r\n                    this._filter.ref.forEachColumn(function (columnRef) {\r\n                        if (selectAll || columnRef.intersects(ref)) {\r\n                            refs.push(columnRef.topLeft);\r\n                        }\r\n                    });\r\n                    this._mergedCells.forEach(function (merged) {\r\n                        refs = refs.map(function (ref) {\r\n                            if (merged.intersects(ref)) {\r\n                                return merged;\r\n                            }\r\n                            return ref;\r\n                        });\r\n                    });\r\n                    refs.reduce(function unique(result, element) {\r\n                        if (result.indexOf(element) < 0) {\r\n                            result.push(element);\r\n                        }\r\n                        return result;\r\n                    }, []).forEach(callback);\r\n                }\r\n            },\r\n            forEach: function (ref, callback) {\r\n                if (!(ref instanceof RangeRef)) {\r\n                    ref = this._ref(ref);\r\n                }\r\n                var topLeft = this._grid.normalize(ref.topLeft);\r\n                var bottomRight = this._grid.normalize(ref.bottomRight);\r\n                for (var ci = topLeft.col; ci <= bottomRight.col; ci++) {\r\n                    var ri = topLeft.row;\r\n                    var startCellIndex = this._grid.index(ri, ci);\r\n                    var endCellIndex = this._grid.index(bottomRight.row, ci);\r\n                    this._properties.forEach(startCellIndex, endCellIndex, function (value) {\r\n                        callback(ri++, ci, value);\r\n                    });\r\n                }\r\n            },\r\n            startResizing: function (initialPosition) {\r\n                this._initialPosition = initialPosition;\r\n                this._resizeInProgress = true;\r\n            },\r\n            startAutoFill: function () {\r\n                this._autoFillInProgress = true;\r\n                var selection = this.select();\r\n                this._autoFillOrigin = selection;\r\n                this._autoFillDest = selection;\r\n                this.triggerChange({ selection: true });\r\n            },\r\n            updateAutoFill: function (dest, punch, hint, direction) {\r\n                this._autoFillDest = dest;\r\n                this._autoFillPunch = punch;\r\n                this._autoFillHint = hint;\r\n                this._autoFillDirection = direction;\r\n                this.triggerChange({ selection: true });\r\n            },\r\n            autoFillRef: function () {\r\n                return this._autoFillDest;\r\n            },\r\n            autoFillPunch: function () {\r\n                return this._autoFillPunch;\r\n            },\r\n            autoFillInProgress: function () {\r\n                return this._autoFillInProgress;\r\n            },\r\n            resizingInProgress: function () {\r\n                return this._resizeInProgress;\r\n            },\r\n            completeResizing: function () {\r\n                if (this._resizeInProgress) {\r\n                    this._resizeInProgress = false;\r\n                    var hintPosition = this.resizeHintPosition();\r\n                    if (this._initialPosition && hintPosition) {\r\n                        var handlePosition = this.resizeHandlePosition();\r\n                        if (handlePosition.col !== -Infinity) {\r\n                            this.trigger('commandRequest', {\r\n                                command: 'ColumnWidthCommand',\r\n                                options: {\r\n                                    target: handlePosition.col,\r\n                                    value: this.columnWidth(handlePosition.col) - (this._initialPosition.x - hintPosition.x)\r\n                                }\r\n                            });\r\n                        } else {\r\n                            this.trigger('commandRequest', {\r\n                                command: 'RowHeightCommand',\r\n                                options: {\r\n                                    target: handlePosition.row,\r\n                                    value: this.rowHeight(handlePosition.row) - (this._initialPosition.y - hintPosition.y)\r\n                                }\r\n                            });\r\n                        }\r\n                    } else {\r\n                        this.trigger('change', { resize: true });\r\n                    }\r\n                }\r\n            },\r\n            resizeHandlePosition: function () {\r\n                return this._resizeHandlePosition;\r\n            },\r\n            resizeHintPosition: function (location) {\r\n                if (location !== undefined) {\r\n                    this._resizeHintPosition = location;\r\n                    this.trigger('change', { resize: true });\r\n                }\r\n                return this._resizeHintPosition;\r\n            },\r\n            removeResizeHandle: function () {\r\n                if (this._resizeHandlePosition) {\r\n                    this._resizeHintPosition = undefined;\r\n                    this._resizeHandlePosition = undefined;\r\n                    this._initialPosition = undefined;\r\n                    this.trigger('change', { resize: true });\r\n                }\r\n            },\r\n            positionResizeHandle: function (ref) {\r\n                this._resizeHandlePosition = ref;\r\n                this.trigger('change', { resize: true });\r\n            },\r\n            startSelection: function () {\r\n                this._selectionInProgress = true;\r\n            },\r\n            completeSelection: function () {\r\n                if (this._selectionInProgress) {\r\n                    this._selectionInProgress = false;\r\n                    this._resizeHintPosition = undefined;\r\n                    this.trigger('change', { selection: true });\r\n                }\r\n                if (this._autoFillInProgress) {\r\n                    this._autoFillInProgress = false;\r\n                    var dest = this._autoFillDest;\r\n                    var origin = this._autoFillOrigin;\r\n                    if (this._autoFillPunch) {\r\n                        this.trigger('commandRequest', {\r\n                            command: 'ClearContentCommand',\r\n                            options: { operatingRange: this.range(this._autoFillPunch) }\r\n                        });\r\n                    } else {\r\n                        if (!dest.eq(origin)) {\r\n                            this.trigger('commandRequest', {\r\n                                command: 'AutoFillCommand',\r\n                                options: {\r\n                                    operatingRange: this.range(dest),\r\n                                    origin: this.range(origin)\r\n                                }\r\n                            });\r\n                        } else {\r\n                            this.triggerChange({ selection: true });\r\n                        }\r\n                    }\r\n                    this._autoFillDest = null;\r\n                    this._autoFillPunch = null;\r\n                    this._autoFillOrigin = null;\r\n                    this.select(dest);\r\n                }\r\n            },\r\n            selectionInProgress: function () {\r\n                return this._selectionInProgress;\r\n            },\r\n            select: function (ref, changeActiveCell) {\r\n                var selectionState = this._selectionState();\r\n                var expandedRef;\r\n                if (ref) {\r\n                    ref = this._ref(ref);\r\n                    expandedRef = this._grid.isAxis(ref) ? ref : this.unionWithMerged(ref);\r\n                }\r\n                return selectionState.select(ref, expandedRef, changeActiveCell);\r\n            },\r\n            originalSelect: function () {\r\n                return this._selectionState().originalSelection;\r\n            },\r\n            currentSelectionRange: function () {\r\n                return this._selectionState().currentSelectionRange();\r\n            },\r\n            currentOriginalSelectionRange: function () {\r\n                return this._selectionState().currentOriginalNavigationRange();\r\n            },\r\n            currentNavigationRange: function () {\r\n                return this._selectionState().currentNavigationRange();\r\n            },\r\n            nextNavigationRange: function () {\r\n                return this._selectionState().nextNavigationRange();\r\n            },\r\n            previousNavigationRange: function () {\r\n                return this._selectionState().previousNavigationRange();\r\n            },\r\n            selectionRangeIndex: function () {\r\n                return this._selectionState().selectionRangeIndex;\r\n            },\r\n            activeCell: function (ref) {\r\n                return this._selectionState().activeCell(ref);\r\n            },\r\n            originalActiveCell: function () {\r\n                return this._selectionState().originalActiveCell;\r\n            },\r\n            singleCellSelection: function () {\r\n                return this._selectionState().singleCellSelection();\r\n            },\r\n            unionWithMerged: function (ref) {\r\n                var mergedCells = this._mergedCells;\r\n                return ref.map(function (ref) {\r\n                    return ref.toRangeRef().union(mergedCells);\r\n                });\r\n            },\r\n            trim: function (ref) {\r\n                var trims = [];\r\n                var grid = this._grid;\r\n                this._properties.forEachProperty(function (property) {\r\n                    trims.push(grid.trim(ref, property.list));\r\n                });\r\n                return this.unionWithMerged(ref.topLeft.toRangeRef().union(trims));\r\n            },\r\n            focus: function (ref) {\r\n                if (ref) {\r\n                    this._focus = ref.toRangeRef();\r\n                } else {\r\n                    var focus = this._focus;\r\n                    this._focus = null;\r\n                    return focus;\r\n                }\r\n            },\r\n            activeCellSelection: function () {\r\n                return new Range(this._grid.normalize(this.activeCell()), this);\r\n            },\r\n            selection: function () {\r\n                return new Range(this._grid.normalize(this._selectionState().selection), this);\r\n            },\r\n            selectedHeaders: function () {\r\n                var selection = this.select();\r\n                var rows = {};\r\n                var cols = {};\r\n                var allCols = false;\r\n                var allRows = false;\r\n                selection.forEach(function (ref) {\r\n                    var i;\r\n                    var rowState = 'partial';\r\n                    var colState = 'partial';\r\n                    ref = ref.toRangeRef();\r\n                    var bottomRight = ref.bottomRight;\r\n                    var rowSelection = bottomRight.col === Infinity;\r\n                    var colSelection = bottomRight.row === Infinity;\r\n                    if (colSelection) {\r\n                        allRows = true;\r\n                        colState = 'full';\r\n                    }\r\n                    if (rowSelection) {\r\n                        allCols = true;\r\n                        rowState = 'full';\r\n                    }\r\n                    if (!colSelection) {\r\n                        for (i = ref.topLeft.row; i <= bottomRight.row; i++) {\r\n                            if (rows[i] !== 'full') {\r\n                                rows[i] = rowState;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (!rowSelection) {\r\n                        for (i = ref.topLeft.col; i <= bottomRight.col; i++) {\r\n                            if (cols[i] !== 'full') {\r\n                                cols[i] = colState;\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                return {\r\n                    rows: rows,\r\n                    cols: cols,\r\n                    allRows: allRows,\r\n                    allCols: allCols,\r\n                    all: allRows && allCols\r\n                };\r\n            },\r\n            isInEditMode: function (isInEdit) {\r\n                if (isInEdit === undefined) {\r\n                    return this._inEdit;\r\n                }\r\n                this._inEdit = isInEdit;\r\n                if (isInEdit) {\r\n                    this._editSelection.selection = this._viewSelection.selection.clone();\r\n                    this._editSelection.originalSelection = this._viewSelection.originalSelection.clone();\r\n                    this._editSelection._activeCell = this._viewSelection._activeCell.clone();\r\n                    this._editSelection.originalActiveCell = this._viewSelection.originalActiveCell.clone();\r\n                }\r\n            },\r\n            _setFormulaSelections: function (selection) {\r\n                this._formulaSelections = (selection || []).slice();\r\n                this.triggerChange({ selection: true });\r\n            },\r\n            _viewActiveCell: function () {\r\n                return this._viewSelection._activeCell.toRangeRef();\r\n            },\r\n            toJSON: function () {\r\n                var positions = {};\r\n                var rows = this._rows.toJSON('height', positions);\r\n                var columns = this._columns.toJSON('width', {});\r\n                var viewSelection = this._viewSelection;\r\n                var hyperlinks = [];\r\n                this.forEach(kendo.spreadsheet.SHEETREF, function (row, col, cell) {\r\n                    if (Object.keys(cell).length === 0) {\r\n                        return;\r\n                    }\r\n                    if (cell.link) {\r\n                        hyperlinks.push({\r\n                            ref: kendo.spreadsheet.Ref.display(null, row, col),\r\n                            target: cell.link\r\n                        });\r\n                    }\r\n                    var position = positions[row];\r\n                    if (position === undefined) {\r\n                        position = rows.length;\r\n                        rows.push({ index: row });\r\n                        positions[row] = position;\r\n                    }\r\n                    row = rows[position];\r\n                    cell.index = col;\r\n                    if (row.cells === undefined) {\r\n                        row.cells = [];\r\n                    }\r\n                    if (cell.formula) {\r\n                        cell.formula = cell.formula.toString();\r\n                    }\r\n                    if (cell.validation) {\r\n                        cell.validation = cell.validation.toJSON();\r\n                    }\r\n                    if (cell.color) {\r\n                        cell.color = kendo.parseColor(cell.color).toCss();\r\n                    }\r\n                    if (cell.background) {\r\n                        cell.background = kendo.parseColor(cell.background).toCss();\r\n                    }\r\n                    if (cell.borderTop && cell.borderTop.color) {\r\n                        cell.borderTop.color = kendo.parseColor(cell.borderTop.color).toCss();\r\n                    }\r\n                    if (cell.borderBottom && cell.borderBottom.color) {\r\n                        cell.borderBottom.color = kendo.parseColor(cell.borderBottom.color).toCss();\r\n                    }\r\n                    if (cell.borderRight && cell.borderRight.color) {\r\n                        cell.borderRight.color = kendo.parseColor(cell.borderRight.color).toCss();\r\n                    }\r\n                    if (cell.borderLeft && cell.borderLeft.color) {\r\n                        cell.borderLeft.color = kendo.parseColor(cell.borderLeft.color).toCss();\r\n                    }\r\n                    row.cells.push(cell);\r\n                });\r\n                var json = {\r\n                    name: this._name(),\r\n                    rows: rows,\r\n                    columns: columns,\r\n                    selection: viewSelection.selection.toString(),\r\n                    activeCell: viewSelection.activeCell().toString(),\r\n                    frozenRows: this.frozenRows(),\r\n                    frozenColumns: this.frozenColumns(),\r\n                    showGridLines: this.showGridLines(),\r\n                    mergedCells: this._mergedCells.map(function (ref) {\r\n                        return ref.toString();\r\n                    }),\r\n                    hyperlinks: hyperlinks\r\n                };\r\n                if (this._sort) {\r\n                    json.sort = {\r\n                        ref: this._sort.ref.toString(),\r\n                        columns: this._sort.columns.map(function (column) {\r\n                            return {\r\n                                index: column.index,\r\n                                ascending: column.ascending\r\n                            };\r\n                        })\r\n                    };\r\n                }\r\n                if (this._filter) {\r\n                    json.filter = {\r\n                        ref: this._filter.ref.toString(),\r\n                        columns: this._filter.columns.map(function (column) {\r\n                            var filter = column.filter.toJSON();\r\n                            filter.index = column.index;\r\n                            return filter;\r\n                        })\r\n                    };\r\n                }\r\n                return json;\r\n            },\r\n            fromJSON: function (json) {\r\n                this.batch(function () {\r\n                    if (json.name !== undefined) {\r\n                        this._name(json.name);\r\n                    }\r\n                    if (json.frozenColumns !== undefined) {\r\n                        this.frozenColumns(json.frozenColumns);\r\n                    }\r\n                    if (json.frozenRows !== undefined) {\r\n                        this.frozenRows(json.frozenRows);\r\n                    }\r\n                    if (json.columns !== undefined) {\r\n                        this._columns.fromJSON('width', json.columns);\r\n                    }\r\n                    if (json.rows !== undefined) {\r\n                        this._rows.fromJSON('height', json.rows);\r\n                        for (var ri = 0; ri < json.rows.length; ri++) {\r\n                            var row = json.rows[ri];\r\n                            var rowIndex = row.index;\r\n                            if (rowIndex === undefined) {\r\n                                rowIndex = ri;\r\n                            }\r\n                            if (row.cells) {\r\n                                for (var ci = 0; ci < row.cells.length; ci++) {\r\n                                    var cell = row.cells[ci];\r\n                                    var columnIndex = cell.index;\r\n                                    if (columnIndex === undefined) {\r\n                                        columnIndex = ci;\r\n                                    }\r\n                                    if (cell.formula) {\r\n                                        cell.formula = this._compileFormula(rowIndex, columnIndex, cell.formula);\r\n                                    }\r\n                                    if (cell.validation) {\r\n                                        cell.validation = this._compileValidation(rowIndex, columnIndex, cell.validation);\r\n                                    }\r\n                                    this._properties.fromJSON(this._grid.index(rowIndex, columnIndex), cell);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    if (json.selection) {\r\n                        this._viewSelection.selection = this._viewSelection.originalSelection = this._ref(json.selection);\r\n                    }\r\n                    if (json.activeCell) {\r\n                        var activeCellRef = this._ref(json.activeCell);\r\n                        this._viewSelection._activeCell = activeCellRef.toRangeRef();\r\n                        this._viewSelection.originalActiveCell = activeCellRef;\r\n                    }\r\n                    if (json.mergedCells) {\r\n                        json.mergedCells.forEach(function (ref) {\r\n                            this.range(ref).merge();\r\n                        }, this);\r\n                    }\r\n                    if (json.sort) {\r\n                        this._sort = {\r\n                            ref: this._ref(json.sort.ref),\r\n                            columns: json.sort.columns.slice(0)\r\n                        };\r\n                    }\r\n                    if (json.filter) {\r\n                        var ref = json.filter.ref;\r\n                        var columns = json.filter.columns === undefined ? [] : json.filter.columns;\r\n                        if (!ref) {\r\n                            kendo.logToConsole('Dropping filter for sheet \\'' + json.name + '\\' due to missing ref');\r\n                        } else {\r\n                            this._filter = {\r\n                                ref: this._ref(ref),\r\n                                columns: columns.map(function (column) {\r\n                                    return {\r\n                                        index: column.index,\r\n                                        filter: kendo.spreadsheet.Filter.create(column)\r\n                                    };\r\n                                })\r\n                            };\r\n                            this._refreshFilter();\r\n                        }\r\n                    }\r\n                    if (json.showGridLines !== undefined) {\r\n                        this._showGridLines = json.showGridLines;\r\n                    }\r\n                });\r\n                this._rows._refresh();\r\n                this._columns._refresh();\r\n            },\r\n            formula: function (ref) {\r\n                return this._properties.get('formula', this._grid.cellRefIndex(ref));\r\n            },\r\n            validation: function (ref) {\r\n                return this._properties.get('validation', this._grid.cellRefIndex(ref));\r\n            },\r\n            resetFormulas: function () {\r\n                this._forFormulas(function (formula) {\r\n                    formula.reset();\r\n                });\r\n            },\r\n            resetValidations: function () {\r\n                this._forValidations(function (validation) {\r\n                    validation.reset();\r\n                });\r\n            },\r\n            recalc: function (context, callback) {\r\n                var formulas = this._properties.get('formula').values();\r\n                var count = formulas.length, pending = 0, i = 0;\r\n                if (!count && callback) {\r\n                    return callback();\r\n                }\r\n                function next() {\r\n                    pending--;\r\n                    if (i == count && !pending) {\r\n                        callback();\r\n                    }\r\n                }\r\n                while (i < count) {\r\n                    pending++;\r\n                    formulas[i++].value.exec(context, callback ? next : null);\r\n                }\r\n            },\r\n            revalidate: function (context) {\r\n                var self = this;\r\n                this._forValidations(function (validation) {\r\n                    var cellRef = new CellRef(validation.row, validation.col);\r\n                    var ref = new RangeRef(cellRef, cellRef);\r\n                    validation.exec(context, self._get(ref, 'value'), self._get(ref, 'format'));\r\n                });\r\n            },\r\n            _value: function (row, col, value) {\r\n                var index = this._grid.index(row, col);\r\n                if (value !== undefined) {\r\n                    this._properties.set('value', index, index, value);\r\n                } else {\r\n                    return this._properties.get('value', index);\r\n                }\r\n            },\r\n            _validation: function (row, col) {\r\n                var index = this._grid.index(row, col);\r\n                return this._properties.get('validation', index);\r\n            },\r\n            _compileValidation: function (row, col, validation) {\r\n                if (validation.from != null) {\r\n                    validation.from = (validation.from + '').replace(/^=/, '');\r\n                }\r\n                if (validation.to != null) {\r\n                    validation.to = (validation.to + '').replace(/^=/, '');\r\n                }\r\n                return kendo.spreadsheet.validation.compile(this._name(), row, col, validation);\r\n            },\r\n            _compileFormula: function (row, col, f) {\r\n                f = f.replace(/^=/, '');\r\n                f = kendo.spreadsheet.calc.parseFormula(this._name(), row, col, f);\r\n                return kendo.spreadsheet.calc.compile(f);\r\n            },\r\n            _copyValuesInRange: function (topLeft, bottomRight, value, property) {\r\n                var ci, start, end;\r\n                for (ci = topLeft.col; ci <= bottomRight.col; ci++) {\r\n                    start = this._grid.index(topLeft.row, ci);\r\n                    end = this._grid.index(bottomRight.row, ci);\r\n                    for (var index = start, row = topLeft.row; index <= end; ++index, ++row) {\r\n                        value = value.clone(this._name(), row, ci);\r\n                        this._properties.set(property, index, index, value);\r\n                    }\r\n                }\r\n                return value;\r\n            },\r\n            _set: function (ref, name, value) {\r\n                var topLeft = this._grid.normalize(ref.topLeft);\r\n                var bottomRight = this._grid.normalize(ref.bottomRight);\r\n                var ci, start, end;\r\n                if (value && name == 'formula') {\r\n                    if (typeof value == 'string') {\r\n                        value = this._compileFormula(topLeft.row, topLeft.col, value);\r\n                    }\r\n                    value = this._copyValuesInRange(topLeft, bottomRight, value, 'formula');\r\n                } else if (value && name == 'validation') {\r\n                    value = this._compileValidation(topLeft.row, topLeft.col, value);\r\n                    value = this._copyValuesInRange(topLeft, bottomRight, value, 'validation');\r\n                } else {\r\n                    for (ci = topLeft.col; ci <= bottomRight.col; ci++) {\r\n                        start = this._grid.index(topLeft.row, ci);\r\n                        end = this._grid.index(bottomRight.row, ci);\r\n                        this._properties.set(name, start, end, value);\r\n                        if (name == 'formula') {\r\n                            this._properties.set('value', start, end, null);\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            _get: function (ref, name) {\r\n                var topLeft = this._grid.normalize(ref.topLeft);\r\n                var index = this._grid.index(topLeft.row, topLeft.col);\r\n                return this._properties.get(name, index);\r\n            },\r\n            batch: function (callback, reason) {\r\n                var suspended = this.suspendChanges();\r\n                this.suspendChanges(true);\r\n                callback.call(this);\r\n                return this.suspendChanges(suspended).triggerChange(reason);\r\n            },\r\n            _sortBy: function (ref, columns) {\r\n                var indices = null;\r\n                columns.forEach(function (column) {\r\n                    indices = this._sorter.sortBy(ref, column.index, this._properties.get('value'), column.ascending, indices);\r\n                }, this);\r\n                this._sort = {\r\n                    ref: ref,\r\n                    columns: columns\r\n                };\r\n                this._refreshFilter();\r\n                this.triggerChange({ recalc: true });\r\n            },\r\n            _refreshFilter: function () {\r\n                if (this._filter) {\r\n                    this._filterBy(this._filter.ref, this._filter.columns);\r\n                }\r\n            },\r\n            _filterBy: function (ref, columns) {\r\n                this.batch(function () {\r\n                    for (var ri = ref.topLeft.row; ri <= ref.bottomRight.row; ri++) {\r\n                        if (this._rows.hidden(ri)) {\r\n                            this._rows.unhide(ri);\r\n                        }\r\n                    }\r\n                    columns.forEach(function (column) {\r\n                        var columnRef = ref.resize({ top: 1 }).toColumn(column.index);\r\n                        var cells = [];\r\n                        if (columnRef === kendo.spreadsheet.NULLREF) {\r\n                            return;\r\n                        }\r\n                        this.forEach(columnRef, function (row, col, cell) {\r\n                            cell.row = row;\r\n                            cells.push(cell);\r\n                        });\r\n                        column.filter.prepare(cells);\r\n                        for (var ci = 0; ci < cells.length; ci++) {\r\n                            var cell = cells[ci];\r\n                            var value = column.filter.value(cell);\r\n                            if (column.filter.matches(value) === false) {\r\n                                this.hideRow(cell.row);\r\n                            }\r\n                        }\r\n                    }, this);\r\n                    this._filter = {\r\n                        ref: ref,\r\n                        columns: columns\r\n                    };\r\n                }, {\r\n                    layout: true,\r\n                    filter: true\r\n                });\r\n            },\r\n            filterColumn: function (ref) {\r\n                var filterRef = this.filter().ref;\r\n                return ref.toRangeRef().topLeft.col - filterRef.topLeft.col;\r\n            },\r\n            filter: function () {\r\n                return this._filter;\r\n            },\r\n            clearFilter: function (spec) {\r\n                this._clearFilter(spec instanceof Array ? spec : [spec]);\r\n            },\r\n            _clearFilter: function (indices) {\r\n                if (this._filter) {\r\n                    this.batch(function () {\r\n                        this._filter.columns = this._filter.columns.filter(function (column) {\r\n                            return indices.indexOf(column.index) < 0;\r\n                        });\r\n                        this._refreshFilter();\r\n                    }, {\r\n                        layout: true,\r\n                        filter: true\r\n                    });\r\n                }\r\n            },\r\n            getAxisState: function () {\r\n                return {\r\n                    rows: this._rows.getState(),\r\n                    columns: this._columns.getState()\r\n                };\r\n            },\r\n            setAxisState: function (state) {\r\n                this._rows.setState(state.rows);\r\n                this._columns.setState(state.columns);\r\n                this.triggerChange({ layout: true });\r\n            },\r\n            getState: function () {\r\n                return {\r\n                    rows: this._rows.getState(),\r\n                    columns: this._columns.getState(),\r\n                    mergedCells: this._mergedCells.map(function (cell) {\r\n                        return cell.clone();\r\n                    }),\r\n                    properties: this._properties.getState()\r\n                };\r\n            },\r\n            setState: function (state) {\r\n                this._rows.setState(state.rows);\r\n                this._columns.setState(state.columns);\r\n                this._mergedCells = state.mergedCells;\r\n                this._properties.setState(state.properties);\r\n                this.triggerChange(kendo.spreadsheet.ALL_REASONS);\r\n            },\r\n            _merge: function (ref) {\r\n                var mergedCells = this._mergedCells;\r\n                var sheet = this;\r\n                var mergedRef;\r\n                this.batch(function () {\r\n                    mergedRef = ref.map(function (ref) {\r\n                        if (ref instanceof kendo.spreadsheet.CellRef) {\r\n                            return ref;\r\n                        }\r\n                        var currentRef = ref.toRangeRef().union(mergedCells, function (ref) {\r\n                            mergedCells.splice(mergedCells.indexOf(ref), 1);\r\n                        });\r\n                        var range = new Range(currentRef, sheet);\r\n                        var formula = range._get('formula');\r\n                        var value = range.value();\r\n                        var format = range.format();\r\n                        var background = range.background();\r\n                        range.value(null);\r\n                        range.format(null);\r\n                        range.background(null);\r\n                        var topLeft = new Range(currentRef.collapse(), sheet);\r\n                        if (formula) {\r\n                            topLeft._set('formula', formula);\r\n                        } else {\r\n                            topLeft.value(value);\r\n                        }\r\n                        topLeft.format(format);\r\n                        topLeft.background(background);\r\n                        mergedCells.push(currentRef);\r\n                        return currentRef;\r\n                    });\r\n                    var viewSelection = sheet._viewSelection;\r\n                    viewSelection.selection = sheet.unionWithMerged(viewSelection.originalSelection);\r\n                    viewSelection._activeCell = sheet.unionWithMerged(viewSelection.originalActiveCell);\r\n                }, {\r\n                    activeCell: true,\r\n                    selection: true\r\n                });\r\n                return mergedRef;\r\n            }\r\n        });\r\n        kendo.spreadsheet.Sheet = Sheet;\r\n    }(kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/sheetsbar', [\r\n        'kendo.core',\r\n        'kendo.sortable'\r\n    ], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var $ = kendo.jQuery;\r\n        var DOT = '.';\r\n        var EMPTYCHAR = ' ';\r\n        var sheetsBarClassNames = {\r\n            sheetsBarWrapper: 'k-widget k-header',\r\n            sheetsBarSheetsWrapper: 'k-tabstrip k-floatwrap k-tabstrip-bottom',\r\n            sheetsBarActive: 'k-spreadsheet-sheets-bar-active',\r\n            sheetsBarInactive: 'k-spreadsheet-sheets-bar-inactive',\r\n            sheetsBarAdd: 'k-spreadsheet-sheets-bar-add',\r\n            sheetsBarRemove: 'k-spreadsheet-sheets-remove',\r\n            sheetsBarItems: 'k-spreadsheet-sheets-items',\r\n            sheetsBarEditor: 'k-spreadsheet-sheets-editor',\r\n            sheetsBarScrollable: 'k-tabstrip-scrollable',\r\n            sheetsBarNext: 'k-tabstrip-next',\r\n            sheetsBarPrev: 'k-tabstrip-prev',\r\n            sheetsBarKItem: 'k-item k-state-default',\r\n            sheetsBarKActive: 'k-state-active k-state-tab-on-top',\r\n            sheetsBarKTextbox: 'k-textbox',\r\n            sheetsBarKLink: 'k-link',\r\n            sheetsBarKIcon: 'k-icon',\r\n            sheetsBarKFontIcon: 'k-font-icon',\r\n            sheetsBarKButton: 'k-button k-button-icon',\r\n            sheetsBarKButtonBare: 'k-button-bare',\r\n            sheetsBarKArrowW: 'k-i-arrow-w',\r\n            sheetsBarKArrowE: 'k-i-arrow-e',\r\n            sheetsBarKReset: 'k-reset k-tabstrip-items',\r\n            sheetsBarKIconX: 'k-i-x',\r\n            sheetsBarKSprite: 'k-sprite',\r\n            sheetsBarKIconPlus: 'k-i-plus',\r\n            sheetsBarHintWrapper: 'k-widget k-tabstrip k-tabstrip-bottom k-spreadsheet-sheets-items-hint',\r\n            sheetsBarKResetItems: 'k-reset k-tabstrip-items'\r\n        };\r\n        var SheetsBar = kendo.ui.Widget.extend({\r\n            init: function (element, options) {\r\n                var classNames = SheetsBar.classNames;\r\n                kendo.ui.Widget.call(this, element, options);\r\n                element = this.element;\r\n                element.addClass(classNames.sheetsBarWrapper);\r\n                this._tree = new kendo.dom.Tree(element[0]);\r\n                this._tree.render([\r\n                    this._addButton(),\r\n                    this._createSheetsWrapper([])\r\n                ]);\r\n                this._toggleScrollEvents(true);\r\n                this._createSortable();\r\n                this._sortable.bind('start', this._onSheetReorderStart.bind(this));\r\n                this._sortable.bind('end', this._onSheetReorderEnd.bind(this));\r\n                element.on('click', DOT + classNames.sheetsBarRemove, this._onSheetRemove.bind(this));\r\n                element.on('click', 'li', this._onSheetSelect.bind(this));\r\n                element.on('dblclick', 'li' + DOT + classNames.sheetsBarActive, this._createEditor.bind(this));\r\n                element.on('click', DOT + classNames.sheetsBarAdd, this._onAddSelect.bind(this));\r\n            },\r\n            options: {\r\n                name: 'SheetsBar',\r\n                scrollable: { distance: 200 }\r\n            },\r\n            events: [\r\n                'select',\r\n                'reorder',\r\n                'rename'\r\n            ],\r\n            _createEditor: function () {\r\n                if (this._editor) {\r\n                    return;\r\n                }\r\n                this._renderSheets(this._sheets, this._selectedIndex, true);\r\n                this._editor = this.element.find(kendo.format('input{0}{1}', DOT, SheetsBar.classNames.sheetsBarEditor)).focus().on('keydown', this._onEditorKeydown.bind(this)).on('blur', this._onEditorBlur.bind(this));\r\n            },\r\n            _destroyEditor: function (canceled) {\r\n                var newSheetName = canceled ? null : this._editor.val();\r\n                this._editor.off();\r\n                this._editor = null;\r\n                this._renderSheets(this._sheets, this._selectedIndex, false);\r\n                this._onSheetRename(newSheetName);\r\n            },\r\n            renderSheets: function (sheets, selectedIndex) {\r\n                if (!sheets || selectedIndex < 0) {\r\n                    return;\r\n                }\r\n                this._renderSheets(sheets, selectedIndex, false);\r\n            },\r\n            _renderSheets: function (sheets, selectedIndex, isInEditMode) {\r\n                var that = this;\r\n                var wrapperOffsetWidth;\r\n                var sheetsGroupScrollWidth;\r\n                var classNames = SheetsBar.classNames;\r\n                that._isRtl = kendo.support.isRtl(that.element);\r\n                that._sheets = sheets;\r\n                that._selectedIndex = selectedIndex;\r\n                that._renderHtml(isInEditMode, true);\r\n                if (!that._scrollableAllowed()) {\r\n                    return;\r\n                }\r\n                var sheetsWrapper = that._sheetsWrapper();\r\n                var scrollPrevButton = sheetsWrapper.children(DOT + classNames.sheetsBarPrev);\r\n                var scrollNextButton = sheetsWrapper.children(DOT + classNames.sheetsBarNext);\r\n                var gapWidth = 2;\r\n                var addButton = that.element.find(DOT + classNames.sheetsBarAdd);\r\n                var addButtonWidth = addButton.outerWidth() + addButton.position().left + gapWidth;\r\n                var scrollPrevButtonWidth = scrollPrevButton.outerWidth() + gapWidth;\r\n                var sheetsGroup = that._sheetsGroup();\r\n                scrollPrevButton.css({ left: addButtonWidth });\r\n                sheetsWrapper.addClass(classNames.sheetsBarScrollable + EMPTYCHAR + classNames.sheetsBarSheetsWrapper);\r\n                sheetsGroup.css({ marginLeft: addButtonWidth });\r\n                wrapperOffsetWidth = sheetsWrapper[0].offsetWidth;\r\n                sheetsGroupScrollWidth = sheetsGroup[0].scrollWidth;\r\n                if (sheetsGroupScrollWidth + addButtonWidth > wrapperOffsetWidth) {\r\n                    var scrollNextButtonRight = Math.ceil(kendo.parseFloat(scrollNextButton.css('right')));\r\n                    if (!that._scrollableModeActive) {\r\n                        that._nowScrollingSheets = false;\r\n                        that._scrollableModeActive = true;\r\n                    }\r\n                    sheetsGroup.css({\r\n                        marginLeft: scrollPrevButtonWidth + addButtonWidth,\r\n                        marginRight: scrollNextButton.outerWidth() + scrollNextButtonRight + gapWidth\r\n                    });\r\n                } else {\r\n                    if (that._scrollableModeActive && sheetsGroupScrollWidth <= wrapperOffsetWidth) {\r\n                        that._scrollableModeActive = false;\r\n                        sheetsGroup.css({\r\n                            marginLeft: addButtonWidth,\r\n                            marginRight: ''\r\n                        });\r\n                    } else {\r\n                        sheetsGroup.css({ marginLeft: addButtonWidth });\r\n                    }\r\n                }\r\n                that._toggleScrollButtons();\r\n            },\r\n            _toggleScrollButtons: function (toggle) {\r\n                var that = this;\r\n                var ul = that._sheetsGroup();\r\n                var wrapper = that._sheetsWrapper();\r\n                var scrollLeft = ul.scrollLeft();\r\n                var prev = wrapper.find(DOT + SheetsBar.classNames.sheetsBarPrev);\r\n                var next = wrapper.find(DOT + SheetsBar.classNames.sheetsBarNext);\r\n                if (toggle === false) {\r\n                    prev.toggle(false);\r\n                    next.toggle(false);\r\n                } else {\r\n                    prev.toggle(that._isRtl ? scrollLeft < ul[0].scrollWidth - ul[0].offsetWidth - 1 : scrollLeft !== 0);\r\n                    next.toggle(that._isRtl ? scrollLeft !== 0 : scrollLeft < ul[0].scrollWidth - ul[0].offsetWidth - 1);\r\n                }\r\n            },\r\n            _toggleScrollEvents: function (toggle) {\r\n                var that = this;\r\n                var classNames = SheetsBar.classNames;\r\n                var options = that.options;\r\n                var scrollPrevButton;\r\n                var scrollNextButton;\r\n                var sheetsWrapper = that._sheetsWrapper();\r\n                scrollPrevButton = sheetsWrapper.children(DOT + classNames.sheetsBarPrev);\r\n                scrollNextButton = sheetsWrapper.children(DOT + classNames.sheetsBarNext);\r\n                if (toggle) {\r\n                    scrollPrevButton.on('mousedown', function () {\r\n                        that._nowScrollingSheets = true;\r\n                        that._scrollSheetsByDelta(options.scrollable.distance * (that._isRtl ? 1 : -1));\r\n                    });\r\n                    scrollNextButton.on('mousedown', function () {\r\n                        that._nowScrollingSheets = true;\r\n                        that._scrollSheetsByDelta(options.scrollable.distance * (that._isRtl ? -1 : 1));\r\n                    });\r\n                    scrollPrevButton.add(scrollNextButton).on('mouseup', function () {\r\n                        that._nowScrollingSheets = false;\r\n                    });\r\n                } else {\r\n                    scrollPrevButton.off();\r\n                    scrollNextButton.off();\r\n                }\r\n            },\r\n            _renderHtml: function (isInEditMode, renderScrollButtons) {\r\n                var idx;\r\n                var sheetElements = [];\r\n                var dom = kendo.dom;\r\n                var element = dom.element;\r\n                var sheets = this._sheets;\r\n                var selectedIndex = this._selectedIndex;\r\n                var classNames = SheetsBar.classNames;\r\n                for (idx = 0; idx < sheets.length; idx++) {\r\n                    var sheet = sheets[idx];\r\n                    var isSelectedSheet = idx === selectedIndex;\r\n                    var attr = { className: classNames.sheetsBarKItem + EMPTYCHAR };\r\n                    var elementContent = [];\r\n                    if (isSelectedSheet) {\r\n                        attr.className += classNames.sheetsBarKActive + EMPTYCHAR + classNames.sheetsBarActive;\r\n                    } else {\r\n                        attr.className += classNames.sheetsBarInactive;\r\n                    }\r\n                    if (isSelectedSheet && isInEditMode) {\r\n                        elementContent.push(element('input', {\r\n                            type: 'text',\r\n                            value: sheet.name(),\r\n                            className: classNames.sheetsBarKTextbox + EMPTYCHAR + classNames.sheetsBarEditor,\r\n                            maxlength: 50\r\n                        }, []));\r\n                    } else {\r\n                        elementContent.push(element('span', {\r\n                            className: classNames.sheetsBarKLink,\r\n                            title: sheet.name()\r\n                        }, [dom.text(sheet.name())]));\r\n                        var deleteIcon = element('span', { className: classNames.sheetsBarKIcon + EMPTYCHAR + classNames.sheetsBarKFontIcon + EMPTYCHAR + classNames.sheetsBarKIconX }, []);\r\n                        elementContent.push(element('span', { className: classNames.sheetsBarKLink + EMPTYCHAR + classNames.sheetsBarRemove }, [deleteIcon]));\r\n                    }\r\n                    sheetElements.push(element('li', attr, elementContent));\r\n                }\r\n                this._tree.render([\r\n                    this._addButton(),\r\n                    this._createSheetsWrapper(sheetElements, renderScrollButtons)\r\n                ]);\r\n            },\r\n            _createSheetsWrapper: function (sheetElements, renderScrollButtons) {\r\n                var element = kendo.dom.element;\r\n                var classNames = SheetsBar.classNames;\r\n                var childrenElements = [element('ul', { className: classNames.sheetsBarKReset }, sheetElements)];\r\n                renderScrollButtons = true;\r\n                if (renderScrollButtons) {\r\n                    var baseButtonClass = classNames.sheetsBarKButton + EMPTYCHAR + classNames.sheetsBarKButtonBare + EMPTYCHAR;\r\n                    childrenElements.push(element('span', { className: baseButtonClass + classNames.sheetsBarPrev }, [element('span', { className: classNames.sheetsBarKIcon + EMPTYCHAR + classNames.sheetsBarKArrowW }, [])]));\r\n                    childrenElements.push(element('span', { className: baseButtonClass + classNames.sheetsBarNext }, [element('span', { className: classNames.sheetsBarKIcon + EMPTYCHAR + classNames.sheetsBarKArrowE }, [])]));\r\n                }\r\n                return element('div', { className: classNames.sheetsBarItems }, childrenElements);\r\n            },\r\n            _createSortable: function () {\r\n                var classNames = SheetsBar.classNames;\r\n                this._sortable = new kendo.ui.Sortable(this.element, {\r\n                    filter: kendo.format('ul li.{0},ul li.{1}', classNames.sheetsBarActive, classNames.sheetsBarInactive),\r\n                    container: DOT + classNames.sheetsBarItems,\r\n                    axis: 'x',\r\n                    animation: false,\r\n                    ignore: 'input',\r\n                    end: function () {\r\n                        if (this.draggable.hint) {\r\n                            this.draggable.hint.remove();\r\n                        }\r\n                    },\r\n                    hint: function (element) {\r\n                        var hint = $(element).clone();\r\n                        return hint.wrap('<div class=\\'' + classNames.sheetsBarHintWrapper + '\\'><ul class=\\'' + classNames.sheetsBarKResetItems + '\\'></ul></div>').closest('div');\r\n                    }\r\n                });\r\n            },\r\n            _onEditorKeydown: function (e) {\r\n                if (this._editor) {\r\n                    if (e.which === 13) {\r\n                        this._destroyEditor();\r\n                    }\r\n                    if (e.which === 27) {\r\n                        this._destroyEditor(true);\r\n                    }\r\n                }\r\n            },\r\n            _onEditorBlur: function () {\r\n                if (this._editor) {\r\n                    this._destroyEditor();\r\n                }\r\n            },\r\n            _onSheetReorderEnd: function (e) {\r\n                e.preventDefault();\r\n                this.trigger('reorder', {\r\n                    oldIndex: e.oldIndex,\r\n                    newIndex: e.newIndex\r\n                });\r\n            },\r\n            _onSheetReorderStart: function (e) {\r\n                if (this._editor) {\r\n                    e.preventDefault();\r\n                }\r\n            },\r\n            _onSheetRemove: function (e) {\r\n                var removedSheetName = $(e.target).closest('li').text();\r\n                if (this._editor) {\r\n                    this._destroyEditor();\r\n                }\r\n                this.trigger('remove', { name: removedSheetName });\r\n            },\r\n            _onSheetSelect: function (e) {\r\n                var selectedSheetText = $(e.target).text();\r\n                if ($(e.target).is(DOT + SheetsBar.classNames.sheetsBarEditor) || !selectedSheetText) {\r\n                    e.preventDefault();\r\n                    return;\r\n                }\r\n                if (this._editor) {\r\n                    this._destroyEditor();\r\n                }\r\n                this._scrollSheetsToItem($(e.target).closest('li'));\r\n                this.trigger('select', {\r\n                    name: selectedSheetText,\r\n                    isAddButton: false\r\n                });\r\n            },\r\n            _onSheetRename: function (newSheetName) {\r\n                this.trigger('rename', {\r\n                    name: newSheetName,\r\n                    sheetIndex: this._selectedIndex\r\n                });\r\n            },\r\n            _onAddSelect: function () {\r\n                this.trigger('select', { isAddButton: true });\r\n            },\r\n            _addButton: function () {\r\n                var element = kendo.dom.element;\r\n                var classNames = SheetsBar.classNames;\r\n                return element('a', { className: classNames.sheetsBarAdd + EMPTYCHAR + classNames.sheetsBarKButton }, [element('span', { className: classNames.sheetsBarKSprite + EMPTYCHAR + classNames.sheetsBarKIcon + EMPTYCHAR + classNames.sheetsBarKFontIcon + EMPTYCHAR + classNames.sheetsBarKIconPlus }, [])]);\r\n            },\r\n            destroy: function () {\r\n                this._sortable.destroy();\r\n            },\r\n            _scrollableAllowed: function () {\r\n                var options = this.options;\r\n                return options.scrollable && !isNaN(options.scrollable.distance);\r\n            },\r\n            _scrollSheetsToItem: function (item) {\r\n                var that = this;\r\n                if (!that._scrollableModeActive) {\r\n                    return;\r\n                }\r\n                var sheetsGroup = that._sheetsGroup();\r\n                var currentScrollOffset = sheetsGroup.scrollLeft();\r\n                var itemWidth = item.outerWidth();\r\n                var itemOffset = that._isRtl ? item.position().left : item.position().left - sheetsGroup.children().first().position().left;\r\n                var sheetsGroupWidth = sheetsGroup[0].offsetWidth;\r\n                var sheetsGroupPadding = Math.ceil(parseFloat(sheetsGroup.css('padding-left')));\r\n                var itemPosition;\r\n                if (that._isRtl) {\r\n                    if (itemOffset < 0) {\r\n                        itemPosition = currentScrollOffset + itemOffset - (sheetsGroupWidth - currentScrollOffset) - sheetsGroupPadding;\r\n                    } else if (itemOffset + itemWidth > sheetsGroupWidth) {\r\n                        itemPosition = currentScrollOffset + itemOffset - itemWidth + sheetsGroupPadding * 2;\r\n                    }\r\n                } else {\r\n                    if (currentScrollOffset + sheetsGroupWidth < itemOffset + itemWidth) {\r\n                        itemPosition = itemOffset + itemWidth - sheetsGroupWidth + sheetsGroupPadding * 2;\r\n                    } else if (currentScrollOffset > itemOffset) {\r\n                        itemPosition = itemOffset - sheetsGroupPadding;\r\n                    }\r\n                }\r\n                sheetsGroup.finish().animate({ 'scrollLeft': itemPosition }, 'fast', 'linear', function () {\r\n                    that._toggleScrollButtons();\r\n                });\r\n            },\r\n            _sheetsGroup: function () {\r\n                return this._sheetsWrapper().children('ul');\r\n            },\r\n            _sheetsWrapper: function () {\r\n                return this.element.find(DOT + SheetsBar.classNames.sheetsBarItems);\r\n            },\r\n            _scrollSheetsByDelta: function (delta) {\r\n                var that = this;\r\n                var sheetsGroup = that._sheetsGroup();\r\n                var scrLeft = sheetsGroup.scrollLeft();\r\n                sheetsGroup.finish().animate({ 'scrollLeft': scrLeft + delta }, 'fast', 'linear', function () {\r\n                    if (that._nowScrollingSheets) {\r\n                        that._scrollSheetsByDelta(delta);\r\n                    } else {\r\n                        that._toggleScrollButtons();\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        kendo.spreadsheet.SheetsBar = SheetsBar;\r\n        $.extend(true, SheetsBar, { classNames: sheetsBarClassNames });\r\n    }(window.kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/calc', ['spreadsheet/runtime'], f);\r\n}(function () {\r\n    'use strict';\r\n    if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n        return;\r\n    }\r\n    var spreadsheet = kendo.spreadsheet;\r\n    var RangeRef = spreadsheet.RangeRef;\r\n    var CellRef = spreadsheet.CellRef;\r\n    var NameRef = spreadsheet.NameRef;\r\n    var exports = spreadsheet.calc;\r\n    var runtime = exports.runtime;\r\n    var OPERATORS = Object.create(null);\r\n    var ParseError = kendo.Class.extend({\r\n        init: function ParseError(message, pos) {\r\n            this.message = message;\r\n            this.pos = pos;\r\n        },\r\n        toString: function () {\r\n            return this.message;\r\n        }\r\n    });\r\n    (function (ops) {\r\n        ops.forEach(function (cls, i) {\r\n            cls.forEach(function (op) {\r\n                OPERATORS[op] = ops.length - i;\r\n            });\r\n        });\r\n    }([\r\n        [':'],\r\n        [' '],\r\n        [','],\r\n        ['%'],\r\n        ['^'],\r\n        [\r\n            '*',\r\n            '/'\r\n        ],\r\n        [\r\n            '+',\r\n            '-'\r\n        ],\r\n        ['&'],\r\n        [\r\n            '=',\r\n            '<',\r\n            '>',\r\n            '<=',\r\n            '>=',\r\n            '<>'\r\n        ]\r\n    ]));\r\n    var TRUE = {\r\n        type: 'bool',\r\n        value: true\r\n    };\r\n    var FALSE = {\r\n        type: 'bool',\r\n        value: false\r\n    };\r\n    function getcol(str) {\r\n        str = str.toUpperCase();\r\n        for (var col = 0, i = 0; i < str.length; ++i) {\r\n            col = col * 26 + str.charCodeAt(i) - 64;\r\n        }\r\n        return col - 1;\r\n    }\r\n    function getrow(str) {\r\n        return parseInt(str, 10) - 1;\r\n    }\r\n    function parseReference(name, noThrow) {\r\n        if (name.toLowerCase() == '#sheet') {\r\n            return spreadsheet.SHEETREF;\r\n        }\r\n        OUT: {\r\n            var m;\r\n            if (m = /^(\\$)?([a-z]+)(\\$)?(\\d+)$/i.exec(name)) {\r\n                var row = getrow(m[4]), col = getcol(m[2]);\r\n                if (row <= 1048576 && col <= 16383) {\r\n                    return new CellRef(getrow(m[4]), getcol(m[2]));\r\n                }\r\n                break OUT;\r\n            }\r\n            var stream = TokenStream(name, {});\r\n            var a = [];\r\n            while (true) {\r\n                var ref = stream.next();\r\n                if (ref instanceof CellRef) {\r\n                    ref.rel = 0;\r\n                } else if (ref instanceof RangeRef) {\r\n                    ref.topLeft.rel = 0;\r\n                    ref.bottomRight.rel = 0;\r\n                } else {\r\n                    break OUT;\r\n                }\r\n                a.push(ref);\r\n                if (stream.eof()) {\r\n                    break;\r\n                }\r\n                if (!stream.is('op', ',')) {\r\n                    break OUT;\r\n                }\r\n                stream.next();\r\n            }\r\n            return a.length == 1 ? a[0] : new spreadsheet.UnionRef(a);\r\n        }\r\n        if (!noThrow) {\r\n            throw new Error('Cannot parse reference: ' + name);\r\n        }\r\n    }\r\n    function parseFormula(sheet, row, col, input) {\r\n        var refs = [];\r\n        input = TokenStream(input, {\r\n            row: row,\r\n            col: col\r\n        });\r\n        var is = input.is;\r\n        return {\r\n            type: 'exp',\r\n            ast: parseExpression(true),\r\n            refs: refs,\r\n            sheet: sheet,\r\n            row: row,\r\n            col: col\r\n        };\r\n        function addReference(ref) {\r\n            ref.index = refs.length;\r\n            refs.push(ref);\r\n            return ref;\r\n        }\r\n        function skip(type, value) {\r\n            if (is(type, value)) {\r\n                return input.next();\r\n            } else {\r\n                var tok = input.peek();\r\n                if (tok) {\r\n                    input.croak('Expected ' + type + ' \\xAB' + value + '\\xBB but found ' + tok.type + ' \\xAB' + tok.value + '\\xBB');\r\n                } else {\r\n                    input.croak('Expected ' + type + ' \\xAB' + value + '\\xBB');\r\n                }\r\n            }\r\n        }\r\n        function parseExpression(commas) {\r\n            return maybeBinary(maybeIntersect(parseAtom(commas)), 0, commas);\r\n        }\r\n        function parseSymbol(tok) {\r\n            if (tok.upper == 'TRUE' || tok.upper == 'FALSE') {\r\n                return tok.upper == 'TRUE' ? TRUE : FALSE;\r\n            }\r\n            return addReference(new NameRef(tok.value));\r\n        }\r\n        function parseFuncall() {\r\n            var fname = input.next();\r\n            fname = fname.value;\r\n            skip('punc', '(');\r\n            var args = [];\r\n            if (!is('punc', ')')) {\r\n                while (1) {\r\n                    if (is('op', ',')) {\r\n                        args.push({ type: 'null' });\r\n                        input.next();\r\n                        continue;\r\n                    }\r\n                    args.push(parseExpression(false));\r\n                    if (input.eof() || is('punc', ')')) {\r\n                        break;\r\n                    }\r\n                    skip('op', ',');\r\n                }\r\n            }\r\n            skip('punc', ')');\r\n            return {\r\n                type: 'func',\r\n                func: fname,\r\n                args: args\r\n            };\r\n        }\r\n        function fixReference(ref) {\r\n            if (!ref.hasSheet()) {\r\n                ref.setSheet(sheet);\r\n            }\r\n            return addReference(ref);\r\n        }\r\n        function parseAtom(commas) {\r\n            var exp;\r\n            if (is('ref')) {\r\n                exp = fixReference(input.next());\r\n            } else if (is('func')) {\r\n                exp = parseFuncall();\r\n            } else if (is('punc', '(')) {\r\n                input.next();\r\n                exp = parseExpression(true);\r\n                skip('punc', ')');\r\n            } else if (is('punc', '{')) {\r\n                input.next();\r\n                exp = parseArray();\r\n                skip('punc', '}');\r\n            } else if (is('num') || is('str') || is('error')) {\r\n                exp = input.next();\r\n            } else if (is('sym')) {\r\n                exp = parseSymbol(input.next());\r\n            } else if (is('op', '+') || is('op', '-')) {\r\n                exp = {\r\n                    type: 'prefix',\r\n                    op: input.next().value,\r\n                    exp: parseExpression(commas)\r\n                };\r\n            } else if (!input.peek()) {\r\n                input.croak('Incomplete expression');\r\n            } else {\r\n                input.croak('Parse error');\r\n            }\r\n            return maybePercent(exp);\r\n        }\r\n        function parseArray() {\r\n            var row = [], value = [row], first = true;\r\n            while (!input.eof() && !is('punc', '}')) {\r\n                if (first) {\r\n                    first = false;\r\n                } else if (is('punc', ';')) {\r\n                    value.push(row = []);\r\n                    input.next();\r\n                } else {\r\n                    skip('op', ',');\r\n                }\r\n                row.push(parseExpression(false));\r\n            }\r\n            return {\r\n                type: 'matrix',\r\n                value: value\r\n            };\r\n        }\r\n        function maybeIntersect(exp) {\r\n            if (is('punc', '(') || is('ref') || is('num') || is('func')) {\r\n                return {\r\n                    type: 'binary',\r\n                    op: ' ',\r\n                    left: exp,\r\n                    right: parseExpression(false)\r\n                };\r\n            } else {\r\n                return exp;\r\n            }\r\n        }\r\n        function maybePercent(exp) {\r\n            if (is('op', '%')) {\r\n                input.next();\r\n                return maybePercent({\r\n                    type: 'postfix',\r\n                    op: '%',\r\n                    exp: exp\r\n                });\r\n            } else {\r\n                return exp;\r\n            }\r\n        }\r\n        function maybeBinary(left, my_prec, commas) {\r\n            var tok = is('op');\r\n            if (tok && (commas || tok.value != ',')) {\r\n                var his_prec = OPERATORS[tok.value];\r\n                if (his_prec > my_prec) {\r\n                    input.next();\r\n                    var right = maybeBinary(parseAtom(commas), his_prec, commas);\r\n                    return maybeBinary({\r\n                        type: 'binary',\r\n                        op: tok.value,\r\n                        left: left,\r\n                        right: right\r\n                    }, my_prec, commas);\r\n                }\r\n            }\r\n            return left;\r\n        }\r\n    }\r\n    function makePrinter(exp) {\r\n        return makeClosure('function(row, col){return(' + print(exp.ast, exp, 0) + ')}');\r\n        function print(node, parent, prec) {\r\n            switch (node.type) {\r\n            case 'num':\r\n            case 'bool':\r\n                return JSON.stringify(node.value);\r\n            case 'error':\r\n                return JSON.stringify('#' + node.value);\r\n            case 'str':\r\n                return JSON.stringify(JSON.stringify(node.value));\r\n            case 'ref':\r\n                return 'this.refs[' + node.index + '].print(row, col)';\r\n            case 'prefix':\r\n                return withParens(function () {\r\n                    return JSON.stringify(node.op) + ' + ' + print(node.exp, node, OPERATORS[node.op]);\r\n                });\r\n            case 'postfix':\r\n                return withParens(function () {\r\n                    return print(node.exp, node, OPERATORS[node.op]) + ' + ' + JSON.stringify(node.op);\r\n                });\r\n            case 'binary':\r\n                return withParens(function () {\r\n                    var left = parenthesize(print(node.left, node, OPERATORS[node.op]), node.left instanceof NameRef && node.op == ':');\r\n                    var right = parenthesize(print(node.right, node, OPERATORS[node.op]), node.right instanceof NameRef && node.op == ':');\r\n                    return left + ' + ' + JSON.stringify(node.op) + ' + ' + right;\r\n                });\r\n            case 'func':\r\n                return JSON.stringify(node.func + '(') + ' + ' + (node.args.length > 0 ? node.args.map(function (arg) {\r\n                    return print(arg, node, 0);\r\n                }).join(' + \\', \\' + ') : '\\'\\'') + ' + \\')\\'';\r\n            case 'matrix':\r\n                return '\\'{ \\' + ' + node.value.map(function (el) {\r\n                    return el.map(function (el) {\r\n                        return print(el, node, 0);\r\n                    }).join(' + \\', \\' + ');\r\n                }).join(' + \\'; \\' + ') + '+ \\' }\\'';\r\n            case 'null':\r\n                return '\\'\\'';\r\n            }\r\n            throw new Error('Cannot make printer for node ' + node.type);\r\n            function withParens(f) {\r\n                var op = node.op;\r\n                var needParens = OPERATORS[op] < prec || !prec && op == ',' || parent.type == 'binary' && prec == OPERATORS[op] && node === parent.right;\r\n                return parenthesize(f(), needParens);\r\n            }\r\n        }\r\n        function parenthesize(code, cond) {\r\n            return cond ? '\\'(\\' + ' + code + ' + \\')\\'' : code;\r\n        }\r\n    }\r\n    function toCPS(ast, k) {\r\n        var GENSYM = 0;\r\n        return cps(ast, k);\r\n        function cps(node, k) {\r\n            switch (node.type) {\r\n            case 'ref':\r\n            case 'num':\r\n            case 'str':\r\n            case 'null':\r\n            case 'error':\r\n            case 'bool':\r\n                return cpsAtom(node, k);\r\n            case 'prefix':\r\n            case 'postfix':\r\n                return cpsUnary(node, k);\r\n            case 'binary':\r\n                return cpsBinary(node, k);\r\n            case 'func':\r\n                return cpsFunc(node, k);\r\n            case 'lambda':\r\n                return cpsLambda(node, k);\r\n            case 'matrix':\r\n                return cpsMatrix(node.value, k, true);\r\n            }\r\n            throw new Error('Cannot CPS ' + node.type);\r\n        }\r\n        function cpsAtom(node, k) {\r\n            return k(node);\r\n        }\r\n        function cpsUnary(node, k) {\r\n            return cps({\r\n                type: 'func',\r\n                func: 'unary' + node.op,\r\n                args: [node.exp]\r\n            }, k);\r\n        }\r\n        function cpsBinary(node, k) {\r\n            return cps({\r\n                type: 'func',\r\n                func: 'binary' + node.op,\r\n                args: [\r\n                    node.left,\r\n                    node.right\r\n                ]\r\n            }, k);\r\n        }\r\n        function cpsIf(co, th, el, k) {\r\n            return cps(co, function (co) {\r\n                var rest = makeContinuation(k);\r\n                var thenK = gensym('T');\r\n                var elseK = gensym('E');\r\n                return {\r\n                    type: 'func',\r\n                    func: 'if',\r\n                    args: [\r\n                        rest,\r\n                        co,\r\n                        {\r\n                            type: 'lambda',\r\n                            vars: [thenK],\r\n                            body: cps(th || TRUE, function (th) {\r\n                                return {\r\n                                    type: 'call',\r\n                                    func: {\r\n                                        type: 'var',\r\n                                        name: thenK\r\n                                    },\r\n                                    args: [th]\r\n                                };\r\n                            })\r\n                        },\r\n                        {\r\n                            type: 'lambda',\r\n                            vars: [elseK],\r\n                            body: cps(el || FALSE, function (el) {\r\n                                return {\r\n                                    type: 'call',\r\n                                    func: {\r\n                                        type: 'var',\r\n                                        name: elseK\r\n                                    },\r\n                                    args: [el]\r\n                                };\r\n                            })\r\n                        }\r\n                    ]\r\n                };\r\n            });\r\n        }\r\n        function cpsAnd(args, k) {\r\n            if (args.length === 0) {\r\n                return cpsAtom(TRUE, k);\r\n            }\r\n            return cps({\r\n                type: 'func',\r\n                func: 'IF',\r\n                args: [\r\n                    args[0],\r\n                    {\r\n                        type: 'func',\r\n                        func: 'AND',\r\n                        args: args.slice(1)\r\n                    },\r\n                    FALSE\r\n                ]\r\n            }, k);\r\n        }\r\n        function cpsOr(args, k) {\r\n            if (args.length === 0) {\r\n                return cpsAtom(FALSE, k);\r\n            }\r\n            return cps({\r\n                type: 'func',\r\n                func: 'IF',\r\n                args: [\r\n                    args[0],\r\n                    TRUE,\r\n                    {\r\n                        type: 'func',\r\n                        func: 'OR',\r\n                        args: args.slice(1)\r\n                    }\r\n                ]\r\n            }, k);\r\n        }\r\n        function cpsFunc(node, k) {\r\n            switch (node.func.toLowerCase()) {\r\n            case 'if':\r\n                return cpsIf(node.args[0], node.args[1], node.args[2], k);\r\n            case 'and':\r\n                return cpsAnd(node.args, k);\r\n            case 'or':\r\n                return cpsOr(node.args, k);\r\n            case 'true':\r\n                return k(TRUE);\r\n            case 'false':\r\n                return k(FALSE);\r\n            }\r\n            return function loop(args, i) {\r\n                if (i == node.args.length) {\r\n                    return {\r\n                        type: 'func',\r\n                        func: node.func,\r\n                        args: args\r\n                    };\r\n                } else {\r\n                    return cps(node.args[i], function (value) {\r\n                        return loop(args.concat([value]), i + 1);\r\n                    });\r\n                }\r\n            }([makeContinuation(k)], 0);\r\n        }\r\n        function cpsLambda(node, k) {\r\n            var cont = gensym('K');\r\n            var body = cps(node.body, function (body) {\r\n                return {\r\n                    type: 'call',\r\n                    func: {\r\n                        type: 'var',\r\n                        value: cont\r\n                    },\r\n                    args: [body]\r\n                };\r\n            });\r\n            return k({\r\n                type: 'lambda',\r\n                vars: [cont].concat(node.vars),\r\n                body: body\r\n            });\r\n        }\r\n        function cpsMatrix(elements, k, isMatrix) {\r\n            var a = [];\r\n            return function loop(i) {\r\n                if (i == elements.length) {\r\n                    return k({\r\n                        type: 'matrix',\r\n                        value: a\r\n                    });\r\n                } else {\r\n                    return (isMatrix ? cpsMatrix : cps)(elements[i], function (val) {\r\n                        a[i] = val;\r\n                        return loop(i + 1);\r\n                    });\r\n                }\r\n            }(0);\r\n        }\r\n        function makeContinuation(k) {\r\n            var cont = gensym('R');\r\n            return {\r\n                type: 'lambda',\r\n                vars: [cont],\r\n                body: k({\r\n                    type: 'var',\r\n                    name: cont\r\n                })\r\n            };\r\n        }\r\n        function gensym(name) {\r\n            if (!name) {\r\n                name = '';\r\n            }\r\n            name = '_' + name;\r\n            return name + ++GENSYM;\r\n        }\r\n    }\r\n    var makeClosure = function (cache) {\r\n        return function (code) {\r\n            var f = cache[code];\r\n            if (!f) {\r\n                f = cache[code] = new Function('\\'use strict\\';return(' + code + ')')();\r\n            }\r\n            return f;\r\n        };\r\n    }(Object.create(null));\r\n    var FORMULA_CACHE = Object.create(null);\r\n    function makeFormula(exp) {\r\n        var printer = makePrinter(exp);\r\n        var hash = printer.call(exp);\r\n        var formula = FORMULA_CACHE[hash];\r\n        if (formula) {\r\n            return formula.clone(exp.sheet, exp.row, exp.col);\r\n        }\r\n        var code = js(toCPS(exp.ast, function (ret) {\r\n            return {\r\n                type: 'return',\r\n                value: ret\r\n            };\r\n        }));\r\n        code = [\r\n            'function(){',\r\n            'var context = this, refs = context.formula.absrefs',\r\n            code,\r\n            '}'\r\n        ].join(';\\n');\r\n        formula = new runtime.Formula(exp.refs, makeClosure(code), printer, exp.sheet, exp.row, exp.col);\r\n        FORMULA_CACHE[hash] = formula;\r\n        return formula;\r\n        function js(node) {\r\n            var type = node.type;\r\n            if (type == 'num') {\r\n                return node.value + '';\r\n            } else if (type == 'str') {\r\n                return JSON.stringify(node.value);\r\n            } else if (type == 'error') {\r\n                return 'context.error(' + JSON.stringify(node.value) + ')';\r\n            } else if (type == 'return') {\r\n                return 'context.resolve(' + js(node.value) + ')';\r\n            } else if (type == 'func') {\r\n                return 'context.func(' + JSON.stringify(node.func) + ', ' + js(node.args[0]) + ', ' + jsArray(node.args.slice(1)) + ')';\r\n            } else if (type == 'call') {\r\n                return js(node.func) + '(' + node.args.map(js).join(', ') + ')';\r\n            } else if (type == 'ref') {\r\n                return 'refs[' + node.index + ']';\r\n            } else if (type == 'bool') {\r\n                return '' + node.value;\r\n            } else if (type == 'if') {\r\n                return '(context.bool(' + js(node.co) + ') ? ' + js(node.th) + ' : ' + js(node.el) + ')';\r\n            } else if (type == 'lambda') {\r\n                return '(function(' + node.vars.join(', ') + '){ return(' + js(node.body) + ') })';\r\n            } else if (type == 'var') {\r\n                return node.name;\r\n            } else if (type == 'matrix') {\r\n                return jsArray(node.value);\r\n            } else if (type == 'null') {\r\n                return 'null';\r\n            } else {\r\n                throw new Error('Cannot compile expression ' + type);\r\n            }\r\n        }\r\n        function jsArray(a) {\r\n            return '[ ' + a.map(js).join(', ') + ' ]';\r\n        }\r\n    }\r\n    function identity(x) {\r\n        return x;\r\n    }\r\n    function TokenStream(input, options) {\r\n        input = RawTokenStream(InputStream(input), options);\r\n        var ahead = input.ahead;\r\n        var skip = input.skip;\r\n        var token = null;\r\n        var fixCell = options.row != null && options.col != null ? function (cell) {\r\n            if (cell.rel & 1) {\r\n                cell.col -= options.col;\r\n            }\r\n            if (cell.rel & 2) {\r\n                cell.row -= options.row;\r\n            }\r\n            return cell;\r\n        } : identity;\r\n        var addPos = options.forEditor ? function (thing, startToken, endToken) {\r\n            thing.begin = startToken.begin;\r\n            thing.end = endToken.end;\r\n            return thing;\r\n        } : identity;\r\n        return {\r\n            peek: peek,\r\n            next: next,\r\n            croak: input.croak,\r\n            eof: input.eof,\r\n            is: is\r\n        };\r\n        function is(type, value) {\r\n            var tok = peek();\r\n            return tok != null && (type == null || tok.type === type) && (value == null || tok.value === value) ? tok : null;\r\n        }\r\n        function peek() {\r\n            if (token == null) {\r\n                token = readNext();\r\n            }\r\n            return token;\r\n        }\r\n        function next() {\r\n            if (token != null) {\r\n                var tmp = token;\r\n                token = null;\r\n                return tmp;\r\n            }\r\n            return readNext();\r\n        }\r\n        function readNext() {\r\n            var ret;\r\n            var t = input.peek();\r\n            if (t) {\r\n                if (t.type == 'sym' || t.type == 'rc' || t.type == 'num') {\r\n                    ret = ahead(8, refRange3D) || ahead(6, refCell3D) || ahead(6, refSheetRange) || ahead(4, refSheetCell) || ahead(4, refRange) || ahead(2, refCell) || ahead(2, funcall);\r\n                }\r\n                if (!ret) {\r\n                    ret = input.next();\r\n                }\r\n            }\r\n            return ret;\r\n        }\r\n        function toCell(tok, isFirst) {\r\n            if (tok.type == 'rc') {\r\n                if (tok.rel && !options.forEditor && (options.row == null || options.col == null)) {\r\n                    input.croak('Cannot read relative cell in RC notation');\r\n                }\r\n                return new CellRef(tok.row, tok.col, tok.rel);\r\n            }\r\n            if (tok.type == 'num') {\r\n                if (tok.value <= 1048577) {\r\n                    return fixCell(new CellRef(getrow(tok.value), isFirst ? -Infinity : +Infinity, 2));\r\n                } else {\r\n                    return null;\r\n                }\r\n            }\r\n            var name = tok.value;\r\n            var m = /^(\\$)?([a-z]+)(\\$)?(\\d+)$/i.exec(name);\r\n            if (m) {\r\n                var row = getrow(m[4]), col = getcol(m[2]);\r\n                if (row <= 1048576 && col <= 16383) {\r\n                    return fixCell(new CellRef(getrow(m[4]), getcol(m[2]), (m[1] ? 0 : 1) | (m[3] ? 0 : 2)));\r\n                } else {\r\n                    return null;\r\n                }\r\n            }\r\n            var abs = name.charAt(0) == '$';\r\n            if (abs) {\r\n                name = name.substr(1);\r\n            }\r\n            if (/^\\d+$/.test(name)) {\r\n                var row = getrow(name);\r\n                if (row <= 1048576) {\r\n                    return fixCell(new CellRef(getrow(name), isFirst ? -Infinity : +Infinity, abs ? 0 : 2));\r\n                }\r\n            } else {\r\n                var col = getcol(name);\r\n                if (col <= 16383) {\r\n                    return fixCell(new CellRef(isFirst ? -Infinity : +Infinity, getcol(name), abs ? 0 : 1));\r\n                }\r\n            }\r\n        }\r\n        function refRange3D(a, b, c, d, e, f, g, h) {\r\n            if (a.type == 'sym' && b.type == 'op' && b.value == ':' && c.type == 'sym' && d.type == 'punc' && d.value == '!' && (e.type == 'sym' || e.type == 'rc' || e.type == 'num' && e.value == e.value | 0) && f.type == 'op' && f.value == ':' && (g.type == 'sym' || g.type == 'rc' || g.type == 'num' && g.value == g.value | 0) && g.type == e.type && !(h.type == 'punc' && h.value == '(' && !g.space)) {\r\n                var tl = toCell(e, true), br = toCell(g, false);\r\n                if (tl && br) {\r\n                    skip(7);\r\n                    return addPos(new RangeRef(tl.setSheet(a.value, true), br.setSheet(c.value, true)).setSheet(a.value, true), a, g);\r\n                }\r\n            }\r\n        }\r\n        function refCell3D(a, b, c, d, e, f) {\r\n            if (a.type == 'sym' && b.type == 'op' && b.value == ':' && c.type == 'sym' && d.type == 'punc' && d.value == '!' && (e.type == 'sym' || e.type == 'rc' || e.type == 'num' && e.value == e.value | 0) && !(f.type == 'punc' && f.value == '(' && !e.space)) {\r\n                var tl = toCell(e);\r\n                if (tl) {\r\n                    skip(5);\r\n                    var br = tl.clone();\r\n                    return addPos(new RangeRef(tl.setSheet(a.value, true), br.setSheet(c.value, true)).setSheet(a.value, true), a, e);\r\n                }\r\n            }\r\n        }\r\n        function refSheetRange(a, b, c, d, e, f) {\r\n            if (a.type == 'sym' && b.type == 'punc' && b.value == '!' && (c.type == 'sym' || c.type == 'rc' || c.type == 'num' && c.value == c.value | 0) && d.type == 'op' && d.value == ':' && (e.type == 'sym' || e.type == 'rc' || e.type == 'num' && e.value == e.value | 0) && !(f.type == 'punc' && f.value == '(' && !e.space)) {\r\n                var tl = toCell(c, true), br = toCell(e, false);\r\n                if (tl && br) {\r\n                    skip(5);\r\n                    return addPos(new RangeRef(tl, br).setSheet(a.value, true), a, e);\r\n                }\r\n            }\r\n        }\r\n        function refSheetCell(a, b, c, d) {\r\n            if (a.type == 'sym' && b.type == 'punc' && b.value == '!' && (c.type == 'sym' || c.type == 'rc' || c.type == 'num' && c.value == c.value | 0) && !(d.type == 'punc' && d.value == '(' && !c.space)) {\r\n                skip(3);\r\n                var x = toCell(c);\r\n                if (!x) {\r\n                    x = new NameRef(c.value);\r\n                }\r\n                return addPos(x.setSheet(a.value, true), a, c);\r\n            }\r\n        }\r\n        function refRange(a, b, c, d) {\r\n            if ((a.type == 'sym' || a.type == 'rc' || a.type == 'num' && a.value == a.value | 0) && (b.type == 'op' && b.value == ':') && (c.type == 'sym' || c.type == 'rc' || c.type == 'num' && c.value == c.value | 0) && !(d.type == 'punc' && d.value == '(' && !c.space)) {\r\n                var tl = toCell(a, true), br = toCell(c, false);\r\n                if (tl && br) {\r\n                    skip(3);\r\n                    return addPos(new RangeRef(tl, br), a, c);\r\n                }\r\n            }\r\n        }\r\n        function refCell(a, b) {\r\n            if ((a.type == 'sym' || a.type == 'rc') && !(b.type == 'punc' && b.value == '(' && !a.space)) {\r\n                var x = toCell(a);\r\n                if (x && isFinite(x.row) && isFinite(x.col)) {\r\n                    skip(1);\r\n                    return addPos(x, a, a);\r\n                }\r\n            }\r\n        }\r\n        function funcall(a, b) {\r\n            if (a.type == 'sym' && b.type == 'punc' && b.value == '(' && !a.space) {\r\n                a.type = 'func';\r\n                skip(1);\r\n                return a;\r\n            }\r\n        }\r\n    }\r\n    function isWhitespace(ch) {\r\n        return ' \\t\\n\\xA0\\u200B'.indexOf(ch) >= 0;\r\n    }\r\n    function RawTokenStream(input, options) {\r\n        var tokens = [], index = 0;\r\n        var readWhile = input.readWhile;\r\n        return {\r\n            next: next,\r\n            peek: peek,\r\n            eof: eof,\r\n            croak: input.croak,\r\n            ahead: ahead,\r\n            skip: skip\r\n        };\r\n        function isDigit(ch) {\r\n            return /[0-9]/i.test(ch);\r\n        }\r\n        function isIdStart(ch) {\r\n            return /[a-z$_]/i.test(ch) || ch.toLowerCase() != ch.toUpperCase();\r\n        }\r\n        function isId(ch) {\r\n            return isIdStart(ch) || isDigit(ch) || ch == '.';\r\n        }\r\n        function isOpChar(ch) {\r\n            return ch in OPERATORS;\r\n        }\r\n        function isPunc(ch) {\r\n            return '!;(){}[]'.indexOf(ch) >= 0;\r\n        }\r\n        function readNumber() {\r\n            var has_dot = false;\r\n            var number = readWhile(function (ch) {\r\n                if (ch == '.') {\r\n                    if (has_dot) {\r\n                        return false;\r\n                    }\r\n                    has_dot = true;\r\n                    return true;\r\n                }\r\n                return isDigit(ch);\r\n            });\r\n            return {\r\n                type: 'num',\r\n                value: parseFloat(number)\r\n            };\r\n        }\r\n        function symbol(id, quote) {\r\n            return {\r\n                type: 'sym',\r\n                value: id,\r\n                upper: id.toUpperCase(),\r\n                space: isWhitespace(input.peek()),\r\n                quote: quote\r\n            };\r\n        }\r\n        function getRC(a, b, c) {\r\n            if (!a && !c || a && c) {\r\n                var negative = a && /-$/.test(a);\r\n                var num = parseInt(b, 10);\r\n                if (negative) {\r\n                    num = -num;\r\n                }\r\n                if (!a) {\r\n                    num--;\r\n                }\r\n                return num;\r\n            }\r\n        }\r\n        function readSymbol() {\r\n            var m = input.lookingAt(/^R(\\[-?)?([0-9]+)(\\])?C(\\[-?)?([0-9]+)(\\])?/i);\r\n            if (m) {\r\n                var row = getRC(m[1], m[2], m[3]);\r\n                var col = getRC(m[4], m[5], m[6]);\r\n                if (row != null && col != null) {\r\n                    input.skip(m);\r\n                    return {\r\n                        type: 'rc',\r\n                        row: row,\r\n                        col: col,\r\n                        rel: (m[4] ? 1 : 0) | (m[1] ? 2 : 0)\r\n                    };\r\n                }\r\n            }\r\n            return symbol(readWhile(isId));\r\n        }\r\n        function readString() {\r\n            input.next();\r\n            return {\r\n                type: 'str',\r\n                value: input.readEscaped('\"')\r\n            };\r\n        }\r\n        function readSheetName() {\r\n            input.next();\r\n            return symbol(input.readEscaped('\\''), true);\r\n        }\r\n        function readOperator() {\r\n            return {\r\n                type: 'op',\r\n                value: readWhile(function (ch, op) {\r\n                    return op + ch in OPERATORS;\r\n                })\r\n            };\r\n        }\r\n        function readPunc() {\r\n            return {\r\n                type: 'punc',\r\n                value: input.next()\r\n            };\r\n        }\r\n        function readNext() {\r\n            if (input.eof()) {\r\n                return null;\r\n            }\r\n            var ch = input.peek(), m;\r\n            if (ch == '\"') {\r\n                return readString();\r\n            }\r\n            if (ch == '\\'') {\r\n                return readSheetName();\r\n            }\r\n            if (isDigit(ch)) {\r\n                return readNumber();\r\n            }\r\n            if (isIdStart(ch)) {\r\n                return readSymbol();\r\n            }\r\n            if (isOpChar(ch)) {\r\n                return readOperator();\r\n            }\r\n            if (isPunc(ch)) {\r\n                return readPunc();\r\n            }\r\n            if (m = input.lookingAt(/^#([a-z\\/]+)[?!]?/i)) {\r\n                input.skip(m);\r\n                return {\r\n                    type: 'error',\r\n                    value: m[1]\r\n                };\r\n            }\r\n            if (!options.forEditor) {\r\n                input.croak('Can\\'t handle character: ' + ch);\r\n            }\r\n            return {\r\n                type: 'error',\r\n                value: input.next()\r\n            };\r\n        }\r\n        function peek() {\r\n            while (tokens.length <= index) {\r\n                readWhile(isWhitespace);\r\n                var begin = input.pos();\r\n                var tok = readNext();\r\n                if (options.forEditor && tok) {\r\n                    tok.begin = begin;\r\n                    tok.end = input.pos();\r\n                }\r\n                tokens.push(tok);\r\n            }\r\n            return tokens[index];\r\n        }\r\n        function next() {\r\n            var tok = peek();\r\n            if (tok) {\r\n                index++;\r\n            }\r\n            return tok;\r\n        }\r\n        function ahead(n, f) {\r\n            var pos = index, a = [];\r\n            while (n-- > 0) {\r\n                a.push(next() || EOF);\r\n            }\r\n            index = pos;\r\n            return f.apply(a, a);\r\n        }\r\n        function skip(n) {\r\n            index += n;\r\n        }\r\n        function eof() {\r\n            return peek() == null;\r\n        }\r\n    }\r\n    var EOF = { type: 'eof' };\r\n    function InputStream(input) {\r\n        var pos = 0, line = 1, col = 0;\r\n        return {\r\n            next: next,\r\n            peek: peek,\r\n            eof: eof,\r\n            croak: croak,\r\n            readWhile: readWhile,\r\n            readEscaped: readEscaped,\r\n            lookingAt: lookingAt,\r\n            skip: skip,\r\n            forward: forward,\r\n            pos: location\r\n        };\r\n        function location() {\r\n            return pos;\r\n        }\r\n        function next() {\r\n            var ch = input.charAt(pos++);\r\n            if (ch == '\\n') {\r\n                line++;\r\n                col = 0;\r\n            } else {\r\n                col++;\r\n            }\r\n            return ch;\r\n        }\r\n        function peek() {\r\n            return input.charAt(pos);\r\n        }\r\n        function eof() {\r\n            return peek() === '';\r\n        }\r\n        function croak(msg) {\r\n            throw new ParseError(msg + ' (input: ' + input + ')', pos);\r\n        }\r\n        function skip(ch) {\r\n            if (typeof ch == 'string') {\r\n                if (input.substr(pos, ch.length) != ch) {\r\n                    croak('Expected ' + ch);\r\n                }\r\n                forward(ch.length);\r\n            } else if (ch instanceof RegExp) {\r\n                var m = ch.exec(input.substr(pos));\r\n                if (m) {\r\n                    forward(m[0].length);\r\n                    return m;\r\n                }\r\n            } else {\r\n                forward(ch[0].length);\r\n            }\r\n        }\r\n        function forward(n) {\r\n            while (n-- > 0) {\r\n                next();\r\n            }\r\n        }\r\n        function readEscaped(end) {\r\n            var escaped = false, str = '';\r\n            while (!eof()) {\r\n                var ch = next();\r\n                if (escaped) {\r\n                    str += ch;\r\n                    escaped = false;\r\n                } else if (ch == '\\\\') {\r\n                    escaped = true;\r\n                } else if (ch == end) {\r\n                    break;\r\n                } else {\r\n                    str += ch;\r\n                }\r\n            }\r\n            return str;\r\n        }\r\n        function readWhile(predicate) {\r\n            var str = '';\r\n            while (!eof() && predicate(peek(), str)) {\r\n                str += next();\r\n            }\r\n            return str;\r\n        }\r\n        function lookingAt(rx) {\r\n            return rx.exec(input.substr(pos));\r\n        }\r\n    }\r\n    var FORMAT_PARSERS = [];\r\n    var registerFormatParser = exports.registerFormatParser = function (p) {\r\n        FORMAT_PARSERS.push(p);\r\n    };\r\n    exports.parse = function (sheet, row, col, input) {\r\n        if (input instanceof Date) {\r\n            return {\r\n                type: 'date',\r\n                value: runtime.dateToSerial(input)\r\n            };\r\n        }\r\n        if (typeof input == 'number') {\r\n            return {\r\n                type: 'number',\r\n                value: input\r\n            };\r\n        }\r\n        if (typeof input == 'boolean') {\r\n            return {\r\n                type: 'boolean',\r\n                value: input\r\n            };\r\n        }\r\n        input += '';\r\n        if (/^'/.test(input)) {\r\n            return {\r\n                type: 'string',\r\n                value: input.substr(1)\r\n            };\r\n        }\r\n        if (/^[0-9.]+%$/.test(input)) {\r\n            var str = input.substr(0, input.length - 1);\r\n            var num = parseFloat(str);\r\n            if (!isNaN(num) && num == str) {\r\n                return {\r\n                    type: 'percent',\r\n                    value: num / 100\r\n                };\r\n            }\r\n        }\r\n        if (/^=/.test(input)) {\r\n            input = input.substr(1);\r\n            if (/\\S/.test(input)) {\r\n                return parseFormula(sheet, row, col, input);\r\n            } else {\r\n                return {\r\n                    type: 'string',\r\n                    value: '=' + input\r\n                };\r\n            }\r\n        }\r\n        for (var i = 0; i < FORMAT_PARSERS.length; ++i) {\r\n            var result = FORMAT_PARSERS[i](input);\r\n            if (result) {\r\n                return result;\r\n            }\r\n        }\r\n        if (input.toLowerCase() == 'true') {\r\n            return {\r\n                type: 'boolean',\r\n                value: true\r\n            };\r\n        }\r\n        if (input.toLowerCase() == 'false') {\r\n            return {\r\n                type: 'boolean',\r\n                value: false\r\n            };\r\n        }\r\n        var date = runtime.parseDate(input);\r\n        if (date) {\r\n            return {\r\n                type: 'date',\r\n                value: runtime.dateToSerial(date)\r\n            };\r\n        }\r\n        var num = parseFloat(input);\r\n        if (!isNaN(num) && input.length > 0 && num == input) {\r\n            return {\r\n                type: 'number',\r\n                value: num\r\n            };\r\n        }\r\n        return {\r\n            type: 'string',\r\n            value: input\r\n        };\r\n    };\r\n    function tokenize(input, row, col) {\r\n        var tokens = [];\r\n        input = TokenStream(input, {\r\n            forEditor: true,\r\n            row: row,\r\n            col: col\r\n        });\r\n        while (!input.eof()) {\r\n            tokens.push(next());\r\n        }\r\n        var tok = tokens[0];\r\n        if (tok.type == 'op' && tok.value == '=') {\r\n            tok.type = 'startexp';\r\n        }\r\n        return tokens;\r\n        function next() {\r\n            var tok = input.next();\r\n            if (tok.type == 'sym') {\r\n                if (tok.upper == 'TRUE') {\r\n                    tok.type = 'bool';\r\n                    tok.value = true;\r\n                } else if (tok.upper == 'FALSE') {\r\n                    tok.type = 'bool';\r\n                    tok.value = false;\r\n                }\r\n            } else if (tok.type == 'ref') {\r\n                tok = {\r\n                    type: 'ref',\r\n                    ref: row != null && col != null ? tok.absolute(row, col) : tok,\r\n                    begin: tok.begin,\r\n                    end: tok.end\r\n                };\r\n            }\r\n            return tok;\r\n        }\r\n    }\r\n    exports.parseFormula = parseFormula;\r\n    exports.parseReference = parseReference;\r\n    exports.compile = makeFormula;\r\n    exports.InputStream = InputStream;\r\n    exports.ParseError = ParseError;\r\n    exports.tokenize = tokenize;\r\n    registerFormatParser(function (input) {\r\n        var m;\r\n        if (m = /^(\\d+):(\\d+)$/.exec(input)) {\r\n            var hh = parseInt(m[1], 10);\r\n            var mm = parseInt(m[2], 10);\r\n            return {\r\n                type: 'date',\r\n                format: 'hh:mm',\r\n                value: runtime.packTime(hh, mm, 0, 0)\r\n            };\r\n        }\r\n        if (m = /^(\\d+):(\\d+)(\\.\\d+)$/.exec(input)) {\r\n            var mm = parseInt(m[1], 10);\r\n            var ss = parseInt(m[2], 10);\r\n            var ms = parseFloat(m[3]) * 1000;\r\n            return {\r\n                type: 'date',\r\n                format: 'mm:ss.00',\r\n                value: runtime.packTime(0, mm, ss, ms)\r\n            };\r\n        }\r\n        if (m = /^(\\d+):(\\d+):(\\d+)$/.exec(input)) {\r\n            var hh = parseInt(m[1], 10);\r\n            var mm = parseInt(m[2], 10);\r\n            var ss = parseInt(m[3], 10);\r\n            return {\r\n                type: 'date',\r\n                format: 'hh:mm:ss',\r\n                value: runtime.packTime(hh, mm, ss, 0)\r\n            };\r\n        }\r\n        if (m = /^(\\d+):(\\d+):(\\d+)(\\.\\d+)$/.exec(input)) {\r\n            var hh = parseInt(m[1], 10);\r\n            var mm = parseInt(m[2], 10);\r\n            var ss = parseInt(m[3], 10);\r\n            var ms = parseFloat(m[4]) * 1000;\r\n            return {\r\n                type: 'date',\r\n                format: 'hh:mm:ss.00',\r\n                value: runtime.packTime(hh, mm, ss, ms)\r\n            };\r\n        }\r\n    });\r\n    registerFormatParser(function (input) {\r\n        var m, n;\r\n        var culture = kendo.culture();\r\n        var comma = culture.numberFormat[','];\r\n        var dot = culture.numberFormat['.'];\r\n        var currency = culture.numberFormat.currency.symbol;\r\n        var rxnum = getNumberRegexp(comma, dot);\r\n        var rxcur = new RegExp('^\\\\s*\\\\' + currency + '\\\\s*');\r\n        var sign = 1;\r\n        var format = '';\r\n        var suffix = '';\r\n        var has_currency = false;\r\n        input = InputStream(input.replace(/^\\s+|\\s+$/g, ''));\r\n        if (input.skip(/^-\\s*/)) {\r\n            sign = -1;\r\n        }\r\n        if (m = input.skip(rxcur)) {\r\n            has_currency = true;\r\n            format += '\"' + m[0] + '\"';\r\n        }\r\n        if (input.skip(/^-\\s*/)) {\r\n            if (sign < 0) {\r\n                return null;\r\n            }\r\n            sign = -1;\r\n        }\r\n        if (!(n = input.skip(rxnum))) {\r\n            return null;\r\n        }\r\n        format += '#';\r\n        if (m = input.skip(rxcur)) {\r\n            if (has_currency) {\r\n                return null;\r\n            }\r\n            has_currency = true;\r\n            suffix = '\"' + m[0] + '\"';\r\n        }\r\n        if (!input.eof()) {\r\n            return null;\r\n        }\r\n        if (n[2] || has_currency) {\r\n            format += ',#';\r\n        }\r\n        if (n[3]) {\r\n            format += '.' + repeat('0', n[3].length - 1);\r\n        }\r\n        var value = n[0].replace(new RegExp('\\\\' + comma, 'g'), '').replace(new RegExp('\\\\' + dot, 'g'), '.');\r\n        return {\r\n            type: 'number',\r\n            format: format + suffix,\r\n            value: sign * parseFloat(value)\r\n        };\r\n    });\r\n    var NUMBER_FORMAT_RX = {};\r\n    function getNumberRegexp(comma, dot) {\r\n        var id = comma + dot;\r\n        var rx = NUMBER_FORMAT_RX[id];\r\n        if (!rx) {\r\n            rx = '^(\\\\d+(COM\\\\d{3})*(DOT\\\\d+)?)';\r\n            rx = rx.replace(/DOT/g, '\\\\' + dot).replace(/COM/g, '\\\\' + comma);\r\n            rx = new RegExp(rx);\r\n            NUMBER_FORMAT_RX[id] = rx;\r\n        }\r\n        return rx;\r\n    }\r\n    function repeat(str, len) {\r\n        var out = '';\r\n        while (len-- > 0) {\r\n            out += str;\r\n        }\r\n        return out;\r\n    }\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/excel-reader', [\r\n        'kendo.core',\r\n        'kendo.color',\r\n        'util/parse-xml',\r\n        'spreadsheet/calc'\r\n    ], f);\r\n}(function () {\r\n    'use strict';\r\n    if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n        return;\r\n    }\r\n    var $ = kendo.jQuery;\r\n    var parseXML = kendo.util.parseXML;\r\n    var parseReference = kendo.spreadsheet.calc.parseReference;\r\n    function readExcel(file, workbook, deferred) {\r\n        var reader = new FileReader();\r\n        reader.onload = function (e) {\r\n            var zip = new JSZip(e.target.result);\r\n            readWorkbook(zip, workbook, deferred);\r\n        };\r\n        reader.readAsArrayBuffer(file);\r\n    }\r\n    var SEL_CELL = [\r\n        'sheetData',\r\n        'row',\r\n        'c'\r\n    ];\r\n    var SEL_COL = [\r\n        'cols',\r\n        'col'\r\n    ];\r\n    var SEL_DEFINED_NAME = [\r\n        'definedNames',\r\n        'definedName'\r\n    ];\r\n    var SEL_FORMULA = [\r\n        'sheetData',\r\n        'row',\r\n        'c',\r\n        'f'\r\n    ];\r\n    var SEL_MERGE = [\r\n        'mergeCells',\r\n        'mergeCell'\r\n    ];\r\n    var SEL_PANE = [\r\n        'sheetViews',\r\n        'sheetView',\r\n        'pane'\r\n    ];\r\n    var SEL_ROW = [\r\n        'sheetData',\r\n        'row'\r\n    ];\r\n    var SEL_SELECTION = [\r\n        'sheetViews',\r\n        'sheetView',\r\n        'selection'\r\n    ];\r\n    var SEL_SHEET = [\r\n        'sheets',\r\n        'sheet'\r\n    ];\r\n    var SEL_STRING = [\r\n        'sheetData',\r\n        'row',\r\n        'c',\r\n        'is'\r\n    ];\r\n    var SEL_TEXT = ['t'];\r\n    var SEL_SHARED_STRING = ['si'];\r\n    var SEL_VALUE = [\r\n        'sheetData',\r\n        'row',\r\n        'c',\r\n        'v'\r\n    ];\r\n    var SEL_VIEW = [\r\n        'bookViews',\r\n        'workbookView'\r\n    ];\r\n    var SEL_SHEET_VIEW = [\r\n        'sheetViews',\r\n        'sheetView'\r\n    ];\r\n    var SEL_HYPERLINK = [\r\n        'hyperlinks',\r\n        'hyperlink'\r\n    ];\r\n    function xl(file) {\r\n        if (!/^\\//.test(file)) {\r\n            file = 'xl/' + file;\r\n        } else {\r\n            file = file.substr(1);\r\n        }\r\n        return file;\r\n    }\r\n    function readWorkbook(zip, workbook, progress) {\r\n        var strings = readStrings(zip);\r\n        var relationships = readRelationships(zip, '_rels/workbook.xml');\r\n        var theme = readTheme(zip, relationships.byType.theme[0]);\r\n        var styles = readStyles(zip, theme);\r\n        var items = [];\r\n        var activeSheet = 0;\r\n        parse(zip, 'xl/workbook.xml', {\r\n            enter: function (tag, attrs) {\r\n                if (this.is(SEL_SHEET)) {\r\n                    var relId = attrs['r:id'];\r\n                    var file = relationships.byId[relId];\r\n                    var name = attrs.name;\r\n                    var dim = sheetDimensions(zip, file);\r\n                    items.push({\r\n                        workbook: workbook,\r\n                        zip: zip,\r\n                        strings: strings,\r\n                        styles: styles,\r\n                        file: file,\r\n                        options: {\r\n                            name: name,\r\n                            rows: Math.max(workbook.options.rows || 0, dim.rows),\r\n                            columns: Math.max(workbook.options.columns || 0, dim.cols),\r\n                            columnWidth: dim.columnWidth,\r\n                            rowHeight: dim.rowHeight\r\n                        }\r\n                    });\r\n                } else if (this.is(SEL_VIEW)) {\r\n                    if (attrs.activeTab) {\r\n                        activeSheet = integer(attrs.activeTab);\r\n                    }\r\n                }\r\n            },\r\n            text: function (text) {\r\n                var attrs = this.is(SEL_DEFINED_NAME);\r\n                if (attrs && !(bool(attrs['function']) || bool(attrs.vbProcedure))) {\r\n                    var ref = parseReference(text, true);\r\n                    workbook.defineName(attrs.name, ref, bool(attrs.hidden));\r\n                }\r\n            }\r\n        });\r\n        var loading = new $.Deferred();\r\n        loading.progress(function (args) {\r\n            if (progress) {\r\n                progress.notify(args);\r\n            }\r\n        }).then(function () {\r\n            var sheets = workbook.sheets();\r\n            recalcSheets(sheets);\r\n            workbook.activeSheet(sheets[activeSheet]);\r\n            if (progress) {\r\n                progress.resolve();\r\n            }\r\n        });\r\n        loadSheets(items, workbook, loading);\r\n    }\r\n    function loadSheets(items, workbook, progress) {\r\n        var ready = new $.Deferred().resolve();\r\n        for (var i = 0; i < items.length; i++) {\r\n            (function (entry, i) {\r\n                ready = ready.then(function () {\r\n                    var sheet = workbook.insertSheet(entry.options);\r\n                    sheet.suspendChanges(true);\r\n                    var promise = queueSheet(sheet, entry);\r\n                    var args = {\r\n                        sheet: sheet,\r\n                        progress: i / (items.length - 1)\r\n                    };\r\n                    promise.then(function () {\r\n                        progress.notify(args);\r\n                    });\r\n                    return promise;\r\n                });\r\n            }(items[i], i));\r\n        }\r\n        ready.then(function () {\r\n            progress.resolve();\r\n        });\r\n    }\r\n    function queueSheet(sheet, ctx) {\r\n        var deferred = new $.Deferred();\r\n        setTimeout(function () {\r\n            readSheet(ctx.zip, ctx.file, sheet, ctx.strings, ctx.styles);\r\n            deferred.resolve();\r\n        }, 0);\r\n        return deferred;\r\n    }\r\n    function recalcSheets(sheets) {\r\n        for (var i = 0; i < sheets.length; i++) {\r\n            sheets[i].suspendChanges(false).triggerChange({ recalc: true });\r\n        }\r\n    }\r\n    function sheetDimensions(zip, file) {\r\n        var dim = {\r\n            rows: 0,\r\n            cols: 0\r\n        };\r\n        parse(zip, xl(file), {\r\n            enter: function (tag, attrs) {\r\n                if (tag == 'dimension') {\r\n                    var ref = parseReference(attrs.ref);\r\n                    if (ref.bottomRight) {\r\n                        dim.cols = ref.bottomRight.col + 1;\r\n                        dim.rows = ref.bottomRight.row + 1;\r\n                    }\r\n                } else if (tag === 'sheetFormatPr') {\r\n                    if (attrs.defaultColWidth) {\r\n                        dim.columnWidth = toColWidth(parseFloat(attrs.defaultColWidth));\r\n                    }\r\n                    if (attrs.defaultRowHeight) {\r\n                        dim.rowHeight = toRowHeight(parseFloat(attrs.defaultRowHeight));\r\n                    }\r\n                } else if (this.is(SEL_ROW)) {\r\n                    this.exit();\r\n                }\r\n            }\r\n        });\r\n        return dim;\r\n    }\r\n    function toColWidth(size) {\r\n        var maximumDigitWidth = 7;\r\n        var fraction = (256 * size + Math.floor(128 / maximumDigitWidth)) / 256;\r\n        return Math.floor(fraction) * maximumDigitWidth;\r\n    }\r\n    function toRowHeight(pts) {\r\n        return pts * 1.5625;\r\n    }\r\n    function readSheet(zip, file, sheet, strings, styles) {\r\n        var ref, type, value, formula, formulaRange;\r\n        var nCols = sheet._columns._count;\r\n        var prevCellRef = null;\r\n        var relsFile = file.replace(/worksheets\\//, 'worksheets/_rels/');\r\n        var relationships = readRelationships(zip, relsFile);\r\n        parse(zip, xl(file), {\r\n            enter: function (tag, attrs) {\r\n                if (this.is(SEL_CELL)) {\r\n                    value = null;\r\n                    formula = null;\r\n                    formulaRange = null;\r\n                    ref = attrs.r;\r\n                    if (ref == null) {\r\n                        ref = parseReference(prevCellRef);\r\n                        ref.col++;\r\n                        ref = ref.toString();\r\n                    }\r\n                    prevCellRef = ref;\r\n                    type = attrs.t;\r\n                    var styleIndex = attrs.s;\r\n                    if (styleIndex != null) {\r\n                        applyStyle(sheet, ref, styles, styleIndex);\r\n                    }\r\n                } else if (this.is(SEL_MERGE)) {\r\n                    sheet.range(attrs.ref).merge();\r\n                } else if (this.is(SEL_COL)) {\r\n                    var start = integer(attrs.min) - 1;\r\n                    var stop = Math.min(nCols, integer(attrs.max)) - 1;\r\n                    var width;\r\n                    if (attrs.width) {\r\n                        width = toColWidth(parseFloat(attrs.width));\r\n                        if (width !== 0) {\r\n                            sheet._columns.values.value(start, stop, width);\r\n                        }\r\n                    }\r\n                    if (attrs.hidden === '1' || width === 0) {\r\n                        for (var ci = start; ci <= stop; ci++) {\r\n                            sheet.hideColumn(ci);\r\n                        }\r\n                    }\r\n                } else if (this.is(SEL_ROW)) {\r\n                    var row = integer(attrs.r) - 1;\r\n                    var height;\r\n                    if (attrs.ht) {\r\n                        height = toRowHeight(parseFloat(attrs.ht));\r\n                        if (height !== 0) {\r\n                            sheet._rows.values.value(row, row, height);\r\n                        }\r\n                    }\r\n                    if (attrs.hidden === '1' || height === 0) {\r\n                        sheet.hideRow(row);\r\n                    }\r\n                } else if (this.is(SEL_SELECTION)) {\r\n                    if (attrs.activeCell) {\r\n                        var acRef = parseReference(attrs.activeCell);\r\n                        sheet.select(acRef, true);\r\n                    }\r\n                } else if (this.is(SEL_PANE)) {\r\n                    if (attrs.state == 'frozen') {\r\n                        if (attrs.xSplit) {\r\n                            sheet.frozenColumns(integer(attrs.xSplit));\r\n                        }\r\n                        if (attrs.ySplit) {\r\n                            sheet.frozenRows(integer(attrs.ySplit));\r\n                        }\r\n                    }\r\n                } else if (this.is(SEL_SHEET_VIEW)) {\r\n                    sheet.showGridLines(bool(attrs.showGridLines, true));\r\n                } else if (this.is(SEL_HYPERLINK)) {\r\n                    var relId = attrs['r:id'];\r\n                    var target = relationships.byId[relId];\r\n                    if (target) {\r\n                        sheet.range(attrs.ref).link(target);\r\n                    }\r\n                }\r\n            },\r\n            leave: function (tag) {\r\n                if (this.is(SEL_CELL)) {\r\n                    if (formula != null) {\r\n                        try {\r\n                            sheet.range(formulaRange || ref).formula(formula);\r\n                        } catch (ex) {\r\n                            sheet.range(formulaRange || ref).value(formula).background('#ffaaaa');\r\n                        }\r\n                    } else if (value != null) {\r\n                        var range = sheet.range(ref);\r\n                        if (!range._get('formula')) {\r\n                            if (!type || type == 'n') {\r\n                                value = parseFloat(value);\r\n                            } else if (type == 's') {\r\n                                value = strings[integer(value)];\r\n                            } else if (type == 'b') {\r\n                                value = value === '1';\r\n                            } else if (type == 'd') {\r\n                                value = kendo.parseDate(value);\r\n                            }\r\n                            if (value != null) {\r\n                                range.value(value);\r\n                            }\r\n                        }\r\n                    }\r\n                } else if (tag == 'cols') {\r\n                    sheet._columns._refresh();\r\n                } else if (tag == 'sheetData') {\r\n                    sheet._rows._refresh();\r\n                }\r\n            },\r\n            text: function (text) {\r\n                var attrs;\r\n                if (this.is(SEL_VALUE) || this.is(SEL_STRING)) {\r\n                    value = text;\r\n                } else if (attrs = this.is(SEL_FORMULA)) {\r\n                    formula = text;\r\n                    if (attrs.t == 'shared') {\r\n                        formulaRange = attrs.ref;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    var BORDER_WIDTHS = {\r\n        'none': 0,\r\n        'thin': 1,\r\n        'medium': 2,\r\n        'dashed': 1,\r\n        'dotted': 1,\r\n        'thick': 3,\r\n        'double': 3,\r\n        'hair': 1,\r\n        'mediumDashed': 2,\r\n        'dashDot': 1,\r\n        'mediumDashDot': 2,\r\n        'dashDotDot': 1,\r\n        'mediumDashDotDot': 2,\r\n        'slantDashDot': 1\r\n    };\r\n    var DEFAULT_FORMATS = {\r\n        0: 'General',\r\n        1: '0',\r\n        2: '0.00',\r\n        3: '#,##0',\r\n        4: '#,##0.00',\r\n        9: '0%',\r\n        10: '0.00%',\r\n        11: '0.00E+00',\r\n        12: '# ?/?',\r\n        13: '# ??/??',\r\n        14: 'mm-dd-yy',\r\n        15: 'd-mmm-yy',\r\n        16: 'd-mmm',\r\n        17: 'mmm-yy',\r\n        18: 'h:mm AM/PM',\r\n        19: 'h:mm:ss AM/PM',\r\n        20: 'h:mm',\r\n        21: 'h:mm:ss',\r\n        22: 'm/d/yy h:mm',\r\n        37: '#,##0 ;(#,##0)',\r\n        38: '#,##0 ;[Red](#,##0)',\r\n        39: '#,##0.00;(#,##0.00)',\r\n        40: '#,##0.00;[Red](#,##0.00)',\r\n        45: 'mm:ss',\r\n        46: '[h]:mm:ss',\r\n        47: 'mmss.0',\r\n        48: '##0.0E+0',\r\n        49: '@'\r\n    };\r\n    function applyStyle(sheet, ref, styles, styleIndex) {\r\n        var range = sheet.range(ref);\r\n        var xf = styles.inlineStyles[styleIndex], base, value;\r\n        if (xf.xfId) {\r\n            base = styles.namedStyles[xf.xfId];\r\n        }\r\n        if (shouldSet('applyBorder', 'borderId')) {\r\n            setBorder(styles.borders[value]);\r\n        }\r\n        if (shouldSet('applyFont', 'fontId')) {\r\n            setFont(styles.fonts[value]);\r\n        }\r\n        if (shouldSet('applyAlignment', 'textAlign')) {\r\n            range.textAlign(value);\r\n        }\r\n        if (shouldSet('applyAlignment', 'verticalAlign')) {\r\n            range.verticalAlign(value);\r\n        }\r\n        if (shouldSet('applyAlignment', 'wrapText')) {\r\n            range._property('wrap', value);\r\n        }\r\n        if (shouldSet('applyFill', 'fillId')) {\r\n            setFill(styles.fills[value]);\r\n        }\r\n        if (shouldSet('applyNumberFormat', 'numFmtId')) {\r\n            setFormat(styles.numFmts[value] || DEFAULT_FORMATS[value]);\r\n        }\r\n        function setFormat(f) {\r\n            var format = typeof f == 'string' ? f : f.formatCode;\r\n            if (format != null && !/^general$/i.test(format)) {\r\n                format = format.replace(/^\\[\\$-[0-9]+\\]/, '');\r\n                range.format(format);\r\n            }\r\n        }\r\n        function setFill(f) {\r\n            if (f.type == 'solid') {\r\n                range.background(f.color);\r\n            }\r\n        }\r\n        function setFont(f) {\r\n            range.fontFamily(f.name);\r\n            range._property('fontSize', f.size);\r\n            if (f.bold) {\r\n                range.bold(true);\r\n            }\r\n            if (f.italic) {\r\n                range.italic(true);\r\n            }\r\n        }\r\n        function setBorder(b) {\r\n            function set(side, prop) {\r\n                var border = b[side];\r\n                if (!border) {\r\n                    return;\r\n                }\r\n                var width = BORDER_WIDTHS[border.style];\r\n                if (width === 0) {\r\n                    return;\r\n                }\r\n                var color = border.color;\r\n                if (color == null) {\r\n                    color = '#000';\r\n                }\r\n                range._property(prop, {\r\n                    size: width,\r\n                    color: color\r\n                });\r\n            }\r\n            set('left', 'borderLeft');\r\n            set('top', 'borderTop');\r\n            set('right', 'borderRight');\r\n            set('bottom', 'borderBottom');\r\n        }\r\n        function shouldSet(applyName, propName) {\r\n            var t = xf[applyName];\r\n            if (t != null && !t) {\r\n                return false;\r\n            }\r\n            value = xf[propName];\r\n            if (base && value == null) {\r\n                t = base[applyName];\r\n                if (t != null && !t) {\r\n                    return false;\r\n                }\r\n                value = base[propName];\r\n            }\r\n            return value != null;\r\n        }\r\n    }\r\n    function parse(zip, file, callbacks) {\r\n        var part = zip.files[file];\r\n        if (part) {\r\n            parseXML(part.asUint8Array(), callbacks);\r\n        }\r\n    }\r\n    function readStrings(zip) {\r\n        var strings = [];\r\n        var current = null;\r\n        parse(zip, 'xl/sharedStrings.xml', {\r\n            leave: function () {\r\n                if (this.is(SEL_SHARED_STRING)) {\r\n                    strings.push(current);\r\n                    current = null;\r\n                }\r\n            },\r\n            text: function (text) {\r\n                if (this.is(SEL_TEXT)) {\r\n                    if (current == null) {\r\n                        current = '';\r\n                    }\r\n                    current += text;\r\n                }\r\n            }\r\n        });\r\n        return strings;\r\n    }\r\n    function readRelationships(zip, file) {\r\n        var map = {\r\n            byId: {},\r\n            byType: { theme: [] }\r\n        };\r\n        parse(zip, xl(file) + '.rels', {\r\n            enter: function (tag, attrs) {\r\n                if (tag == 'Relationship') {\r\n                    map.byId[attrs.Id] = attrs.Target;\r\n                    var type = attrs.Type.match(/\\w+$/)[0];\r\n                    var entries = map.byType[type] || [];\r\n                    entries.push(attrs.Target);\r\n                    map.byType[type] = entries;\r\n                }\r\n            }\r\n        });\r\n        return map;\r\n    }\r\n    var SEL_BORDER = [\r\n        'borders',\r\n        'border'\r\n    ];\r\n    var SEL_FILL = [\r\n        'fills',\r\n        'fill'\r\n    ];\r\n    var SEL_FONT = [\r\n        'fonts',\r\n        'font'\r\n    ];\r\n    var SEL_INLINE_STYLE = [\r\n        'cellXfs',\r\n        'xf'\r\n    ];\r\n    var SEL_NAMED_STYLE = [\r\n        'cellStyleXfs',\r\n        'xf'\r\n    ];\r\n    var SEL_NUM_FMT = [\r\n        'numFmts',\r\n        'numFmt'\r\n    ];\r\n    var INDEXED_COLORS = [\r\n        toCSSColor('FF000000'),\r\n        toCSSColor('FFFFFFFF'),\r\n        toCSSColor('FFFF0000'),\r\n        toCSSColor('FF00FF00'),\r\n        toCSSColor('FF0000FF'),\r\n        toCSSColor('FFFFFF00'),\r\n        toCSSColor('FFFF00FF'),\r\n        toCSSColor('FF00FFFF'),\r\n        toCSSColor('FF000000'),\r\n        toCSSColor('FFFFFFFF'),\r\n        toCSSColor('FFFF0000'),\r\n        toCSSColor('FF00FF00'),\r\n        toCSSColor('FF0000FF'),\r\n        toCSSColor('FFFFFF00'),\r\n        toCSSColor('FFFF00FF'),\r\n        toCSSColor('FF00FFFF'),\r\n        toCSSColor('FF800000'),\r\n        toCSSColor('FF008000'),\r\n        toCSSColor('FF000080'),\r\n        toCSSColor('FF808000'),\r\n        toCSSColor('FF800080'),\r\n        toCSSColor('FF008080'),\r\n        toCSSColor('FFC0C0C0'),\r\n        toCSSColor('FF808080'),\r\n        toCSSColor('FF9999FF'),\r\n        toCSSColor('FF993366'),\r\n        toCSSColor('FFFFFFCC'),\r\n        toCSSColor('FFCCFFFF'),\r\n        toCSSColor('FF660066'),\r\n        toCSSColor('FFFF8080'),\r\n        toCSSColor('FF0066CC'),\r\n        toCSSColor('FFCCCCFF'),\r\n        toCSSColor('FF000080'),\r\n        toCSSColor('FFFF00FF'),\r\n        toCSSColor('FFFFFF00'),\r\n        toCSSColor('FF00FFFF'),\r\n        toCSSColor('FF800080'),\r\n        toCSSColor('FF800000'),\r\n        toCSSColor('FF008080'),\r\n        toCSSColor('FF0000FF'),\r\n        toCSSColor('FF00CCFF'),\r\n        toCSSColor('FFCCFFFF'),\r\n        toCSSColor('FFCCFFCC'),\r\n        toCSSColor('FFFFFF99'),\r\n        toCSSColor('FF99CCFF'),\r\n        toCSSColor('FFFF99CC'),\r\n        toCSSColor('FFCC99FF'),\r\n        toCSSColor('FFFFCC99'),\r\n        toCSSColor('FF3366FF'),\r\n        toCSSColor('FF33CCCC'),\r\n        toCSSColor('FF99CC00'),\r\n        toCSSColor('FFFFCC00'),\r\n        toCSSColor('FFFF9900'),\r\n        toCSSColor('FFFF6600'),\r\n        toCSSColor('FF666699'),\r\n        toCSSColor('FF969696'),\r\n        toCSSColor('FF003366'),\r\n        toCSSColor('FF339966'),\r\n        toCSSColor('FF003300'),\r\n        toCSSColor('FF333300'),\r\n        toCSSColor('FF993300'),\r\n        toCSSColor('FF993366'),\r\n        toCSSColor('FF333399'),\r\n        toCSSColor('FF333333'),\r\n        toCSSColor('FF000000'),\r\n        toCSSColor('FFFFFFFF')\r\n    ];\r\n    function readStyles(zip, theme) {\r\n        var styles = {\r\n            fonts: [],\r\n            numFmts: {},\r\n            fills: [],\r\n            borders: [],\r\n            namedStyles: [],\r\n            inlineStyles: []\r\n        };\r\n        var font = null;\r\n        var fill = null;\r\n        var border = null;\r\n        var xf = null;\r\n        parse(zip, 'xl/styles.xml', {\r\n            enter: function (tag, attrs, closed) {\r\n                if (this.is(SEL_NUM_FMT)) {\r\n                    styles.numFmts[attrs.numFmtId] = attrs;\r\n                } else if (this.is(SEL_FONT)) {\r\n                    styles.fonts.push(font = {});\r\n                } else if (font) {\r\n                    if (tag == 'sz') {\r\n                        font.size = parseFloat(attrs.val);\r\n                    } else if (tag == 'name') {\r\n                        font.name = attrs.val;\r\n                    } else if (tag == 'b') {\r\n                        font.bold = bool(attrs.val, true);\r\n                    } else if (tag == 'i') {\r\n                        font.italic = bool(attrs.val, true);\r\n                    }\r\n                } else if (this.is(SEL_FILL)) {\r\n                    styles.fills.push(fill = {});\r\n                } else if (fill) {\r\n                    if (tag == 'patternFill') {\r\n                        fill.type = attrs.patternType;\r\n                    } else if (tag == 'fgColor' && fill.type === 'solid') {\r\n                        fill.color = getColor(attrs);\r\n                    } else if (tag == 'bgColor' && fill.type !== 'solid') {\r\n                        fill.color = getColor(attrs);\r\n                    }\r\n                } else if (this.is(SEL_BORDER)) {\r\n                    styles.borders.push(border = {});\r\n                } else if (border) {\r\n                    if (/^(?:left|top|right|bottom)$/.test(tag) && attrs.style) {\r\n                        border[tag] = { style: attrs.style };\r\n                    }\r\n                    if (tag == 'color') {\r\n                        var side = this.stack[this.stack.length - 2].$tag;\r\n                        border[side].color = getColor(attrs);\r\n                    }\r\n                } else if (this.is(SEL_NAMED_STYLE)) {\r\n                    xf = getXf(attrs);\r\n                    styles.namedStyles.push(xf);\r\n                    if (closed) {\r\n                        xf = null;\r\n                    }\r\n                } else if (this.is(SEL_INLINE_STYLE)) {\r\n                    xf = getXf(attrs);\r\n                    styles.inlineStyles.push(xf);\r\n                    if (closed) {\r\n                        xf = null;\r\n                    }\r\n                } else if (xf) {\r\n                    if (tag == 'alignment') {\r\n                        if (/^(?:left|center|right|justify)$/.test(attrs.horizontal)) {\r\n                            xf.textAlign = attrs.horizontal;\r\n                        }\r\n                        if (/^(?:top|center|bottom)$/.test(attrs.vertical)) {\r\n                            xf.verticalAlign = attrs.vertical;\r\n                        }\r\n                        if (attrs.wrapText != null) {\r\n                            xf.wrapText = bool(attrs.wrapText);\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            leave: function (tag) {\r\n                if (this.is(SEL_FONT)) {\r\n                    font = null;\r\n                } else if (this.is(SEL_FILL)) {\r\n                    fill = null;\r\n                } else if (this.is(SEL_BORDER)) {\r\n                    border = null;\r\n                } else if (tag == 'xf') {\r\n                    xf = null;\r\n                }\r\n            }\r\n        });\r\n        function getXf(attrs) {\r\n            var xf = {\r\n                borderId: integer(attrs.borderId),\r\n                fillId: integer(attrs.fillId),\r\n                fontId: integer(attrs.fontId),\r\n                numFmtId: integer(attrs.numFmtId),\r\n                pivotButton: bool(attrs.pivotButton),\r\n                quotePrefix: bool(attrs.quotePrefix),\r\n                xfId: integer(attrs.xfId)\r\n            };\r\n            addBool('applyAlignment');\r\n            addBool('applyBorder');\r\n            addBool('applyFill');\r\n            addBool('applyFont');\r\n            addBool('applyNumberFormat');\r\n            addBool('applyProtection');\r\n            function addBool(name) {\r\n                if (attrs[name] != null) {\r\n                    xf[name] = bool(attrs[name]);\r\n                }\r\n            }\r\n            return xf;\r\n        }\r\n        function getColor(attrs) {\r\n            if (attrs.rgb) {\r\n                return toCSSColor(attrs.rgb);\r\n            } else if (attrs.indexed) {\r\n                return INDEXED_COLORS[integer(attrs.indexed)];\r\n            } else if (attrs.theme) {\r\n                var themeColor = theme.colorScheme[integer(attrs.theme)];\r\n                if (!themeColor) {\r\n                    return INDEXED_COLORS[0];\r\n                }\r\n                var color = kendo.parseColor(themeColor);\r\n                if (attrs.tint) {\r\n                    color = color.toHSL();\r\n                    var tint = parseFloat(attrs.tint);\r\n                    if (tint < 0) {\r\n                        color.l = color.l * (1 + tint);\r\n                    } else {\r\n                        color.l = color.l * (1 - tint) + (100 - 100 * (1 - tint));\r\n                    }\r\n                }\r\n                return color.toCssRgba();\r\n            }\r\n        }\r\n        return styles;\r\n    }\r\n    var SEL_SCHEME_RGBCLR = [\r\n        'a:clrScheme',\r\n        '*',\r\n        'a:srgbClr'\r\n    ];\r\n    var SEL_SCHEME_SYSCLR = [\r\n        'a:clrScheme',\r\n        '*',\r\n        'a:sysClr'\r\n    ];\r\n    function readTheme(zip, rel) {\r\n        var scheme = [];\r\n        var theme = { colorScheme: scheme };\r\n        var file = xl(rel);\r\n        if (zip.files[file]) {\r\n            parse(zip, file, {\r\n                enter: function (tag, attrs) {\r\n                    if (this.is(SEL_SCHEME_SYSCLR)) {\r\n                        scheme.push(toCSSColor(attrs.val == 'window' ? 'FFFFFFFF' : 'FF000000'));\r\n                    } else if (this.is(SEL_SCHEME_RGBCLR)) {\r\n                        scheme.push(toCSSColor('FF' + attrs.val));\r\n                    }\r\n                }\r\n            });\r\n            if (scheme.length > 3) {\r\n                swap(scheme, 0, 1);\r\n                swap(scheme, 2, 3);\r\n            }\r\n        }\r\n        function swap(arr, a, b) {\r\n            var tmp = arr[a];\r\n            arr[a] = arr[b];\r\n            arr[b] = tmp;\r\n        }\r\n        return theme;\r\n    }\r\n    function integer(val) {\r\n        return val == null ? null : parseInt(val, 10);\r\n    }\r\n    function bool(val, def) {\r\n        if (val == null) {\r\n            return def;\r\n        }\r\n        return val == 'true' || val === true || val == 1;\r\n    }\r\n    function toCSSColor(rgb) {\r\n        var m = /^([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(rgb);\r\n        return 'rgba(' + parseInt(m[2], 16) + ', ' + parseInt(m[3], 16) + ', ' + parseInt(m[4], 16) + ', ' + parseInt(m[1], 16) / 255 + ')';\r\n    }\r\n    kendo.spreadsheet.readExcel = readExcel;\r\n    kendo.spreadsheet._readSheet = readSheet;\r\n    kendo.spreadsheet._readStrings = readStrings;\r\n    kendo.spreadsheet._readStyles = readStyles;\r\n    kendo.spreadsheet._readTheme = readTheme;\r\n    kendo.spreadsheet._readWorkbook = readWorkbook;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/workbook', [\r\n        'kendo.core',\r\n        'spreadsheet/runtime',\r\n        'spreadsheet/references',\r\n        'spreadsheet/excel-reader'\r\n    ], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var $ = kendo.jQuery;\r\n        var Workbook = kendo.Observable.extend({\r\n            init: function (options, view) {\r\n                kendo.Observable.fn.init.call(this);\r\n                this.options = options;\r\n                this._view = view;\r\n                this._sheets = [];\r\n                this._sheetsSearchCache = {};\r\n                this._sheet = this.insertSheet({\r\n                    rows: this.options.rows,\r\n                    columns: this.options.columns,\r\n                    rowHeight: this.options.rowHeight,\r\n                    columnWidth: this.options.columnWidth,\r\n                    headerHeight: this.options.headerHeight,\r\n                    headerWidth: this.options.headerWidth,\r\n                    dataSource: this.options.dataSource\r\n                });\r\n                this.undoRedoStack = new kendo.util.UndoRedoStack();\r\n                this.undoRedoStack.bind([\r\n                    'undo',\r\n                    'redo'\r\n                ], this._onUndoRedo.bind(this));\r\n                this._context = new kendo.spreadsheet.FormulaContext(this);\r\n                this._validationContext = new kendo.spreadsheet.ValidationFormulaContext(this);\r\n                this._names = Object.create(null);\r\n                this.fromJSON(this.options);\r\n            },\r\n            clipboard: function () {\r\n                if (!this._clipboard) {\r\n                    this._clipboard = new kendo.spreadsheet.Clipboard(this);\r\n                }\r\n                return this._clipboard;\r\n            },\r\n            destroy: function () {\r\n                this.unbind();\r\n                if (this._clipboard) {\r\n                    this._clipboard.destroy();\r\n                }\r\n            },\r\n            events: [\r\n                'change',\r\n                'excelImport',\r\n                'excelExport'\r\n            ],\r\n            _sheetChange: function (e) {\r\n                this.trigger('change', e);\r\n            },\r\n            _sheetCommandRequest: function (e) {\r\n                this.trigger('commandRequest', e);\r\n            },\r\n            _inputForRef: function (ref) {\r\n                return new kendo.spreadsheet.Range(ref, this._sheet).input();\r\n            },\r\n            _onUndoRedo: function (e) {\r\n                e.command.range().select();\r\n            },\r\n            execute: function (options) {\r\n                var commandOptions = $.extend({ workbook: this }, options.options);\r\n                var command = new kendo.spreadsheet[options.command](commandOptions);\r\n                var sheet = this.activeSheet();\r\n                if (commandOptions.origin) {\r\n                    command.origin(commandOptions.origin);\r\n                }\r\n                if (commandOptions.operatingRange) {\r\n                    command.range(commandOptions.operatingRange);\r\n                } else if (commandOptions.editActiveCell) {\r\n                    command.range(sheet.activeCellSelection());\r\n                } else {\r\n                    command.range(sheet.selection());\r\n                }\r\n                var result = command.exec();\r\n                if (!result || result.reason !== 'error') {\r\n                    this.undoRedoStack.push(command);\r\n                }\r\n                return result;\r\n            },\r\n            resetFormulas: function () {\r\n                this._sheets.forEach(function (sheet) {\r\n                    sheet.resetFormulas();\r\n                });\r\n            },\r\n            resetValidations: function () {\r\n                this._sheets.forEach(function (sheet) {\r\n                    sheet.resetValidations();\r\n                });\r\n            },\r\n            refresh: function (reason) {\r\n                if (reason.recalc) {\r\n                    this.resetFormulas();\r\n                    this.resetValidations();\r\n                    this._sheet.recalc(this._context);\r\n                    this._sheet.revalidate(this._validationContext);\r\n                }\r\n            },\r\n            activeSheet: function (sheet) {\r\n                if (sheet === undefined) {\r\n                    return this._sheet;\r\n                }\r\n                if (!this.sheetByName(sheet.name())) {\r\n                    return;\r\n                }\r\n                this._sheet = sheet;\r\n                sheet.triggerChange(kendo.spreadsheet.ALL_REASONS);\r\n            },\r\n            moveSheetToIndex: function (sheet, toIndex) {\r\n                var fromIndex = this.sheetIndex(sheet);\r\n                var sheets = this._sheets;\r\n                if (fromIndex === -1) {\r\n                    return;\r\n                }\r\n                this._sheetsSearchCache = {};\r\n                sheets.splice(toIndex, 0, sheets.splice(fromIndex, 1)[0]);\r\n                this.trigger('change', { sheetSelection: true });\r\n            },\r\n            insertSheet: function (options) {\r\n                options = options || {};\r\n                var that = this;\r\n                var insertIndex = typeof options.index === 'number' ? options.index : that._sheets.length;\r\n                var sheetName;\r\n                var sheets = that._sheets;\r\n                var getUniqueSheetName = function (sheetNameSuffix) {\r\n                    sheetNameSuffix = sheetNameSuffix ? sheetNameSuffix : 1;\r\n                    var name = 'Sheet' + sheetNameSuffix;\r\n                    if (!that.sheetByName(name)) {\r\n                        return name;\r\n                    }\r\n                    return getUniqueSheetName(sheetNameSuffix + 1);\r\n                };\r\n                if (options.name && that.sheetByName(options.name)) {\r\n                    return;\r\n                }\r\n                this._sheetsSearchCache = {};\r\n                sheetName = options.name || getUniqueSheetName();\r\n                var sheet = new kendo.spreadsheet.Sheet(options.rows || this.options.rows, options.columns || this.options.columns, options.rowHeight || this.options.rowHeight, options.columnWidth || this.options.columnWidth, options.headerHeight || this.options.headerHeight, options.headerWidth || this.options.headerWidth);\r\n                sheet._workbook = this;\r\n                sheet._name(sheetName);\r\n                sheet.bind('change', this._sheetChange.bind(this));\r\n                sheet.bind('commandRequest', this._sheetCommandRequest.bind(this));\r\n                sheets.splice(insertIndex, 0, sheet);\r\n                if (options.data) {\r\n                    sheet.fromJSON(options.data);\r\n                }\r\n                if (options.dataSource) {\r\n                    sheet.setDataSource(options.dataSource);\r\n                }\r\n                this.trigger('change', { sheetSelection: true });\r\n                return sheet;\r\n            },\r\n            sheets: function () {\r\n                return this._sheets.slice();\r\n            },\r\n            sheetByName: function (sheetName) {\r\n                return this._sheets[this.sheetIndex(sheetName)];\r\n            },\r\n            sheetByIndex: function (index) {\r\n                return this._sheets[index];\r\n            },\r\n            sheetIndex: function (sheet) {\r\n                var sheets = this._sheets;\r\n                var sheetName = (typeof sheet == 'string' ? sheet : sheet.name()).toLowerCase();\r\n                var idx = this._sheetsSearchCache[sheetName];\r\n                if (idx >= 0) {\r\n                    return idx;\r\n                }\r\n                for (idx = 0; idx < sheets.length; idx++) {\r\n                    var name = sheets[idx].name().toLowerCase();\r\n                    this._sheetsSearchCache[name] = idx;\r\n                    if (name === sheetName) {\r\n                        return idx;\r\n                    }\r\n                }\r\n                return -1;\r\n            },\r\n            renameSheet: function (sheet, newSheetName) {\r\n                var oldSheetName = sheet.name();\r\n                if (!newSheetName || oldSheetName === newSheetName) {\r\n                    return;\r\n                }\r\n                sheet = this.sheetByName(oldSheetName);\r\n                if (!sheet) {\r\n                    return;\r\n                }\r\n                this._sheetsSearchCache = {};\r\n                this._sheets.forEach(function (sheet) {\r\n                    sheet._forFormulas(function (formula) {\r\n                        formula.renameSheet(oldSheetName, newSheetName);\r\n                    });\r\n                });\r\n                sheet._name(newSheetName);\r\n                this.trigger('change', { sheetSelection: true });\r\n                return sheet;\r\n            },\r\n            removeSheet: function (sheet) {\r\n                var that = this;\r\n                var sheets = that._sheets;\r\n                var name = sheet.name();\r\n                var index = that.sheetIndex(sheet);\r\n                if (sheets.length === 1) {\r\n                    return;\r\n                }\r\n                this._sheetsSearchCache = {};\r\n                if (index > -1) {\r\n                    sheet.unbind();\r\n                    sheets.splice(index, 1);\r\n                    if (that.activeSheet().name() === name) {\r\n                        var newSheet = sheets[index === sheets.length ? index - 1 : index];\r\n                        that.activeSheet(newSheet);\r\n                    } else {\r\n                        this.trigger('change', {\r\n                            recalc: true,\r\n                            sheetSelection: true\r\n                        });\r\n                    }\r\n                }\r\n            },\r\n            _clearSheets: function () {\r\n                for (var i = 0; i < this._sheets.length; i++) {\r\n                    this._sheets[i].unbind();\r\n                }\r\n                this._sheets = [];\r\n                this._sheetsSearchCache = {};\r\n            },\r\n            fromJSON: function (json) {\r\n                if (json.sheets) {\r\n                    this._clearSheets();\r\n                    for (var idx = 0; idx < json.sheets.length; idx++) {\r\n                        var data = json.sheets[idx];\r\n                        var args = sheetParamsFromJSON(data, this.options);\r\n                        var sheet = this.insertSheet({\r\n                            rows: args.rowCount,\r\n                            columns: args.columnCount,\r\n                            rowHeight: args.rowHeight,\r\n                            columnWidth: args.columnWidth,\r\n                            headerHeight: args.headerHeight,\r\n                            headerWidth: args.headerWidth,\r\n                            data: data\r\n                        });\r\n                        if (data.dataSource) {\r\n                            sheet.setDataSource(data.dataSource);\r\n                        }\r\n                    }\r\n                }\r\n                if (json.activeSheet) {\r\n                    this.activeSheet(this.sheetByName(json.activeSheet));\r\n                } else {\r\n                    this.activeSheet(this._sheets[0]);\r\n                }\r\n            },\r\n            toJSON: function () {\r\n                this.resetFormulas();\r\n                this.resetValidations();\r\n                return {\r\n                    activeSheet: this.activeSheet().name(),\r\n                    sheets: this._sheets.map(function (sheet) {\r\n                        sheet.recalc(this._context);\r\n                        return sheet.toJSON();\r\n                    }, this)\r\n                };\r\n            },\r\n            fromFile: function (file) {\r\n                var deferred = new $.Deferred();\r\n                var promise = deferred.promise();\r\n                var args = {\r\n                    file: file,\r\n                    promise: promise\r\n                };\r\n                if (file && !this.trigger('excelImport', args)) {\r\n                    this._clearSheets();\r\n                    kendo.spreadsheet.readExcel(file, this, deferred);\r\n                } else {\r\n                    deferred.reject();\r\n                }\r\n                return promise;\r\n            },\r\n            saveAsExcel: function (options) {\r\n                options = $.extend({}, this.options.excel, options);\r\n                var data = this.toJSON();\r\n                if (!this.trigger('excelExport', { workbook: data })) {\r\n                    var workbook = new kendo.ooxml.Workbook(data);\r\n                    kendo.saveAs({\r\n                        dataURI: workbook.toDataURL(),\r\n                        fileName: data.fileName || options.fileName,\r\n                        proxyURL: options.proxyURL,\r\n                        forceProxy: options.forceProxy\r\n                    });\r\n                }\r\n            },\r\n            draw: function (options, callback) {\r\n                if (typeof options == 'function' && !callback) {\r\n                    callback = options;\r\n                    options = {};\r\n                }\r\n                var parts = [], sheets = this._sheets;\r\n                (function loop(i) {\r\n                    if (i < sheets.length) {\r\n                        sheets[i].draw(kendo.spreadsheet.SHEETREF, options, function (group) {\r\n                            parts.push(group);\r\n                            loop(i + 1);\r\n                        });\r\n                    } else {\r\n                        var group = parts[0];\r\n                        for (i = 1; i < parts.length; ++i) {\r\n                            group.children = group.children.concat(parts[i].children);\r\n                        }\r\n                        callback(group);\r\n                    }\r\n                }(0));\r\n            },\r\n            defineName: function (name, value, hidden) {\r\n                this._names[name] = {\r\n                    value: value,\r\n                    hidden: hidden\r\n                };\r\n            },\r\n            undefineName: function (name) {\r\n                delete this._names[name];\r\n            },\r\n            nameValue: function (name) {\r\n                if (name in this._names) {\r\n                    return this._names[name].value;\r\n                }\r\n                return null;\r\n            },\r\n            adjustNames: function (affectedSheet, forRow, start, delta) {\r\n                affectedSheet = affectedSheet.toLowerCase();\r\n                Object.keys(this._names).forEach(function (name) {\r\n                    var ref = this.nameValue(name);\r\n                    if (ref instanceof kendo.spreadsheet.Ref && ref.sheet.toLowerCase() == affectedSheet) {\r\n                        ref = ref.adjust(null, null, null, null, forRow, start, delta);\r\n                        this.defineName(name, ref);\r\n                    }\r\n                }, this);\r\n            },\r\n            options: {}\r\n        });\r\n        function sheetParamsFromJSON(data, options) {\r\n            function or(a, b, c) {\r\n                return a !== undefined ? a : b !== undefined ? b : c;\r\n            }\r\n            var rowCount = or(data.rowCount, options.rows, 200), columnCount = or(data.columnCount, options.columns, 50), rowHeight = or(data.rowHeight, options.rowHeight, 20), columnWidth = or(data.columnWidth, options.columnWidth, 64), headerHeight = or(data.headerHeight, options.headerHeight, 20), headerWidth = or(data.headerWidth, options.headerWidth, 32);\r\n            if (data.rows !== undefined) {\r\n                for (var i = 0; i < data.rows.length; ++i) {\r\n                    var row = data.rows[i];\r\n                    var ri = or(row.index, i);\r\n                    if (ri >= rowCount) {\r\n                        rowCount = ri + 1;\r\n                    }\r\n                    if (row.cells) {\r\n                        for (var j = 0; j < row.cells.length; ++j) {\r\n                            var cell = row.cells[j];\r\n                            var ci = or(cell.index, j);\r\n                            if (ci >= columnCount) {\r\n                                columnCount = ci + 1;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return {\r\n                rowCount: rowCount,\r\n                columnCount: columnCount,\r\n                rowHeight: rowHeight,\r\n                columnWidth: columnWidth,\r\n                headerHeight: headerHeight,\r\n                headerWidth: headerWidth\r\n            };\r\n        }\r\n        kendo.spreadsheet.Workbook = Workbook;\r\n        if (kendo.PDFMixin) {\r\n            kendo.PDFMixin.extend(Workbook.prototype);\r\n            Workbook.prototype.saveAsPDF = function (options) {\r\n                var progress = new $.Deferred();\r\n                var promise = progress.promise();\r\n                var args = { promise: promise };\r\n                if (this.trigger('pdfExport', args)) {\r\n                    return;\r\n                }\r\n                this._drawPDF(options, progress).then(function (root) {\r\n                    return kendo.drawing.exportPDF(root);\r\n                }).done(function (dataURI) {\r\n                    kendo.saveAs({\r\n                        dataURI: dataURI,\r\n                        fileName: options.fileName,\r\n                        proxyURL: options.proxyURL,\r\n                        forceProxy: options.forceProxy,\r\n                        proxyTarget: options.proxyTarget\r\n                    });\r\n                    progress.resolve();\r\n                }).fail(function (err) {\r\n                    progress.reject(err);\r\n                });\r\n                return promise;\r\n            };\r\n            Workbook.prototype._drawPDF = function (options) {\r\n                var result = new $.Deferred();\r\n                var callback = function (group) {\r\n                    result.resolve(group);\r\n                };\r\n                switch (options.area) {\r\n                case 'workbook':\r\n                    options.workbook.draw(options, callback);\r\n                    break;\r\n                case 'sheet':\r\n                    options.workbook.activeSheet().draw(options, callback);\r\n                    break;\r\n                case 'selection':\r\n                    options.workbook.activeSheet().selection().draw(options, callback);\r\n                    break;\r\n                }\r\n                return result.promise();\r\n            };\r\n        }\r\n    }(kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/formulacontext', ['kendo.core'], f);\r\n}(function () {\r\n    if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n        return;\r\n    }\r\n    var spreadsheet = kendo.spreadsheet;\r\n    var CellRef = spreadsheet.CellRef;\r\n    var RangeRef = spreadsheet.RangeRef;\r\n    var UnionRef = spreadsheet.UnionRef;\r\n    var NameRef = spreadsheet.NameRef;\r\n    var Ref = spreadsheet.Ref;\r\n    var FormulaContext = kendo.Class.extend({\r\n        init: function (workbook) {\r\n            this.workbook = workbook;\r\n        },\r\n        getRefCells: function (ref, hiddenInfo) {\r\n            var sheet, formula, value, i;\r\n            if (ref instanceof CellRef) {\r\n                sheet = this.workbook.sheetByName(ref.sheet);\r\n                if (!sheet || !ref.valid()) {\r\n                    return [{ value: new kendo.spreadsheet.calc.runtime.CalcError('REF') }];\r\n                }\r\n                formula = sheet.formula(ref);\r\n                value = sheet.range(ref.row, ref.col).value();\r\n                if (formula != null || value != null) {\r\n                    return [{\r\n                            formula: formula,\r\n                            value: value,\r\n                            row: ref.row,\r\n                            col: ref.col,\r\n                            sheet: ref.sheet,\r\n                            hidden: hiddenInfo ? sheet.columnWidth(ref.col) === 0 || sheet.rowHeight(ref.row) === 0 : false\r\n                        }];\r\n                } else {\r\n                    return [];\r\n                }\r\n            }\r\n            if (ref instanceof RangeRef) {\r\n                i = this.workbook.sheetIndex(ref.sheet);\r\n                var states = [], n = i;\r\n                if (ref.endSheet) {\r\n                    n = this.workbook.sheetIndex(ref.endSheet);\r\n                    if (i > n) {\r\n                        var tmp = i;\r\n                        i = n;\r\n                        n = tmp;\r\n                    }\r\n                }\r\n                if (i < 0 || n < 0 || !ref.valid()) {\r\n                    return [{ value: new kendo.spreadsheet.calc.runtime.CalcError('REF') }];\r\n                }\r\n                while (i <= n) {\r\n                    sheet = this.workbook.sheetByIndex(i++);\r\n                    var tl = sheet._grid.normalize(ref.topLeft);\r\n                    var br = sheet._grid.normalize(ref.bottomRight);\r\n                    var startCellIndex = sheet._grid.cellRefIndex(tl);\r\n                    var endCellIndex = sheet._grid.cellRefIndex(br);\r\n                    var values = sheet._properties.iterator('value', startCellIndex, endCellIndex);\r\n                    for (var col = tl.col; col <= br.col; ++col) {\r\n                        for (var row = tl.row; row <= br.row; ++row) {\r\n                            var index = sheet._grid.index(row, col);\r\n                            formula = sheet._properties.get('formula', index);\r\n                            value = values.at(index);\r\n                            if (formula != null || value != null) {\r\n                                states.push({\r\n                                    formula: formula,\r\n                                    value: value,\r\n                                    row: row,\r\n                                    col: col,\r\n                                    sheet: sheet.name(),\r\n                                    hidden: hiddenInfo ? sheet.columnWidth(col) === 0 || sheet.rowHeight(row) === 0 : false\r\n                                });\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                return states;\r\n            }\r\n            if (ref instanceof UnionRef) {\r\n                var a = [];\r\n                for (i = 0; i < ref.refs.length; ++i) {\r\n                    a = a.concat(this.getRefCells(ref.refs[i], hiddenInfo));\r\n                }\r\n                return a;\r\n            }\r\n            if (ref instanceof NameRef) {\r\n                var val = this.workbook.nameValue(ref.name);\r\n                if (val instanceof Ref) {\r\n                    return this.getRefCells(val, hiddenInfo);\r\n                }\r\n                return [{ value: new kendo.spreadsheet.calc.runtime.CalcError('NAME') }];\r\n            }\r\n            return [];\r\n        },\r\n        getData: function (ref) {\r\n            var single = ref instanceof CellRef;\r\n            if (ref instanceof NameRef) {\r\n                single = this.workbook.nameValue(ref) instanceof CellRef;\r\n            }\r\n            var data = this.getRefCells(ref).map(function (cell) {\r\n                return cell.value;\r\n            });\r\n            return single ? data[0] : data;\r\n        },\r\n        onFormula: function (f) {\r\n            var sheet = this.workbook.sheetByName(f.sheet);\r\n            var row = f.row, col = f.col, value = f.value;\r\n            var currentFormula = sheet.formula({\r\n                row: row,\r\n                col: col\r\n            });\r\n            if (currentFormula !== f) {\r\n                return false;\r\n            }\r\n            if (value instanceof kendo.spreadsheet.calc.runtime.Matrix) {\r\n                value.each(function (value, r, c) {\r\n                    sheet._value(row + r, col + c, value);\r\n                });\r\n            } else {\r\n                sheet._value(row, col, value);\r\n            }\r\n            clearTimeout(sheet._formulaContextRefresh);\r\n            sheet._formulaContextRefresh = setTimeout(function () {\r\n                sheet.batch(function () {\r\n                }, { layout: true });\r\n            }, 50);\r\n            return true;\r\n        }\r\n    });\r\n    var ValidationFormulaContext = FormulaContext.extend({\r\n        onFormula: function () {\r\n            return true;\r\n        }\r\n    });\r\n    spreadsheet.FormulaContext = FormulaContext;\r\n    spreadsheet.ValidationFormulaContext = ValidationFormulaContext;\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/controller', ['kendo.core'], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        'use strict';\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var $ = kendo.jQuery;\r\n        var alphaNumRegExp = /:alphanum$/;\r\n        var ACTIONS = {\r\n            'up': 'up',\r\n            'down': 'down',\r\n            'left': 'left',\r\n            'right': 'right',\r\n            'home': 'first-col',\r\n            'ctrl+left': 'first-col',\r\n            'end': 'last-col',\r\n            'ctrl+right': 'last-col',\r\n            'ctrl+up': 'first-row',\r\n            'ctrl+down': 'last-row',\r\n            'ctrl+home': 'first',\r\n            'ctrl+end': 'last',\r\n            'pageup': 'prev-page',\r\n            'pagedown': 'next-page'\r\n        };\r\n        var ENTRY_ACTIONS = {\r\n            'tab': 'next',\r\n            'shift+tab': 'previous',\r\n            'enter': 'lower',\r\n            'shift+enter': 'upper',\r\n            'delete': 'clearContents',\r\n            'backspace': 'clearContents',\r\n            'shift+:alphanum': 'edit',\r\n            ':alphanum': 'edit',\r\n            'ctrl+:alphanum': 'ctrl',\r\n            'alt+ctrl+:alphanum': 'edit',\r\n            ':edit': 'edit'\r\n        };\r\n        var CONTAINER_EVENTS = {\r\n            'wheel': 'onWheel',\r\n            '*+mousedown': 'onMouseDown',\r\n            'contextmenu': 'onContextMenu',\r\n            '*+mousedrag': 'onMouseDrag',\r\n            '*+mouseup': 'onMouseUp',\r\n            '*+dblclick': 'onDblClick',\r\n            'mousemove': 'onMouseMove'\r\n        };\r\n        var CLIPBOARD_EVENTS = {\r\n            '*+pageup': 'onPageUp',\r\n            '*+pagedown': 'onPageDown',\r\n            'mouseup': 'onMouseUp',\r\n            '*+cut': 'onCut',\r\n            '*+paste': 'onPaste',\r\n            '*+copy': 'onCopy'\r\n        };\r\n        var EDITOR_EVENTS = {\r\n            'esc': 'onEditorEsc',\r\n            'enter': 'onEditorBlur',\r\n            'alt+enter': 'insertNewline',\r\n            'shift+enter': 'onEditorBlur',\r\n            'tab': 'onEditorBlur',\r\n            'shift+tab': 'onEditorBlur'\r\n        };\r\n        var FORMULABAR_EVENTS = $.extend({ focus: 'onEditorBarFocus' }, EDITOR_EVENTS);\r\n        var FORMULAINPUT_EVENTS = $.extend({ focus: 'onEditorCellFocus' }, EDITOR_EVENTS);\r\n        var SELECTION_MODES = {\r\n            cell: 'range',\r\n            rowheader: 'row',\r\n            columnheader: 'column',\r\n            topcorner: 'sheet',\r\n            autofill: 'autofill'\r\n        };\r\n        function toActionSelector(selectors) {\r\n            return selectors.map(function (action) {\r\n                return '[data-action=\"' + action + '\"]';\r\n            }).join(',');\r\n        }\r\n        var COMPOSITE_UNAVAILABLE_ACTION_SELECTORS = toActionSelector([\r\n            'cut',\r\n            'copy',\r\n            'paste',\r\n            'insert-left',\r\n            'insert-right',\r\n            'insert-above',\r\n            'insert-below'\r\n        ]);\r\n        var UNHIDE_ACTION_SELECTORS = toActionSelector([\r\n            'unhide-row',\r\n            'unhide-column'\r\n        ]);\r\n        var ACTION_KEYS = [];\r\n        var SHIFT_ACTION_KEYS = [];\r\n        var ENTRY_ACTION_KEYS = [];\r\n        for (var key in ACTIONS) {\r\n            ACTION_KEYS.push(key);\r\n            SHIFT_ACTION_KEYS.push('shift+' + key);\r\n        }\r\n        for (key in ENTRY_ACTIONS) {\r\n            ENTRY_ACTION_KEYS.push(key);\r\n        }\r\n        CLIPBOARD_EVENTS[ACTION_KEYS] = 'onAction';\r\n        CLIPBOARD_EVENTS[SHIFT_ACTION_KEYS] = 'onShiftAction';\r\n        CLIPBOARD_EVENTS[ENTRY_ACTION_KEYS] = 'onEntryAction';\r\n        FORMULAINPUT_EVENTS[ACTION_KEYS] = 'onEditorAction';\r\n        FORMULAINPUT_EVENTS[SHIFT_ACTION_KEYS] = 'onEditorShiftAction';\r\n        var Controller = kendo.Class.extend({\r\n            init: function (view, workbook) {\r\n                this.view = view;\r\n                this.workbook(workbook);\r\n                this.container = $(view.container);\r\n                this.clipboardElement = $(view.clipboard);\r\n                this.cellContextMenu = view.cellContextMenu;\r\n                this.rowHeaderContextMenu = view.rowHeaderContextMenu;\r\n                this.colHeaderContextMenu = view.colHeaderContextMenu;\r\n                this.scroller = view.scroller;\r\n                this.tabstrip = view.tabstrip;\r\n                this.sheetsbar = view.sheetsbar;\r\n                this.editor = view.editor;\r\n                this.editor.bind('change', this.onEditorChange.bind(this));\r\n                this.editor.bind('activate', this.onEditorActivate.bind(this));\r\n                this.editor.bind('deactivate', this.onEditorDeactivate.bind(this));\r\n                this.editor.bind('update', this.onEditorUpdate.bind(this));\r\n                $(view.scroller).on('scroll', this.onScroll.bind(this));\r\n                this.listener = new kendo.spreadsheet.EventListener(this.container, this, CONTAINER_EVENTS);\r\n                this._enableEditorEvents();\r\n                if (this.sheetsbar) {\r\n                    this.sheetsbar.bind('select', this.onSheetBarSelect.bind(this));\r\n                    this.sheetsbar.bind('reorder', this.onSheetBarReorder.bind(this));\r\n                    this.sheetsbar.bind('rename', this.onSheetBarRename.bind(this));\r\n                    this.sheetsbar.bind('remove', this.onSheetBarRemove.bind(this));\r\n                }\r\n                this.cellContextMenu.bind('select', this.onContextMenuSelect.bind(this));\r\n                this.rowHeaderContextMenu.bind('select', this.onContextMenuSelect.bind(this));\r\n                this.colHeaderContextMenu.bind('select', this.onContextMenuSelect.bind(this));\r\n                this.cellContextMenu.element.add(this.rowHeaderContextMenu.element).add(this.colHeaderContextMenu.element).on('contextmenu', false);\r\n                if (this.tabstrip) {\r\n                    this.tabstrip.bind('action', this.onCommandRequest.bind(this));\r\n                    this.tabstrip.bind('dialog', this.onDialogRequest.bind(this));\r\n                }\r\n            },\r\n            _enableEditorEvents: function (enable) {\r\n                if (enable === undefined || enable) {\r\n                    this.keyListener = new kendo.spreadsheet.EventListener(this.clipboardElement, this, CLIPBOARD_EVENTS);\r\n                    this.barKeyListener = new kendo.spreadsheet.EventListener(this.editor.barElement(), this, FORMULABAR_EVENTS);\r\n                    this.inputKeyListener = new kendo.spreadsheet.EventListener(this.editor.cellElement(), this, FORMULAINPUT_EVENTS);\r\n                } else {\r\n                    this.keyListener.destroy();\r\n                    this.barKeyListener.destroy();\r\n                    this.inputKeyListener.destroy();\r\n                }\r\n            },\r\n            _execute: function (options) {\r\n                var result = this._workbook.execute(options);\r\n                if (options.command === 'EditCommand' && !result) {\r\n                    this._workbook.trigger('change', { editorClose: true });\r\n                }\r\n                if (result) {\r\n                    var closeHandler;\r\n                    if (this.view.editor.isActive()) {\r\n                        this.enableEditor(false);\r\n                        closeHandler = this.enableEditor.bind(this, true, true);\r\n                    }\r\n                    if (result.reason === 'error') {\r\n                        this._lastCommandRequest = null;\r\n                        this.view.showError(result, closeHandler);\r\n                    } else {\r\n                        this.view.openDialog(result.reason, { close: closeHandler });\r\n                    }\r\n                }\r\n                return result;\r\n            },\r\n            _activeTooltip: function () {\r\n                return this._workbook.activeSheet().activeCell().simplify().toString();\r\n            },\r\n            onContextMenuSelect: function (e) {\r\n                var action = $(e.item).data('action');\r\n                var command;\r\n                switch (action) {\r\n                case 'cut':\r\n                    command = {\r\n                        command: 'ToolbarCutCommand',\r\n                        options: { workbook: this._workbook }\r\n                    };\r\n                    break;\r\n                case 'copy':\r\n                    command = {\r\n                        command: 'ToolbarCopyCommand',\r\n                        options: { workbook: this._workbook }\r\n                    };\r\n                    break;\r\n                case 'paste':\r\n                    command = {\r\n                        command: 'ToolbarPasteCommand',\r\n                        options: { workbook: this._workbook }\r\n                    };\r\n                    break;\r\n                case 'unmerge':\r\n                    command = {\r\n                        command: 'MergeCellCommand',\r\n                        options: { value: 'unmerge' }\r\n                    };\r\n                    break;\r\n                case 'merge':\r\n                    this.view.openDialog('merge');\r\n                    break;\r\n                case 'hide-row':\r\n                    command = {\r\n                        command: 'HideLineCommand',\r\n                        options: { axis: 'row' }\r\n                    };\r\n                    break;\r\n                case 'hide-column':\r\n                    command = {\r\n                        command: 'HideLineCommand',\r\n                        options: { axis: 'column' }\r\n                    };\r\n                    break;\r\n                case 'unhide-row':\r\n                    command = {\r\n                        command: 'UnHideLineCommand',\r\n                        options: { axis: 'row' }\r\n                    };\r\n                    break;\r\n                case 'unhide-column':\r\n                    command = {\r\n                        command: 'UnHideLineCommand',\r\n                        options: { axis: 'column' }\r\n                    };\r\n                    break;\r\n                case 'delete-row':\r\n                    command = { command: 'DeleteRowCommand' };\r\n                    break;\r\n                case 'delete-column':\r\n                    command = { command: 'DeleteColumnCommand' };\r\n                    break;\r\n                }\r\n                if (command) {\r\n                    this._execute(command);\r\n                }\r\n            },\r\n            onSheetBarRemove: function (e) {\r\n                var sheet = this._workbook.sheetByName(e.name);\r\n                if (!sheet) {\r\n                    return;\r\n                }\r\n                this._workbook.removeSheet(sheet);\r\n            },\r\n            destroy: function () {\r\n                this.listener.destroy();\r\n                this._enableEditorEvents(false);\r\n                this.keyListener.destroy();\r\n                this.inputKeyListener.destroy();\r\n            },\r\n            onSheetBarSelect: function (e) {\r\n                var sheet;\r\n                var workbook = this._workbook;\r\n                if (e.isAddButton) {\r\n                    sheet = workbook.insertSheet();\r\n                } else {\r\n                    sheet = workbook.sheetByName(e.name);\r\n                }\r\n                if (workbook.activeSheet().name() !== sheet.name()) {\r\n                    workbook.activeSheet(sheet);\r\n                }\r\n            },\r\n            onSheetBarReorder: function (e) {\r\n                var sheet = this._workbook.sheetByIndex(e.oldIndex);\r\n                this._workbook.moveSheetToIndex(sheet, e.newIndex);\r\n                this._workbook.activeSheet(sheet);\r\n            },\r\n            onSheetBarRename: function (e) {\r\n                var sheet = this._workbook.sheetByIndex(e.sheetIndex);\r\n                this._workbook.renameSheet(sheet, e.name);\r\n                this.clipboardElement.focus();\r\n            },\r\n            sheet: function (sheet) {\r\n                this.navigator = sheet.navigator();\r\n                this.axisManager = sheet.axisManager();\r\n            },\r\n            workbook: function (workbook) {\r\n                this._workbook = workbook;\r\n                this.clipboard = workbook.clipboard();\r\n                workbook.bind('commandRequest', this.onCommandRequest.bind(this));\r\n            },\r\n            refresh: function () {\r\n                var editor = this.editor;\r\n                var workbook = this._workbook;\r\n                var sheet = workbook.activeSheet();\r\n                this._viewPortHeight = this.view.scroller.clientHeight;\r\n                this.navigator.height(this._viewPortHeight);\r\n                if (!editor.isActive() && !this.isEditorDisabled) {\r\n                    editor.enable(sheet.selection().enable() !== false);\r\n                    editor.value(workbook._inputForRef(sheet.activeCell()));\r\n                }\r\n            },\r\n            onScroll: function () {\r\n                this.view.render();\r\n            },\r\n            onWheel: function (event) {\r\n                var deltaX = event.originalEvent.deltaX;\r\n                var deltaY = event.originalEvent.deltaY;\r\n                if (event.originalEvent.deltaMode === 1) {\r\n                    deltaX *= 10;\r\n                    deltaY *= 10;\r\n                }\r\n                this.scrollWith(deltaX, deltaY);\r\n                event.preventDefault();\r\n            },\r\n            onAction: function (event, action) {\r\n                this.navigator.moveActiveCell(ACTIONS[action]);\r\n                event.preventDefault();\r\n            },\r\n            onPageUp: function () {\r\n                this.scrollDown(-this._viewPortHeight);\r\n            },\r\n            onPageDown: function () {\r\n                this.scrollDown(this._viewPortHeight);\r\n            },\r\n            onEntryAction: function (event, action) {\r\n                if (event.mod) {\r\n                    var shouldPrevent = true;\r\n                    var key = String.fromCharCode(event.keyCode);\r\n                    switch (key) {\r\n                    case 'A':\r\n                        this.navigator.selectAll();\r\n                        break;\r\n                    case 'Y':\r\n                        this._workbook.undoRedoStack.redo();\r\n                        break;\r\n                    case 'Z':\r\n                        this._workbook.undoRedoStack.undo();\r\n                        break;\r\n                    default:\r\n                        shouldPrevent = false;\r\n                        break;\r\n                    }\r\n                    if (shouldPrevent) {\r\n                        event.preventDefault();\r\n                    }\r\n                } else {\r\n                    var disabled = this._workbook.activeSheet().selection().enable() === false;\r\n                    if (action == 'delete' || action == 'backspace') {\r\n                        if (!disabled) {\r\n                            this._execute({ command: 'ClearContentCommand' });\r\n                        }\r\n                        event.preventDefault();\r\n                    } else if (alphaNumRegExp.test(action) || action === ':edit') {\r\n                        if (disabled) {\r\n                            event.preventDefault();\r\n                            return;\r\n                        }\r\n                        if (action !== ':edit') {\r\n                            this.editor.value('');\r\n                        }\r\n                        this.editor.activate({\r\n                            range: this._workbook.activeSheet()._viewActiveCell(),\r\n                            rect: this.view.activeCellRectangle(),\r\n                            tooltip: this._activeTooltip()\r\n                        }).focus();\r\n                    } else {\r\n                        this.navigator.navigateInSelection(ENTRY_ACTIONS[action]);\r\n                        event.preventDefault();\r\n                    }\r\n                }\r\n            },\r\n            onShiftAction: function (event, action) {\r\n                this.navigator.modifySelection(ACTIONS[action.replace('shift+', '')], this.appendSelection);\r\n                event.preventDefault();\r\n            },\r\n            onMouseMove: function (event) {\r\n                var sheet = this._workbook.activeSheet();\r\n                if (sheet.resizingInProgress() || sheet.selectionInProgress()) {\r\n                    return;\r\n                }\r\n                var object = this.objectAt(event);\r\n                if (object.type === 'columnresizehandle' || object.type === 'rowresizehandle') {\r\n                    sheet.positionResizeHandle(object.ref);\r\n                } else {\r\n                    sheet.removeResizeHandle();\r\n                }\r\n            },\r\n            onMouseDown: function (event) {\r\n                var object = this.objectAt(event);\r\n                if (object.pane) {\r\n                    this.originFrame = object.pane;\r\n                }\r\n                if (this.editor.canInsertRef(false) && object.ref) {\r\n                    this._workbook.activeSheet()._setFormulaSelections(this.editor.highlightedRefs());\r\n                    this.navigator.startSelection(object.ref, this._selectionMode, this.appendSelection, event.shiftKey);\r\n                    event.preventDefault();\r\n                    return;\r\n                } else {\r\n                    this.editor.deactivate();\r\n                    if (this.editor.isActive()) {\r\n                        event.preventDefault();\r\n                        return;\r\n                    }\r\n                }\r\n                var sheet = this._workbook.activeSheet();\r\n                if (object.type === 'columnresizehandle' || object.type === 'rowresizehandle') {\r\n                    sheet.startResizing({\r\n                        x: object.x,\r\n                        y: object.y\r\n                    });\r\n                    event.preventDefault();\r\n                    return;\r\n                }\r\n                if (object.type === 'filtericon') {\r\n                    this.openFilterMenu(event);\r\n                    event.preventDefault();\r\n                    return;\r\n                }\r\n                this._selectionMode = SELECTION_MODES[object.type];\r\n                this.appendSelection = event.mod;\r\n                this.navigator.startSelection(object.ref, this._selectionMode, this.appendSelection, event.shiftKey);\r\n            },\r\n            onContextMenu: function (event) {\r\n                var sheet = this._workbook.activeSheet();\r\n                if (sheet.resizingInProgress()) {\r\n                    return;\r\n                }\r\n                event.preventDefault();\r\n                this.cellContextMenu.close();\r\n                this.colHeaderContextMenu.close();\r\n                this.rowHeaderContextMenu.close();\r\n                var menu;\r\n                var location = {\r\n                    pageX: event.pageX,\r\n                    pageY: event.pageY\r\n                };\r\n                var object = this.objectAt(location);\r\n                if (object.type === 'columnresizehandle' || object.type === 'rowresizehandle') {\r\n                    return;\r\n                }\r\n                this.navigator.selectForContextMenu(object.ref, SELECTION_MODES[object.type]);\r\n                var isComposite = this.navigator._sheet.select() instanceof kendo.spreadsheet.UnionRef;\r\n                var showUnhide = false;\r\n                var showUnmerge = false;\r\n                if (object.type == 'columnheader') {\r\n                    menu = this.colHeaderContextMenu;\r\n                    showUnhide = !isComposite && this.axisManager.selectionIncludesHiddenColumns();\r\n                } else if (object.type == 'rowheader') {\r\n                    menu = this.rowHeaderContextMenu;\r\n                    showUnhide = !isComposite && this.axisManager.selectionIncludesHiddenRows();\r\n                } else {\r\n                    menu = this.cellContextMenu;\r\n                    showUnmerge = this.navigator.selectionIncludesMergedCells();\r\n                }\r\n                menu.element.find(COMPOSITE_UNAVAILABLE_ACTION_SELECTORS).toggle(!isComposite);\r\n                menu.element.find(UNHIDE_ACTION_SELECTORS).toggle(showUnhide);\r\n                menu.element.find('[data-action=unmerge]').toggle(showUnmerge);\r\n                setTimeout(function () {\r\n                    menu.open(event.pageX, event.pageY);\r\n                });\r\n            },\r\n            prevent: function (event) {\r\n                event.preventDefault();\r\n            },\r\n            constrainResize: function (type, ref) {\r\n                var sheet = this._workbook.activeSheet();\r\n                var resizeHandle = sheet.resizeHandlePosition();\r\n                return !resizeHandle || type === 'outside' || type === 'topcorner' || ref.col < resizeHandle.col || ref.row < resizeHandle.row;\r\n            },\r\n            onMouseDrag: function (event) {\r\n                if (this._selectionMode === 'sheet') {\r\n                    return;\r\n                }\r\n                var location = {\r\n                    pageX: event.pageX,\r\n                    pageY: event.pageY\r\n                };\r\n                var object = this.objectAt(location);\r\n                var sheet = this._workbook.activeSheet();\r\n                if (sheet.resizingInProgress()) {\r\n                    if (!this.constrainResize(object.type, object.ref)) {\r\n                        sheet.resizeHintPosition({\r\n                            x: object.x,\r\n                            y: object.y\r\n                        });\r\n                    }\r\n                    return;\r\n                }\r\n                if (object.type === 'outside') {\r\n                    this.startAutoScroll(object);\r\n                    return;\r\n                }\r\n                if (this.originFrame === object.pane) {\r\n                    this.selectToLocation(location);\r\n                } else {\r\n                    var frame = this.originFrame._grid;\r\n                    if (object.x > frame.right) {\r\n                        this.scrollLeft();\r\n                    }\r\n                    if (object.y > frame.bottom) {\r\n                        this.scrollTop();\r\n                    }\r\n                    if (object.y < frame.top || object.x < frame.left) {\r\n                        this.startAutoScroll(object, location);\r\n                    } else {\r\n                        this.selectToLocation(location);\r\n                    }\r\n                }\r\n                event.preventDefault();\r\n            },\r\n            onMouseUp: function (event) {\r\n                var sheet = this._workbook.activeSheet();\r\n                sheet.completeResizing();\r\n                this.navigator.completeSelection();\r\n                this.stopAutoScroll();\r\n                var editor = this.editor.activeEditor();\r\n                if (!editor) {\r\n                    return;\r\n                }\r\n                var el = event.target;\r\n                while (el) {\r\n                    if (el === editor.element[0]) {\r\n                        return;\r\n                    }\r\n                    el = el.parentNode;\r\n                }\r\n                var object = this.objectAt(event);\r\n                if (object && object.ref && editor.canInsertRef(false)) {\r\n                    editor.refAtPoint(sheet.selection()._ref);\r\n                    sheet._setFormulaSelections(editor.highlightedRefs());\r\n                }\r\n            },\r\n            onDblClick: function (event) {\r\n                var object = this.objectAt(event);\r\n                var disabled = this._workbook.activeSheet().selection().enable() === false;\r\n                if (object.type !== 'cell' || disabled) {\r\n                    return;\r\n                }\r\n                this.editor.activate({\r\n                    range: this._workbook.activeSheet()._viewActiveCell(),\r\n                    rect: this.view.activeCellRectangle(),\r\n                    tooltip: this._activeTooltip()\r\n                }).focus();\r\n                this.onEditorUpdate();\r\n            },\r\n            onCut: function (e) {\r\n                if (e) {\r\n                    var table = this.clipboardElement.find('table.kendo-clipboard-' + this.clipboard._uid).detach();\r\n                    this.clipboardElement.append(table.clone(false));\r\n                    setTimeout(function () {\r\n                        this.clipboardElement.empty().append(table);\r\n                    }.bind(this));\r\n                }\r\n                this._execute({\r\n                    command: 'CutCommand',\r\n                    options: { workbook: this.view._workbook }\r\n                });\r\n            },\r\n            clipBoardValue: function () {\r\n                return this.clipboardElement.html();\r\n            },\r\n            onPaste: function (e) {\r\n                var html = '';\r\n                var plain = '';\r\n                this.clipboard.menuInvoked = e === undefined;\r\n                if (e) {\r\n                    if (e.originalEvent.clipboardData && e.originalEvent.clipboardData.getData) {\r\n                        e.preventDefault();\r\n                        var hasHTML = false;\r\n                        var hasPlainText = false;\r\n                        if (window.DOMStringList && e.originalEvent.clipboardData.types instanceof window.DOMStringList) {\r\n                            hasHTML = e.originalEvent.clipboardData.types.contains('text/html');\r\n                            hasPlainText = e.originalEvent.clipboardData.types.contains('text/plain');\r\n                        } else {\r\n                            hasHTML = /text\\/html/.test(e.originalEvent.clipboardData.types);\r\n                            hasPlainText = /text\\/plain/.test(e.originalEvent.clipboardData.types);\r\n                        }\r\n                        if (hasHTML) {\r\n                            html = e.originalEvent.clipboardData.getData('text/html');\r\n                        }\r\n                        if (hasPlainText) {\r\n                            plain = e.originalEvent.clipboardData.getData('text/plain').trim();\r\n                        }\r\n                    } else {\r\n                        var table = this.clipboardElement.find('table.kendo-clipboard-' + this.clipboard._uid).detach();\r\n                        this.clipboardElement.empty();\r\n                        setTimeout(function () {\r\n                            var html = this.clipboardElement.html();\r\n                            var plain = window.clipboardData.getData('Text').trim();\r\n                            if (!html && !plain) {\r\n                                return;\r\n                            }\r\n                            this.clipboard.external({\r\n                                html: html,\r\n                                plain: plain\r\n                            });\r\n                            this.clipboardElement.empty().append(table);\r\n                            this._execute({\r\n                                command: 'PasteCommand',\r\n                                options: { workbook: this.view._workbook }\r\n                            });\r\n                            this.clipboard.menuInvoked = true;\r\n                        }.bind(this));\r\n                        return;\r\n                    }\r\n                } else {\r\n                    if (kendo.support.browser.msie) {\r\n                        this.clipboardElement.focus().select();\r\n                        document.execCommand('paste');\r\n                        return;\r\n                    } else {\r\n                        this.clipboard.menuInvoked = true;\r\n                    }\r\n                }\r\n                if (!html && !plain) {\r\n                    return;\r\n                }\r\n                this.clipboard.external({\r\n                    html: html,\r\n                    plain: plain\r\n                });\r\n                this._execute({\r\n                    command: 'PasteCommand',\r\n                    options: { workbook: this.view._workbook }\r\n                });\r\n            },\r\n            onCopy: function (e) {\r\n                this.clipboard.menuInvoked = e === undefined;\r\n                this._execute({\r\n                    command: 'CopyCommand',\r\n                    options: { workbook: this.view._workbook }\r\n                });\r\n            },\r\n            scrollTop: function () {\r\n                this.scroller.scrollTop = 0;\r\n            },\r\n            scrollLeft: function () {\r\n                this.scroller.scrollLeft = 0;\r\n            },\r\n            scrollDown: function (value) {\r\n                this.scroller.scrollTop += value;\r\n            },\r\n            scrollRight: function (value) {\r\n                this.scroller.scrollLeft += value;\r\n            },\r\n            scrollWith: function (right, down) {\r\n                this.scroller.scrollTop += down;\r\n                this.scroller.scrollLeft += right;\r\n            },\r\n            objectAt: function (location) {\r\n                var offset = this.container.offset();\r\n                var coordinates = {\r\n                    left: location.pageX - offset.left,\r\n                    top: location.pageY - offset.top\r\n                };\r\n                return this.view.objectAt(coordinates.left, coordinates.top);\r\n            },\r\n            selectToLocation: function (cellLocation) {\r\n                var object = this.objectAt(cellLocation);\r\n                if (object.pane) {\r\n                    this.extendSelection(object);\r\n                    this.lastKnownCellLocation = cellLocation;\r\n                    this.originFrame = object.pane;\r\n                }\r\n                this.stopAutoScroll();\r\n            },\r\n            extendSelection: function (object) {\r\n                this.navigator.extendSelection(object.ref, this._selectionMode, this.appendSelection);\r\n            },\r\n            autoScroll: function () {\r\n                var x = this._autoScrollTarget.x;\r\n                var y = this._autoScrollTarget.y;\r\n                var boundaries = this.originFrame._grid;\r\n                var scroller = this.view.scroller;\r\n                var scrollStep = 8;\r\n                var scrollLeft = scroller.scrollLeft;\r\n                var scrollTop = scroller.scrollTop;\r\n                if (x < boundaries.left) {\r\n                    this.scrollRight(-scrollStep);\r\n                }\r\n                if (x > boundaries.right) {\r\n                    this.scrollRight(scrollStep);\r\n                }\r\n                if (y < boundaries.top) {\r\n                    this.scrollDown(-scrollStep);\r\n                }\r\n                if (y > boundaries.bottom) {\r\n                    this.scrollDown(scrollStep);\r\n                }\r\n                if (scrollTop === scroller.scrollTop && scrollLeft === scroller.scrollLeft) {\r\n                    this.selectToLocation(this.finalLocation);\r\n                } else {\r\n                    this.extendSelection(this.objectAt(this.lastKnownCellLocation));\r\n                }\r\n            },\r\n            startAutoScroll: function (viewObject, location) {\r\n                if (!this._scrollInterval) {\r\n                    this._scrollInterval = setInterval(this.autoScroll.bind(this), 50);\r\n                }\r\n                this.finalLocation = location || this.lastKnownCellLocation;\r\n                this._autoScrollTarget = viewObject;\r\n            },\r\n            stopAutoScroll: function () {\r\n                clearInterval(this._scrollInterval);\r\n                this._scrollInterval = null;\r\n            },\r\n            openFilterMenu: function (event) {\r\n                var object = this.objectAt(event);\r\n                var sheet = this._workbook.activeSheet();\r\n                var column = sheet.filterColumn(object.ref);\r\n                var filterMenu = this.view.createFilterMenu(column);\r\n                filterMenu.bind('action', this.onCommandRequest.bind(this));\r\n                filterMenu.bind('action', filterMenu.close.bind(filterMenu));\r\n                filterMenu.openFor(event.target);\r\n            },\r\n            onEditorChange: function (e) {\r\n                this._workbook.activeSheet().isInEditMode(false);\r\n                var result = this._execute({\r\n                    command: 'EditCommand',\r\n                    options: {\r\n                        editActiveCell: true,\r\n                        value: e.value\r\n                    }\r\n                });\r\n                if (result && result.reason === 'error') {\r\n                    e.preventDefault();\r\n                }\r\n            },\r\n            onEditorActivate: function () {\r\n                var workbook = this._workbook;\r\n                var sheet = workbook.activeSheet();\r\n                sheet._setFormulaSelections(this.editor.highlightedRefs());\r\n                sheet.isInEditMode(true);\r\n            },\r\n            onEditorDeactivate: function () {\r\n                var sheet = this._workbook.activeSheet();\r\n                sheet.isInEditMode(false);\r\n                sheet._setFormulaSelections([]);\r\n            },\r\n            onEditorUpdate: function () {\r\n                this._workbook.activeSheet()._setFormulaSelections(this.editor.highlightedRefs());\r\n            },\r\n            onEditorBarFocus: function () {\r\n                var disabled = this._workbook.activeSheet().selection().enable() === false;\r\n                if (disabled) {\r\n                    return;\r\n                }\r\n                this.editor.activate({\r\n                    range: this._workbook.activeSheet()._viewActiveCell(),\r\n                    rect: this.view.activeCellRectangle(),\r\n                    tooltip: this._activeTooltip()\r\n                });\r\n            },\r\n            onEditorCellFocus: function () {\r\n                this.editor.scale();\r\n            },\r\n            onEditorEsc: function () {\r\n                this.editor.value(this._workbook._inputForRef(this._workbook.activeSheet()._viewActiveCell()));\r\n                this.editor.deactivate();\r\n                this.clipboardElement.focus();\r\n            },\r\n            insertNewline: function (e) {\r\n                e.preventDefault();\r\n                this.editor.insertNewline();\r\n            },\r\n            onEditorBlur: function (_, action) {\r\n                if (this.editor.isFiltered()) {\r\n                    return;\r\n                }\r\n                this.editor.deactivate();\r\n                if (!this.editor.isActive()) {\r\n                    this.clipboardElement.focus();\r\n                    this.navigator.navigateInSelection(ENTRY_ACTIONS[action]);\r\n                }\r\n            },\r\n            onEditorAction: function (event, action) {\r\n                var editor = this.editor;\r\n                var sheet = this._workbook.activeSheet();\r\n                if (editor.canInsertRef(true)) {\r\n                    this.navigator.moveActiveCell(ACTIONS[action]);\r\n                    editor.activeEditor().refAtPoint(sheet.selection()._ref);\r\n                    sheet._setFormulaSelections(editor.highlightedRefs());\r\n                    event.preventDefault();\r\n                }\r\n            },\r\n            onEditorShiftAction: function (event, action) {\r\n                var editor = this.editor;\r\n                var sheet = this._workbook.activeSheet();\r\n                if (editor.canInsertRef(true)) {\r\n                    this.navigator.modifySelection(ACTIONS[action.replace('shift+', '')], this.appendSelection);\r\n                    editor.activeEditor().refAtPoint(sheet.selection()._ref);\r\n                    sheet._setFormulaSelections(editor.highlightedRefs());\r\n                    event.preventDefault();\r\n                }\r\n            },\r\n            deactivateEditor: function (callback, options) {\r\n                var viewEditor = this.view.editor;\r\n                this._lastCommandRequest = {\r\n                    callback: callback,\r\n                    options: options\r\n                };\r\n                if (!this.isEditorDeactivateBound) {\r\n                    this.isEditorDeactivateBound = true;\r\n                    viewEditor.one('deactivate', function () {\r\n                        this.isEditorDeactivateBound = false;\r\n                        if (this._lastCommandRequest) {\r\n                            this._lastCommandRequest.callback(this._lastCommandRequest.options);\r\n                            this._lastCommandRequest = null;\r\n                        }\r\n                    }.bind(this));\r\n                }\r\n                viewEditor.deactivate();\r\n                this.enableEditor(false);\r\n            },\r\n            enableEditor: function (enable, focusLastActive) {\r\n                enable = enable === undefined || enable;\r\n                this._enableEditorEvents(enable);\r\n                this.editor.enableEditing(enable);\r\n                this.isEditorDisabled = !enable;\r\n                this.view.enableClipboard(enable);\r\n                if (focusLastActive) {\r\n                    this.editor.focusLastActive();\r\n                }\r\n            },\r\n            executeRequest: function (callback, options) {\r\n                if (this.view.editor.isActive()) {\r\n                    this.deactivateEditor(callback, options);\r\n                } else {\r\n                    callback(options);\r\n                }\r\n            },\r\n            onCommandRequest: function (e) {\r\n                var executeCommand = function (e) {\r\n                    if (e.command) {\r\n                        this._execute(e);\r\n                    } else {\r\n                        this._workbook.undoRedoStack[e.action]();\r\n                    }\r\n                }.bind(this);\r\n                this.executeRequest(executeCommand, e);\r\n            },\r\n            onDialogRequest: function (e) {\r\n                var executeDialog = function (e) {\r\n                    this.enableEditor(false);\r\n                    var additionalOptions = {\r\n                        pdfExport: this._workbook.options.pdf,\r\n                        excelExport: this._workbook.options.excel,\r\n                        close: this.enableEditor.bind(this, true, false)\r\n                    };\r\n                    if (e.options) {\r\n                        $.extend(true, e.options, additionalOptions);\r\n                    } else {\r\n                        e.options = additionalOptions;\r\n                    }\r\n                    this.view.openDialog(e.name, e.options);\r\n                }.bind(this);\r\n                this.executeRequest(executeDialog, e);\r\n            }\r\n        });\r\n        kendo.spreadsheet.Controller = Controller;\r\n    }(window.kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/view', [\r\n        'kendo.core',\r\n        'kendo.menu',\r\n        'spreadsheet/sheetsbar'\r\n    ], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var $ = kendo.jQuery;\r\n        var CellRef = kendo.spreadsheet.CellRef;\r\n        var DOT = '.';\r\n        var RESIZE_HANDLE_WIDTH = 7;\r\n        var viewClassNames = {\r\n            view: 'k-spreadsheet-view',\r\n            fixedContainer: 'k-spreadsheet-fixed-container',\r\n            editContainer: 'k-spreadsheet-edit-container',\r\n            scroller: 'k-spreadsheet-scroller',\r\n            viewSize: 'k-spreadsheet-view-size',\r\n            clipboard: 'k-spreadsheet-clipboard',\r\n            cellEditor: 'k-spreadsheet-cell-editor',\r\n            barEditor: 'k-spreadsheet-editor',\r\n            topCorner: 'k-spreadsheet-top-corner',\r\n            filterHeadersWrapper: 'k-filter-wrapper',\r\n            filterRange: 'k-filter-range',\r\n            filterButton: 'k-spreadsheet-filter',\r\n            filterButtonActive: 'k-state-active',\r\n            horizontalResize: 'k-horizontal-resize',\r\n            verticalResize: 'k-vertical-resize',\r\n            icon: 'k-icon k-font-icon',\r\n            iconFilterDefault: 'k-i-arrow-s',\r\n            sheetsBar: 'k-spreadsheet-sheets-bar',\r\n            sheetsBarActive: 'k-spreadsheet-sheets-bar-active',\r\n            sheetsBarInactive: 'k-spreadsheet-sheets-bar-inactive',\r\n            cellContextMenu: 'k-spreadsheet-cell-context-menu',\r\n            rowHeaderContextMenu: 'k-spreadsheet-row-header-context-menu',\r\n            colHeaderContextMenu: 'k-spreadsheet-col-header-context-menu'\r\n        };\r\n        kendo.spreadsheet.messages.view = {\r\n            errors: {\r\n                openUnsupported: 'Unsupported format. Please select an .xlsx file.',\r\n                shiftingNonblankCells: 'Cannot insert cells due to data loss possibility. Select another insert location or delete the data from the end of your worksheet.',\r\n                filterRangeContainingMerges: 'Cannot create a filter within a range containing merges',\r\n                sortRangeContainingMerges: 'Cannot sort a range containing merges',\r\n                validationError: 'The value that you entered violates the validation rules set on the cell.'\r\n            },\r\n            tabs: {\r\n                home: 'Home',\r\n                insert: 'Insert',\r\n                data: 'Data'\r\n            }\r\n        };\r\n        function selectElementContents(el) {\r\n            var sel = window.getSelection();\r\n            sel.removeAllRanges();\r\n            var range = document.createRange();\r\n            range.selectNodeContents(el);\r\n            sel.addRange(range);\r\n        }\r\n        function cellBefore(table, row) {\r\n            var cells = table.trs[row].children;\r\n            return cells[cells.length - 2];\r\n        }\r\n        function cellAbove(table, row) {\r\n            var prevRow = table.trs[row - 1];\r\n            var index = table.trs[row].children.length - 1;\r\n            if (prevRow && index >= 0) {\r\n                return prevRow.children[index];\r\n            }\r\n        }\r\n        function cellBorder(value) {\r\n            return [\r\n                'solid',\r\n                (value.size || 1) + 'px',\r\n                value.color || '#000'\r\n            ].join(' ');\r\n        }\r\n        function asURL(link) {\r\n            if (!/:\\/\\//.test(link)) {\r\n                link = 'http://' + link;\r\n            }\r\n            return link;\r\n        }\r\n        function drawCell(collection, cell, cls, hBorders, vBorders, showGrid) {\r\n            function maybeLink(el) {\r\n                var link = cell.link;\r\n                if (!link) {\r\n                    if (typeof cell.value == 'object') {\r\n                        link = cell.value.link;\r\n                    }\r\n                }\r\n                if (link) {\r\n                    var style = { textDecoration: 'none' };\r\n                    if (cell.color) {\r\n                        style.color = cell.color;\r\n                    }\r\n                    if (cell.underline) {\r\n                        style.textDecoration = 'underline';\r\n                    }\r\n                    return kendo.dom.element('a', {\r\n                        href: asURL(link),\r\n                        style: style,\r\n                        target: '_blank'\r\n                    }, el ? [el] : []);\r\n                }\r\n                return el;\r\n            }\r\n            if (!cls && !kendo.spreadsheet.draw.shouldDrawCell(cell)) {\r\n                return;\r\n            }\r\n            var left = cell.left;\r\n            var top = cell.top;\r\n            var width = cell.width + 1;\r\n            var height = cell.height + 1;\r\n            var style = {};\r\n            var background = cell.background;\r\n            var defaultBorder = null;\r\n            if (background) {\r\n                defaultBorder = background;\r\n                if (showGrid) {\r\n                    defaultBorder = kendo.parseColor(defaultBorder).toHSV();\r\n                    defaultBorder.v *= 0.9;\r\n                    defaultBorder = defaultBorder.toCssRgba();\r\n                }\r\n                defaultBorder = cellBorder({ color: defaultBorder });\r\n            }\r\n            if (background) {\r\n                style.backgroundColor = background;\r\n            }\r\n            if (cell.color) {\r\n                style.color = cell.color;\r\n            }\r\n            if (cell.fontFamily) {\r\n                style.fontFamily = cell.fontFamily;\r\n            }\r\n            if (cell.underline) {\r\n                style.textDecoration = 'underline';\r\n            }\r\n            if (cell.italic) {\r\n                style.fontStyle = 'italic';\r\n            }\r\n            if (cell.textAlign) {\r\n                style.textAlign = cell.textAlign;\r\n            }\r\n            if (cell.bold) {\r\n                style.fontWeight = 'bold';\r\n            }\r\n            if (cell.fontSize) {\r\n                style.fontSize = cell.fontSize + 'px';\r\n            }\r\n            if (cell.wrap === true) {\r\n                style.whiteSpace = 'pre-wrap';\r\n                style.wordBreak = 'break-all';\r\n            }\r\n            if (cell.borderLeft) {\r\n                style.borderLeft = cellBorder(cell.borderLeft);\r\n                if (vBorders) {\r\n                    vBorders[cell.left] = true;\r\n                }\r\n            } else if (defaultBorder && vBorders && !vBorders[cell.left]) {\r\n                style.borderLeft = defaultBorder;\r\n            } else {\r\n                left++;\r\n                width--;\r\n            }\r\n            if (cell.borderTop) {\r\n                style.borderTop = cellBorder(cell.borderTop);\r\n                if (hBorders) {\r\n                    hBorders[cell.top] = true;\r\n                }\r\n            } else if (defaultBorder && hBorders && !hBorders[cell.top]) {\r\n                style.borderTop = defaultBorder;\r\n            } else {\r\n                top++;\r\n                height--;\r\n            }\r\n            if (cell.borderRight) {\r\n                style.borderRight = cellBorder(cell.borderRight);\r\n                if (vBorders) {\r\n                    vBorders[cell.right] = true;\r\n                }\r\n            } else if (defaultBorder && vBorders && !vBorders[cell.right]) {\r\n                style.borderRight = defaultBorder;\r\n            } else {\r\n                width--;\r\n            }\r\n            if (cell.borderBottom) {\r\n                style.borderBottom = cellBorder(cell.borderBottom);\r\n                if (hBorders) {\r\n                    hBorders[cell.bottom] = true;\r\n                }\r\n            } else if (defaultBorder && hBorders && !hBorders[cell.bottom]) {\r\n                style.borderBottom = defaultBorder;\r\n            } else {\r\n                height--;\r\n            }\r\n            style.left = left + 'px';\r\n            style.top = top + 'px';\r\n            style.width = width + 'px';\r\n            style.height = height + 'px';\r\n            var data = cell.value, type = typeof data;\r\n            if (cell.format && data != null) {\r\n                data = kendo.spreadsheet.formatting.format(data, cell.format);\r\n                if (data.__dataType) {\r\n                    type = data.__dataType;\r\n                }\r\n            } else if (data !== null && data !== undefined) {\r\n                data = kendo.dom.text(data);\r\n            }\r\n            if (!style.textAlign) {\r\n                switch (type) {\r\n                case 'number':\r\n                case 'date':\r\n                case 'percent':\r\n                    style.textAlign = 'right';\r\n                    break;\r\n                case 'boolean':\r\n                    style.textAlign = 'center';\r\n                    break;\r\n                }\r\n            }\r\n            var classNames = [paneClassNames.cell];\r\n            if (cls) {\r\n                classNames.push(cls);\r\n            }\r\n            if (cell.enable === false) {\r\n                classNames.push('k-state-disabled');\r\n            }\r\n            if (cell.merged) {\r\n                classNames.push('k-spreadsheet-merged-cell');\r\n            }\r\n            var verticalAlign = cell.verticalAlign || 'bottom';\r\n            if (verticalAlign && data) {\r\n                data = kendo.dom.element('div', { className: 'k-vertical-align-' + verticalAlign }, [maybeLink(data)]);\r\n            } else {\r\n                data = maybeLink(data);\r\n            }\r\n            var children = data ? [data] : [];\r\n            var properties = { style: style };\r\n            var validation = cell.validation;\r\n            if (validation && !validation.value) {\r\n                children.push(kendo.dom.element('span', { className: 'k-dirty' }));\r\n                classNames.push('k-dirty-cell');\r\n                properties.title = validation._getOptions().messageTemplate;\r\n            }\r\n            properties.className = classNames.join(' ');\r\n            var div = kendo.dom.element('div', properties, children);\r\n            collection.push(div);\r\n            return div;\r\n        }\r\n        function addCell(table, row, cell) {\r\n            var style = {};\r\n            if (cell.background) {\r\n                style.backgroundColor = cell.background;\r\n            }\r\n            if (cell.color) {\r\n                style.color = cell.color;\r\n            }\r\n            if (cell.fontFamily) {\r\n                style.fontFamily = cell.fontFamily;\r\n            }\r\n            if (cell.underline) {\r\n                style.textDecoration = 'underline';\r\n            }\r\n            if (cell.italic) {\r\n                style.fontStyle = 'italic';\r\n            }\r\n            if (cell.textAlign) {\r\n                style.textAlign = cell.textAlign;\r\n            }\r\n            if (cell.verticalAlign) {\r\n                style.verticalAlign = cell.verticalAlign === 'center' ? 'middle' : cell.verticalAlign;\r\n            }\r\n            if (cell.bold) {\r\n                style.fontWeight = 'bold';\r\n            }\r\n            if (cell.fontSize) {\r\n                style.fontSize = cell.fontSize + 'px';\r\n            }\r\n            if (cell.wrap === true) {\r\n                style.whiteSpace = 'pre-wrap';\r\n                style.wordBreak = 'break-all';\r\n            }\r\n            if (cell.borderRight) {\r\n                style.borderRight = cellBorder(cell.borderRight);\r\n            } else if (cell.background) {\r\n                style.borderRightColor = cell.background;\r\n            }\r\n            if (cell.borderBottom) {\r\n                style.borderBottom = cellBorder(cell.borderBottom);\r\n            } else if (cell.background) {\r\n                style.borderBottomColor = cell.background;\r\n            }\r\n            var data = cell.value, type = typeof data;\r\n            if (cell.format && data != null) {\r\n                data = kendo.spreadsheet.formatting.format(data, cell.format);\r\n                if (data.__dataType) {\r\n                    type = data.__dataType;\r\n                }\r\n            }\r\n            if (!style.textAlign) {\r\n                switch (type) {\r\n                case 'number':\r\n                case 'date':\r\n                case 'percent':\r\n                    style.textAlign = 'right';\r\n                    break;\r\n                case 'boolean':\r\n                    style.textAlign = 'center';\r\n                    break;\r\n                }\r\n            }\r\n            var className = null;\r\n            if (cell.enable === false) {\r\n                className = 'k-state-disabled';\r\n            }\r\n            var td = table.addCell(row, data, style, className, cell.validation);\r\n            var border, sibling;\r\n            if (cell.borderLeft) {\r\n                sibling = cellBefore(table, row);\r\n                border = cellBorder(cell.borderLeft);\r\n                if (sibling && border) {\r\n                    sibling.attr.style.borderRight = border;\r\n                }\r\n            } else if (cell.background) {\r\n                style.borderLeftColor = cell.background;\r\n            }\r\n            if (cell.borderTop) {\r\n                sibling = cellAbove(table, row);\r\n                border = cellBorder(cell.borderTop);\r\n                if (sibling && border) {\r\n                    sibling.attr.style.borderBottom = border;\r\n                }\r\n            } else if (cell.background) {\r\n                style.borderTopColor = cell.background;\r\n            }\r\n            return td;\r\n        }\r\n        var HtmlTable = kendo.Class.extend({\r\n            init: function () {\r\n                this.cols = [];\r\n                this.trs = [];\r\n                this._height = 0;\r\n                this._width = 0;\r\n            },\r\n            addColumn: function (width) {\r\n                this._width += width;\r\n                var col = kendo.dom.element('col', { style: { width: width + 'px' } });\r\n                col.visible = width > 0;\r\n                this.cols.push(col);\r\n            },\r\n            addRow: function (height) {\r\n                var attr = null;\r\n                attr = { style: { height: height + 'px' } };\r\n                this._height += height;\r\n                var tr = kendo.dom.element('tr', attr);\r\n                tr.visible = height > 0;\r\n                this.trs.push(tr);\r\n            },\r\n            addCell: function (rowIndex, text, style, className, validation) {\r\n                if (text === null || text === undefined) {\r\n                    text = '';\r\n                }\r\n                if (!(text instanceof kendo.dom.Node)) {\r\n                    text = kendo.dom.text(text);\r\n                }\r\n                var children = [text];\r\n                var properties = { style: style };\r\n                if (validation && !validation.value) {\r\n                    children.push(kendo.dom.element('span', { className: 'k-dirty' }));\r\n                    className = (className || '') + (className ? ' ' : '') + 'k-dirty-cell';\r\n                    properties.title = validation._getOptions().messageTemplate;\r\n                }\r\n                if (className) {\r\n                    properties.className = className;\r\n                }\r\n                var td = kendo.dom.element('td', properties, children);\r\n                this.trs[rowIndex].children.push(td);\r\n                return td;\r\n            },\r\n            toDomTree: function (x, y, className) {\r\n                this.trs = this.trs.filter(function (tr) {\r\n                    return tr.visible;\r\n                });\r\n                var offset = 0;\r\n                this.cols = this.cols.filter(function (col, ci) {\r\n                    if (!col.visible) {\r\n                        this.trs.forEach(function (tr) {\r\n                            tr.children.splice(ci - offset, 1);\r\n                        });\r\n                        offset++;\r\n                    }\r\n                    return col.visible;\r\n                }, this);\r\n                return kendo.dom.element('table', {\r\n                    style: {\r\n                        left: x + 'px',\r\n                        top: y + 'px',\r\n                        height: this._height + 'px',\r\n                        width: this._width + 'px'\r\n                    },\r\n                    className: className\r\n                }, [\r\n                    kendo.dom.element('colgroup', null, this.cols),\r\n                    kendo.dom.element('tbody', null, this.trs)\r\n                ]);\r\n            }\r\n        });\r\n        var CELL_CONTEXT_MENU = '<ul class=\"#=classNames.cellContextMenu#\">' + '<li data-action=cut>Cut</li>' + '<li data-action=copy>Copy</li>' + '<li data-action=paste>Paste</li>' + '<li class=\"k-separator\"></li>' + '<li data-action=merge>Merge</li>' + '<li data-action=unmerge>Unmerge</li>' + '</ul>';\r\n        var ROW_HEADER_CONTEXT_MENU = '<ul class=\"#=classNames.rowHeaderContextMenu#\">' + '<li data-action=cut>Cut</li>' + '<li data-action=copy>Copy</li>' + '<li data-action=paste>Paste</li>' + '<li class=\"k-separator\"></li>' + '<li data-action=\"delete-row\">Delete</li>' + '<li data-action=\"hide-row\">Hide</li>' + '<li data-action=\"unhide-row\">Unhide</li>' + '</ul>';\r\n        var COL_HEADER_CONTEXT_MENU = '<ul class=\"#=classNames.colHeaderContextMenu#\">' + '<li data-action=cut>Cut</li>' + '<li data-action=copy>Copy</li>' + '<li data-action=paste>Paste</li>' + '<li class=\"k-separator\"></li>' + '<li data-action=\"delete-column\">Delete</li>' + '<li data-action=\"hide-column\">Hide</li>' + '<li data-action=\"unhide-column\">Unhide</li>' + '</ul>';\r\n        kendo.spreadsheet.ContextMenu = kendo.ui.ContextMenu;\r\n        var VIEW_CONTENTS = kendo.template('<div class=\"#=classNames.view#\"><div class=\"#=classNames.fixedContainer#\"></div><div class=\"#=classNames.scroller#\"><div class=\"#=classNames.viewSize#\"></div></div>' + '<div tabindex=\"0\" class=\"#=classNames.clipboard#\" contenteditable=true></div><div class=\"#=classNames.cellEditor#\"></div></div><div class=\"#=classNames.sheetsBar#\"></div>' + CELL_CONTEXT_MENU + ROW_HEADER_CONTEXT_MENU + COL_HEADER_CONTEXT_MENU);\r\n        function within(value, min, max) {\r\n            return value >= min && value <= max;\r\n        }\r\n        var View = kendo.Class.extend({\r\n            init: function (element, options) {\r\n                var classNames = View.classNames;\r\n                this.element = element;\r\n                this.options = $.extend(true, { messages: kendo.spreadsheet.messages.view }, this.options, options);\r\n                this._chrome();\r\n                this._dialogs = [];\r\n                element.append(VIEW_CONTENTS({ classNames: classNames }));\r\n                this._formulaInput();\r\n                this.wrapper = element.find(DOT + classNames.view);\r\n                this.container = element.find(DOT + classNames.fixedContainer)[0];\r\n                this.scroller = element.find(DOT + classNames.scroller)[0];\r\n                this.clipboard = element.find(DOT + classNames.clipboard);\r\n                this.viewSize = $(this.scroller.firstChild);\r\n                this.tree = new kendo.dom.Tree(this.container);\r\n                this.clipboardContents = new kendo.dom.Tree(this.clipboard[0]);\r\n                this.editor = new kendo.spreadsheet.SheetEditor(this);\r\n                this._sheetsbar();\r\n                var contextMenuConfig = {\r\n                    target: element,\r\n                    animation: false,\r\n                    showOn: 'never'\r\n                };\r\n                this.cellContextMenu = new kendo.spreadsheet.ContextMenu(element.find(DOT + classNames.cellContextMenu), contextMenuConfig);\r\n                this.colHeaderContextMenu = new kendo.spreadsheet.ContextMenu(element.find(DOT + classNames.colHeaderContextMenu), contextMenuConfig);\r\n                this.rowHeaderContextMenu = new kendo.spreadsheet.ContextMenu(element.find(DOT + classNames.rowHeaderContextMenu), contextMenuConfig);\r\n                var scrollbar = kendo.support.scrollbar();\r\n                $(this.container).css({\r\n                    width: this.wrapper[0].clientWidth - scrollbar,\r\n                    height: this.wrapper[0].clientHeight - scrollbar\r\n                });\r\n            },\r\n            enableClipboard: function (enable) {\r\n                this.isClipboardDeactivated = !enable;\r\n                if (enable) {\r\n                    this.clipboard.attr('contenteditable', enable);\r\n                } else {\r\n                    this.clipboard.removeAttr('contenteditable');\r\n                }\r\n            },\r\n            _resize: function () {\r\n                var tabstripHeight = this.tabstrip ? this.tabstrip.element.outerHeight() : 0;\r\n                var formulaBarHeight = this.formulaBar ? this.formulaBar.element.outerHeight() : 0;\r\n                var sheetsBarHeight = this.sheetsbar ? this.sheetsbar.element.outerHeight() : 0;\r\n                this.wrapper.height(this.element.height() - (tabstripHeight + formulaBarHeight + sheetsBarHeight));\r\n                if (this.tabstrip) {\r\n                    this.tabstrip.quickAccessAdjust();\r\n                }\r\n            },\r\n            _chrome: function () {\r\n                var formulaBar = $('<div />').prependTo(this.element);\r\n                this.formulaBar = new kendo.spreadsheet.FormulaBar(formulaBar);\r\n                if (this.options.toolbar) {\r\n                    this._tabstrip();\r\n                }\r\n            },\r\n            _formulaInput: function () {\r\n                var editor = this.element.find(DOT + View.classNames.cellEditor);\r\n                this.formulaInput = new kendo.spreadsheet.FormulaInput(editor, { autoScale: true });\r\n            },\r\n            _sheetsbar: function () {\r\n                if (this.options.sheetsbar) {\r\n                    this.sheetsbar = new kendo.spreadsheet.SheetsBar(this.element.find(DOT + View.classNames.sheetsBar), $.extend(true, {}, this.options.sheetsbar));\r\n                }\r\n            },\r\n            _tabstrip: function () {\r\n                var messages = this.options.messages.tabs;\r\n                var options = $.extend(true, {\r\n                    home: true,\r\n                    insert: true,\r\n                    data: true\r\n                }, this.options.toolbar);\r\n                var tabs = [];\r\n                if (this.tabstrip) {\r\n                    this.tabstrip.destroy();\r\n                    this.element.children('.k-tabstrip').remove();\r\n                }\r\n                for (var name in options) {\r\n                    if (options[name] === true || options[name] instanceof Array) {\r\n                        tabs.push({\r\n                            id: name,\r\n                            text: messages[name],\r\n                            content: ''\r\n                        });\r\n                    }\r\n                }\r\n                this.tabstrip = new kendo.spreadsheet.TabStrip($('<div />').prependTo(this.element), {\r\n                    animation: false,\r\n                    dataTextField: 'text',\r\n                    dataContentField: 'content',\r\n                    dataSource: tabs,\r\n                    toolbarOptions: options,\r\n                    view: this\r\n                });\r\n                this.tabstrip.select(0);\r\n            },\r\n            _executeCommand: function (e) {\r\n                this._workbook.execute(e);\r\n            },\r\n            workbook: function (workbook) {\r\n                this._workbook = workbook;\r\n            },\r\n            sheet: function (sheet) {\r\n                this._sheet = sheet;\r\n            },\r\n            activeCellRectangle: function () {\r\n                return this.cellRectangle(this._sheet._viewActiveCell());\r\n            },\r\n            _rectangle: function (pane, ref) {\r\n                return pane._grid.boundingRectangle(ref.toRangeRef());\r\n            },\r\n            isColumnResizer: function (x, pane, ref) {\r\n                var rectangle = this._rectangle(pane, ref);\r\n                x -= this._sheet._grid._headerWidth;\r\n                var handleWidth = RESIZE_HANDLE_WIDTH / 2;\r\n                var right = rectangle.right - this.scroller.scrollLeft;\r\n                return right - handleWidth <= x && x <= right + handleWidth;\r\n            },\r\n            isRowResizer: function (y, pane, ref) {\r\n                var rectangle = this._rectangle(pane, ref);\r\n                y -= this._sheet._grid._headerHeight;\r\n                var handleWidth = RESIZE_HANDLE_WIDTH / 2;\r\n                var bottom = rectangle.bottom - this.scroller.scrollTop;\r\n                return bottom - handleWidth <= y && y <= bottom + handleWidth;\r\n            },\r\n            isFilterIcon: function (x, y, pane, ref) {\r\n                var result = false;\r\n                x -= this._sheet._grid._headerWidth - this.scroller.scrollLeft;\r\n                y -= this._sheet._grid._headerHeight - this.scroller.scrollTop;\r\n                this._sheet.forEachFilterHeader(ref, function (ref) {\r\n                    var rect = this._rectangle(pane, ref);\r\n                    result = result || pane.filterIconRect(rect).intersects(x, y);\r\n                }.bind(this));\r\n                return result;\r\n            },\r\n            isAutoFill: function (x, y, pane) {\r\n                var selection = this._sheet.select();\r\n                if (selection.size > 1) {\r\n                    return false;\r\n                }\r\n                x -= this._sheet._grid._headerWidth;\r\n                y -= this._sheet._grid._headerHeight;\r\n                if (!pane._grid.columns.frozen) {\r\n                    x += this.scroller.scrollLeft;\r\n                }\r\n                if (!pane._grid.rows.frozen) {\r\n                    y += this.scroller.scrollTop;\r\n                }\r\n                var rectangle = this._rectangle(pane, selection);\r\n                return Math.abs(rectangle.right - x) < 8 && Math.abs(rectangle.bottom - y) < 8;\r\n            },\r\n            objectAt: function (x, y) {\r\n                var grid = this._sheet._grid;\r\n                var object, pane;\r\n                if (x < 0 || y < 0 || x > this.scroller.clientWidth || y > this.scroller.clientHeight) {\r\n                    object = { type: 'outside' };\r\n                } else if (x < grid._headerWidth && y < grid._headerHeight) {\r\n                    object = { type: 'topcorner' };\r\n                } else {\r\n                    pane = this.paneAt(x, y);\r\n                    var row = pane._grid.rows.index(y, this.scroller.scrollTop);\r\n                    var column = pane._grid.columns.index(x, this.scroller.scrollLeft);\r\n                    var type = 'cell';\r\n                    var ref = new CellRef(row, column);\r\n                    var selecting = this._sheet.selectionInProgress();\r\n                    if (this.isAutoFill(x, y, pane)) {\r\n                        type = 'autofill';\r\n                    } else if (this.isFilterIcon(x, y, pane, ref)) {\r\n                        type = 'filtericon';\r\n                    } else if (!selecting && x < grid._headerWidth) {\r\n                        ref = new CellRef(row, -Infinity);\r\n                        type = this.isRowResizer(y, pane, ref) ? 'rowresizehandle' : 'rowheader';\r\n                    } else if (!selecting && y < grid._headerHeight) {\r\n                        ref = new CellRef(-Infinity, column);\r\n                        type = this.isColumnResizer(x, pane, ref) ? 'columnresizehandle' : 'columnheader';\r\n                    }\r\n                    object = {\r\n                        type: type,\r\n                        ref: ref\r\n                    };\r\n                }\r\n                object.pane = pane;\r\n                object.x = x;\r\n                object.y = y;\r\n                return object;\r\n            },\r\n            paneAt: function (x, y) {\r\n                return this.panes.filter(function paneLocationWithin(pane) {\r\n                    var grid = pane._grid;\r\n                    return within(y, grid.top, grid.bottom) && within(x, grid.left, grid.right);\r\n                })[0];\r\n            },\r\n            containingPane: function (cell) {\r\n                return this.panes.filter(function (pane) {\r\n                    if (pane._grid.contains(cell)) {\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                })[0];\r\n            },\r\n            cellRectangle: function (cell) {\r\n                var theGrid = this.containingPane(cell)._grid;\r\n                var rectangle = this._sheet._grid.rectangle(cell);\r\n                return rectangle.offset(theGrid.headerWidth - (theGrid.columns.frozen ? 0 : this.scroller.scrollLeft), theGrid.headerHeight - (theGrid.rows.frozen ? 0 : this.scroller.scrollTop));\r\n            },\r\n            refresh: function (reason) {\r\n                var sheet = this._sheet;\r\n                if (this.tabstrip) {\r\n                    this.tabstrip.refreshTools(sheet.range(sheet.activeCell()));\r\n                }\r\n                if (reason.sheetSelection && this.sheetsbar) {\r\n                    this.sheetsbar.renderSheets(this._workbook.sheets(), this._workbook.sheetIndex(this._sheet));\r\n                }\r\n                this._resize();\r\n                this.viewSize[0].style.height = sheet._grid.totalHeight() + 'px';\r\n                this.viewSize[0].style.width = sheet._grid.totalWidth() + 'px';\r\n                if (reason.layout) {\r\n                    var frozenColumns = sheet.frozenColumns();\r\n                    var frozenRows = sheet.frozenRows();\r\n                    this.panes = [this._pane(frozenRows, frozenColumns)];\r\n                    if (frozenColumns > 0) {\r\n                        this.panes.push(this._pane(frozenRows, 0, null, frozenColumns));\r\n                    }\r\n                    if (frozenRows > 0) {\r\n                        this.panes.push(this._pane(0, frozenColumns, frozenRows, null));\r\n                    }\r\n                    if (frozenRows > 0 && frozenColumns > 0) {\r\n                        this.panes.push(this._pane(0, 0, frozenRows, frozenColumns));\r\n                    }\r\n                }\r\n                if (reason.filter) {\r\n                    this._destroyFilterMenu();\r\n                }\r\n                if (reason.activeCell) {\r\n                    this._focus = sheet.activeCell().toRangeRef();\r\n                }\r\n            },\r\n            createFilterMenu: function (column) {\r\n                if (this._filterMenu && this._filterMenu.options.column == column) {\r\n                    return this._filterMenu;\r\n                }\r\n                this._destroyFilterMenu();\r\n                var sheet = this._sheet;\r\n                var ref = sheet.filter().ref;\r\n                var range = new kendo.spreadsheet.Range(ref, sheet);\r\n                var element = $('<div />').appendTo(this.element);\r\n                var options = {\r\n                    column: column,\r\n                    range: range\r\n                };\r\n                var filterMenu = new kendo.spreadsheet.FilterMenu(element, options);\r\n                this._filterMenu = filterMenu;\r\n                return filterMenu;\r\n            },\r\n            selectClipBoardContents: function () {\r\n                if (!this.isClipboardDeactivated) {\r\n                    this.clipboard.focus();\r\n                    selectElementContents(this.clipboard[0]);\r\n                }\r\n            },\r\n            scrollIntoView: function (cell) {\r\n                var willScroll = false;\r\n                var theGrid = this.containingPane(cell)._grid;\r\n                var boundaries = theGrid.scrollBoundaries(cell);\r\n                var scroller = this.scroller;\r\n                var scrollTop = theGrid.rows.frozen ? 0 : scroller.scrollTop;\r\n                var scrollLeft = theGrid.columns.frozen ? 0 : scroller.scrollLeft;\r\n                if (boundaries.top < scrollTop) {\r\n                    willScroll = true;\r\n                    scroller.scrollTop = boundaries.scrollTop;\r\n                }\r\n                if (boundaries.bottom > scrollTop) {\r\n                    willScroll = true;\r\n                    scroller.scrollTop = boundaries.scrollBottom;\r\n                }\r\n                if (boundaries.left < scrollLeft) {\r\n                    willScroll = true;\r\n                    scroller.scrollLeft = boundaries.scrollLeft;\r\n                }\r\n                if (boundaries.right > scrollLeft) {\r\n                    willScroll = true;\r\n                    scroller.scrollLeft = boundaries.scrollRight;\r\n                }\r\n                return willScroll;\r\n            },\r\n            _destroyDialog: function () {\r\n                this._dialogs.pop();\r\n            },\r\n            openDialog: function (name, options) {\r\n                var sheet = this._sheet;\r\n                var ref = sheet.activeCell();\r\n                var range = new kendo.spreadsheet.Range(ref, sheet);\r\n                var dialog = kendo.spreadsheet.dialogs.create(name, options);\r\n                if (dialog) {\r\n                    dialog.bind('action', this._executeCommand.bind(this));\r\n                    dialog.bind('deactivate', this._destroyDialog.bind(this));\r\n                    this._dialogs.push(dialog);\r\n                    dialog.open(range);\r\n                    return dialog;\r\n                }\r\n            },\r\n            showError: function (options, callback) {\r\n                var errorMessages = this.options.messages.errors;\r\n                if (kendo.spreadsheet.dialogs.registered(options.type)) {\r\n                    this.openDialog(options.type, { close: callback });\r\n                } else {\r\n                    this.openDialog('message', {\r\n                        title: options.title || 'Error',\r\n                        text: options.body ? options.body : errorMessages[options.type],\r\n                        activate: function (e) {\r\n                            e.sender.dialog().element.find('.k-button').focus();\r\n                        }.bind(this),\r\n                        close: callback\r\n                    });\r\n                }\r\n            },\r\n            destroy: function () {\r\n                this._dialogs.forEach(function (dialog) {\r\n                    dialog.destroy();\r\n                });\r\n                this.cellContextMenu.destroy();\r\n                this.rowHeaderContextMenu.destroy();\r\n                this.colHeaderContextMenu.destroy();\r\n                if (this.tabstrip) {\r\n                    this.tabstrip.destroy();\r\n                }\r\n                this._destroyFilterMenu();\r\n            },\r\n            _destroyFilterMenu: function () {\r\n                if (this._filterMenu) {\r\n                    this._filterMenu.destroy();\r\n                    this._filterMenu = undefined;\r\n                    this._filterMenuColumn = undefined;\r\n                }\r\n            },\r\n            render: function () {\r\n                if (!this.element.is(':visible')) {\r\n                    return;\r\n                }\r\n                var sheet = this._sheet;\r\n                var focus = sheet.focus();\r\n                if (focus && this.scrollIntoView(focus)) {\r\n                    return;\r\n                }\r\n                var resizeDirection = !sheet.resizingInProgress() ? 'none' : sheet.resizeHandlePosition().col === -Infinity ? 'column' : 'row';\r\n                this.wrapper.toggleClass(viewClassNames.editContainer, this.editor.isActive()).toggleClass(viewClassNames.horizontalResize, resizeDirection == 'row').toggleClass(viewClassNames.verticalResize, resizeDirection == 'column');\r\n                var grid = sheet._grid;\r\n                var scrollTop = this.scroller.scrollTop;\r\n                var scrollLeft = this.scroller.scrollLeft;\r\n                if (scrollTop < 0) {\r\n                    scrollTop = 0;\r\n                }\r\n                if (scrollLeft < 0) {\r\n                    scrollLeft = 0;\r\n                }\r\n                var result = this.panes.map(function (pane) {\r\n                    return pane.render(scrollLeft, scrollTop);\r\n                }, this);\r\n                var merged = [];\r\n                merged = Array.prototype.concat.apply(merged, result);\r\n                var topCorner = kendo.dom.element('div', {\r\n                    style: {\r\n                        width: grid._headerWidth + 'px',\r\n                        height: grid._headerHeight + 'px'\r\n                    },\r\n                    className: View.classNames.topCorner\r\n                });\r\n                merged.push(topCorner);\r\n                if (sheet.resizeHandlePosition() && sheet.resizeHintPosition()) {\r\n                    merged.push(this.renderResizeHint());\r\n                }\r\n                this.tree.render(merged);\r\n                if (this.editor.isActive()) {\r\n                    this.editor.toggleTooltip(this.activeCellRectangle());\r\n                } else if (!sheet.selectionInProgress() && !sheet.resizingInProgress() && !sheet.isInEditMode()) {\r\n                    this.renderClipboardContents();\r\n                }\r\n            },\r\n            renderResizeHint: function () {\r\n                var sheet = this._sheet;\r\n                var ref = sheet.resizeHandlePosition();\r\n                var horizontal = ref.col !== -Infinity;\r\n                var style;\r\n                if (horizontal) {\r\n                    style = {\r\n                        height: this.scroller.clientHeight + 'px',\r\n                        width: RESIZE_HANDLE_WIDTH + 'px',\r\n                        left: sheet.resizeHintPosition().x + 'px',\r\n                        top: '0px'\r\n                    };\r\n                } else {\r\n                    style = {\r\n                        height: RESIZE_HANDLE_WIDTH + 'px',\r\n                        width: this.scroller.clientWidth + 'px',\r\n                        top: sheet.resizeHintPosition().y + 'px',\r\n                        left: '0px'\r\n                    };\r\n                }\r\n                var classNames = Pane.classNames;\r\n                return kendo.dom.element('div', {\r\n                    className: classNames.resizeHint + (!horizontal ? ' ' + classNames.resizeHintVertical : ''),\r\n                    style: style\r\n                }, [\r\n                    kendo.dom.element('div', { className: classNames.resizeHintHandle }),\r\n                    kendo.dom.element('div', { className: classNames.resizeHintMarker })\r\n                ]);\r\n            },\r\n            renderClipboardContents: function () {\r\n                var sheet = this._sheet;\r\n                var grid = sheet._grid;\r\n                var selection = sheet.select().toRangeRef();\r\n                var status = this._workbook.clipboard().canCopy();\r\n                if (status.canCopy === false && status.multiSelection) {\r\n                    this.clipboardContents.render([]);\r\n                    this.selectClipBoardContents();\r\n                    return;\r\n                }\r\n                selection = sheet.trim(selection);\r\n                var table = new HtmlTable();\r\n                var selectionView = grid.rangeDimensions(selection);\r\n                selectionView.rows.forEach(function (height) {\r\n                    table.addRow(height);\r\n                });\r\n                selectionView.columns.forEach(function (width) {\r\n                    table.addColumn(width);\r\n                });\r\n                var primaryMergedCells = {};\r\n                var secondaryMergedCells = {};\r\n                sheet.forEachMergedCell(selection, function (ref) {\r\n                    var topLeft = ref.topLeft;\r\n                    grid.forEach(ref, function (cellRef) {\r\n                        if (topLeft.eq(cellRef)) {\r\n                            primaryMergedCells[cellRef.print()] = ref;\r\n                        } else {\r\n                            secondaryMergedCells[cellRef.print()] = true;\r\n                        }\r\n                    });\r\n                });\r\n                sheet.forEach(selection, function (row, col, cell) {\r\n                    var location = new CellRef(row, col).print();\r\n                    if (!secondaryMergedCells[location]) {\r\n                        var td = addCell(table, row - selection.topLeft.row, cell);\r\n                        var mergedCell = primaryMergedCells[location];\r\n                        if (mergedCell) {\r\n                            td.attr.colspan = mergedCell.width();\r\n                            td.attr.rowspan = mergedCell.height();\r\n                        }\r\n                    }\r\n                });\r\n                this.clipboardContents.render([table.toDomTree(0, 0, 'kendo-clipboard-' + this._workbook.clipboard()._uid)]);\r\n                this.selectClipBoardContents();\r\n            },\r\n            _pane: function (row, column, rowCount, columnCount) {\r\n                var pane = new Pane(this._sheet, this._sheet._grid.pane({\r\n                    row: row,\r\n                    column: column,\r\n                    rowCount: rowCount,\r\n                    columnCount: columnCount\r\n                }));\r\n                pane.refresh(this.scroller.clientWidth, this.scroller.clientHeight);\r\n                return pane;\r\n            }\r\n        });\r\n        var paneClassNames = {\r\n            cell: 'k-spreadsheet-cell',\r\n            vaxis: 'k-spreadsheet-vaxis',\r\n            haxis: 'k-spreadsheet-haxis',\r\n            rowHeader: 'k-spreadsheet-row-header',\r\n            columnHeader: 'k-spreadsheet-column-header',\r\n            pane: 'k-spreadsheet-pane',\r\n            data: 'k-spreadsheet-data',\r\n            mergedCell: 'k-spreadsheet-merged-cell',\r\n            mergedCellsWrapper: 'k-merged-cells-wrapper',\r\n            activeCell: 'k-spreadsheet-active-cell',\r\n            selection: 'k-spreadsheet-selection',\r\n            selectionWrapper: 'k-selection-wrapper',\r\n            autoFillWrapper: 'k-auto-fill-wrapper',\r\n            single: 'k-single',\r\n            top: 'k-top',\r\n            right: 'k-right',\r\n            bottom: 'k-bottom',\r\n            left: 'k-left',\r\n            resizeHandle: 'k-resize-handle',\r\n            columnResizeHandle: 'k-column-resize-handle',\r\n            rowResizeHandle: 'k-row-resize-handle',\r\n            resizeHint: 'k-resize-hint',\r\n            resizeHintHandle: 'k-resize-hint-handle',\r\n            resizeHintMarker: 'k-resize-hint-marker',\r\n            resizeHintVertical: 'k-resize-hint-vertical',\r\n            selectionHighlight: 'k-spreadsheet-selection-highlight',\r\n            series: [\r\n                'k-series-a',\r\n                'k-series-b',\r\n                'k-series-c',\r\n                'k-series-d',\r\n                'k-series-e',\r\n                'k-series-f'\r\n            ]\r\n        };\r\n        var Pane = kendo.Class.extend({\r\n            init: function (sheet, grid) {\r\n                this._sheet = sheet;\r\n                this._grid = grid;\r\n            },\r\n            refresh: function (width, height) {\r\n                this._grid.refresh(width, height);\r\n            },\r\n            isVisible: function (scrollLeft, scrollTop, ref) {\r\n                return this._grid.view(scrollLeft, scrollTop).ref.intersects(ref);\r\n            },\r\n            render: function (scrollLeft, scrollTop) {\r\n                var classNames = Pane.classNames;\r\n                var sheet = this._sheet;\r\n                var grid = this._grid;\r\n                var view = grid.view(scrollLeft, scrollTop);\r\n                this._currentView = view;\r\n                this._currentRect = this._rectangle(view.ref);\r\n                this._selectedHeaders = sheet.selectedHeaders();\r\n                var children = [];\r\n                children.push(this.renderData());\r\n                children.push(this.renderSelection());\r\n                children.push(this.renderAutoFill());\r\n                children.push(this.renderEditorSelection());\r\n                children.push(this.renderFilterHeaders());\r\n                if (grid.hasRowHeader) {\r\n                    var rowHeader = kendo.dom.element('div', {\r\n                        className: classNames.rowHeader,\r\n                        style: {\r\n                            width: grid.headerWidth + 'px',\r\n                            top: view.rowOffset + 'px'\r\n                        }\r\n                    });\r\n                    children.push(rowHeader);\r\n                    sheet.forEach(view.ref.leftColumn(), function (row) {\r\n                        if (!sheet.isHiddenRow(row)) {\r\n                            var text = row + 1, height = sheet.rowHeight(row);\r\n                            rowHeader.children.push(kendo.dom.element('div', {\r\n                                className: this.headerClassName(row, 'row'),\r\n                                style: {\r\n                                    width: grid.headerWidth + 'px',\r\n                                    height: height + 'px'\r\n                                }\r\n                            }, [kendo.dom.element('div', { className: 'k-vertical-align-center' }, [kendo.dom.text(text + '')])]));\r\n                        }\r\n                    }.bind(this));\r\n                }\r\n                if (grid.hasColumnHeader) {\r\n                    var columnHeader = kendo.dom.element('div', {\r\n                        className: classNames.columnHeader,\r\n                        style: {\r\n                            top: '0px',\r\n                            left: view.columnOffset + 'px',\r\n                            width: this._currentRect.width + 'px',\r\n                            height: grid.headerHeight + 'px'\r\n                        }\r\n                    });\r\n                    children.push(columnHeader);\r\n                    var left = 0;\r\n                    sheet.forEach(view.ref.topRow(), function (row, col) {\r\n                        if (!sheet.isHiddenColumn(col)) {\r\n                            var text = kendo.spreadsheet.Ref.display(null, Infinity, col), width = sheet.columnWidth(col);\r\n                            columnHeader.children.push(kendo.dom.element('div', {\r\n                                className: this.headerClassName(col, 'col'),\r\n                                style: {\r\n                                    position: 'absolute',\r\n                                    left: left + 'px',\r\n                                    width: width + 'px',\r\n                                    height: grid.headerHeight + 'px'\r\n                                }\r\n                            }, [kendo.dom.element('div', { className: 'k-vertical-align-center' }, [kendo.dom.text(text + '')])]));\r\n                            left += width;\r\n                        }\r\n                    }.bind(this));\r\n                }\r\n                if (sheet.resizeHandlePosition() && (grid.hasColumnHeader || grid.hasRowHeader)) {\r\n                    var ref = sheet._grid.normalize(sheet.resizeHandlePosition());\r\n                    if (view.ref.intersects(ref)) {\r\n                        if (!sheet.resizeHintPosition()) {\r\n                            children.push(this.renderResizeHandle());\r\n                        }\r\n                    }\r\n                }\r\n                var paneClasses = [classNames.pane];\r\n                if (grid.hasColumnHeader) {\r\n                    paneClasses.push(classNames.top);\r\n                }\r\n                if (grid.hasRowHeader) {\r\n                    paneClasses.push(classNames.left);\r\n                }\r\n                return kendo.dom.element('div', {\r\n                    style: grid.style,\r\n                    className: paneClasses.join(' ')\r\n                }, children);\r\n            },\r\n            headerClassName: function (index, type) {\r\n                var selectedHeaders = this._selectedHeaders;\r\n                var itemSelection;\r\n                var allHeaders;\r\n                if (type === 'row') {\r\n                    itemSelection = selectedHeaders.rows[index];\r\n                    allHeaders = selectedHeaders.allRows;\r\n                } else {\r\n                    itemSelection = selectedHeaders.cols[index];\r\n                    allHeaders = selectedHeaders.allCols;\r\n                }\r\n                var className = itemSelection || (selectedHeaders.all ? 'full' : allHeaders ? 'partial' : 'none');\r\n                if (className) {\r\n                    className = 'k-selection-' + className;\r\n                }\r\n                return className;\r\n            },\r\n            renderData: function () {\r\n                var view = this._currentView;\r\n                var cont = kendo.dom.element('div', {\r\n                    className: Pane.classNames.data,\r\n                    style: {\r\n                        position: 'relative',\r\n                        left: view.columnOffset + 'px',\r\n                        top: view.rowOffset + 'px'\r\n                    }\r\n                });\r\n                var rect = this._currentRect;\r\n                var layout = kendo.spreadsheet.draw.doLayout(this._sheet, view.ref, { forScreen: true }), prev;\r\n                var showGridLines = this._sheet._showGridLines;\r\n                if (showGridLines) {\r\n                    prev = null;\r\n                    layout.xCoords.forEach(function (x) {\r\n                        if (x !== prev) {\r\n                            prev = x;\r\n                            cont.children.push(kendo.dom.element('div', {\r\n                                className: paneClassNames.vaxis,\r\n                                style: {\r\n                                    left: x + 'px',\r\n                                    height: rect.height + 'px'\r\n                                }\r\n                            }));\r\n                        }\r\n                    });\r\n                    prev = null;\r\n                    layout.yCoords.forEach(function (y) {\r\n                        if (y !== prev) {\r\n                            prev = y;\r\n                            cont.children.push(kendo.dom.element('div', {\r\n                                className: paneClassNames.haxis,\r\n                                style: {\r\n                                    top: y + 'px',\r\n                                    width: rect.width + 'px'\r\n                                }\r\n                            }));\r\n                        }\r\n                    });\r\n                }\r\n                var vBorders = {}, hBorders = {};\r\n                layout.cells.forEach(function (cell) {\r\n                    var hb = hBorders[cell.col] || (hBorders[cell.col] = {});\r\n                    var vb = vBorders[cell.row] || (vBorders[cell.row] = {});\r\n                    drawCell(cont.children, cell, null, hb, vb, showGridLines);\r\n                });\r\n                return cont;\r\n            },\r\n            renderResizeHandle: function () {\r\n                var sheet = this._sheet;\r\n                var ref = sheet.resizeHandlePosition();\r\n                var rectangle = this._rectangle(ref);\r\n                var classNames = [Pane.classNames.resizeHandle];\r\n                var style;\r\n                if (ref.col !== -Infinity) {\r\n                    style = {\r\n                        height: this._grid.headerHeight + 'px',\r\n                        width: RESIZE_HANDLE_WIDTH + 'px',\r\n                        left: rectangle.right - RESIZE_HANDLE_WIDTH / 2 + 'px',\r\n                        top: '0px'\r\n                    };\r\n                    classNames.push(viewClassNames.horizontalResize);\r\n                } else {\r\n                    style = {\r\n                        height: RESIZE_HANDLE_WIDTH + 'px',\r\n                        width: this._grid.headerWidth + 'px',\r\n                        top: rectangle.bottom - RESIZE_HANDLE_WIDTH / 2 + 'px',\r\n                        left: '0px'\r\n                    };\r\n                    classNames.push(viewClassNames.verticalResize);\r\n                }\r\n                return kendo.dom.element('div', {\r\n                    className: classNames.join(' '),\r\n                    style: style\r\n                });\r\n            },\r\n            filterIconRect: function (rect) {\r\n                var BUTTON_SIZE = 16;\r\n                var BUTTON_OFFSET = 3;\r\n                return new kendo.spreadsheet.Rectangle(rect.right - BUTTON_SIZE - BUTTON_OFFSET, rect.top + BUTTON_OFFSET, BUTTON_SIZE, BUTTON_SIZE);\r\n            },\r\n            renderFilterHeaders: function () {\r\n                var sheet = this._sheet;\r\n                var children = [];\r\n                var classNames = View.classNames;\r\n                var filter = sheet.filter();\r\n                function icon(className) {\r\n                    return kendo.dom.element('span', { className: classNames.icon + ' ' + className });\r\n                }\r\n                function filterButton(classNames, position, index) {\r\n                    var style = {\r\n                        left: position.left + 'px',\r\n                        top: position.top + 'px'\r\n                    };\r\n                    var filtered = filter && filter.columns.some(function (c) {\r\n                        return c.index === index;\r\n                    });\r\n                    var classes = classNames.filterButton;\r\n                    if (filtered) {\r\n                        classes += ' ' + classNames.filterButtonActive;\r\n                    }\r\n                    var button = kendo.dom.element('span', {\r\n                        className: classes,\r\n                        style: style\r\n                    }, [icon(classNames.iconFilterDefault)]);\r\n                    return button;\r\n                }\r\n                if (filter) {\r\n                    this._addDiv(children, filter.ref, classNames.filterRange);\r\n                }\r\n                sheet.forEachFilterHeader(this._currentView.ref, function (ref) {\r\n                    var rect = this._rectangle(ref);\r\n                    var position = this.filterIconRect(rect);\r\n                    var column = this._sheet.filterColumn(ref);\r\n                    var button = filterButton(classNames, position, column);\r\n                    children.push(button);\r\n                }.bind(this));\r\n                return kendo.dom.element('div', { className: classNames.filterHeadersWrapper }, children);\r\n            },\r\n            renderEditorSelection: function () {\r\n                var classNames = Pane.classNames;\r\n                var sheet = this._sheet;\r\n                var selections = [];\r\n                sheet._formulaSelections.forEach(function (range) {\r\n                    var ref = range.ref;\r\n                    if (ref === kendo.spreadsheet.NULLREF) {\r\n                        return;\r\n                    }\r\n                    this._addDiv(selections, ref, classNames.selectionHighlight + ' ' + range.colorClass);\r\n                }.bind(this));\r\n                return kendo.dom.element('div', { className: classNames.selectionWrapper }, selections);\r\n            },\r\n            renderSelection: function () {\r\n                var classNames = Pane.classNames;\r\n                var selections = [];\r\n                var activeCellClasses = [classNames.activeCell];\r\n                var selectionClasses = [classNames.selection];\r\n                var sheet = this._sheet;\r\n                var activeCell = sheet.activeCell().toRangeRef();\r\n                var activeFormulaColor = this._activeFormulaColor();\r\n                var selection = sheet.select();\r\n                activeCellClasses = activeCellClasses.concat(activeFormulaColor, this._directionClasses(activeCell));\r\n                selectionClasses = selectionClasses.concat(activeFormulaColor);\r\n                if (sheet.singleCellSelection()) {\r\n                    activeCellClasses.push(classNames.single);\r\n                }\r\n                if (selection.size() === 1) {\r\n                    selectionClasses.push('k-single-selection');\r\n                }\r\n                if (this._sheet.autoFillPunch()) {\r\n                    selectionClasses.push('k-dim-auto-fill-handle');\r\n                }\r\n                selection.forEach(function (ref) {\r\n                    if (ref !== kendo.spreadsheet.NULLREF) {\r\n                        this._addDiv(selections, ref, selectionClasses.join(' '));\r\n                    }\r\n                }.bind(this));\r\n                this._addTable(selections, activeCell, activeCellClasses.join(' '));\r\n                return kendo.dom.element('div', { className: classNames.selectionWrapper }, selections);\r\n            },\r\n            renderAutoFill: function () {\r\n                var autoFillRectangle = [];\r\n                if (this._sheet.autoFillInProgress()) {\r\n                    var autoFillRef = this._sheet.autoFillRef();\r\n                    var punch = this._sheet.autoFillPunch();\r\n                    var direction = this._sheet._autoFillDirection;\r\n                    this._addDiv(autoFillRectangle, autoFillRef, 'k-auto-fill');\r\n                    if (punch) {\r\n                        this._addDiv(autoFillRectangle, punch, 'k-auto-fill-punch');\r\n                    } else if (direction !== undefined) {\r\n                        var ref, cssClass;\r\n                        switch (direction) {\r\n                        case 0:\r\n                            ref = autoFillRef.bottomRight;\r\n                            cssClass = 'k-auto-fill-br-hint';\r\n                            break;\r\n                        case 1:\r\n                            ref = autoFillRef.bottomRight;\r\n                            cssClass = 'k-auto-fill-br-hint';\r\n                            break;\r\n                        case 2:\r\n                            ref = new CellRef(autoFillRef.topLeft.row, autoFillRef.bottomRight.col);\r\n                            cssClass = 'k-auto-fill-tr-hint';\r\n                            break;\r\n                        case 3:\r\n                            ref = new CellRef(autoFillRef.bottomRight.row, autoFillRef.topLeft.col);\r\n                            cssClass = 'k-auto-fill-bl-hint';\r\n                            break;\r\n                        }\r\n                        var hint = kendo.dom.element('span', { className: 'k-tooltip' }, [kendo.dom.text(this._sheet._autoFillHint)]);\r\n                        var rectangle = this._addDiv(autoFillRectangle, ref, cssClass);\r\n                        if (rectangle) {\r\n                            rectangle.children.push(hint);\r\n                        }\r\n                    }\r\n                }\r\n                return kendo.dom.element('div', { className: Pane.classNames.autoFillWrapper }, autoFillRectangle);\r\n            },\r\n            _addDiv: function (collection, ref, className) {\r\n                var view = this._currentView, div;\r\n                if (view.ref.intersects(ref)) {\r\n                    div = this._rectangle(ref).resize(1, 1).toDiv(className);\r\n                    collection.push(div);\r\n                }\r\n                return div;\r\n            },\r\n            _addTable: function (collection, ref, className) {\r\n                var sheet = this._sheet;\r\n                var view = this._currentView;\r\n                if (view.ref.intersects(ref)) {\r\n                    sheet.forEach(ref.collapse(), function (row, col, cell) {\r\n                        var rectangle = this._rectangle(ref);\r\n                        cell.left = rectangle.left;\r\n                        cell.top = rectangle.top;\r\n                        cell.width = rectangle.width;\r\n                        cell.height = rectangle.height;\r\n                        drawCell(collection, cell, className, null, null, true);\r\n                    }.bind(this));\r\n                }\r\n            },\r\n            _activeFormulaColor: function () {\r\n                var activeFormulaSelection;\r\n                var colorClasses = [];\r\n                if (this._sheet.isInEditMode()) {\r\n                    activeFormulaSelection = this._sheet._formulaSelections.filter(function (sel) {\r\n                        return sel.active && sel.type == 'ref';\r\n                    })[0];\r\n                    if (activeFormulaSelection) {\r\n                        colorClasses.push(activeFormulaSelection.colorClass);\r\n                    }\r\n                }\r\n                return colorClasses;\r\n            },\r\n            _directionClasses: function (cell) {\r\n                var cellClasses = [];\r\n                var classNames = Pane.classNames;\r\n                var view = this._currentView.ref;\r\n                if (!cell.move(0, -1).intersects(view)) {\r\n                    cellClasses.push(classNames.left);\r\n                }\r\n                if (!cell.move(-1, 0).intersects(view)) {\r\n                    cellClasses.push(classNames.top);\r\n                }\r\n                if (!cell.move(0, 1).intersects(view)) {\r\n                    cellClasses.push(classNames.right);\r\n                }\r\n                if (!cell.move(1, 0).intersects(view)) {\r\n                    cellClasses.push(classNames.bottom);\r\n                }\r\n                return cellClasses;\r\n            },\r\n            _rectangle: function (ref) {\r\n                return this._grid.boundingRectangle(ref.toRangeRef()).offset(-this._currentView.mergedCellLeft, -this._currentView.mergedCellTop);\r\n            }\r\n        });\r\n        kendo.spreadsheet.View = View;\r\n        kendo.spreadsheet.Pane = Pane;\r\n        kendo.spreadsheet.drawCell = drawCell;\r\n        $.extend(true, View, { classNames: viewClassNames });\r\n        $.extend(true, Pane, { classNames: paneClassNames });\r\n    }(window.kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/grid', [\r\n        'kendo.core',\r\n        'spreadsheet/references'\r\n    ], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var CellRef = kendo.spreadsheet.CellRef;\r\n        var RangeRef = kendo.spreadsheet.RangeRef;\r\n        var UnionRef = kendo.spreadsheet.UnionRef;\r\n        var Rectangle = kendo.Class.extend({\r\n            init: function (left, top, width, height) {\r\n                this.left = left;\r\n                this.width = width;\r\n                this.right = left + width;\r\n                this.top = top;\r\n                this.height = height;\r\n                this.bottom = top + height;\r\n            },\r\n            offset: function (left, top) {\r\n                return new Rectangle(this.left + left, this.top + top, this.width, this.height);\r\n            },\r\n            resize: function (width, height) {\r\n                return new Rectangle(this.left, this.top, this.width + width, this.height + height);\r\n            },\r\n            intersects: function (x, y) {\r\n                return this.left < x && x < this.left + this.width && this.top < y && y < this.top + this.height;\r\n            },\r\n            toDiv: function (className) {\r\n                return kendo.dom.element('div', {\r\n                    className: className,\r\n                    style: {\r\n                        width: this.width + 'px',\r\n                        height: this.height + 'px',\r\n                        top: this.top + 'px',\r\n                        left: this.left + 'px'\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        var Grid = kendo.Class.extend({\r\n            init: function (rows, columns, rowCount, columnCount, headerHeight, headerWidth) {\r\n                this.rowCount = rowCount;\r\n                this.columnCount = columnCount;\r\n                this._columns = columns;\r\n                this._rows = rows;\r\n                this._headerHeight = headerHeight;\r\n                this._headerWidth = headerWidth;\r\n            },\r\n            isAxis: function (ref) {\r\n                ref = ref.toRangeRef();\r\n                var topLeft = ref.topLeft;\r\n                var bottomRight = ref.bottomRight;\r\n                return topLeft.row === 0 && bottomRight.row === this.rowCount - 1 || topLeft.col === 0 && bottomRight.col === this.columnCount - 1;\r\n            },\r\n            width: function (start, end) {\r\n                return this._columns.sum(start, end);\r\n            },\r\n            height: function (start, end) {\r\n                return this._rows.sum(start, end);\r\n            },\r\n            totalHeight: function () {\r\n                return this._rows.total + this._headerHeight;\r\n            },\r\n            totalWidth: function () {\r\n                return this._columns.total + this._headerWidth;\r\n            },\r\n            index: function (row, column) {\r\n                return column * this.rowCount + row;\r\n            },\r\n            cellRef: function (index) {\r\n                return new CellRef(index % this.rowCount, index / this.rowCount >> 0);\r\n            },\r\n            rowRef: function (row) {\r\n                return new RangeRef(new CellRef(row, 0), new CellRef(row, this.columnCount - 1));\r\n            },\r\n            colRef: function (col) {\r\n                return new RangeRef(new CellRef(0, col), new CellRef(this.rowCount - 1, col));\r\n            },\r\n            cellRefIndex: function (ref) {\r\n                return this.index(ref.row, ref.col);\r\n            },\r\n            normalize: function (ref) {\r\n                if (ref instanceof RangeRef) {\r\n                    return new RangeRef(this.normalize(ref.topLeft), this.normalize(ref.bottomRight)).setSheet(ref.sheet, ref.hasSheet());\r\n                }\r\n                if (ref instanceof UnionRef) {\r\n                    return ref.map(function (ref) {\r\n                        return this.normalize(ref);\r\n                    }, this);\r\n                }\r\n                var clone = ref.clone();\r\n                clone.col = Math.max(0, Math.min(this.columnCount - 1, ref.col));\r\n                clone.row = Math.max(0, Math.min(this.rowCount - 1, ref.row));\r\n                return clone;\r\n            },\r\n            rectangle: function (ref) {\r\n                var topLeft = this.normalize(ref.topLeft);\r\n                var bottomRight = this.normalize(ref.bottomRight);\r\n                return new Rectangle(this.width(0, topLeft.col - 1), this.height(0, topLeft.row - 1), this.width(topLeft.col, bottomRight.col), this.height(topLeft.row, bottomRight.row));\r\n            },\r\n            pane: function (options) {\r\n                return new PaneGrid(new kendo.spreadsheet.PaneAxis(this._rows, options.row, options.rowCount, this._headerHeight), new kendo.spreadsheet.PaneAxis(this._columns, options.column, options.columnCount, this._headerWidth), this);\r\n            },\r\n            rangeDimensions: function (rangeRef) {\r\n                return {\r\n                    rows: this._rows.values.iterator(rangeRef.topLeft.row, rangeRef.bottomRight.row),\r\n                    columns: this._columns.values.iterator(rangeRef.topLeft.col, rangeRef.bottomRight.col)\r\n                };\r\n            },\r\n            forEach: function (ref, callback) {\r\n                var topLeft = this.normalize(ref.topLeft);\r\n                var bottomRight = this.normalize(ref.bottomRight);\r\n                for (var ci = topLeft.col; ci <= bottomRight.col; ci++) {\r\n                    for (var ri = topLeft.row; ri <= bottomRight.row; ri++) {\r\n                        callback(new CellRef(ri, ci));\r\n                    }\r\n                }\r\n            },\r\n            trim: function (ref, property) {\r\n                var topLeft = ref.topLeft;\r\n                var bottomRight = ref.bottomRight;\r\n                var bottomRightRow = topLeft.row;\r\n                var bottomRightCol = topLeft.col;\r\n                for (var ci = topLeft.col; ci <= bottomRight.col; ci++) {\r\n                    var start = this.index(topLeft.row, ci);\r\n                    var end = this.index(bottomRight.row, ci);\r\n                    var values = property.tree.intersecting(start, end);\r\n                    if (values.length) {\r\n                        var cell = this.cellRef(values[values.length - 1].end);\r\n                        bottomRightRow = Math.max(bottomRightRow, cell.row);\r\n                        bottomRightCol = ci;\r\n                    }\r\n                }\r\n                return new RangeRef(ref.topLeft, new CellRef(Math.min(bottomRightRow, ref.bottomRight.row), bottomRightCol));\r\n            }\r\n        });\r\n        var PaneGrid = kendo.Class.extend({\r\n            init: function (rows, columns, grid) {\r\n                this.rows = rows;\r\n                this.columns = columns;\r\n                this._grid = grid;\r\n                this.headerHeight = rows.headerSize;\r\n                this.headerWidth = columns.headerSize;\r\n                this.hasRowHeader = columns.hasHeader;\r\n                this.hasColumnHeader = rows.hasHeader;\r\n            },\r\n            refresh: function (width, height) {\r\n                this.columns.viewSize(width);\r\n                this.rows.viewSize(height);\r\n                var x = this.columns.paneSegment();\r\n                var y = this.rows.paneSegment();\r\n                this.left = x.offset;\r\n                this.top = y.offset;\r\n                this.right = x.offset + x.length;\r\n                this.bottom = y.offset + y.length;\r\n                this.style = {\r\n                    top: y.offset + 'px',\r\n                    left: x.offset + 'px',\r\n                    height: y.length + 'px',\r\n                    width: x.length + 'px'\r\n                };\r\n            },\r\n            view: function (left, top) {\r\n                var rows = this.rows.visible(top);\r\n                var columns = this.columns.visible(left);\r\n                return {\r\n                    rows: rows,\r\n                    columns: columns,\r\n                    rowOffset: rows.offset,\r\n                    columnOffset: columns.offset,\r\n                    mergedCellLeft: columns.start,\r\n                    mergedCellTop: rows.start,\r\n                    ref: new RangeRef(new CellRef(rows.values.start, columns.values.start), new CellRef(rows.values.end, columns.values.end))\r\n                };\r\n            },\r\n            contains: function (ref) {\r\n                return this.rows.contains(ref.topLeft.row, ref.bottomRight.row) && this.columns.contains(ref.topLeft.col, ref.bottomRight.col);\r\n            },\r\n            index: function (row, column) {\r\n                return this._grid.index(row, column);\r\n            },\r\n            boundingRectangle: function (ref) {\r\n                return this._grid.rectangle(ref);\r\n            },\r\n            cellRefIndex: function (ref) {\r\n                return this._grid.cellRefIndex(ref);\r\n            },\r\n            scrollBoundaries: function (cell) {\r\n                var position = this.boundingRectangle(cell);\r\n                var boundaries = {\r\n                    top: Math.max(0, position.top - this.top + (this.hasColumnHeader ? 0 : this.headerHeight)),\r\n                    left: Math.max(0, position.left - this.left + (this.hasRowHeader ? 0 : this.headerWidth)),\r\n                    right: position.right - this.columns._viewSize + this.headerWidth,\r\n                    bottom: position.bottom - this.rows._viewSize + this.headerHeight\r\n                };\r\n                var widthCompensation = this.columns.defaultValue / 2;\r\n                var heightCompensation = this.rows.defaultValue / 2;\r\n                boundaries.scrollTop = boundaries.top - heightCompensation;\r\n                boundaries.scrollBottom = boundaries.bottom + heightCompensation;\r\n                boundaries.scrollLeft = boundaries.left - widthCompensation;\r\n                boundaries.scrollRight = boundaries.right + widthCompensation;\r\n                return boundaries;\r\n            }\r\n        });\r\n        kendo.spreadsheet.Grid = Grid;\r\n        kendo.spreadsheet.PaneGrid = PaneGrid;\r\n        kendo.spreadsheet.Rectangle = Rectangle;\r\n    }(kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/axis', ['kendo.core'], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var Axis = kendo.Class.extend({\r\n            init: function (count, value) {\r\n                this._value = value;\r\n                this._count = count;\r\n                this.values = new kendo.spreadsheet.RangeList(0, count - 1, value);\r\n                this._hidden = new kendo.spreadsheet.RangeList(0, count - 1, 0);\r\n                this.scrollBarSize = kendo.support.scrollbar();\r\n                this._refresh();\r\n            },\r\n            adjust: function (start, delta) {\r\n                if (delta < 0) {\r\n                    this.values.copy(start - delta, this._count - 1, start);\r\n                    this._hidden.copy(start - delta, this._count - 1, start);\r\n                } else {\r\n                    this.values.copy(start, this._count, start + delta);\r\n                    this._hidden.copy(start, this._count, start + delta);\r\n                    this.values.value(start, start + delta - 1, this._value);\r\n                    this._hidden.value(start, start + delta - 1, 0);\r\n                }\r\n            },\r\n            toJSON: function (field, positions) {\r\n                var values = [];\r\n                var iterator = this.values.iterator(0, this._count - 1);\r\n                for (var idx = 0; idx < this._count; idx++) {\r\n                    var value = iterator.at(idx);\r\n                    if (value === this._value) {\r\n                        continue;\r\n                    }\r\n                    var position = positions[idx];\r\n                    if (position === undefined) {\r\n                        position = values.length;\r\n                        var item = { index: idx };\r\n                        item[field] = value;\r\n                        values.push(item);\r\n                        positions[idx] = position;\r\n                    }\r\n                }\r\n                return values;\r\n            },\r\n            fromJSON: function (field, values) {\r\n                for (var idx = 0; idx < values.length; idx++) {\r\n                    var value = values[idx][field];\r\n                    var index = values[idx].index;\r\n                    if (index === undefined) {\r\n                        index = idx;\r\n                    }\r\n                    this.value(index, index, value);\r\n                }\r\n            },\r\n            hide: function (index) {\r\n                if (!this.hidden(index)) {\r\n                    var value = this.value(index, index);\r\n                    this._hidden.value(index, index, value);\r\n                    this.value(index, index, 0);\r\n                }\r\n            },\r\n            hidden: function (index) {\r\n                return this._hidden.value(index, index) !== 0;\r\n            },\r\n            includesHidden: function (start, end) {\r\n                return this._hidden.intersecting(start, end).length > 1;\r\n            },\r\n            nextVisible: function (index, overflow) {\r\n                var end = this._count - 1;\r\n                if (index === end) {\r\n                    return overflow ? index + 1 : index;\r\n                }\r\n                index += 1;\r\n                var range = this._hidden.intersecting(index, index)[0];\r\n                if (range.value !== 0) {\r\n                    if (range.end === end) {\r\n                        return index - 1;\r\n                    } else {\r\n                        return range.end + 1;\r\n                    }\r\n                } else {\r\n                    return index;\r\n                }\r\n            },\r\n            nextPage: function (index, pageSize) {\r\n                return this.index(this.sum(0, index - 1) + pageSize);\r\n            },\r\n            prevPage: function (index, pageSize) {\r\n                return this.index(this.sum(0, index) - pageSize);\r\n            },\r\n            firstVisible: function () {\r\n                var firstHidden = this._hidden.first();\r\n                if (firstHidden.value === 0) {\r\n                    return 0;\r\n                } else {\r\n                    return firstHidden.end + 1;\r\n                }\r\n            },\r\n            lastVisible: function () {\r\n                var lastHidden = this._hidden.last();\r\n                if (lastHidden.value === 0) {\r\n                    return this._count - 1;\r\n                } else {\r\n                    return lastHidden.start - 1;\r\n                }\r\n            },\r\n            prevVisible: function (index, overflow) {\r\n                if (index === 0) {\r\n                    return overflow ? -1 : 0;\r\n                }\r\n                index -= 1;\r\n                var range = this._hidden.intersecting(index, index)[0];\r\n                if (range.value !== 0) {\r\n                    if (range.start === 0) {\r\n                        return index + 1;\r\n                    } else {\r\n                        return range.start - 1;\r\n                    }\r\n                } else {\r\n                    return index;\r\n                }\r\n            },\r\n            unhide: function (index) {\r\n                if (this.hidden(index)) {\r\n                    var value = this._hidden.value(index, index);\r\n                    this._hidden.value(index, index, 0);\r\n                    this.value(index, index, value);\r\n                }\r\n            },\r\n            value: function (start, end, value) {\r\n                if (value !== undefined) {\r\n                    this.values.value(start, end, value);\r\n                    this._refresh();\r\n                } else {\r\n                    return this.values.iterator(start, end).at(0);\r\n                }\r\n            },\r\n            sum: function (start, end) {\r\n                var values = this.values.iterator(start, end);\r\n                var sum = 0;\r\n                for (var idx = start; idx <= end; idx++) {\r\n                    sum += values.at(idx);\r\n                }\r\n                return sum;\r\n            },\r\n            visible: function (start, end) {\r\n                var startSegment = null;\r\n                var endSegment = null;\r\n                var lastPage = false;\r\n                if (end >= this.total + this.scrollBarSize) {\r\n                    lastPage = true;\r\n                }\r\n                var ranges = this._pixelValues.intersecting(start, end);\r\n                startSegment = ranges[0];\r\n                endSegment = ranges[ranges.length - 1];\r\n                if (!startSegment) {\r\n                    return {\r\n                        values: this.values.iterator(0, 0),\r\n                        offset: 0\r\n                    };\r\n                }\r\n                var startOffset = start - startSegment.start;\r\n                var startIndex = (startOffset / startSegment.value.value >> 0) + startSegment.value.start;\r\n                var offset = startOffset - (startIndex - startSegment.value.start) * startSegment.value.value;\r\n                var endOffset = end - endSegment.start;\r\n                var endIndex = (endOffset / endSegment.value.value >> 0) + endSegment.value.start;\r\n                if (endIndex > endSegment.value.end) {\r\n                    endIndex = endSegment.value.end;\r\n                }\r\n                if (lastPage) {\r\n                    offset += endSegment.value.value - (endOffset - (endIndex - endSegment.value.start) * endSegment.value.value);\r\n                }\r\n                offset = Math.min(-offset, 0);\r\n                return {\r\n                    values: this.values.iterator(startIndex, endIndex),\r\n                    offset: offset\r\n                };\r\n            },\r\n            index: function (value) {\r\n                var index = 0;\r\n                var iterator = this.values.iterator(0, this._count - 1);\r\n                var current = iterator.at(0);\r\n                while (current < value && index < this._count - 1) {\r\n                    current += iterator.at(++index);\r\n                }\r\n                return index;\r\n            },\r\n            _refresh: function () {\r\n                var current = 0;\r\n                this._pixelValues = this.values.map(function (range) {\r\n                    var start = current;\r\n                    current += (range.end - range.start + 1) * range.value;\r\n                    var end = current - 1;\r\n                    return new kendo.spreadsheet.ValueRange(start, end, range);\r\n                });\r\n                this.total = current;\r\n            },\r\n            getState: function () {\r\n                return {\r\n                    values: this.values.getState(),\r\n                    hidden: this._hidden.getState()\r\n                };\r\n            },\r\n            setState: function (state) {\r\n                this.values.setState(state.values);\r\n                this._hidden.setState(state.hidden);\r\n                this._refresh();\r\n            }\r\n        });\r\n        var PaneAxis = kendo.Class.extend({\r\n            init: function (axis, start, count, headerSize) {\r\n                this._axis = axis;\r\n                this._start = start;\r\n                this._count = count;\r\n                this.hasHeader = start === 0;\r\n                this.headerSize = headerSize;\r\n                this.defaultValue = axis._value;\r\n                this.frozen = count > 0;\r\n            },\r\n            viewSize: function (viewSize) {\r\n                this._viewSize = viewSize;\r\n            },\r\n            sum: function (start, end) {\r\n                return this._axis.sum(start, end - 1);\r\n            },\r\n            start: function () {\r\n                return this.sum(0, this._start);\r\n            },\r\n            size: function () {\r\n                return this.sum(this._start, this._start + this._count);\r\n            },\r\n            index: function (value, offset) {\r\n                return this._axis.index(value + (this.frozen ? 0 : offset) - this.headerSize);\r\n            },\r\n            paneSegment: function () {\r\n                var offset = this.start();\r\n                var length;\r\n                if (!this.hasHeader) {\r\n                    offset += this.headerSize;\r\n                }\r\n                if (this.frozen) {\r\n                    length = this.size();\r\n                    if (this.hasHeader) {\r\n                        length += this.headerSize;\r\n                    } else {\r\n                        length -= this.headerSize;\r\n                    }\r\n                } else {\r\n                    length = this._viewSize - offset;\r\n                }\r\n                return {\r\n                    offset: offset,\r\n                    length: length\r\n                };\r\n            },\r\n            visible: function (offset) {\r\n                var start = this.start();\r\n                var size;\r\n                if (this.frozen) {\r\n                    size = this.size();\r\n                    if (!this.hasHeader) {\r\n                        size -= this.headerSize;\r\n                    }\r\n                } else {\r\n                    size = this._viewSize - start - this.headerSize;\r\n                    start += offset;\r\n                }\r\n                var result = this._axis.visible(start, start + size - 1);\r\n                if (this.frozen) {\r\n                    result.offset = 0;\r\n                }\r\n                result.start = start;\r\n                if (this.hasHeader) {\r\n                    result.offset += this.headerSize;\r\n                    result.start -= this.headerSize;\r\n                }\r\n                return result;\r\n            },\r\n            contains: function (start, end) {\r\n                if (this.frozen) {\r\n                    if (start > this._start + this._count) {\r\n                        return false;\r\n                    }\r\n                    if (end < this._start) {\r\n                        return false;\r\n                    }\r\n                    return true;\r\n                } else {\r\n                    return end >= this._start;\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.Axis = Axis;\r\n        kendo.spreadsheet.PaneAxis = PaneAxis;\r\n    }(kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/filter', [\r\n        'kendo.core',\r\n        'kendo.data'\r\n    ], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var Filter = kendo.spreadsheet.Filter = kendo.Class.extend({\r\n            prepare: function () {\r\n            },\r\n            value: function (cell) {\r\n                return cell.value;\r\n            },\r\n            matches: function () {\r\n                throw new Error('The \\'matches\\' method is not implemented.');\r\n            },\r\n            toJSON: function () {\r\n                throw new Error('The \\'toJSON\\' method is not implemented.');\r\n            }\r\n        });\r\n        Filter.create = function (options) {\r\n            var filter = options.filter;\r\n            if (!filter) {\r\n                throw new Error('Filter type not specified.');\r\n            }\r\n            var constructor = kendo.spreadsheet[filter.charAt(0).toUpperCase() + filter.substring(1) + 'Filter'];\r\n            if (!constructor) {\r\n                throw new Error('Filter type not recognized.');\r\n            }\r\n            return new constructor(options);\r\n        };\r\n        kendo.spreadsheet.ValueFilter = Filter.extend({\r\n            _values: [],\r\n            _dates: [],\r\n            _blanks: false,\r\n            init: function (options) {\r\n                if (options.values !== undefined) {\r\n                    this._values = options.values;\r\n                }\r\n                if (options.blanks !== undefined) {\r\n                    this._blanks = options.blanks;\r\n                }\r\n                if (options.dates !== undefined) {\r\n                    this._dates = options.dates;\r\n                }\r\n            },\r\n            value: function (cell) {\r\n                var value = cell.value;\r\n                if (this._dates.length > 0 && cell.format && typeof value === 'number') {\r\n                    var type = kendo.spreadsheet.formatting.type(value, cell.format);\r\n                    if (type === 'date') {\r\n                        value = kendo.spreadsheet.numberToDate(value);\r\n                    }\r\n                }\r\n                return value;\r\n            },\r\n            matches: function (value) {\r\n                if (value === null || value === undefined) {\r\n                    return this._blanks;\r\n                }\r\n                if (value instanceof Date) {\r\n                    return this._dates.some(function (date) {\r\n                        return date.year === value.getFullYear() && (date.month === undefined || date.month === value.getMonth()) && (date.day === undefined || date.day === value.getDate()) && (date.hours === undefined || date.hours === value.getHours()) && (date.minutes === undefined || date.minutes === value.getMinutes()) && (date.seconds === undefined || date.seconds === value.getSeconds());\r\n                    });\r\n                }\r\n                return this._values.indexOf(value) >= 0;\r\n            },\r\n            toJSON: function () {\r\n                return {\r\n                    filter: 'value',\r\n                    values: this._values.slice(0)\r\n                };\r\n            }\r\n        });\r\n        kendo.spreadsheet.CustomFilter = Filter.extend({\r\n            _logic: 'and',\r\n            init: function (options) {\r\n                if (options.logic !== undefined) {\r\n                    this._logic = options.logic;\r\n                }\r\n                if (options.criteria === undefined) {\r\n                    throw new Error('Must specify criteria.');\r\n                }\r\n                this._criteria = options.criteria;\r\n                var expression = kendo.data.Query.filterExpr({\r\n                    logic: this._logic,\r\n                    filters: this._criteria\r\n                }).expression;\r\n                this._matches = new Function('d', 'return ' + expression);\r\n            },\r\n            matches: function (value) {\r\n                if (value === null) {\r\n                    return false;\r\n                }\r\n                return this._matches(value);\r\n            },\r\n            value: function (cell) {\r\n                var value = cell.value;\r\n                var criterionValue = this._criteria[0].value;\r\n                var criterionType = criterionValue instanceof Date ? 'date' : typeof criterionValue;\r\n                var valueType = typeof value;\r\n                if (cell.format) {\r\n                    valueType = kendo.spreadsheet.formatting.type(value, cell.format);\r\n                }\r\n                if (valueType != criterionType) {\r\n                    if (criterionType == 'string') {\r\n                        if (cell.format) {\r\n                            value = kendo.spreadsheet.formatting.text(value, cell.format);\r\n                        }\r\n                        value = value + '';\r\n                    }\r\n                } else if (valueType == 'date') {\r\n                    value = kendo.spreadsheet.numberToDate(value);\r\n                }\r\n                return value;\r\n            },\r\n            toJSON: function () {\r\n                return {\r\n                    filter: 'custom',\r\n                    logic: this._logic,\r\n                    criteria: this._criteria\r\n                };\r\n            }\r\n        });\r\n        kendo.spreadsheet.TopFilter = Filter.extend({\r\n            init: function (options) {\r\n                this._type = options.type;\r\n                this._value = options.value;\r\n                this._values = [];\r\n            },\r\n            prepare: function (cells) {\r\n                var values = cells.map(this.value).sort().filter(function (value, index, array) {\r\n                    return index === 0 || value !== array[index - 1];\r\n                });\r\n                if (this._type === 'topNumber' || this._type == 'topPercent') {\r\n                    values.sort(function (x, y) {\r\n                        return y - x;\r\n                    });\r\n                } else {\r\n                    values.sort(function (x, y) {\r\n                        return x - y;\r\n                    });\r\n                }\r\n                var count = this._value;\r\n                if (this._type === 'topPercent' || this._type === 'bottomPercent') {\r\n                    count = values.length * count / 100 >> 0;\r\n                }\r\n                this._values = values.slice(0, count);\r\n            },\r\n            matches: function (value) {\r\n                return this._values.indexOf(value) >= 0;\r\n            },\r\n            toJSON: function () {\r\n                return {\r\n                    filter: 'top',\r\n                    type: this._type,\r\n                    value: this._value\r\n                };\r\n            }\r\n        });\r\n        kendo.spreadsheet.DynamicFilter = Filter.extend({\r\n            init: function (options) {\r\n                this._type = options.type;\r\n                this._predicate = this[options.type];\r\n                if (typeof this._predicate !== 'function') {\r\n                    throw new Error('DynamicFilter type \\'' + options.type + '\\' not recognized.');\r\n                }\r\n            },\r\n            value: function (cell) {\r\n                var value = cell.value;\r\n                if (cell.format) {\r\n                    var type = kendo.spreadsheet.formatting.type(value, cell.format);\r\n                    if (type === 'date') {\r\n                        value = kendo.spreadsheet.numberToDate(value);\r\n                    }\r\n                }\r\n                return value;\r\n            },\r\n            prepare: function (cells) {\r\n                var sum = 0;\r\n                var count = 0;\r\n                for (var ci = 0; ci < cells.length; ci++) {\r\n                    var value = this.value(cells[ci]);\r\n                    if (typeof value === 'number') {\r\n                        sum += value;\r\n                        count++;\r\n                    }\r\n                }\r\n                if (count > 0) {\r\n                    this._average = sum / count;\r\n                } else {\r\n                    this._average = 0;\r\n                }\r\n            },\r\n            matches: function (value) {\r\n                return this._predicate(value);\r\n            },\r\n            aboveAverage: function (value) {\r\n                if (value instanceof Date) {\r\n                    value = kendo.spreadsheet.dateToNumber(value);\r\n                }\r\n                if (typeof value !== 'number') {\r\n                    return false;\r\n                }\r\n                return value > this._average;\r\n            },\r\n            belowAverage: function (value) {\r\n                if (value instanceof Date) {\r\n                    value = kendo.spreadsheet.dateToNumber(value);\r\n                }\r\n                if (typeof value !== 'number') {\r\n                    return false;\r\n                }\r\n                return value < this._average;\r\n            },\r\n            tomorrow: function (value) {\r\n                if (value instanceof Date) {\r\n                    var tomorrow = kendo.date.addDays(kendo.date.today(), 1);\r\n                    return kendo.date.getDate(value).getTime() === tomorrow.getTime();\r\n                }\r\n                return false;\r\n            },\r\n            today: function (value) {\r\n                if (value instanceof Date) {\r\n                    return kendo.date.isToday(value);\r\n                }\r\n                return false;\r\n            },\r\n            yesterday: function (value) {\r\n                if (value instanceof Date) {\r\n                    var yesterday = kendo.date.addDays(kendo.date.today(), -1);\r\n                    return kendo.date.getDate(value).getTime() === yesterday.getTime();\r\n                }\r\n                return false;\r\n            },\r\n            nextWeek: function (value) {\r\n                return sameWeek(kendo.date.addDays(kendo.date.today(), 7), value);\r\n            },\r\n            thisWeek: function (value) {\r\n                return sameWeek(kendo.date.today(), value);\r\n            },\r\n            lastWeek: function (value) {\r\n                return sameWeek(kendo.date.addDays(kendo.date.today(), -7), value);\r\n            },\r\n            nextMonth: function (value) {\r\n                return sameMonth(value, 1);\r\n            },\r\n            thisMonth: function (value) {\r\n                return sameMonth(value, 0);\r\n            },\r\n            lastMonth: function (value) {\r\n                return sameMonth(value, -1);\r\n            },\r\n            nextQuarter: function (value) {\r\n                if (value instanceof Date) {\r\n                    var today = kendo.date.today();\r\n                    var diff = quarter(value) - quarter(today);\r\n                    return diff === 1 && today.getFullYear() === value.getFullYear() || diff == -3 && today.getFullYear() + 1 === value.getFullYear();\r\n                }\r\n                return false;\r\n            },\r\n            thisQuarter: function (value) {\r\n                if (value instanceof Date) {\r\n                    var today = kendo.date.today();\r\n                    var diff = quarter(value) - quarter(today);\r\n                    return diff === 0 && today.getFullYear() === value.getFullYear();\r\n                }\r\n                return false;\r\n            },\r\n            lastQuarter: function (value) {\r\n                if (value instanceof Date) {\r\n                    var today = kendo.date.today();\r\n                    var diff = quarter(today) - quarter(value);\r\n                    return diff === 1 && today.getFullYear() === value.getFullYear() || diff == -3 && today.getFullYear() - 1 === value.getFullYear();\r\n                }\r\n                return false;\r\n            },\r\n            nextYear: function (value) {\r\n                return sameYear(value, 1);\r\n            },\r\n            thisYear: function (value) {\r\n                return sameYear(value, 0);\r\n            },\r\n            lastYear: function (value) {\r\n                return sameYear(value, -1);\r\n            },\r\n            yearToDate: function (value) {\r\n                if (value instanceof Date) {\r\n                    var today = kendo.date.today();\r\n                    return value.getFullYear() === today.getFullYear() && value <= today;\r\n                }\r\n                return false;\r\n            },\r\n            toJSON: function () {\r\n                return {\r\n                    filter: 'dynamic',\r\n                    type: this._type\r\n                };\r\n            }\r\n        });\r\n        [\r\n            1,\r\n            2,\r\n            3,\r\n            4\r\n        ].forEach(function (target) {\r\n            kendo.spreadsheet.DynamicFilter.prototype['quarter' + target] = function (value) {\r\n                if (value instanceof Date) {\r\n                    return quarter(value) === target;\r\n                }\r\n                return false;\r\n            };\r\n        });\r\n        kendo.cultures['en-US'].calendar.months.names.forEach(function (month, index) {\r\n            kendo.spreadsheet.DynamicFilter.prototype[month.toLowerCase()] = function (value) {\r\n                if (value instanceof Date) {\r\n                    return value.getMonth() === index;\r\n                }\r\n                return false;\r\n            };\r\n        });\r\n        function quarter(value) {\r\n            var month = value.getMonth() + 1;\r\n            if (month >= 1 && month <= 3) {\r\n                return 1;\r\n            } else if (month >= 4 && month <= 6) {\r\n                return 2;\r\n            } else if (month >= 7 && month <= 9) {\r\n                return 3;\r\n            } else {\r\n                return 4;\r\n            }\r\n        }\r\n        function sameYear(value, offset) {\r\n            if (value instanceof Date) {\r\n                var today = kendo.date.today();\r\n                today.setFullYear(today.getFullYear() + offset);\r\n                return today.getFullYear() === value.getFullYear();\r\n            }\r\n            return false;\r\n        }\r\n        function sameMonth(value, offset) {\r\n            if (value instanceof Date) {\r\n                var today = kendo.date.firstDayOfMonth(kendo.date.today());\r\n                today.setMonth(today.getMonth() + offset, 1);\r\n                return today.getTime() === kendo.date.firstDayOfMonth(value).getTime();\r\n            }\r\n            return false;\r\n        }\r\n        function sameWeek(a, b) {\r\n            if (b instanceof Date) {\r\n                var firstWeek = kendo.date.dayOfWeek(kendo.date.getDate(a), 1);\r\n                var secondWeek = kendo.date.dayOfWeek(kendo.date.getDate(b), 1);\r\n                return firstWeek.getTime() === secondWeek.getTime();\r\n            }\r\n            return false;\r\n        }\r\n    }(kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/sorter', ['kendo.core'], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var Sorter = kendo.Class.extend({\r\n            init: function (grid, lists) {\r\n                this._grid = grid;\r\n                this._lists = lists;\r\n            },\r\n            indices: function (rangeRef, list, ascending, indices) {\r\n                var comparer = Sorter.ascendingComparer;\r\n                if (ascending === false) {\r\n                    comparer = Sorter.descendingComparer;\r\n                }\r\n                return list.sortedIndices(this._grid.cellRefIndex(rangeRef.topLeft), this._grid.cellRefIndex(rangeRef.bottomRight), comparer, indices);\r\n            },\r\n            sortBy: function (ref, column, list, ascending, indices) {\r\n                var sortedIndices = this.indices(ref.toColumn(column), list, ascending, indices);\r\n                for (var ci = ref.topLeft.col; ci <= ref.bottomRight.col; ci++) {\r\n                    var start = this._grid.index(ref.topLeft.row, ci);\r\n                    var end = this._grid.index(ref.bottomRight.row, ci);\r\n                    for (var li = 0; li < this._lists.length; li++) {\r\n                        if (start < this._lists[li].lastRangeStart()) {\r\n                            this._lists[li].sort(start, end, sortedIndices);\r\n                        }\r\n                    }\r\n                }\r\n                return sortedIndices;\r\n            }\r\n        });\r\n        Sorter.ascendingComparer = function (a, b) {\r\n            if (a === null && b === null) {\r\n                return 0;\r\n            }\r\n            if (a === null) {\r\n                return 1;\r\n            }\r\n            if (b === null) {\r\n                return -1;\r\n            }\r\n            var typeA = typeof a;\r\n            var typeB = typeof b;\r\n            if (typeA === 'number') {\r\n                if (typeB === 'number') {\r\n                    return a - b;\r\n                } else {\r\n                    return -1;\r\n                }\r\n            }\r\n            if (typeA === 'string') {\r\n                switch (typeB) {\r\n                case 'number':\r\n                    return 1;\r\n                case 'string':\r\n                    return a.localeCompare(b);\r\n                default:\r\n                    return -1;\r\n                }\r\n            }\r\n            if (typeA === 'boolean') {\r\n                switch (typeB) {\r\n                case 'number':\r\n                    return 1;\r\n                case 'string':\r\n                    return 1;\r\n                case 'boolean':\r\n                    return a - b;\r\n                default:\r\n                    return -1;\r\n                }\r\n            }\r\n            if (a instanceof kendo.spreadsheet.calc.runtime.CalcError) {\r\n                if (b instanceof kendo.spreadsheet.calc.runtime.CalcError) {\r\n                    return 0;\r\n                } else {\r\n                    return 1;\r\n                }\r\n            }\r\n            throw new Error('Cannot compare ' + a + ' and ' + b);\r\n        };\r\n        Sorter.descendingComparer = function (a, b) {\r\n            if (a === null && b === null) {\r\n                return 0;\r\n            }\r\n            if (a === null) {\r\n                return 1;\r\n            }\r\n            if (b === null) {\r\n                return -1;\r\n            }\r\n            return Sorter.ascendingComparer(b, a);\r\n        };\r\n        kendo.spreadsheet.Sorter = Sorter;\r\n    }(kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/numformat', [\r\n        'spreadsheet/calc',\r\n        'kendo.dom'\r\n    ], f);\r\n}(function () {\r\n    'use strict';\r\n    if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n        return;\r\n    }\r\n    var calc = kendo.spreadsheet.calc;\r\n    var dom = kendo.dom;\r\n    var RX_COLORS = /^\\[(black|green|white|blue|magenta|yellow|cyan|red)\\]/i;\r\n    var RX_CONDITION = /^\\[(<=|>=|<>|<|>|=)(-?[0-9.]+)\\]/;\r\n    function parse(input) {\r\n        input = calc.InputStream(input);\r\n        var sections = [], haveConditional = false, decimalPart;\r\n        while (!input.eof()) {\r\n            var sec = readSection();\r\n            sections.push(sec);\r\n            if (sec.cond) {\r\n                haveConditional = true;\r\n            }\r\n        }\r\n        if (!haveConditional) {\r\n            if (sections.length == 1) {\r\n                sections[0].cond = 'num';\r\n            } else if (sections.length == 2) {\r\n                sections[0].cond = {\r\n                    op: '>=',\r\n                    value: 0\r\n                };\r\n                sections[1].cond = {\r\n                    op: '<',\r\n                    value: 0\r\n                };\r\n            } else if (sections.length >= 3) {\r\n                sections[0].cond = {\r\n                    op: '>',\r\n                    value: 0\r\n                };\r\n                sections[1].cond = {\r\n                    op: '<',\r\n                    value: 0\r\n                };\r\n                sections[2].cond = {\r\n                    op: '=',\r\n                    value: 0\r\n                };\r\n                if (sections.length > 3) {\r\n                    sections[3].cond = 'text';\r\n                    sections = sections.slice(0, 4);\r\n                }\r\n            }\r\n        }\r\n        return sections;\r\n        function maybeColor() {\r\n            var m = input.skip(RX_COLORS);\r\n            if (m) {\r\n                return m[1].toLowerCase();\r\n            }\r\n        }\r\n        function maybeCondition() {\r\n            var m = input.skip(RX_CONDITION);\r\n            if (m) {\r\n                var val = parseFloat(m[2]);\r\n                if (!isNaN(val)) {\r\n                    return {\r\n                        op: m[1],\r\n                        value: val\r\n                    };\r\n                }\r\n            }\r\n        }\r\n        function readFormat() {\r\n            var format = [], tok, prev = null;\r\n            while (!input.eof() && (tok = readNext())) {\r\n                if (tok.type == 'date') {\r\n                    if (prev && /^(el)?time$/.test(prev.type) && prev.part == 'h' && tok.part == 'm' && tok.format < 3) {\r\n                        tok.type = 'time';\r\n                    }\r\n                } else if (/^(el)?time$/.test(tok.type) && tok.part == 's') {\r\n                    if (prev && prev.type == 'date' && prev.part == 'm' && prev.format < 3) {\r\n                        prev.type = 'time';\r\n                    }\r\n                }\r\n                if (!/^(?:str|space|fill)$/.test(tok.type)) {\r\n                    prev = tok;\r\n                }\r\n                format.push(tok);\r\n            }\r\n            return format;\r\n        }\r\n        function maybeFraction(tok) {\r\n            if (tok.type != 'date' || tok.part == 'm' && tok.format < 3) {\r\n                var m = input.skip(/^\\.(0+)/);\r\n                if (m) {\r\n                    tok.fraction = m[1].length;\r\n                    if (tok.type == 'date') {\r\n                        tok.type = 'time';\r\n                    }\r\n                }\r\n            }\r\n            return tok;\r\n        }\r\n        function readNext() {\r\n            var ch, m;\r\n            if (m = input.skip(/^([#0?]+)(?:,([#0?]+))+/)) {\r\n                return {\r\n                    type: 'digit',\r\n                    sep: true,\r\n                    format: m[1] + m[2],\r\n                    decimal: decimalPart\r\n                };\r\n            }\r\n            if (m = input.skip(/^[#0?]+/)) {\r\n                return {\r\n                    type: 'digit',\r\n                    sep: false,\r\n                    format: m[0],\r\n                    decimal: decimalPart\r\n                };\r\n            }\r\n            if (m = input.skip(/^(e)([+-])/i)) {\r\n                return {\r\n                    type: 'exp',\r\n                    ch: m[1],\r\n                    sign: m[2]\r\n                };\r\n            }\r\n            if (m = input.skip(/^(d{1,4}|m{1,5}|yyyy|yy)/i)) {\r\n                m = m[1].toLowerCase();\r\n                return maybeFraction({\r\n                    type: 'date',\r\n                    part: m.charAt(0),\r\n                    format: m.length\r\n                });\r\n            }\r\n            if (m = input.skip(/^(hh?|ss?)/i)) {\r\n                m = m[1].toLowerCase();\r\n                return maybeFraction({\r\n                    type: 'time',\r\n                    part: m.charAt(0),\r\n                    format: m.length\r\n                });\r\n            }\r\n            if (m = input.skip(/^\\[(hh?|mm?|ss?)\\]/i)) {\r\n                m = m[1].toLowerCase();\r\n                return maybeFraction({\r\n                    type: 'eltime',\r\n                    part: m.charAt(0),\r\n                    format: m.length\r\n                });\r\n            }\r\n            if (m = input.skip(/^(am\\/pm|a\\/p)/i)) {\r\n                m = m[1].split('/');\r\n                return {\r\n                    type: 'ampm',\r\n                    am: m[0],\r\n                    pm: m[1]\r\n                };\r\n            }\r\n            switch (ch = input.next()) {\r\n            case ';':\r\n                return null;\r\n            case '\\\\':\r\n                return {\r\n                    type: 'str',\r\n                    value: input.next()\r\n                };\r\n            case '\"':\r\n                return {\r\n                    type: 'str',\r\n                    value: input.readEscaped(ch)\r\n                };\r\n            case '@':\r\n                return { type: 'text' };\r\n            case '_':\r\n                return {\r\n                    type: 'space',\r\n                    value: input.next()\r\n                };\r\n            case '*':\r\n                return {\r\n                    type: 'fill',\r\n                    value: input.next()\r\n                };\r\n            case '.':\r\n                if (input.lookingAt(/^\\s*[#0?]/)) {\r\n                    decimalPart = true;\r\n                    return { type: 'dec' };\r\n                }\r\n                return {\r\n                    type: 'str',\r\n                    value: '.'\r\n                };\r\n            case '%':\r\n                return { type: 'percent' };\r\n            case ',':\r\n                return { type: 'comma' };\r\n            }\r\n            return {\r\n                type: 'str',\r\n                value: ch\r\n            };\r\n        }\r\n        function readSection() {\r\n            decimalPart = false;\r\n            var color = maybeColor(), cond = maybeCondition();\r\n            if (!color && cond) {\r\n                color = maybeColor();\r\n            }\r\n            return {\r\n                color: color,\r\n                cond: cond,\r\n                body: readFormat()\r\n            };\r\n        }\r\n    }\r\n    function print(sections) {\r\n        return sections.map(printSection).join(';');\r\n        function printSection(sec) {\r\n            var out = '';\r\n            if (sec.color) {\r\n                out += '[' + sec.color + ']';\r\n            }\r\n            if (sec.cond) {\r\n                if (!(sec.cond == 'text' || sec.cond == 'num')) {\r\n                    out += '[' + sec.cond.op + sec.cond.value + ']';\r\n                }\r\n            }\r\n            out += sec.body.map(printToken).join('');\r\n            return out;\r\n        }\r\n        function maybeFraction(fmt, tok) {\r\n            if (tok.fraction) {\r\n                fmt += '.' + padLeft('', tok.fraction, '0');\r\n            }\r\n            return fmt;\r\n        }\r\n        function printToken(tok) {\r\n            if (tok.type == 'digit') {\r\n                if (tok.sep) {\r\n                    return tok.format.charAt(0) + ',' + tok.format.substr(1);\r\n                } else {\r\n                    return tok.format;\r\n                }\r\n            } else if (tok.type == 'exp') {\r\n                return tok.ch + tok.sign;\r\n            } else if (tok.type == 'date' || tok.type == 'time') {\r\n                return maybeFraction(padLeft('', tok.format, tok.part), tok);\r\n            } else if (tok.type == 'eltime') {\r\n                return maybeFraction('[' + padLeft('', tok.format, tok.part) + ']', tok);\r\n            } else if (tok.type == 'ampm') {\r\n                return tok.am + '/' + tok.pm;\r\n            } else if (tok.type == 'str') {\r\n                return JSON.stringify(tok.value);\r\n            } else if (tok.type == 'text') {\r\n                return '@';\r\n            } else if (tok.type == 'space') {\r\n                return '_' + tok.value;\r\n            } else if (tok.type == 'fill') {\r\n                return '*' + tok.value;\r\n            } else if (tok.type == 'dec') {\r\n                return '.';\r\n            } else if (tok.type == 'percent') {\r\n                return '%';\r\n            } else if (tok.type == 'comma') {\r\n                return ',';\r\n            }\r\n        }\r\n    }\r\n    function adjustDecimals(sections, x) {\r\n        sections.forEach(function (sec) {\r\n            var diff = x;\r\n            if (sec.cond == 'text') {\r\n                return;\r\n            }\r\n            var body = sec.body, adjusted = false, i = body.length;\r\n            while (diff !== 0 && --i >= 0) {\r\n                var tok = body[i];\r\n                if (tok.type == 'digit') {\r\n                    if (tok.decimal) {\r\n                        adjusted = true;\r\n                        if (diff > 0) {\r\n                            tok.format += padLeft('', diff, '0');\r\n                        } else if (diff < 0) {\r\n                            var tmp = tok.format.length;\r\n                            tok.format = tok.format.substr(0, tmp + diff);\r\n                            diff += tmp - tok.format.length;\r\n                        }\r\n                        if (tok.format.length === 0) {\r\n                            body.splice(i, 1);\r\n                            while (--i >= 0) {\r\n                                tok = body[i];\r\n                                if (tok.type == 'digit' && tok.decimal) {\r\n                                    ++i;\r\n                                    break;\r\n                                }\r\n                                if (tok.type == 'dec') {\r\n                                    body.splice(i, 1);\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    if (diff > 0) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            if (!adjusted && diff > 0) {\r\n                body.splice(i + 1, 0, { type: 'dec' }, {\r\n                    type: 'digit',\r\n                    sep: false,\r\n                    decimal: true,\r\n                    format: padLeft('', diff, '0')\r\n                });\r\n            }\r\n        });\r\n    }\r\n    function TokenStream(parts) {\r\n        var index = 0;\r\n        return {\r\n            next: function () {\r\n                return parts[index++];\r\n            },\r\n            eof: function () {\r\n                return index >= parts.length;\r\n            },\r\n            ahead: function (n, f) {\r\n                if (index + n <= parts.length) {\r\n                    var val = f.apply(null, parts.slice(index, index + n));\r\n                    if (val) {\r\n                        index += n;\r\n                    }\r\n                    return val;\r\n                }\r\n            },\r\n            restart: function () {\r\n                index = 0;\r\n            }\r\n        };\r\n    }\r\n    function compileFormatPart(format) {\r\n        var input = TokenStream(format.body);\r\n        var hasDate = false;\r\n        var hasTime = false;\r\n        var hasAmpm = false;\r\n        var percentCount = 0;\r\n        var scaleCount = 0;\r\n        var code = '';\r\n        var separeThousands = false;\r\n        var declen = 0;\r\n        var intFormat = [], decFormat = [];\r\n        var condition = format.cond;\r\n        var preamble = '';\r\n        if (condition == 'text') {\r\n            preamble = 'if (typeof value == \\'string\\' || value instanceof kendo.spreadsheet.CalcError) { ';\r\n        } else if (condition == 'num') {\r\n            preamble = 'if (typeof value == \\'number\\') { ';\r\n        } else if (condition) {\r\n            var op = condition.op == '=' ? '==' : condition.op;\r\n            preamble = 'if (typeof value == \\'number\\' && value ' + op + ' ' + condition.value + ') { ';\r\n            code += 'value = Math.abs(value); ';\r\n        }\r\n        if (format.color) {\r\n            code += 'result.color = ' + JSON.stringify(format.color) + '; ';\r\n        }\r\n        function checkComma(a, b) {\r\n            if (a.type == 'digit' && b.type == 'comma' || a.type == 'comma' && a.hidden && b.type == 'comma') {\r\n                b.hidden = true;\r\n                scaleCount++;\r\n            }\r\n        }\r\n        while (!input.eof()) {\r\n            input.ahead(2, checkComma);\r\n            var tok = input.next();\r\n            if (tok.type == 'percent') {\r\n                percentCount++;\r\n            } else if (tok.type == 'digit') {\r\n                if (tok.decimal) {\r\n                    declen += tok.format.length;\r\n                    decFormat.push(tok.format);\r\n                } else {\r\n                    intFormat.push(tok.format);\r\n                    if (tok.sep) {\r\n                        separeThousands = true;\r\n                    }\r\n                }\r\n            } else if (tok.type == 'time') {\r\n                hasTime = true;\r\n            } else if (tok.type == 'date') {\r\n                hasDate = true;\r\n            } else if (tok.type == 'ampm') {\r\n                hasAmpm = hasTime = true;\r\n            }\r\n        }\r\n        if (percentCount > 0) {\r\n            code += 'value *= ' + Math.pow(100, percentCount) + '; ';\r\n        }\r\n        if (scaleCount > 0) {\r\n            code += 'value /= ' + Math.pow(1000, scaleCount) + '; ';\r\n        }\r\n        if (intFormat.length) {\r\n            code += 'var intPart = runtime.formatInt(culture, value, ' + JSON.stringify(intFormat) + ', ' + declen + ', ' + separeThousands + '); ';\r\n        }\r\n        if (decFormat.length) {\r\n            code += 'var decPart = runtime.formatDec(value, ' + JSON.stringify(decFormat) + ', ' + declen + '); ';\r\n        }\r\n        if (intFormat.length || decFormat.length) {\r\n            code += 'type = \\'number\\'; ';\r\n        }\r\n        if (hasDate) {\r\n            code += 'var date = runtime.unpackDate(value); ';\r\n        }\r\n        if (hasTime) {\r\n            code += 'var time = runtime.unpackTime(value); ';\r\n        }\r\n        if (hasDate || hasTime) {\r\n            code += 'type = \\'date\\'; ';\r\n        }\r\n        if (percentCount > 0 || scaleCount > 0 || intFormat.length || decFormat.length || hasDate || hasTime) {\r\n            if (!preamble) {\r\n                preamble = 'if (typeof value == \\'number\\') { ';\r\n            }\r\n        }\r\n        input.restart();\r\n        while (!input.eof()) {\r\n            var tok = input.next();\r\n            if (tok.type == 'dec') {\r\n                code += 'output += culture.numberFormat[\\'.\\']; ';\r\n            } else if (tok.type == 'comma' && !tok.hidden) {\r\n                code += 'output += \\',\\'; ';\r\n            } else if (tok.type == 'percent') {\r\n                code += 'type = \\'percent\\'; ';\r\n                code += 'output += culture.numberFormat.percent.symbol; ';\r\n            } else if (tok.type == 'str') {\r\n                code += 'output += ' + JSON.stringify(tok.value) + '; ';\r\n            } else if (tok.type == 'text') {\r\n                code += 'type = \\'text\\'; ';\r\n                code += 'output += value; ';\r\n            } else if (tok.type == 'space') {\r\n                code += 'if (output) result.body.push(output); ';\r\n                code += 'output = \\'\\'; ';\r\n                code += 'result.body.push({ type: \\'space\\', value: ' + JSON.stringify(tok.value) + ' }); ';\r\n            } else if (tok.type == 'fill') {\r\n                code += 'output += runtime.fill(' + JSON.stringify(tok.value) + '); ';\r\n            } else if (tok.type == 'digit') {\r\n                code += 'output += ' + (tok.decimal ? 'decPart' : 'intPart') + '.shift(); ';\r\n            } else if (tok.type == 'date') {\r\n                code += 'output += runtime.date(culture, date, ' + JSON.stringify(tok.part) + ', ' + tok.format + '); ';\r\n            } else if (tok.type == 'time') {\r\n                code += 'output += runtime.time(time, ' + JSON.stringify(tok.part) + ', ' + tok.format + ', ' + hasAmpm + ', ' + tok.fraction + '); ';\r\n            } else if (tok.type == 'eltime') {\r\n                code += 'output += runtime.eltime(value, ' + JSON.stringify(tok.part) + ', ' + tok.format + ', ' + tok.fraction + '); ';\r\n            } else if (tok.type == 'ampm') {\r\n                code += 'output += time.hours < 12 ? ' + JSON.stringify(tok.am) + ' : ' + JSON.stringify(tok.pm) + '; ';\r\n            }\r\n        }\r\n        code += 'if (output) result.body.push(output); ';\r\n        code += 'result.type = type; ';\r\n        code += 'return result; ';\r\n        if (preamble) {\r\n            code = preamble + code + '}';\r\n        }\r\n        return code;\r\n    }\r\n    var CACHE = Object.create(null);\r\n    var TEXT = compileFormatPart({\r\n        cond: 'text',\r\n        body: [{ type: 'text' }]\r\n    });\r\n    function compile(format) {\r\n        var f = CACHE[format];\r\n        if (!f) {\r\n            var tree = parse(format);\r\n            var code = tree.map(compileFormatPart);\r\n            code.push(TEXT);\r\n            code = code.join('\\n');\r\n            code = '\\'use strict\\'; return function(value, culture){ ' + 'if (!culture) culture = kendo.culture(); ' + 'var output = \\'\\', type = null, result = { body: [] }; ' + code + '; return result; };';\r\n            f = CACHE[format] = new Function('runtime', code)(runtime);\r\n        }\r\n        return f;\r\n    }\r\n    var runtime = {\r\n        unpackDate: calc.runtime.unpackDate,\r\n        unpackTime: calc.runtime.unpackTime,\r\n        date: function (culture, d, part, length) {\r\n            switch (part) {\r\n            case 'd':\r\n                switch (length) {\r\n                case 1:\r\n                    return d.date;\r\n                case 2:\r\n                    return padLeft(d.date, 2, '0');\r\n                case 3:\r\n                    return culture.calendars.standard.days.namesAbbr[d.day];\r\n                case 4:\r\n                    return culture.calendars.standard.days.names[d.day];\r\n                }\r\n                break;\r\n            case 'm':\r\n                switch (length) {\r\n                case 1:\r\n                    return d.month + 1;\r\n                case 2:\r\n                    return padLeft(d.month + 1, 2, '0');\r\n                case 3:\r\n                    return culture.calendars.standard.months.namesAbbr[d.month];\r\n                case 4:\r\n                    return culture.calendars.standard.months.names[d.month];\r\n                case 5:\r\n                    return culture.calendars.standard.months.names[d.month].charAt(0);\r\n                }\r\n                break;\r\n            case 'y':\r\n                switch (length) {\r\n                case 2:\r\n                    return d.year % 100;\r\n                case 4:\r\n                    return d.year;\r\n                }\r\n                break;\r\n            }\r\n            return '##';\r\n        },\r\n        time: function (t, part, length, ampm, fraclen) {\r\n            var ret, fraction;\r\n            switch (part) {\r\n            case 'h':\r\n                ret = padLeft(ampm ? t.hours % 12 || 12 : t.hours, length, '0');\r\n                if (fraclen) {\r\n                    fraction = (t.minutes + (t.seconds + t.milliseconds / 1000) / 60) / 60;\r\n                }\r\n                break;\r\n            case 'm':\r\n                ret = padLeft(t.minutes, length, '0');\r\n                if (fraclen) {\r\n                    fraction = (t.seconds + t.milliseconds / 1000) / 60;\r\n                }\r\n                break;\r\n            case 's':\r\n                ret = padLeft(t.seconds, length, '0');\r\n                if (fraclen) {\r\n                    fraction = t.milliseconds / 1000;\r\n                }\r\n                break;\r\n            }\r\n            if (fraction) {\r\n                ret += fraction.toFixed(fraclen).replace(/^0+/, '');\r\n            }\r\n            return ret;\r\n        },\r\n        eltime: function (value, part, length, fraclen) {\r\n            var ret, fraction;\r\n            switch (part) {\r\n            case 'h':\r\n                ret = value * 24;\r\n                break;\r\n            case 'm':\r\n                ret = value * 24 * 60;\r\n                break;\r\n            case 's':\r\n                ret = value * 24 * 60 * 60;\r\n                break;\r\n            }\r\n            if (fraclen) {\r\n                fraction = ret - (ret | 0);\r\n            }\r\n            ret = padLeft(ret | 0, length, '0');\r\n            if (fraction) {\r\n                ret += fraction.toFixed(fraclen).replace(/^0+/, '');\r\n            }\r\n            return ret;\r\n        },\r\n        fill: function (ch) {\r\n            return ch;\r\n        },\r\n        formatInt: function (culture, value, parts, declen, sep) {\r\n            value = value.toFixed(declen).replace(/\\..*$/, '');\r\n            if (declen > 0) {\r\n                if (value === '0') {\r\n                    value = '';\r\n                } else if (value === '-0') {\r\n                    value = '-';\r\n                }\r\n            }\r\n            var iv = value.length - 1;\r\n            var result = [];\r\n            var len = 0, str;\r\n            function add(ch) {\r\n                if (sep && len && len % 3 === 0 && /^[0-9]$/.test(ch)) {\r\n                    str = culture.numberFormat[','] + str;\r\n                }\r\n                str = ch + str;\r\n                len++;\r\n            }\r\n            for (var j = parts.length; --j >= 0;) {\r\n                var format = parts[j];\r\n                str = '';\r\n                for (var k = format.length; --k >= 0;) {\r\n                    var chf = format.charAt(k);\r\n                    if (iv < 0) {\r\n                        if (chf == '0') {\r\n                            add('0');\r\n                        } else if (chf == '?') {\r\n                            add(' ');\r\n                        }\r\n                    } else {\r\n                        add(value.charAt(iv--));\r\n                    }\r\n                }\r\n                if (j === 0) {\r\n                    while (iv >= 0) {\r\n                        add(value.charAt(iv--));\r\n                    }\r\n                }\r\n                result.unshift(str);\r\n            }\r\n            return result;\r\n        },\r\n        formatDec: function (value, parts, declen) {\r\n            value = value.toFixed(declen);\r\n            var pos = value.indexOf('.');\r\n            if (pos >= 0) {\r\n                value = value.substr(pos + 1).replace(/0+$/, '');\r\n            } else {\r\n                value = '';\r\n            }\r\n            var iv = 0;\r\n            var result = [];\r\n            for (var j = 0; j < parts.length; ++j) {\r\n                var format = parts[j];\r\n                var str = '';\r\n                for (var k = 0; k < format.length; ++k) {\r\n                    var chf = format.charAt(k);\r\n                    if (iv < value.length) {\r\n                        str += value.charAt(iv++);\r\n                    } else if (chf == '0') {\r\n                        str += '0';\r\n                    } else if (chf == '?') {\r\n                        str += ' ';\r\n                    }\r\n                }\r\n                result.push(str);\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    function padLeft(val, width, ch) {\r\n        val += '';\r\n        while (val.length < width) {\r\n            val = ch + val;\r\n        }\r\n        return val;\r\n    }\r\n    function text(f) {\r\n        var a = f.body;\r\n        var text = '';\r\n        for (var i = 0; i < a.length; ++i) {\r\n            var el = a[i];\r\n            if (typeof el == 'string') {\r\n                text += el;\r\n            } else if (el.type == 'space') {\r\n                text += ' ';\r\n            }\r\n        }\r\n        return text;\r\n    }\r\n    kendo.spreadsheet.formatting = {\r\n        compile: compile,\r\n        parse: parse,\r\n        format: function (value, format, culture) {\r\n            var f = compile(format)(value, culture);\r\n            var span = dom.element('span');\r\n            span.__dataType = f.type;\r\n            var a = f.body;\r\n            if (f.color) {\r\n                span.attr.style = { color: f.color };\r\n            }\r\n            for (var i = 0; i < a.length; ++i) {\r\n                var el = a[i];\r\n                if (typeof el == 'string') {\r\n                    span.children.push(dom.text(el));\r\n                } else if (el.type == 'space') {\r\n                    span.children.push(dom.element('span', { style: { visibility: 'hidden' } }, [dom.text(el.value)]));\r\n                }\r\n            }\r\n            return span;\r\n        },\r\n        text: function (value, format, culture) {\r\n            var f = compile(format)(value, culture);\r\n            return text(f);\r\n        },\r\n        textAndColor: function (value, format, culture) {\r\n            var f = compile(format)(value, culture);\r\n            return {\r\n                text: text(f),\r\n                color: f.color,\r\n                type: f.type\r\n            };\r\n        },\r\n        type: function (value, format) {\r\n            return compile(format)(value).type;\r\n        },\r\n        adjustDecimals: function (format, diff) {\r\n            var ast = parse(format);\r\n            adjustDecimals(ast, diff);\r\n            return print(ast);\r\n        }\r\n    };\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/runtime.functions', [\r\n        'spreadsheet/runtime',\r\n        'util/main'\r\n    ], f);\r\n}(function () {\r\n    'use strict';\r\n    if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n        return;\r\n    }\r\n    var util = kendo.util;\r\n    var spreadsheet = kendo.spreadsheet;\r\n    var calc = spreadsheet.calc;\r\n    var runtime = calc.runtime;\r\n    var defineFunction = runtime.defineFunction;\r\n    var defineAlias = runtime.defineAlias;\r\n    var CalcError = runtime.CalcError;\r\n    var RangeRef = spreadsheet.RangeRef;\r\n    var CellRef = spreadsheet.CellRef;\r\n    var UnionRef = spreadsheet.UnionRef;\r\n    var Matrix = runtime.Matrix;\r\n    var Ref = spreadsheet.Ref;\r\n    var daysInMonth = runtime.daysInMonth;\r\n    var packDate = runtime.packDate;\r\n    var unpackDate = runtime.unpackDate;\r\n    var daysInYear = runtime.daysInYear;\r\n    [\r\n        'abs',\r\n        'cos',\r\n        'sin',\r\n        'acos',\r\n        'asin',\r\n        'tan',\r\n        'atan',\r\n        'exp',\r\n        'sqrt'\r\n    ].forEach(function (name) {\r\n        defineFunction(name, Math[name]).args([[\r\n                '*n',\r\n                'number'\r\n            ]]);\r\n    });\r\n    defineFunction('ln', Math.log).args([[\r\n            '*n',\r\n            'number'\r\n        ]]);\r\n    defineFunction('log', function (num, base) {\r\n        return Math.log(num) / Math.log(base);\r\n    }).args([\r\n        [\r\n            '*num',\r\n            'number++'\r\n        ],\r\n        [\r\n            '*base',\r\n            [\r\n                'or',\r\n                'number++',\r\n                [\r\n                    'null',\r\n                    10\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$base != 1',\r\n                'DIV/0'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('log10', function (num) {\r\n        return Math.log(num) / Math.log(10);\r\n    }).args([[\r\n            '*num',\r\n            'number++'\r\n        ]]);\r\n    defineFunction('pi', function () {\r\n        return Math.PI;\r\n    }).args([]);\r\n    defineFunction('sqrtpi', function (n) {\r\n        return Math.sqrt(n * Math.PI);\r\n    }).args([[\r\n            '*num',\r\n            'number+'\r\n        ]]);\r\n    defineFunction('degrees', function (rad) {\r\n        return 180 * rad / Math.PI % 360;\r\n    }).args([[\r\n            '*radians',\r\n            'number'\r\n        ]]);\r\n    defineFunction('radians', function (deg) {\r\n        return Math.PI * deg / 180;\r\n    }).args([[\r\n            '*degrees',\r\n            'number'\r\n        ]]);\r\n    function _cosh(n) {\r\n        return (Math.exp(n) + Math.exp(-n)) / 2;\r\n    }\r\n    defineFunction('cosh', _cosh).args([[\r\n            '*num',\r\n            'number'\r\n        ]]);\r\n    defineFunction('acosh', function (n) {\r\n        return Math.log(n + Math.sqrt(n - 1) * Math.sqrt(n + 1));\r\n    }).args([\r\n        [\r\n            '*num',\r\n            'number'\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$num >= 1'\r\n            ]\r\n        ]\r\n    ]);\r\n    function _sinh(n) {\r\n        return (Math.exp(n) - Math.exp(-n)) / 2;\r\n    }\r\n    defineFunction('sinh', _sinh).args([[\r\n            '*num',\r\n            'number'\r\n        ]]);\r\n    defineFunction('asinh', function (n) {\r\n        return Math.log(n + Math.sqrt(n * n + 1));\r\n    }).args([[\r\n            '*num',\r\n            'number'\r\n        ]]);\r\n    defineFunction('sec', function (n) {\r\n        return 1 / Math.cos(n);\r\n    }).args([[\r\n            '*num',\r\n            'number'\r\n        ]]);\r\n    defineFunction('sech', function (n) {\r\n        return 1 / _cosh(n);\r\n    }).args([[\r\n            '*num',\r\n            'number'\r\n        ]]);\r\n    defineFunction('csc', function (n) {\r\n        return 1 / Math.sin(n);\r\n    }).args([[\r\n            '*num',\r\n            'number'\r\n        ]]);\r\n    defineFunction('csch', function (n) {\r\n        return 1 / _sinh(n);\r\n    }).args([[\r\n            '*num',\r\n            'number'\r\n        ]]);\r\n    defineFunction('atan2', function (x, y) {\r\n        return Math.atan(y / x);\r\n    }).args([\r\n        [\r\n            '*x',\r\n            'divisor'\r\n        ],\r\n        [\r\n            '*y',\r\n            'number'\r\n        ]\r\n    ]);\r\n    function _tanh(n) {\r\n        return _sinh(n) / _cosh(n);\r\n    }\r\n    defineFunction('tanh', _tanh).args([[\r\n            '*num',\r\n            'number'\r\n        ]]);\r\n    defineFunction('atanh', function (n) {\r\n        return Math.log(Math.sqrt(1 - n * n) / (1 - n));\r\n    }).args([[\r\n            '*num',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '(between)',\r\n                    -1,\r\n                    1\r\n                ]\r\n            ]\r\n        ]]);\r\n    defineFunction('cot', function (n) {\r\n        return 1 / Math.tan(n);\r\n    }).args([[\r\n            '*num',\r\n            'divisor'\r\n        ]]);\r\n    defineFunction('coth', function (n) {\r\n        return 1 / _tanh(n);\r\n    }).args([[\r\n            '*num',\r\n            'divisor'\r\n        ]]);\r\n    defineFunction('acot', function (n) {\r\n        return Math.PI / 2 - Math.atan(n);\r\n    }).args([[\r\n            '*num',\r\n            'number'\r\n        ]]);\r\n    defineFunction('acoth', function (n) {\r\n        return Math.log((n + 1) / (n - 1)) / 2;\r\n    }).args([\r\n        [\r\n            '*num',\r\n            'number'\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'or',\r\n                [\r\n                    'assert',\r\n                    '$num < -1'\r\n                ],\r\n                [\r\n                    'assert',\r\n                    '$num > 1'\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('power', function (a, b) {\r\n        return Math.pow(a, b);\r\n    }).args([\r\n        [\r\n            '*a',\r\n            'number'\r\n        ],\r\n        [\r\n            '*b',\r\n            'number'\r\n        ]\r\n    ]);\r\n    defineFunction('mod', function (a, b) {\r\n        return a % b;\r\n    }).args([\r\n        [\r\n            '*a',\r\n            'number'\r\n        ],\r\n        [\r\n            '*b',\r\n            'divisor'\r\n        ]\r\n    ]);\r\n    defineFunction('quotient', function (a, b) {\r\n        return Math.floor(a / b);\r\n    }).args([\r\n        [\r\n            '*a',\r\n            'number'\r\n        ],\r\n        [\r\n            '*b',\r\n            'divisor'\r\n        ]\r\n    ]);\r\n    defineFunction('ceiling', function (num, s) {\r\n        return s ? s * Math.ceil(num / s) : 0;\r\n    }).args([\r\n        [\r\n            '*number',\r\n            'number'\r\n        ],\r\n        [\r\n            '*significance',\r\n            'number'\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$significance >= 0 || $number < 0'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('ceiling.precise', function (num, s) {\r\n        s = Math.abs(s);\r\n        return s ? s * Math.ceil(num / s) : 0;\r\n    }).args([\r\n        [\r\n            '*number',\r\n            'number'\r\n        ],\r\n        [\r\n            '*significance',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    1\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineAlias('iso.ceiling', 'ceiling.precise');\r\n    defineFunction('ceiling.math', function (num, s, mode) {\r\n        if (!s || !num) {\r\n            return 0;\r\n        }\r\n        if (num < 0 && (!mode && s < 0 || mode && s > 0)) {\r\n            s = -s;\r\n        }\r\n        return s ? s * Math.ceil(num / s) : 0;\r\n    }).args([\r\n        [\r\n            '*number',\r\n            'number'\r\n        ],\r\n        [\r\n            '*significance',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    '$number < 0 ? -1 : 1'\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '*mode',\r\n            [\r\n                'or',\r\n                'logical',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('floor', function (num, s) {\r\n        return s ? s * Math.floor(num / s) : 0;\r\n    }).args([\r\n        [\r\n            '*number',\r\n            'number'\r\n        ],\r\n        [\r\n            '*significance',\r\n            'number'\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$significance >= 0 || $number < 0'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('floor.precise', function (num, s) {\r\n        s = Math.abs(s);\r\n        return s ? s * Math.floor(num / s) : 0;\r\n    }).args([\r\n        [\r\n            '*number',\r\n            'number'\r\n        ],\r\n        [\r\n            '*significance',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    1\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('floor.math', function (num, s, mode) {\r\n        if (!s || !num) {\r\n            return 0;\r\n        }\r\n        if (num < 0 && (!mode && s < 0 || mode && s > 0)) {\r\n            s = -s;\r\n        }\r\n        return s ? s * Math.floor(num / s) : 0;\r\n    }).args([\r\n        [\r\n            '*number',\r\n            'number'\r\n        ],\r\n        [\r\n            '*significance',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    '$number < 0 ? -1 : 1'\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '*mode',\r\n            [\r\n                'or',\r\n                'logical',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('int', Math.floor).args([[\r\n            '*number',\r\n            'number'\r\n        ]]);\r\n    defineFunction('mround', function (num, mult) {\r\n        return mult ? mult * Math.round(num / mult) : 0;\r\n    }).args([\r\n        [\r\n            '*number',\r\n            'number'\r\n        ],\r\n        [\r\n            '*multiple',\r\n            'number'\r\n        ]\r\n    ]);\r\n    defineFunction('round', function (num, digits) {\r\n        var sign = num < 0 ? -1 : 1;\r\n        if (sign < 0) {\r\n            num = -num;\r\n        }\r\n        digits = Math.pow(10, digits);\r\n        num *= digits;\r\n        num = Math.round(num);\r\n        return sign * num / digits;\r\n    }).args([\r\n        [\r\n            '*number',\r\n            'number'\r\n        ],\r\n        [\r\n            '*digits',\r\n            'number'\r\n        ]\r\n    ]);\r\n    defineFunction('roundup', function (num, digits) {\r\n        digits = Math.pow(10, digits);\r\n        num *= digits;\r\n        num = num < 0 ? Math.floor(num) : Math.ceil(num);\r\n        return num / digits;\r\n    }).args([\r\n        [\r\n            '*number',\r\n            'number'\r\n        ],\r\n        [\r\n            '*digits',\r\n            'number'\r\n        ]\r\n    ]);\r\n    defineFunction('rounddown', function (num, digits) {\r\n        digits = Math.pow(10, digits);\r\n        num *= digits;\r\n        num = num < 0 ? Math.ceil(num) : Math.floor(num);\r\n        return num / digits;\r\n    }).args([\r\n        [\r\n            '*number',\r\n            'number'\r\n        ],\r\n        [\r\n            '*digits',\r\n            'number'\r\n        ]\r\n    ]);\r\n    defineFunction('even', function (num) {\r\n        var n = num < 0 ? Math.floor(num) : Math.ceil(num);\r\n        return n % 2 ? n + (n < 0 ? -1 : 1) : n;\r\n    }).args([[\r\n            '*number',\r\n            'number'\r\n        ]]);\r\n    defineFunction('odd', function (num) {\r\n        var n = num < 0 ? Math.floor(num) : Math.ceil(num);\r\n        return n % 2 ? n : n + (n < 0 ? -1 : 1);\r\n    }).args([[\r\n            '*number',\r\n            'number'\r\n        ]]);\r\n    defineFunction('sign', function (num) {\r\n        return num < 0 ? -1 : num > 0 ? 1 : 0;\r\n    }).args([[\r\n            '*number',\r\n            'number'\r\n        ]]);\r\n    function _gcd(a, b) {\r\n        while (b) {\r\n            var r = a % b;\r\n            a = b;\r\n            b = r;\r\n        }\r\n        return a;\r\n    }\r\n    function _lcm(a, b) {\r\n        return Math.abs(a * b) / _gcd(a, b);\r\n    }\r\n    defineFunction('gcd', function (args) {\r\n        var a = args[0];\r\n        for (var i = 1; i < args.length; ++i) {\r\n            a = _gcd(a, args[i]);\r\n        }\r\n        return a;\r\n    }).args([[\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ]]);\r\n    defineFunction('lcm', function (args) {\r\n        var a = args[0];\r\n        for (var i = 1; i < args.length; ++i) {\r\n            a = _lcm(a, args[i]);\r\n        }\r\n        return a;\r\n    }).args([[\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ]]);\r\n    defineFunction('sum', function (numbers) {\r\n        return numbers.reduce(function (sum, num) {\r\n            return sum + num;\r\n        }, 0);\r\n    }).args([[\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ]]);\r\n    defineFunction('product', function (numbers) {\r\n        return numbers.reduce(function (prod, num) {\r\n            return prod * num;\r\n        }, 1);\r\n    }).args([[\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ]]);\r\n    defineFunction('sumproduct', function (first, rest) {\r\n        var sum = 0;\r\n        first.each(function (p, row, col) {\r\n            if (typeof p == 'number') {\r\n                for (var i = 0; i < rest.length; ++i) {\r\n                    var v = rest[i].get(row, col);\r\n                    if (typeof v != 'number') {\r\n                        return;\r\n                    }\r\n                    p *= v;\r\n                }\r\n                sum += p;\r\n            }\r\n        });\r\n        return sum;\r\n    }).args([\r\n        [\r\n            'a1',\r\n            'matrix'\r\n        ],\r\n        [\r\n            '+',\r\n            [\r\n                'a2',\r\n                [\r\n                    'and',\r\n                    'matrix',\r\n                    [\r\n                        'assert',\r\n                        '$a2.width == $a1.width'\r\n                    ],\r\n                    [\r\n                        'assert',\r\n                        '$a2.height == $a1.height'\r\n                    ]\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('sumsq', function (numbers) {\r\n        return numbers.reduce(function (sum, num) {\r\n            return sum + num * num;\r\n        }, 0);\r\n    }).args([[\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ]]);\r\n    defineFunction('sumx2my2', function (a, b) {\r\n        var sum = 0;\r\n        a.each(function (x, row, col) {\r\n            var y = b.get(row, col);\r\n            if (typeof x == 'number' && typeof y == 'number') {\r\n                sum += x * x - y * y;\r\n            }\r\n        });\r\n        return sum;\r\n    }).args([\r\n        [\r\n            'a',\r\n            'matrix'\r\n        ],\r\n        [\r\n            'b',\r\n            [\r\n                'and',\r\n                'matrix',\r\n                [\r\n                    'assert',\r\n                    '$b.width == $a.width'\r\n                ],\r\n                [\r\n                    'assert',\r\n                    '$b.height == $a.height'\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('sumx2py2', function (a, b) {\r\n        var sum = 0;\r\n        a.each(function (x, row, col) {\r\n            var y = b.get(row, col);\r\n            if (typeof x == 'number' && typeof y == 'number') {\r\n                sum += x * x + y * y;\r\n            }\r\n        });\r\n        return sum;\r\n    }).args([\r\n        [\r\n            'a',\r\n            'matrix'\r\n        ],\r\n        [\r\n            'b',\r\n            [\r\n                'and',\r\n                'matrix',\r\n                [\r\n                    'assert',\r\n                    '$b.width == $a.width'\r\n                ],\r\n                [\r\n                    'assert',\r\n                    '$b.height == $a.height'\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('sumxmy2', function (a, b) {\r\n        var sum = 0;\r\n        a.each(function (x, row, col) {\r\n            var y = b.get(row, col);\r\n            if (typeof x == 'number' && typeof y == 'number') {\r\n                sum += (x - y) * (x - y);\r\n            }\r\n        });\r\n        return sum;\r\n    }).args([\r\n        [\r\n            'a',\r\n            'matrix'\r\n        ],\r\n        [\r\n            'b',\r\n            [\r\n                'and',\r\n                'matrix',\r\n                [\r\n                    'assert',\r\n                    '$b.width == $a.width'\r\n                ],\r\n                [\r\n                    'assert',\r\n                    '$b.height == $a.height'\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('seriessum', function (x, n, m, a) {\r\n        var sum = 0;\r\n        a.each(function (coef) {\r\n            if (typeof coef != 'number') {\r\n                throw new CalcError('VALUE');\r\n            }\r\n            sum += coef * Math.pow(x, n);\r\n            n += m;\r\n        });\r\n        return sum;\r\n    }).args([\r\n        [\r\n            'x',\r\n            'number'\r\n        ],\r\n        [\r\n            'y',\r\n            'number'\r\n        ],\r\n        [\r\n            'm',\r\n            'number'\r\n        ],\r\n        [\r\n            'a',\r\n            'matrix'\r\n        ]\r\n    ]);\r\n    defineFunction('min', function (numbers) {\r\n        return Math.min.apply(Math, numbers);\r\n    }).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$numbers.length > 0',\r\n                'N/A'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('max', function (numbers) {\r\n        return Math.max.apply(Math, numbers);\r\n    }).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$numbers.length > 0',\r\n                'N/A'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('counta', function (values) {\r\n        return values.length;\r\n    }).args([[\r\n            'values',\r\n            [\r\n                '#collect',\r\n                'anyvalue'\r\n            ]\r\n        ]]);\r\n    defineFunction('count', function (numbers) {\r\n        return numbers.length;\r\n    }).args([[\r\n            'numbers',\r\n            [\r\n                '#collect',\r\n                'number'\r\n            ]\r\n        ]]);\r\n    defineFunction('countunique', function (values) {\r\n        var count = 0, seen = [];\r\n        values.forEach(function (val) {\r\n            if (seen.indexOf(val) < 0) {\r\n                count++;\r\n                seen.push(val);\r\n            }\r\n        });\r\n        return count;\r\n    }).args([[\r\n            'values',\r\n            [\r\n                '#collect',\r\n                'anyvalue'\r\n            ]\r\n        ]]);\r\n    defineFunction('countblank', function (a) {\r\n        var count = 0;\r\n        function add(val) {\r\n            if (val == null || val === '') {\r\n                count++;\r\n            }\r\n        }\r\n        function loop(args) {\r\n            for (var i = 0; i < args.length; ++i) {\r\n                var x = args[i];\r\n                if (x instanceof Matrix) {\r\n                    x.each(add, true);\r\n                } else {\r\n                    add(x);\r\n                }\r\n            }\r\n        }\r\n        loop(a);\r\n        return count;\r\n    }).args([[\r\n            '+',\r\n            [\r\n                'args',\r\n                [\r\n                    'or',\r\n                    'matrix',\r\n                    'anyvalue'\r\n                ]\r\n            ]\r\n        ]]);\r\n    defineFunction('iseven', function (num) {\r\n        return num % 2 === 0;\r\n    }).args([[\r\n            '*number',\r\n            'number'\r\n        ]]);\r\n    defineFunction('isodd', function (num) {\r\n        return num % 2 !== 0;\r\n    }).args([[\r\n            '*number',\r\n            'number'\r\n        ]]);\r\n    defineFunction('n', function (val) {\r\n        if (typeof val == 'boolean') {\r\n            return val ? 1 : 0;\r\n        }\r\n        if (typeof val == 'number') {\r\n            return val;\r\n        }\r\n        return 0;\r\n    }).args([[\r\n            '*value',\r\n            'anyvalue'\r\n        ]]);\r\n    defineFunction('na', function () {\r\n        return new CalcError('N/A');\r\n    }).args([]);\r\n    function forIFS(args, f) {\r\n        var chunks = [], i = 0, matrix = args[0];\r\n        while (i < args.length) {\r\n            chunks.push({\r\n                matrix: args[i++],\r\n                pred: parseCriteria(args[i++])\r\n            });\r\n        }\r\n        ROW:\r\n            for (var row = 0; row < matrix.height; ++row) {\r\n                COL:\r\n                    for (var col = 0; col < matrix.width; ++col) {\r\n                        for (i = 0; i < chunks.length; ++i) {\r\n                            var val = chunks[i].matrix.get(row, col);\r\n                            if (!chunks[i].pred(val == null || val === '' ? 0 : val)) {\r\n                                continue COL;\r\n                            }\r\n                        }\r\n                        f(row, col);\r\n                    }\r\n            }\r\n    }\r\n    var ARGS_COUNTIFS = [\r\n        [\r\n            'm1',\r\n            'matrix'\r\n        ],\r\n        [\r\n            'c1',\r\n            'anyvalue'\r\n        ],\r\n        [\r\n            [\r\n                'm2',\r\n                [\r\n                    'and',\r\n                    'matrix',\r\n                    [\r\n                        'assert',\r\n                        '$m1.width == $m2.width'\r\n                    ],\r\n                    [\r\n                        'assert',\r\n                        '$m1.height == $m2.height'\r\n                    ]\r\n                ]\r\n            ],\r\n            [\r\n                'c2',\r\n                'anyvalue'\r\n            ]\r\n        ]\r\n    ];\r\n    defineFunction('countifs', function (m1, c1, rest) {\r\n        var count = 0;\r\n        rest.unshift(m1, c1);\r\n        forIFS(rest, function () {\r\n            count++;\r\n        });\r\n        return count;\r\n    }).args(ARGS_COUNTIFS);\r\n    var ARGS_SUMIFS = [[\r\n            'range',\r\n            'matrix'\r\n        ]].concat(ARGS_COUNTIFS);\r\n    defineFunction('sumifs', function (range, m1, c1, args) {\r\n        args.unshift(range, numericPredicate, m1, c1);\r\n        var sum = 0;\r\n        forIFS(args, function (row, col) {\r\n            var val = range.get(row, col);\r\n            if (val) {\r\n                sum += val;\r\n            }\r\n        });\r\n        return sum;\r\n    }).args(ARGS_SUMIFS);\r\n    defineFunction('averageifs', function (range, m1, c1, args) {\r\n        args.unshift(range, numericPredicate, m1, c1);\r\n        var sum = 0, count = 0;\r\n        forIFS(args, function (row, col) {\r\n            var val = range.get(row, col);\r\n            if (val == null || val === '') {\r\n                val = 0;\r\n            }\r\n            sum += val;\r\n            count++;\r\n        });\r\n        return count ? sum / count : new CalcError('DIV/0');\r\n    }).args(ARGS_SUMIFS);\r\n    defineFunction('countif', function (matrix, criteria) {\r\n        criteria = parseCriteria(criteria);\r\n        var count = 0;\r\n        matrix.each(function (val) {\r\n            if (criteria(val)) {\r\n                count++;\r\n            }\r\n        });\r\n        return count;\r\n    }).args([\r\n        [\r\n            'range',\r\n            'matrix'\r\n        ],\r\n        [\r\n            '*criteria',\r\n            'anyvalue'\r\n        ]\r\n    ]);\r\n    var ARGS_SUMIF = [\r\n        [\r\n            'range',\r\n            'matrix'\r\n        ],\r\n        [\r\n            '*criteria',\r\n            'anyvalue'\r\n        ],\r\n        [\r\n            'sumRange',\r\n            [\r\n                'or',\r\n                [\r\n                    'and',\r\n                    'matrix',\r\n                    [\r\n                        'assert',\r\n                        '$sumRange.width == $range.width'\r\n                    ],\r\n                    [\r\n                        'assert',\r\n                        '$sumRange.height == $range.height'\r\n                    ]\r\n                ],\r\n                [\r\n                    'null',\r\n                    '$range'\r\n                ]\r\n            ]\r\n        ]\r\n    ];\r\n    defineFunction('sumif', function (range, criteria, sumRange) {\r\n        var sum = 0;\r\n        criteria = parseCriteria(criteria);\r\n        range.each(function (val, row, col) {\r\n            if (criteria(val)) {\r\n                var v = sumRange.get(row, col);\r\n                if (numericPredicate(v)) {\r\n                    sum += v || 0;\r\n                }\r\n            }\r\n        });\r\n        return sum;\r\n    }).args(ARGS_SUMIF);\r\n    defineFunction('averageif', function (range, criteria, sumRange) {\r\n        var sum = 0, count = 0;\r\n        criteria = parseCriteria(criteria);\r\n        range.each(function (val, row, col) {\r\n            if (criteria(val)) {\r\n                var v = sumRange.get(row, col);\r\n                if (numericPredicate(v)) {\r\n                    sum += v || 0;\r\n                    count++;\r\n                }\r\n            }\r\n        });\r\n        return count ? sum / count : new CalcError('DIV/0');\r\n    }).args(ARGS_SUMIF);\r\n    (function (def) {\r\n        def('large', function (numbers, nth) {\r\n            return numbers.sort(descending)[nth];\r\n        });\r\n        def('small', function (numbers, nth) {\r\n            return numbers.sort(ascending)[nth];\r\n        });\r\n    }(function (name, handler) {\r\n        defineFunction(name, function (matrix, nth) {\r\n            var numbers = [];\r\n            var error = matrix.each(function (val) {\r\n                if (val instanceof CalcError) {\r\n                    return val;\r\n                }\r\n                if (typeof val == 'number') {\r\n                    numbers.push(val);\r\n                }\r\n            });\r\n            if (error) {\r\n                return error;\r\n            }\r\n            if (nth > numbers.length) {\r\n                return new CalcError('NUM');\r\n            }\r\n            return handler(numbers, nth - 1);\r\n        }).args([\r\n            [\r\n                'array',\r\n                'matrix'\r\n            ],\r\n            [\r\n                '*nth',\r\n                'number++'\r\n            ]\r\n        ]);\r\n    }));\r\n    function _avg(numbers) {\r\n        return numbers.reduce(function (sum, num) {\r\n            return sum + num;\r\n        }, 0) / numbers.length;\r\n    }\r\n    function _var_sp(numbers, divisor, avg) {\r\n        if (avg == null) {\r\n            avg = _avg(numbers);\r\n        }\r\n        return numbers.reduce(function (sum, num) {\r\n            return sum + Math.pow(num - avg, 2);\r\n        }, 0) / divisor;\r\n    }\r\n    function _stdev_sp(numbers, divisor) {\r\n        return Math.sqrt(_var_sp(numbers, divisor));\r\n    }\r\n    defineFunction('stdev.s', function (numbers) {\r\n        return _stdev_sp(numbers, numbers.length - 1);\r\n    }).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$numbers.length >= 2',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('stdev.p', function (numbers) {\r\n        return _stdev_sp(numbers, numbers.length);\r\n    }).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$numbers.length >= 2',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('var.s', function (numbers) {\r\n        return _var_sp(numbers, numbers.length - 1);\r\n    }).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$numbers.length >= 2',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('var.p', function (numbers) {\r\n        return _var_sp(numbers, numbers.length);\r\n    }).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$numbers.length >= 2',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('median', function (numbers) {\r\n        var n = numbers.length;\r\n        numbers.sort(ascending);\r\n        if (n % 2) {\r\n            return numbers[n >> 1];\r\n        }\r\n        return (numbers[n >> 1] + numbers[n >> 1 + 1]) / 2;\r\n    }).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$numbers.length > 0',\r\n                'N/A'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('mode.sngl', function (numbers) {\r\n        numbers.sort(ascending);\r\n        var prev = null, count = 0, max = 1, mode = null;\r\n        for (var i = 0; i < numbers.length; ++i) {\r\n            var n = numbers[i];\r\n            if (n != prev) {\r\n                count = 1;\r\n                prev = n;\r\n            } else {\r\n                count++;\r\n            }\r\n            if (count > max) {\r\n                max = count;\r\n                mode = n;\r\n            }\r\n        }\r\n        return mode == null ? new CalcError('N/A') : mode;\r\n    }).args([[\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ]]);\r\n    defineFunction('mode.mult', function (numbers) {\r\n        var seen = Object.create(null), max = 2, res = [];\r\n        numbers.forEach(function (num) {\r\n            var s = seen[num] || 0;\r\n            seen[num] = ++s;\r\n            if (s == max) {\r\n                res.push(num);\r\n            } else if (s > max) {\r\n                max = s;\r\n                res = [num];\r\n            }\r\n        });\r\n        var m = new Matrix(this);\r\n        res.forEach(function (num, i) {\r\n            m.set(i, 0, num);\r\n        });\r\n        return m;\r\n    }).args([[\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ]]);\r\n    defineFunction('geomean', function (numbers) {\r\n        var n = numbers.length;\r\n        var p = numbers.reduce(function (p, num) {\r\n            if (num < 0) {\r\n                throw new CalcError('NUM');\r\n            }\r\n            return p * num;\r\n        }, 1);\r\n        return Math.pow(p, 1 / n);\r\n    }).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$numbers.length > 0',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('harmean', function (numbers) {\r\n        var n = numbers.length;\r\n        var s = numbers.reduce(function (s, num) {\r\n            if (!num) {\r\n                throw new CalcError('DIV/0');\r\n            }\r\n            return s + 1 / num;\r\n        }, 0);\r\n        return n / s;\r\n    }).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$numbers.length > 0',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('trimmean', function (numbers, p) {\r\n        var n = numbers.length;\r\n        numbers.sort(ascending);\r\n        var discard = Math.floor(n * p);\r\n        if (discard % 2) {\r\n            --discard;\r\n        }\r\n        discard /= 2;\r\n        var sum = 0;\r\n        for (var i = discard; i < n - discard; ++i) {\r\n            sum += numbers[i];\r\n        }\r\n        return sum / (n - discard * 2);\r\n    }).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'percent',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '[between)',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$numbers.length > 0',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('frequency', function (data, bins) {\r\n        data.sort(ascending);\r\n        bins.sort(ascending);\r\n        var prev = -Infinity;\r\n        var i = 0;\r\n        function count(max) {\r\n            var n = 0;\r\n            while (i < data.length && data[i] > prev && data[i] <= max) {\r\n                ++n;\r\n                ++i;\r\n            }\r\n            return n;\r\n        }\r\n        var m = new Matrix(this);\r\n        bins.forEach(function (val, i) {\r\n            var n = count(val);\r\n            prev = val;\r\n            m.set(i, 0, n);\r\n        });\r\n        m.set(m.height, 0, data.length - i);\r\n        return m;\r\n    }).args([\r\n        [\r\n            'data',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'bins',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('rank.eq', function (val, numbers, asc) {\r\n        numbers.sort(asc ? ascending : descending);\r\n        var pos = numbers.indexOf(val);\r\n        return pos < 0 ? new CalcError('N/A') : pos + 1;\r\n    }).args([\r\n        [\r\n            'value',\r\n            'number'\r\n        ],\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ],\r\n        [\r\n            'order',\r\n            [\r\n                'or',\r\n                'logical',\r\n                [\r\n                    'null',\r\n                    false\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineAlias('rank', 'rank.eq');\r\n    defineFunction('rank.avg', function (val, numbers, asc) {\r\n        numbers.sort(asc ? ascending : descending);\r\n        var pos = numbers.indexOf(val);\r\n        if (pos < 0) {\r\n            return new CalcError('N/A');\r\n        }\r\n        for (var i = pos; numbers[i] == val; ++i) {\r\n        }\r\n        return (pos + i + 1) / 2;\r\n    }).args([\r\n        [\r\n            'value',\r\n            'number'\r\n        ],\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ],\r\n        [\r\n            'order',\r\n            [\r\n                'or',\r\n                'logical',\r\n                [\r\n                    'null',\r\n                    false\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('kurt', function (numbers) {\r\n        var n = numbers.length;\r\n        var avg = _avg(numbers);\r\n        var variance = _var_sp(numbers, n - 1, avg);\r\n        var stddev = Math.sqrt(variance);\r\n        var sum = numbers.reduce(function (sum, num) {\r\n            return sum + Math.pow((num - avg) / stddev, 4);\r\n        }, 0);\r\n        return n * (n + 1) / ((n - 1) * (n - 2) * (n - 3)) * sum - 3 * Math.pow(n - 1, 2) / ((n - 2) * (n - 3));\r\n    }).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$numbers.length >= 4',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    function _percentrank(numbers, x, exc) {\r\n        var nlt = 0, ngt = 0, left = null, right = null, found = false;\r\n        numbers.forEach(function (num) {\r\n            if (num < x) {\r\n                nlt++;\r\n                left = left == null ? num : Math.max(left, num);\r\n            } else if (num > x) {\r\n                ngt++;\r\n                right = right == null ? num : Math.min(right, num);\r\n            } else {\r\n                found = true;\r\n            }\r\n        });\r\n        if (!nlt && !ngt) {\r\n            return new CalcError('N/A');\r\n        }\r\n        if (found) {\r\n            if (exc) {\r\n                return (nlt + 1) / (numbers.length + 1);\r\n            }\r\n            return nlt / (nlt + ngt);\r\n        }\r\n        return ((right - x) * _percentrank(numbers, left, exc) + (x - left) * _percentrank(numbers, right, exc)) / (right - left);\r\n    }\r\n    var ARGS_PERCENTRANK = [\r\n        [\r\n            'array',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'x',\r\n            'number'\r\n        ],\r\n        [\r\n            'significance',\r\n            [\r\n                'or',\r\n                [\r\n                    'null',\r\n                    3\r\n                ],\r\n                'integer++'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$array.length > 0',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ];\r\n    defineFunction('percentrank.inc', function (numbers, x, significance) {\r\n        var p = _percentrank(numbers, x, 0);\r\n        p = p.toFixed(significance + 1);\r\n        return parseFloat(p.substr(0, p.length - 1));\r\n    }).args(ARGS_PERCENTRANK);\r\n    defineFunction('percentrank.exc', function (numbers, x, significance) {\r\n        var p = _percentrank(numbers, x, 1);\r\n        p = p.toFixed(significance + 1);\r\n        return parseFloat(p.substr(0, p.length - 1));\r\n    }).args(ARGS_PERCENTRANK);\r\n    defineAlias('percentrank', 'percentrank.inc');\r\n    function _covariance(x, y, divisor) {\r\n        var sum = 0;\r\n        var ax = _avg(x);\r\n        var ay = _avg(y);\r\n        var n = x.length;\r\n        for (var i = 0; i < n; ++i) {\r\n            sum += (x[i] - ax) * (y[i] - ay);\r\n        }\r\n        return sum / divisor;\r\n    }\r\n    defineFunction('covariance.p', function (x, y) {\r\n        return _covariance(x, y, x.length);\r\n    }).args([\r\n        [\r\n            'array1',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'array2',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$array1.length == $array2.length',\r\n                'N/A'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$array1.length > 0',\r\n                'DIV/0'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('covariance.s', function (x, y) {\r\n        return _covariance(x, y, x.length - 1);\r\n    }).args([\r\n        [\r\n            'array1',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'array2',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$array1.length == $array2.length',\r\n                'N/A'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$array1.length > 1',\r\n                'DIV/0'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineAlias('covar', 'covariance.p');\r\n    var _fact = util.memoize(function (n) {\r\n        for (var i = 2, fact = 1; i <= n; ++i) {\r\n            fact *= i;\r\n        }\r\n        return fact;\r\n    });\r\n    defineFunction('fact', _fact).args([[\r\n            '*n',\r\n            'integer+'\r\n        ]]);\r\n    defineFunction('factdouble', function (n) {\r\n        for (var i = 2 + (n & 1), fact = 1; i <= n; i += 2) {\r\n            fact *= i;\r\n        }\r\n        return fact;\r\n    }).args([[\r\n            '*n',\r\n            'integer+'\r\n        ]]);\r\n    defineFunction('multinomial', function (numbers) {\r\n        var div = 1, sum = 0;\r\n        numbers.forEach(function (n) {\r\n            if (n < 0) {\r\n                throw new CalcError('NUM');\r\n            }\r\n            sum += n;\r\n            div *= _fact(n);\r\n        });\r\n        return _fact(sum) / div;\r\n    }).args([[\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ]]);\r\n    var _combinations = util.memoize(function (n, k) {\r\n        for (var f1 = k + 1, f2 = 1, p1 = 1, p2 = 1; f2 <= n - k; ++f1, ++f2) {\r\n            p1 *= f1;\r\n            p2 *= f2;\r\n        }\r\n        return p1 / p2;\r\n    });\r\n    defineFunction('combin', _combinations).args([\r\n        [\r\n            '*n',\r\n            'integer++'\r\n        ],\r\n        [\r\n            '*k',\r\n            [\r\n                'and',\r\n                'integer',\r\n                [\r\n                    '[between]',\r\n                    0,\r\n                    '$n'\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('combina', function (n, k) {\r\n        return _combinations(n + k - 1, n - 1);\r\n    }).args([\r\n        [\r\n            '*n',\r\n            'integer++'\r\n        ],\r\n        [\r\n            '*k',\r\n            [\r\n                'and',\r\n                'integer',\r\n                [\r\n                    '[between]',\r\n                    1,\r\n                    '$n'\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('average', function (numbers) {\r\n        var sum = numbers.reduce(function (sum, num) {\r\n            return sum + num;\r\n        }, 0);\r\n        return sum / numbers.length;\r\n    }).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                [\r\n                    'and',\r\n                    'number',\r\n                    [\r\n                        'not',\r\n                        'boolean'\r\n                    ]\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$numbers.length > 0',\r\n                'DIV/0'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('averagea', function (values) {\r\n        var sum = 0, count = 0;\r\n        values.forEach(function (num) {\r\n            if (typeof num != 'string') {\r\n                sum += num;\r\n            }\r\n            ++count;\r\n        });\r\n        return count ? sum / count : new CalcError('DIV/0');\r\n    }).args([[\r\n            'values',\r\n            [\r\n                'collect',\r\n                'anyvalue'\r\n            ]\r\n        ]]);\r\n    function _percentile(numbers, rank) {\r\n        numbers.sort(ascending);\r\n        var n = numbers.length;\r\n        var k = rank | 0, d = rank - k;\r\n        if (k === 0) {\r\n            return numbers[0];\r\n        }\r\n        if (k >= n) {\r\n            return numbers[n - 1];\r\n        }\r\n        --k;\r\n        return numbers[k] + d * (numbers[k + 1] - numbers[k]);\r\n    }\r\n    function _percentile_inc(numbers, p) {\r\n        var rank = p * (numbers.length - 1) + 1;\r\n        return _percentile(numbers, rank);\r\n    }\r\n    function _percentile_exc(numbers, p) {\r\n        var rank = p * (numbers.length + 1);\r\n        return _percentile(numbers, rank);\r\n    }\r\n    defineFunction('percentile.inc', _percentile_inc).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'p',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '[between]',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('percentile.exc', _percentile_exc).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'p',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '(between)',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('quartile.inc', function (numbers, quarter) {\r\n        return _percentile_inc(numbers, quarter / 4);\r\n    }).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'quarter',\r\n            [\r\n                'values',\r\n                0,\r\n                1,\r\n                2,\r\n                3,\r\n                4\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('quartile.exc', function (numbers, quarter) {\r\n        return _percentile_exc(numbers, quarter / 4);\r\n    }).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'quarter',\r\n            [\r\n                'values',\r\n                0,\r\n                1,\r\n                2,\r\n                3,\r\n                4\r\n            ]\r\n        ]\r\n    ]);\r\n    defineAlias('quartile', 'quartile.inc');\r\n    defineAlias('percentile', 'percentile.inc');\r\n    var AGGREGATE_FUNCS = [\r\n        'AVERAGE',\r\n        'COUNT',\r\n        'COUNTA',\r\n        'MAX',\r\n        'MIN',\r\n        'PRODUCT',\r\n        'STDEV.S',\r\n        'STDEV.P',\r\n        'SUM',\r\n        'VAR.S',\r\n        'VAR.P',\r\n        'MEDIAN',\r\n        'MODE.SNGL',\r\n        'LARGE',\r\n        'SMALL',\r\n        'PERCENTILE.INC',\r\n        'QUARTILE.INC',\r\n        'PERCENTILE.EXC',\r\n        'QUARTILE.EXC'\r\n    ];\r\n    function fetchValuesForAggregate(self, args, options) {\r\n        var values = [];\r\n        var opt_ignore_hidden_rows = 1;\r\n        var opt_ignore_errors = 2;\r\n        var opt_use_aggregates = 4;\r\n        (function fetchValues(args) {\r\n            if (args instanceof Ref) {\r\n                self.getRefCells(args, true).forEach(function (cell) {\r\n                    var value = cell.value;\r\n                    if (options & opt_ignore_hidden_rows && cell.hidden) {\r\n                        return;\r\n                    }\r\n                    if (cell.formula) {\r\n                        var str = cell.formula.print(cell.row, cell.col);\r\n                        if (/^\\s*(?:aggregate|subtotal)\\s*\\(/i.test(str)) {\r\n                            if (!(options & opt_use_aggregates)) {\r\n                                return;\r\n                            }\r\n                        }\r\n                        if ('value' in cell.formula) {\r\n                            value = cell.formula.value;\r\n                        }\r\n                    }\r\n                    if (options & opt_ignore_errors && value instanceof CalcError) {\r\n                        return;\r\n                    }\r\n                    if (typeof value == 'number' || value instanceof CalcError) {\r\n                        values.push(value);\r\n                    }\r\n                });\r\n            } else if (Array.isArray(args)) {\r\n                for (var i = 0; i < args.length; ++i) {\r\n                    fetchValues(args[i]);\r\n                }\r\n            } else if (args instanceof Matrix) {\r\n                args.each(fetchValues);\r\n            } else if (typeof args == 'number') {\r\n                values.push(args);\r\n            } else if (args instanceof CalcError && !(options & opt_ignore_errors)) {\r\n                values.push(args);\r\n            }\r\n        }(args));\r\n        return values;\r\n    }\r\n    defineFunction('aggregate', function (callback, funcId, options, args) {\r\n        var self = this;\r\n        self.resolveCells(args, function () {\r\n            var values;\r\n            if (funcId > 12) {\r\n                values = fetchValuesForAggregate(self, args[0], options);\r\n                var k = args[1];\r\n                if (k instanceof CellRef) {\r\n                    k = self.getRefData(k);\r\n                }\r\n                if (typeof k != 'number') {\r\n                    return callback(new CalcError('VALUE'));\r\n                }\r\n            } else {\r\n                values = fetchValuesForAggregate(self, args, options);\r\n            }\r\n            self.func(AGGREGATE_FUNCS[funcId - 1], callback, values);\r\n        });\r\n    }).argsAsync([\r\n        [\r\n            'funcId',\r\n            [\r\n                'values',\r\n                1,\r\n                2,\r\n                3,\r\n                4,\r\n                5,\r\n                6,\r\n                7,\r\n                8,\r\n                9,\r\n                10,\r\n                11,\r\n                12,\r\n                13,\r\n                14,\r\n                15,\r\n                16,\r\n                17,\r\n                18,\r\n                19\r\n            ]\r\n        ],\r\n        [\r\n            'options',\r\n            [\r\n                'or',\r\n                [\r\n                    'null',\r\n                    0\r\n                ],\r\n                [\r\n                    'values',\r\n                    0,\r\n                    1,\r\n                    2,\r\n                    3,\r\n                    4,\r\n                    5,\r\n                    6,\r\n                    7\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'args',\r\n            'rest'\r\n        ]\r\n    ]);\r\n    defineFunction('subtotal', function (callback, funcId) {\r\n        var self = this;\r\n        var ignoreHidden = funcId > 100;\r\n        if (ignoreHidden) {\r\n            funcId -= 100;\r\n        }\r\n        var args = [];\r\n        for (var i = 2; i < arguments.length; ++i) {\r\n            args.push(arguments[i]);\r\n        }\r\n        self.resolveCells(args, function () {\r\n            var values = fetchValuesForAggregate(self, args, ignoreHidden ? 1 : 0);\r\n            self.func(AGGREGATE_FUNCS[funcId - 1], callback, values);\r\n        });\r\n    }).argsAsync([\r\n        [\r\n            'funcId',\r\n            [\r\n                'values',\r\n                1,\r\n                2,\r\n                3,\r\n                4,\r\n                5,\r\n                6,\r\n                7,\r\n                8,\r\n                9,\r\n                10,\r\n                11,\r\n                101,\r\n                102,\r\n                103,\r\n                104,\r\n                105,\r\n                106,\r\n                107,\r\n                108,\r\n                109,\r\n                110,\r\n                111\r\n            ]\r\n        ],\r\n        [\r\n            '+',\r\n            [\r\n                'ref',\r\n                [\r\n                    'or',\r\n                    'ref',\r\n                    '#matrix'\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('avedev', function (numbers) {\r\n        var avg = numbers.reduce(function (sum, num) {\r\n            return sum + num;\r\n        }, 0) / numbers.length;\r\n        return numbers.reduce(function (sum, num) {\r\n            return sum + Math.abs(num - avg);\r\n        }, 0) / numbers.length;\r\n    }).args([\r\n        [\r\n            'numbers',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$numbers.length >= 2',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    function _binom_dist(x, n, p, cumulative) {\r\n        if (!cumulative) {\r\n            return _combinations(n, x) * Math.pow(p, x) * Math.pow(1 - p, n - x);\r\n        } else {\r\n            var sum = 0;\r\n            for (var j = 0; j <= x; ++j) {\r\n                sum += _combinations(n, j) * Math.pow(p, j) * Math.pow(1 - p, n - j);\r\n            }\r\n            return sum;\r\n        }\r\n    }\r\n    defineFunction('binom.dist', _binom_dist).args([\r\n        [\r\n            'successes',\r\n            'integer+'\r\n        ],\r\n        [\r\n            'trials',\r\n            [\r\n                'and',\r\n                'integer',\r\n                [\r\n                    'assert',\r\n                    '$trials >= $successes'\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'probability',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '[between]',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'cumulative',\r\n            'logical'\r\n        ]\r\n    ]);\r\n    defineAlias('binomdist', 'binom.dist');\r\n    defineFunction('binom.inv', function (n, p, alpha) {\r\n        for (var x = 0; x <= n; ++x) {\r\n            if (_binom_dist(x, n, p, true) >= alpha) {\r\n                return x;\r\n            }\r\n        }\r\n        return new CalcError('N/A');\r\n    }).args([\r\n        [\r\n            'trials',\r\n            'integer+'\r\n        ],\r\n        [\r\n            'probability',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '[between]',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'alpha',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '[between]',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineAlias('critbinom', 'binom.inv');\r\n    defineFunction('binom.dist.range', function (n, p, s, s2) {\r\n        var sum = 0;\r\n        for (var k = s; k <= s2; ++k) {\r\n            sum += _combinations(n, k) * Math.pow(p, k) * Math.pow(1 - p, n - k);\r\n        }\r\n        return sum;\r\n    }).args([\r\n        [\r\n            'trials',\r\n            'integer+'\r\n        ],\r\n        [\r\n            'probability',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '[between]',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'successes_min',\r\n            [\r\n                'and',\r\n                'integer',\r\n                [\r\n                    '[between]',\r\n                    0,\r\n                    '$trials'\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'successes_max',\r\n            [\r\n                'or',\r\n                [\r\n                    'and',\r\n                    'integer',\r\n                    [\r\n                        '[between]',\r\n                        '$successes_min',\r\n                        '$trials'\r\n                    ]\r\n                ],\r\n                [\r\n                    'null',\r\n                    '$successes_min'\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('negbinom.dist', function (x, k, p, cumulative) {\r\n        if (cumulative) {\r\n            var sum = 0;\r\n            while (x >= 0) {\r\n                sum += _combinations(x + k - 1, x) * Math.pow(p, k) * Math.pow(1 - p, x);\r\n                x--;\r\n            }\r\n            return sum;\r\n        }\r\n        return _combinations(x + k - 1, x) * Math.pow(p, k) * Math.pow(1 - p, x);\r\n    }).args([\r\n        [\r\n            'number_f',\r\n            'integer+'\r\n        ],\r\n        [\r\n            'number_s',\r\n            'integer+'\r\n        ],\r\n        [\r\n            'probability_s',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '[between]',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'cumulative',\r\n            'logical'\r\n        ]\r\n    ]);\r\n    defineAlias('negbinomdist', 'negbinom.dist');\r\n    defineFunction('address', function (row, col, abs, a1, sheet) {\r\n        var cell = new CellRef(row - 1, col - 1, abs - 1);\r\n        if (sheet) {\r\n            cell.setSheet(sheet, true);\r\n        }\r\n        return a1 ? cell.print(0, 0) : cell.print();\r\n    }).args([\r\n        [\r\n            'row',\r\n            'integer++'\r\n        ],\r\n        [\r\n            'col',\r\n            'integer++'\r\n        ],\r\n        [\r\n            'abs',\r\n            [\r\n                'or',\r\n                [\r\n                    'null',\r\n                    1\r\n                ],\r\n                [\r\n                    'values',\r\n                    1,\r\n                    2,\r\n                    3,\r\n                    4\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'a1',\r\n            [\r\n                'or',\r\n                [\r\n                    'null',\r\n                    true\r\n                ],\r\n                'logical'\r\n            ]\r\n        ],\r\n        [\r\n            'sheet',\r\n            [\r\n                'or',\r\n                'null',\r\n                'string'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('areas', function (ref) {\r\n        var count = 0;\r\n        (function loop(x) {\r\n            if (x instanceof CellRef || x instanceof RangeRef) {\r\n                count++;\r\n            } else if (x instanceof UnionRef) {\r\n                x.refs.forEach(loop);\r\n            }\r\n        }(ref));\r\n        return count;\r\n    }).args([[\r\n            'ref',\r\n            'ref'\r\n        ]]);\r\n    defineFunction('choose', function (index, args) {\r\n        if (index > args.length) {\r\n            return new CalcError('N/A');\r\n        } else {\r\n            return args[index - 1];\r\n        }\r\n    }).args([\r\n        [\r\n            '*index',\r\n            'integer'\r\n        ],\r\n        [\r\n            '+',\r\n            [\r\n                'value',\r\n                'anything'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('column', function (ref) {\r\n        if (!ref) {\r\n            return this.formula.col + 1;\r\n        }\r\n        if (ref instanceof CellRef) {\r\n            return ref.col + 1;\r\n        }\r\n        return this.asMatrix(ref).mapCol(function (col) {\r\n            return col + ref.topLeft.col + 1;\r\n        });\r\n    }).args([[\r\n            'ref',\r\n            [\r\n                'or',\r\n                'area',\r\n                'null'\r\n            ]\r\n        ]]);\r\n    defineFunction('columns', function (m) {\r\n        return m instanceof Ref ? m.width() : m.width;\r\n    }).args([[\r\n            'ref',\r\n            [\r\n                'or',\r\n                'area',\r\n                '#matrix'\r\n            ]\r\n        ]]);\r\n    defineFunction('formulatext', function (ref) {\r\n        var cell = this.getRefCells(ref)[0];\r\n        if (!cell.formula) {\r\n            return new CalcError('N/A');\r\n        }\r\n        return cell.formula.print(cell.row, cell.col);\r\n    }).args([[\r\n            'ref',\r\n            'ref'\r\n        ]]);\r\n    defineFunction('hlookup', function (value, m, row, approx) {\r\n        var resultCol = null;\r\n        m.eachCol(function (col) {\r\n            var data = m.get(0, col);\r\n            if (approx) {\r\n                if (data > value) {\r\n                    return true;\r\n                }\r\n                resultCol = col;\r\n            } else if (data === value) {\r\n                resultCol = col;\r\n                return true;\r\n            }\r\n        });\r\n        if (resultCol == null) {\r\n            return new CalcError('N/A');\r\n        }\r\n        return m.get(row - 1, resultCol);\r\n    }).args([\r\n        [\r\n            'value',\r\n            'anyvalue'\r\n        ],\r\n        [\r\n            'range',\r\n            'matrix'\r\n        ],\r\n        [\r\n            'row',\r\n            'integer++'\r\n        ],\r\n        [\r\n            'approx',\r\n            [\r\n                'or',\r\n                'logical',\r\n                [\r\n                    'null',\r\n                    true\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('index', function (ref, row, col, areanum) {\r\n        var m = ref instanceof UnionRef ? ref.refs[areanum - 1] : ref;\r\n        if (!row && !col || !m) {\r\n            return new CalcError('N/A');\r\n        }\r\n        m = this.asMatrix(m);\r\n        if (m.width > 1 && m.height > 1) {\r\n            if (row && col) {\r\n                return m.get(row - 1, col - 1);\r\n            }\r\n            if (!row) {\r\n                return m.mapRow(function (row) {\r\n                    return m.get(row, col - 1);\r\n                });\r\n            }\r\n            if (!col) {\r\n                return m.mapCol(function (col) {\r\n                    return m.get(row - 1, col);\r\n                });\r\n            }\r\n        }\r\n        if (m.width == 1) {\r\n            return m.get(row - 1, 0);\r\n        }\r\n        if (m.height == 1) {\r\n            return m.get(0, col - 1);\r\n        }\r\n        return new CalcError('REF');\r\n    }).args([\r\n        [\r\n            'range',\r\n            [\r\n                'or',\r\n                'matrix',\r\n                'ref'\r\n            ]\r\n        ],\r\n        [\r\n            'row',\r\n            [\r\n                'or',\r\n                'integer+',\r\n                'null'\r\n            ]\r\n        ],\r\n        [\r\n            'col',\r\n            [\r\n                'or',\r\n                'integer+',\r\n                'null'\r\n            ]\r\n        ],\r\n        [\r\n            'areanum',\r\n            [\r\n                'or',\r\n                'integer++',\r\n                [\r\n                    'null',\r\n                    1\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('indirect', function (thing) {\r\n        try {\r\n            var f = this.formula;\r\n            var exp = calc.parseFormula(f.sheet, f.row, f.col, thing);\r\n            if (!(exp.ast instanceof Ref)) {\r\n                throw 1;\r\n            }\r\n            return exp.ast.absolute(f.row, f.col);\r\n        } catch (ex) {\r\n            return new CalcError('REF');\r\n        }\r\n    }).args([[\r\n            'thing',\r\n            'string'\r\n        ]]);\r\n    defineFunction('match', function (val, m, type) {\r\n        var index = 1, cmp;\r\n        if (type === 0) {\r\n            cmp = parseCriteria(val);\r\n        } else if (type === -1) {\r\n            cmp = parseCriteria('<=' + val);\r\n        } else if (type === 1) {\r\n            cmp = parseCriteria('>=' + val);\r\n        }\r\n        if (m.each(function (el) {\r\n                if (el != null && cmp(el)) {\r\n                    if (type !== 0 && val != el) {\r\n                        --index;\r\n                    }\r\n                    return true;\r\n                }\r\n                index++;\r\n            }, true) && index > 0) {\r\n            return index;\r\n        } else {\r\n            return new CalcError('N/A');\r\n        }\r\n    }).args([\r\n        [\r\n            'value',\r\n            'anyvalue'\r\n        ],\r\n        [\r\n            'range',\r\n            'matrix'\r\n        ],\r\n        [\r\n            'type',\r\n            [\r\n                'or',\r\n                [\r\n                    'values',\r\n                    -1,\r\n                    0,\r\n                    1\r\n                ],\r\n                [\r\n                    'null',\r\n                    1\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('offset', function (ref, rows, cols, height, width) {\r\n        var topLeft = (ref instanceof CellRef ? ref : ref.topLeft).clone();\r\n        topLeft.row += rows;\r\n        topLeft.col += cols;\r\n        if (topLeft.row < 0 || topLeft.col < 0) {\r\n            return new CalcError('VALUE');\r\n        }\r\n        if (height > 1 || width > 1) {\r\n            return new RangeRef(topLeft, new CellRef(topLeft.row + height - 1, topLeft.col + width - 1)).setSheet(ref.sheet, ref.hasSheet());\r\n        }\r\n        return topLeft;\r\n    }).args([\r\n        [\r\n            'ref',\r\n            'area'\r\n        ],\r\n        [\r\n            '*rows',\r\n            'integer'\r\n        ],\r\n        [\r\n            '*cols',\r\n            'integer'\r\n        ],\r\n        [\r\n            '*height',\r\n            [\r\n                'or',\r\n                'integer++',\r\n                [\r\n                    'null',\r\n                    '$ref.height()'\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '*width',\r\n            [\r\n                'or',\r\n                'integer++',\r\n                [\r\n                    'null',\r\n                    '$ref.width()'\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('row', function (ref) {\r\n        if (!ref) {\r\n            return this.formula.row + 1;\r\n        }\r\n        if (ref instanceof CellRef) {\r\n            return ref.row + 1;\r\n        }\r\n        return this.asMatrix(ref).mapRow(function (row) {\r\n            return row + ref.topLeft.row + 1;\r\n        });\r\n    }).args([[\r\n            'ref',\r\n            [\r\n                'or',\r\n                'area',\r\n                'null'\r\n            ]\r\n        ]]);\r\n    defineFunction('rows', function (m) {\r\n        return m instanceof Ref ? m.height() : m.height;\r\n    }).args([[\r\n            'ref',\r\n            [\r\n                'or',\r\n                'area',\r\n                '#matrix'\r\n            ]\r\n        ]]);\r\n    defineFunction('vlookup', function (value, m, col, approx) {\r\n        var resultRow = null;\r\n        m.eachRow(function (row) {\r\n            var data = m.get(row, 0);\r\n            if (approx) {\r\n                if (data > value) {\r\n                    return true;\r\n                }\r\n                resultRow = row;\r\n            } else if (data === value) {\r\n                resultRow = row;\r\n                return true;\r\n            }\r\n        });\r\n        if (resultRow == null) {\r\n            return new CalcError('N/A');\r\n        }\r\n        return m.get(resultRow, col - 1);\r\n    }).args([\r\n        [\r\n            'value',\r\n            'anyvalue'\r\n        ],\r\n        [\r\n            'range',\r\n            'matrix'\r\n        ],\r\n        [\r\n            'col',\r\n            'integer++'\r\n        ],\r\n        [\r\n            'approx',\r\n            [\r\n                'or',\r\n                'logical',\r\n                [\r\n                    'null',\r\n                    true\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('date', function (year, month, date) {\r\n        return packDate(year, month - 1, date);\r\n    }).args([\r\n        [\r\n            '*year',\r\n            'integer'\r\n        ],\r\n        [\r\n            '*month',\r\n            'integer'\r\n        ],\r\n        [\r\n            '*date',\r\n            'integer'\r\n        ]\r\n    ]);\r\n    defineFunction('day', function (date) {\r\n        return unpackDate(date).date;\r\n    }).args([[\r\n            '*date',\r\n            'date'\r\n        ]]);\r\n    defineFunction('month', function (date) {\r\n        return unpackDate(date).month + 1;\r\n    }).args([[\r\n            '*date',\r\n            'date'\r\n        ]]);\r\n    defineFunction('year', function (date) {\r\n        return unpackDate(date).year;\r\n    }).args([[\r\n            '*date',\r\n            'date'\r\n        ]]);\r\n    defineFunction('weekday', function (date) {\r\n        return unpackDate(date).day + 1;\r\n    }).args([[\r\n            '*date',\r\n            'date'\r\n        ]]);\r\n    defineFunction('weeknum', function (date, type) {\r\n        var fw = packDate(unpackDate(date).year, 0, 1);\r\n        var sy = unpackDate(fw);\r\n        var diff;\r\n        if (type == 21) {\r\n            diff = 3 - (sy.day + 6) % 7;\r\n            if (diff < 0) {\r\n                diff += 7;\r\n            }\r\n            fw += diff;\r\n            sy.date += diff;\r\n            sy.day = 4;\r\n            type = 1;\r\n        } else {\r\n            if (type == 1) {\r\n                type = 0;\r\n            } else if (type == 2) {\r\n                type = 1;\r\n            } else {\r\n                type = (type - 10) % 7;\r\n            }\r\n        }\r\n        diff = sy.day - type;\r\n        if (diff < 0) {\r\n            diff += 7;\r\n        }\r\n        fw -= diff;\r\n        return Math.ceil((date + 1 - fw) / 7);\r\n    }).args([\r\n        [\r\n            '*date',\r\n            'date'\r\n        ],\r\n        [\r\n            '*type',\r\n            [\r\n                'or',\r\n                [\r\n                    'null',\r\n                    1\r\n                ],\r\n                [\r\n                    'values',\r\n                    1,\r\n                    2,\r\n                    11,\r\n                    12,\r\n                    13,\r\n                    14,\r\n                    15,\r\n                    16,\r\n                    17,\r\n                    21\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    function weeksInYear(year) {\r\n        var d = unpackDate(packDate(year, 0, 1));\r\n        if (d.day == 4 || d.day == 3 && runtime.isLeapYear(year)) {\r\n            return 53;\r\n        }\r\n        return 52;\r\n    }\r\n    defineFunction('isoweeknum', function isoweeknum(date) {\r\n        var d = unpackDate(date);\r\n        var dow = d.day || 7;\r\n        var wk = Math.floor((d.ord - dow + 10) / 7);\r\n        if (wk < 1) {\r\n            return weeksInYear(d.year - 1);\r\n        } else if (wk == 53 && wk > weeksInYear(d.year)) {\r\n            return 1;\r\n        }\r\n        return wk;\r\n    }).args([[\r\n            '*date',\r\n            'date'\r\n        ]]);\r\n    defineFunction('now', function () {\r\n        return runtime.dateToSerial(new Date());\r\n    }).args([]);\r\n    defineFunction('today', function () {\r\n        return runtime.dateToSerial(new Date()) | 0;\r\n    }).args([]);\r\n    defineFunction('time', function (hh, mm, ss) {\r\n        return runtime.packTime(hh, mm, ss, 0);\r\n    }).args([\r\n        [\r\n            '*hours',\r\n            'integer'\r\n        ],\r\n        [\r\n            '*minutes',\r\n            'integer'\r\n        ],\r\n        [\r\n            '*seconds',\r\n            'integer'\r\n        ]\r\n    ]);\r\n    defineFunction('hour', function (time) {\r\n        return runtime.unpackTime(time).hours;\r\n    }).args([[\r\n            '*time',\r\n            'datetime'\r\n        ]]);\r\n    defineFunction('minute', function (time) {\r\n        return runtime.unpackTime(time).minutes;\r\n    }).args([[\r\n            '*time',\r\n            'datetime'\r\n        ]]);\r\n    defineFunction('second', function (time) {\r\n        return runtime.unpackTime(time).seconds;\r\n    }).args([[\r\n            '*time',\r\n            'datetime'\r\n        ]]);\r\n    defineFunction('edate', function (base, months) {\r\n        var d = unpackDate(base);\r\n        var m = d.month + months;\r\n        var y = d.year + Math.floor(m / 12);\r\n        m %= 12;\r\n        if (m < 0) {\r\n            m += 12;\r\n        }\r\n        d = Math.min(d.date, daysInMonth(y, m));\r\n        return packDate(y, m, d);\r\n    }).args([\r\n        [\r\n            '*start_date',\r\n            'date'\r\n        ],\r\n        [\r\n            '*months',\r\n            'integer'\r\n        ]\r\n    ]);\r\n    defineFunction('eomonth', function (base, months) {\r\n        var d = unpackDate(base);\r\n        var m = d.month + months;\r\n        var y = d.year + Math.floor(m / 12);\r\n        m %= 12;\r\n        if (m < 0) {\r\n            m += 12;\r\n        }\r\n        d = daysInMonth(y, m);\r\n        return packDate(y, m, d);\r\n    }).args([\r\n        [\r\n            '*start_date',\r\n            'date'\r\n        ],\r\n        [\r\n            '*months',\r\n            'integer'\r\n        ]\r\n    ]);\r\n    defineFunction('workday', function (date, n, holidays) {\r\n        var inc = n > 0 ? 1 : -1;\r\n        n = Math.abs(n);\r\n        var dow = unpackDate(date).day;\r\n        while (n > 0) {\r\n            date += inc;\r\n            dow = (dow + inc) % 7;\r\n            if (dow > 0 && dow < 6 && holidays.indexOf(date) < 0) {\r\n                --n;\r\n            }\r\n        }\r\n        return date;\r\n    }).args([\r\n        [\r\n            'start_date',\r\n            'date'\r\n        ],\r\n        [\r\n            'days',\r\n            'integer'\r\n        ],\r\n        [\r\n            'holidays',\r\n            [\r\n                'collect',\r\n                'date'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('networkdays', function (date, end, holidays) {\r\n        if (date > end) {\r\n            var tmp = date;\r\n            date = end;\r\n            end = tmp;\r\n        }\r\n        var count = 0;\r\n        var dow = unpackDate(date).day;\r\n        while (date <= end) {\r\n            if (dow > 0 && dow < 6 && holidays.indexOf(date) < 0) {\r\n                count++;\r\n            }\r\n            date++;\r\n            dow = (dow + 1) % 7;\r\n        }\r\n        return count;\r\n    }).args([\r\n        [\r\n            'start_date',\r\n            'date'\r\n        ],\r\n        [\r\n            'end_date',\r\n            'date'\r\n        ],\r\n        [\r\n            'holidays',\r\n            [\r\n                'collect',\r\n                'date'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('days', function (start, end) {\r\n        return end - start;\r\n    }).args([\r\n        [\r\n            '*start_date',\r\n            'date'\r\n        ],\r\n        [\r\n            '*end_date',\r\n            'date'\r\n        ]\r\n    ]);\r\n    function _days_360(start, end, method) {\r\n        var d1 = unpackDate(start);\r\n        var d2 = unpackDate(end);\r\n        if (method) {\r\n            if (d1.date == 31) {\r\n                d1.date = 30;\r\n            }\r\n            if (d2.date == 31) {\r\n                d2.date = 30;\r\n            }\r\n        } else {\r\n            if (d1.month == 1 && d2.month == 1 && d1.date == daysInMonth(d1.year, 1) && d2.date == daysInMonth(d2.year, 1)) {\r\n                d2.date = 30;\r\n            }\r\n            if (d1.date == daysInMonth(d1.year, d1.month)) {\r\n                d1.date = 30;\r\n                if (d2.date == 31) {\r\n                    d2.date = 30;\r\n                }\r\n            } else {\r\n                if (d1.date == 30 && d2.date == 31) {\r\n                    d2.date = 30;\r\n                }\r\n            }\r\n        }\r\n        return 360 * (d2.year - d1.year) + 30 * (d2.month - d1.month) + (d2.date - d1.date);\r\n    }\r\n    runtime._days_360 = _days_360;\r\n    defineFunction('days360', _days_360).args([\r\n        [\r\n            '*start_date',\r\n            'date'\r\n        ],\r\n        [\r\n            '*end_date',\r\n            'date'\r\n        ],\r\n        [\r\n            '*method',\r\n            [\r\n                'or',\r\n                'logical',\r\n                [\r\n                    'null',\r\n                    false\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('yearfrac', function (start, end, method) {\r\n        switch (method) {\r\n        case 0:\r\n            return _days_360(start, end, false) / 360;\r\n        case 1:\r\n            return (end - start) / daysInYear(unpackDate(start).year);\r\n        case 2:\r\n            return (end - start) / 360;\r\n        case 3:\r\n            return (end - start) / 365;\r\n        case 4:\r\n            return _days_360(start, end, true) / 360;\r\n        }\r\n    }).args([\r\n        [\r\n            '*start_date',\r\n            'date'\r\n        ],\r\n        [\r\n            '*end_date',\r\n            'date'\r\n        ],\r\n        [\r\n            '*method',\r\n            [\r\n                'or',\r\n                [\r\n                    'null',\r\n                    0\r\n                ],\r\n                [\r\n                    'values',\r\n                    0,\r\n                    1,\r\n                    2,\r\n                    3,\r\n                    4\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('datevalue', function (text) {\r\n        var date = runtime.parseDate(text);\r\n        if (date) {\r\n            return runtime.dateToSerial(date);\r\n        }\r\n        return new CalcError('VALUE');\r\n    }).args([[\r\n            '*text',\r\n            'string'\r\n        ]]);\r\n    defineFunction('timevalue', function (text) {\r\n        var m = text.toLowerCase().match(/(\\d+):(\\d+)(:(\\d+)(\\.(\\d+))?)?\\s*(am?|pm?)?/);\r\n        if (m) {\r\n            var hh = parseFloat(m[1]);\r\n            var mm = parseFloat(m[2]);\r\n            var ss = m[3] ? parseFloat(m[4]) : 0;\r\n            var ampm = m[7];\r\n            if (ampm && (hh > 12 || hh < 1)) {\r\n                return new CalcError('VALUE');\r\n            }\r\n            if (/^p/.test(ampm)) {\r\n                hh += 12;\r\n            }\r\n            return runtime.packTime(hh, mm, ss, 0);\r\n        }\r\n        return new CalcError('VALUE');\r\n    }).args([[\r\n            '*text',\r\n            'string'\r\n        ]]);\r\n    defineFunction('mdeterm', function (m) {\r\n        var error = m.each(function (val) {\r\n            if (typeof val != 'number') {\r\n                return new CalcError('VALUE');\r\n            }\r\n        }, true);\r\n        return error || m.determinant();\r\n    }).args([[\r\n            'm',\r\n            [\r\n                'and',\r\n                'matrix',\r\n                [\r\n                    'assert',\r\n                    '$m.width == $m.height'\r\n                ]\r\n            ]\r\n        ]]);\r\n    defineFunction('transpose', function (m) {\r\n        return m.transpose();\r\n    }).args([[\r\n            'range',\r\n            'matrix'\r\n        ]]);\r\n    defineFunction('mmult', function (a, b) {\r\n        return a.multiply(b);\r\n    }).args([\r\n        [\r\n            'a',\r\n            'matrix'\r\n        ],\r\n        [\r\n            'b',\r\n            [\r\n                'and',\r\n                'matrix',\r\n                [\r\n                    'assert',\r\n                    '$b.height == $a.width'\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('munit', function (n) {\r\n        return new Matrix(this).unit(n);\r\n    }).args([[\r\n            'n',\r\n            'integer+'\r\n        ]]);\r\n    defineFunction('minverse', function (m) {\r\n        var error = m.each(function (val) {\r\n            if (typeof val != 'number') {\r\n                return new CalcError('VALUE');\r\n            }\r\n        }, true);\r\n        return error || m.inverse() || new CalcError('VALUE');\r\n    }).args([[\r\n            'm',\r\n            [\r\n                'and',\r\n                'matrix',\r\n                [\r\n                    'assert',\r\n                    '$m.width == $m.height'\r\n                ]\r\n            ]\r\n        ]]);\r\n    defineFunction('rand', function () {\r\n        return Math.random();\r\n    }).args([]);\r\n    defineFunction('randbetween', function (min, max) {\r\n        return min + Math.floor((max - min + 1) * Math.random());\r\n    }).args([\r\n        [\r\n            'min',\r\n            'integer'\r\n        ],\r\n        [\r\n            'max',\r\n            [\r\n                'and',\r\n                'integer',\r\n                [\r\n                    'assert',\r\n                    '$max >= $min'\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('true', function () {\r\n        return true;\r\n    }).args([]);\r\n    defineFunction('false', function () {\r\n        return true;\r\n    }).args([]);\r\n    defineFunction('roman', function (num) {\r\n        return util.arabicToRoman(num).toUpperCase();\r\n    }).args([[\r\n            '*number',\r\n            'integer'\r\n        ]]);\r\n    defineFunction('arabic', function (rom) {\r\n        var num = util.romanToArabic(rom);\r\n        return num == null ? new CalcError('VALUE') : num;\r\n    }).args([[\r\n            '*roman',\r\n            'string'\r\n        ]]);\r\n    defineFunction('base', function (number, radix, minLen) {\r\n        var str = number.toString(radix).toUpperCase();\r\n        while (str.length < minLen) {\r\n            str = '0' + str;\r\n        }\r\n        return str;\r\n    }).args([\r\n        [\r\n            '*number',\r\n            'integer'\r\n        ],\r\n        [\r\n            '*radix',\r\n            [\r\n                'and',\r\n                'integer',\r\n                [\r\n                    '[between]',\r\n                    2,\r\n                    36\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '*minLen',\r\n            [\r\n                'or',\r\n                'integer+',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('decimal', function (text, radix) {\r\n        text = text.toUpperCase();\r\n        var val = 0;\r\n        for (var i = 0; i < text.length; ++i) {\r\n            var d = text.charCodeAt(i);\r\n            if (d >= 48 && d <= 57) {\r\n                d -= 48;\r\n            } else if (d >= 65 && d < 55 + radix) {\r\n                d -= 55;\r\n            } else {\r\n                return new CalcError('VALUE');\r\n            }\r\n            val = val * radix + d;\r\n        }\r\n        return val;\r\n    }).args([\r\n        [\r\n            '*text',\r\n            'string'\r\n        ],\r\n        [\r\n            '*radix',\r\n            [\r\n                'and',\r\n                'integer',\r\n                [\r\n                    '[between]',\r\n                    2,\r\n                    36\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('char', function (code) {\r\n        return String.fromCharCode(code);\r\n    }).args([[\r\n            '*code',\r\n            'integer+'\r\n        ]]);\r\n    var RX_NON_PRINTABLE = /[\\0-\\x1F\\x7F-\\x9F\\xAD\\u0378\\u0379\\u037F-\\u0383\\u038B\\u038D\\u03A2\\u0528-\\u0530\\u0557\\u0558\\u0560\\u0588\\u058B-\\u058E\\u0590\\u05C8-\\u05CF\\u05EB-\\u05EF\\u05F5-\\u0605\\u061C\\u061D\\u06DD\\u070E\\u070F\\u074B\\u074C\\u07B2-\\u07BF\\u07FB-\\u07FF\\u082E\\u082F\\u083F\\u085C\\u085D\\u085F-\\u089F\\u08A1\\u08AD-\\u08E3\\u08FF\\u0978\\u0980\\u0984\\u098D\\u098E\\u0991\\u0992\\u09A9\\u09B1\\u09B3-\\u09B5\\u09BA\\u09BB\\u09C5\\u09C6\\u09C9\\u09CA\\u09CF-\\u09D6\\u09D8-\\u09DB\\u09DE\\u09E4\\u09E5\\u09FC-\\u0A00\\u0A04\\u0A0B-\\u0A0E\\u0A11\\u0A12\\u0A29\\u0A31\\u0A34\\u0A37\\u0A3A\\u0A3B\\u0A3D\\u0A43-\\u0A46\\u0A49\\u0A4A\\u0A4E-\\u0A50\\u0A52-\\u0A58\\u0A5D\\u0A5F-\\u0A65\\u0A76-\\u0A80\\u0A84\\u0A8E\\u0A92\\u0AA9\\u0AB1\\u0AB4\\u0ABA\\u0ABB\\u0AC6\\u0ACA\\u0ACE\\u0ACF\\u0AD1-\\u0ADF\\u0AE4\\u0AE5\\u0AF2-\\u0B00\\u0B04\\u0B0D\\u0B0E\\u0B11\\u0B12\\u0B29\\u0B31\\u0B34\\u0B3A\\u0B3B\\u0B45\\u0B46\\u0B49\\u0B4A\\u0B4E-\\u0B55\\u0B58-\\u0B5B\\u0B5E\\u0B64\\u0B65\\u0B78-\\u0B81\\u0B84\\u0B8B-\\u0B8D\\u0B91\\u0B96-\\u0B98\\u0B9B\\u0B9D\\u0BA0-\\u0BA2\\u0BA5-\\u0BA7\\u0BAB-\\u0BAD\\u0BBA-\\u0BBD\\u0BC3-\\u0BC5\\u0BC9\\u0BCE\\u0BCF\\u0BD1-\\u0BD6\\u0BD8-\\u0BE5\\u0BFB-\\u0C00\\u0C04\\u0C0D\\u0C11\\u0C29\\u0C34\\u0C3A-\\u0C3C\\u0C45\\u0C49\\u0C4E-\\u0C54\\u0C57\\u0C5A-\\u0C5F\\u0C64\\u0C65\\u0C70-\\u0C77\\u0C80\\u0C81\\u0C84\\u0C8D\\u0C91\\u0CA9\\u0CB4\\u0CBA\\u0CBB\\u0CC5\\u0CC9\\u0CCE-\\u0CD4\\u0CD7-\\u0CDD\\u0CDF\\u0CE4\\u0CE5\\u0CF0\\u0CF3-\\u0D01\\u0D04\\u0D0D\\u0D11\\u0D3B\\u0D3C\\u0D45\\u0D49\\u0D4F-\\u0D56\\u0D58-\\u0D5F\\u0D64\\u0D65\\u0D76-\\u0D78\\u0D80\\u0D81\\u0D84\\u0D97-\\u0D99\\u0DB2\\u0DBC\\u0DBE\\u0DBF\\u0DC7-\\u0DC9\\u0DCB-\\u0DCE\\u0DD5\\u0DD7\\u0DE0-\\u0DF1\\u0DF5-\\u0E00\\u0E3B-\\u0E3E\\u0E5C-\\u0E80\\u0E83\\u0E85\\u0E86\\u0E89\\u0E8B\\u0E8C\\u0E8E-\\u0E93\\u0E98\\u0EA0\\u0EA4\\u0EA6\\u0EA8\\u0EA9\\u0EAC\\u0EBA\\u0EBE\\u0EBF\\u0EC5\\u0EC7\\u0ECE\\u0ECF\\u0EDA\\u0EDB\\u0EE0-\\u0EFF\\u0F48\\u0F6D-\\u0F70\\u0F98\\u0FBD\\u0FCD\\u0FDB-\\u0FFF\\u10C6\\u10C8-\\u10CC\\u10CE\\u10CF\\u1249\\u124E\\u124F\\u1257\\u1259\\u125E\\u125F\\u1289\\u128E\\u128F\\u12B1\\u12B6\\u12B7\\u12BF\\u12C1\\u12C6\\u12C7\\u12D7\\u1311\\u1316\\u1317\\u135B\\u135C\\u137D-\\u137F\\u139A-\\u139F\\u13F5-\\u13FF\\u169D-\\u169F\\u16F1-\\u16FF\\u170D\\u1715-\\u171F\\u1737-\\u173F\\u1754-\\u175F\\u176D\\u1771\\u1774-\\u177F\\u17DE\\u17DF\\u17EA-\\u17EF\\u17FA-\\u17FF\\u180F\\u181A-\\u181F\\u1878-\\u187F\\u18AB-\\u18AF\\u18F6-\\u18FF\\u191D-\\u191F\\u192C-\\u192F\\u193C-\\u193F\\u1941-\\u1943\\u196E\\u196F\\u1975-\\u197F\\u19AC-\\u19AF\\u19CA-\\u19CF\\u19DB-\\u19DD\\u1A1C\\u1A1D\\u1A5F\\u1A7D\\u1A7E\\u1A8A-\\u1A8F\\u1A9A-\\u1A9F\\u1AAE-\\u1AFF\\u1B4C-\\u1B4F\\u1B7D-\\u1B7F\\u1BF4-\\u1BFB\\u1C38-\\u1C3A\\u1C4A-\\u1C4C\\u1C80-\\u1CBF\\u1CC8-\\u1CCF\\u1CF7-\\u1CFF\\u1DE7-\\u1DFB\\u1F16\\u1F17\\u1F1E\\u1F1F\\u1F46\\u1F47\\u1F4E\\u1F4F\\u1F58\\u1F5A\\u1F5C\\u1F5E\\u1F7E\\u1F7F\\u1FB5\\u1FC5\\u1FD4\\u1FD5\\u1FDC\\u1FF0\\u1FF1\\u1FF5\\u1FFF\\u200B-\\u200F\\u202A-\\u202E\\u2060-\\u206F\\u2072\\u2073\\u208F\\u209D-\\u209F\\u20BB-\\u20CF\\u20F1-\\u20FF\\u218A-\\u218F\\u23F4-\\u23FF\\u2427-\\u243F\\u244B-\\u245F\\u2700\\u2B4D-\\u2B4F\\u2B5A-\\u2BFF\\u2C2F\\u2C5F\\u2CF4-\\u2CF8\\u2D26\\u2D28-\\u2D2C\\u2D2E\\u2D2F\\u2D68-\\u2D6E\\u2D71-\\u2D7E\\u2D97-\\u2D9F\\u2DA7\\u2DAF\\u2DB7\\u2DBF\\u2DC7\\u2DCF\\u2DD7\\u2DDF\\u2E3C-\\u2E7F\\u2E9A\\u2EF4-\\u2EFF\\u2FD6-\\u2FEF\\u2FFC-\\u2FFF\\u3040\\u3097\\u3098\\u3100-\\u3104\\u312E-\\u3130\\u318F\\u31BB-\\u31BF\\u31E4-\\u31EF\\u321F\\u32FF\\u4DB6-\\u4DBF\\u9FCD-\\u9FFF\\uA48D-\\uA48F\\uA4C7-\\uA4CF\\uA62C-\\uA63F\\uA698-\\uA69E\\uA6F8-\\uA6FF\\uA78F\\uA794-\\uA79F\\uA7AB-\\uA7F7\\uA82C-\\uA82F\\uA83A-\\uA83F\\uA878-\\uA87F\\uA8C5-\\uA8CD\\uA8DA-\\uA8DF\\uA8FC-\\uA8FF\\uA954-\\uA95E\\uA97D-\\uA97F\\uA9CE\\uA9DA-\\uA9DD\\uA9E0-\\uA9FF\\uAA37-\\uAA3F\\uAA4E\\uAA4F\\uAA5A\\uAA5B\\uAA7C-\\uAA7F\\uAAC3-\\uAADA\\uAAF7-\\uAB00\\uAB07\\uAB08\\uAB0F\\uAB10\\uAB17-\\uAB1F\\uAB27\\uAB2F-\\uABBF\\uABEE\\uABEF\\uABFA-\\uABFF\\uD7A4-\\uD7AF\\uD7C7-\\uD7CA\\uD7FC-\\uF8FF\\uFA6E\\uFA6F\\uFADA-\\uFAFF\\uFB07-\\uFB12\\uFB18-\\uFB1C\\uFB37\\uFB3D\\uFB3F\\uFB42\\uFB45\\uFBC2-\\uFBD2\\uFD40-\\uFD4F\\uFD90\\uFD91\\uFDC8-\\uFDEF\\uFDFE\\uFDFF\\uFE1A-\\uFE1F\\uFE27-\\uFE2F\\uFE53\\uFE67\\uFE6C-\\uFE6F\\uFE75\\uFEFD-\\uFF00\\uFFBF-\\uFFC1\\uFFC8\\uFFC9\\uFFD0\\uFFD1\\uFFD8\\uFFD9\\uFFDD-\\uFFDF\\uFFE7\\uFFEF-\\uFFFB\\uFFFE\\uFFFF]/g;\r\n    defineFunction('clean', function (text) {\r\n        return text.replace(RX_NON_PRINTABLE, '');\r\n    }).args([[\r\n            '*text',\r\n            'string'\r\n        ]]);\r\n    defineFunction('code', function (text) {\r\n        return text.charAt(0);\r\n    }).args([[\r\n            '*text',\r\n            'string'\r\n        ]]);\r\n    defineAlias('unichar', 'char');\r\n    defineAlias('unicode', 'code');\r\n    defineFunction('concatenate', function () {\r\n        var out = '';\r\n        for (var i = 0; i < arguments.length; ++i) {\r\n            out += arguments[i];\r\n        }\r\n        return out;\r\n    }).args([[\r\n            '+',\r\n            [\r\n                '*text',\r\n                'string'\r\n            ]\r\n        ]]);\r\n    defineFunction('dollar', function (number, decimals) {\r\n        var format = '$#,##0.DECIMALS;($#,##0.DECIMALS)';\r\n        var dec = '';\r\n        while (decimals-- > 0) {\r\n            dec += '0';\r\n        }\r\n        format = format.replace(/DECIMALS/g, dec);\r\n        return spreadsheet.formatting.text(number, format);\r\n    }).args([\r\n        [\r\n            '*number',\r\n            'number'\r\n        ],\r\n        [\r\n            '*decimals',\r\n            [\r\n                'or',\r\n                'integer++',\r\n                [\r\n                    'null',\r\n                    2\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('exact', function (a, b) {\r\n        return a === b;\r\n    }).args([\r\n        [\r\n            '*text1',\r\n            'string'\r\n        ],\r\n        [\r\n            '*text2',\r\n            'string'\r\n        ]\r\n    ]);\r\n    defineFunction('find', function (substring, string, start) {\r\n        var pos = string.indexOf(substring, start - 1);\r\n        return pos < 0 ? new CalcError('VALUE') : pos + 1;\r\n    }).args([\r\n        [\r\n            '*substring',\r\n            'string'\r\n        ],\r\n        [\r\n            '*string',\r\n            'string'\r\n        ],\r\n        [\r\n            '*start',\r\n            [\r\n                'or',\r\n                'integer++',\r\n                [\r\n                    'null',\r\n                    1\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('fixed', function (number, decimals, noCommas) {\r\n        var format = noCommas ? '0.DECIMALS' : '#,##0.DECIMALS';\r\n        var dec = '';\r\n        while (decimals-- > 0) {\r\n            dec += '0';\r\n        }\r\n        format = format.replace(/DECIMALS/g, dec);\r\n        return spreadsheet.formatting.text(number, format);\r\n    }).args([\r\n        [\r\n            '*number',\r\n            'number'\r\n        ],\r\n        [\r\n            '*decimals',\r\n            [\r\n                'or',\r\n                'integer++',\r\n                [\r\n                    'null',\r\n                    2\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '*noCommas',\r\n            [\r\n                'or',\r\n                'boolean',\r\n                [\r\n                    'null',\r\n                    false\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('left', function (text, length) {\r\n        return text.substr(0, length);\r\n    }).args([\r\n        [\r\n            '*text',\r\n            'string'\r\n        ],\r\n        [\r\n            '*length',\r\n            [\r\n                'or',\r\n                'integer+',\r\n                [\r\n                    'null',\r\n                    1\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('right', function (text, length) {\r\n        return text.substr(-length);\r\n    }).args([\r\n        [\r\n            '*text',\r\n            'string'\r\n        ],\r\n        [\r\n            '*length',\r\n            [\r\n                'or',\r\n                'integer+',\r\n                [\r\n                    'null',\r\n                    1\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('len', function (text) {\r\n        return text.length;\r\n    }).args([[\r\n            '*text',\r\n            'string'\r\n        ]]);\r\n    defineFunction('lower', function (text) {\r\n        return text.toLowerCase();\r\n    }).args([[\r\n            '*text',\r\n            'string'\r\n        ]]);\r\n    defineFunction('upper', function (text) {\r\n        return text.toUpperCase();\r\n    }).args([[\r\n            '*text',\r\n            'string'\r\n        ]]);\r\n    defineFunction('ltrim', function (text) {\r\n        return text.replace(/^\\s+/, '');\r\n    }).args([[\r\n            '*text',\r\n            'string'\r\n        ]]);\r\n    defineFunction('rtrim', function (text) {\r\n        return text.replace(/\\s+$/, '');\r\n    }).args([[\r\n            '*text',\r\n            'string'\r\n        ]]);\r\n    defineFunction('trim', function (text) {\r\n        return text.replace(/^\\s+|\\s+$/, '');\r\n    }).args([[\r\n            '*text',\r\n            'string'\r\n        ]]);\r\n    defineFunction('mid', function (text, start, length) {\r\n        return text.substr(start - 1, length);\r\n    }).args([\r\n        [\r\n            '*text',\r\n            'string'\r\n        ],\r\n        [\r\n            '*start',\r\n            'integer++'\r\n        ],\r\n        [\r\n            '*length',\r\n            'integer+'\r\n        ]\r\n    ]);\r\n    defineFunction('proper', function (text) {\r\n        return text.toLowerCase().replace(/\\b./g, function (s) {\r\n            return s.toUpperCase();\r\n        });\r\n    }).args([[\r\n            '*text',\r\n            'string'\r\n        ]]);\r\n    defineFunction('replace', function (text, start, length, newText) {\r\n        return text.substr(0, --start) + newText + text.substr(start + length);\r\n    }).args([\r\n        [\r\n            '*text',\r\n            'string'\r\n        ],\r\n        [\r\n            '*start',\r\n            'integer++'\r\n        ],\r\n        [\r\n            '*length',\r\n            'integer+'\r\n        ],\r\n        [\r\n            '*newText',\r\n            'string'\r\n        ]\r\n    ]);\r\n    defineFunction('rept', function (text, number) {\r\n        var out = '';\r\n        while (number-- > 0) {\r\n            out += text;\r\n        }\r\n        return out;\r\n    }).args([\r\n        [\r\n            '*text',\r\n            'string'\r\n        ],\r\n        [\r\n            '*number',\r\n            'integer+'\r\n        ]\r\n    ]);\r\n    defineFunction('search', function (substring, string, start) {\r\n        var pos = string.toLowerCase().indexOf(substring.toLowerCase(), start - 1);\r\n        return pos < 0 ? new CalcError('VALUE') : pos + 1;\r\n    }).args([\r\n        [\r\n            '*substring',\r\n            'string'\r\n        ],\r\n        [\r\n            '*string',\r\n            'string'\r\n        ],\r\n        [\r\n            '*start',\r\n            [\r\n                'or',\r\n                'integer++',\r\n                [\r\n                    'null',\r\n                    1\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('substitute', function (text, oldText, newText, nth) {\r\n        if (oldText === newText) {\r\n            return text;\r\n        }\r\n        var pos = -1;\r\n        function replace() {\r\n            text = text.substring(0, pos) + newText + text.substring(pos + oldText.length);\r\n        }\r\n        while ((pos = text.indexOf(oldText, pos + 1)) >= 0) {\r\n            if (nth == null) {\r\n                replace();\r\n            } else if (--nth === 0) {\r\n                replace();\r\n                break;\r\n            }\r\n        }\r\n        return text;\r\n    }).args([\r\n        [\r\n            '*text',\r\n            'string'\r\n        ],\r\n        [\r\n            '*oldText',\r\n            'string'\r\n        ],\r\n        [\r\n            '*newText',\r\n            'string'\r\n        ],\r\n        [\r\n            '*nth',\r\n            [\r\n                'or',\r\n                'integer++',\r\n                'null'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('t', function (value) {\r\n        return typeof value == 'string' ? value : '';\r\n    }).args([[\r\n            '*value',\r\n            'anyvalue'\r\n        ]]);\r\n    defineFunction('text', function (value, format) {\r\n        return spreadsheet.formatting.text(value, format);\r\n    }).args([\r\n        [\r\n            '*value',\r\n            'anyvalue'\r\n        ],\r\n        [\r\n            '*format',\r\n            'string'\r\n        ]\r\n    ]);\r\n    defineFunction('value', function (value) {\r\n        if (typeof value == 'number') {\r\n            return value;\r\n        }\r\n        if (typeof value == 'boolean') {\r\n            return +value;\r\n        }\r\n        value = (value + '').replace(/[$,]/g, '');\r\n        value = parseFloat(value);\r\n        return isNaN(value) ? new CalcError('VALUE') : value;\r\n    }).args([[\r\n            '*value',\r\n            'anyvalue'\r\n        ]]);\r\n    function Hyperlink(link, text) {\r\n        this.link = link;\r\n        this.text = text;\r\n    }\r\n    Hyperlink.prototype.toString = function () {\r\n        return this.text;\r\n    };\r\n    defineFunction('hyperlink', function (link, text) {\r\n        return new Hyperlink(link, text);\r\n    }).args([\r\n        [\r\n            '*link',\r\n            'string'\r\n        ],\r\n        [\r\n            '*text',\r\n            [\r\n                'or',\r\n                'string',\r\n                [\r\n                    'null',\r\n                    '$link'\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('iferror', function (value, valueIfError) {\r\n        return value instanceof CalcError ? valueIfError : value;\r\n    }).args([\r\n        [\r\n            '*value',\r\n            'forced!'\r\n        ],\r\n        [\r\n            '*value_if_error',\r\n            'anyvalue!'\r\n        ]\r\n    ]);\r\n    var parseCriteria = function () {\r\n        var RXCACHE = Object.create(null);\r\n        function makeComparator(cmp, x) {\r\n            if (typeof x == 'string') {\r\n                var num = parseFloat(x);\r\n                if (!isNaN(num) && num == x) {\r\n                    x = num;\r\n                }\r\n            }\r\n            return function (a) {\r\n                var b = x;\r\n                if (typeof a == 'string' && typeof b == 'string') {\r\n                    a = a.toLowerCase();\r\n                    b = b.toLowerCase();\r\n                }\r\n                return cmp(a, b);\r\n            };\r\n        }\r\n        function lc(a) {\r\n            if (typeof a == 'string') {\r\n                return a.toLowerCase();\r\n            }\r\n            return a;\r\n        }\r\n        function compLT(a, b) {\r\n            return lc(a) < lc(b);\r\n        }\r\n        function compLTE(a, b) {\r\n            return lc(a) <= lc(b);\r\n        }\r\n        function compGT(a, b) {\r\n            return lc(a) > lc(b);\r\n        }\r\n        function compGTE(a, b) {\r\n            return lc(a) >= lc(b);\r\n        }\r\n        function compNE(a, b) {\r\n            return lc(a) != lc(b);\r\n        }\r\n        function compEQ(a, b) {\r\n            if (b instanceof RegExp) {\r\n                return b.test(a);\r\n            }\r\n            return lc(a) == lc(b);\r\n        }\r\n        return function (cmp) {\r\n            if (typeof cmp == 'function') {\r\n                return cmp;\r\n            }\r\n            var m;\r\n            if (m = /^=(.*)$/.exec(cmp)) {\r\n                return makeComparator(compEQ, m[1]);\r\n            }\r\n            if (m = /^<>(.*)$/.exec(cmp)) {\r\n                return makeComparator(compNE, m[1]);\r\n            }\r\n            if (m = /^<=(.*)$/.exec(cmp)) {\r\n                return makeComparator(compLTE, m[1]);\r\n            }\r\n            if (m = /^<(.*)$/.exec(cmp)) {\r\n                return makeComparator(compLT, m[1]);\r\n            }\r\n            if (m = /^>=(.*)$/.exec(cmp)) {\r\n                return makeComparator(compGTE, m[1]);\r\n            }\r\n            if (m = /^>(.*)$/.exec(cmp)) {\r\n                return makeComparator(compGT, m[1]);\r\n            }\r\n            if (/[?*]/.exec(cmp)) {\r\n                var rx = RXCACHE[cmp];\r\n                if (!rx) {\r\n                    rx = cmp.replace(/(~\\?|~\\*|[\\]({\\+\\.\\|\\^\\$\\\\})\\[]|[?*])/g, function (s) {\r\n                        switch (s) {\r\n                        case '~?':\r\n                            return '\\\\?';\r\n                        case '~*':\r\n                            return '\\\\*';\r\n                        case '?':\r\n                            return '.';\r\n                        case '*':\r\n                            return '.*';\r\n                        default:\r\n                            return '\\\\' + s;\r\n                        }\r\n                    });\r\n                    rx = RXCACHE[cmp] = new RegExp('^' + rx + '$', 'i');\r\n                }\r\n                return makeComparator(compEQ, rx);\r\n            }\r\n            return makeComparator(compEQ, cmp);\r\n        };\r\n    }();\r\n    function numericPredicate(val) {\r\n        return typeof val == 'number' || typeof val == 'boolean' || val == null || val === '';\r\n    }\r\n    function ascending(a, b) {\r\n        return a === b ? 0 : a < b ? -1 : 1;\r\n    }\r\n    function descending(a, b) {\r\n        return a === b ? 0 : a < b ? 1 : -1;\r\n    }\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/runtime.functions.2', ['spreadsheet/runtime'], f);\r\n}(function () {\r\n    'use strict';\r\n    if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n        return;\r\n    }\r\n    var spreadsheet = kendo.spreadsheet;\r\n    var calc = spreadsheet.calc;\r\n    var runtime = calc.runtime;\r\n    var defineFunction = runtime.defineFunction;\r\n    var CalcError = runtime.CalcError;\r\n    var packDate = runtime.packDate;\r\n    var unpackDate = runtime.unpackDate;\r\n    var isLeapYear = runtime.isLeapYear;\r\n    var daysInMonth = runtime.daysInMonth;\r\n    var _days_360 = runtime._days_360;\r\n    defineFunction('ERF', function (ll, ul) {\r\n        if (ul == null) {\r\n            return ERF(ll);\r\n        }\r\n        return ERF(ul) - ERF(ll);\r\n    }).args([\r\n        [\r\n            'lower_limit',\r\n            'number'\r\n        ],\r\n        [\r\n            'upper_limit',\r\n            [\r\n                'or',\r\n                'number',\r\n                'null'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('ERFC', ERFC).args([[\r\n            'x',\r\n            'number'\r\n        ]]);\r\n    defineFunction('GAMMALN', GAMMALN).args([[\r\n            'x',\r\n            'number++'\r\n        ]]);\r\n    defineFunction('GAMMA', GAMMA).args([[\r\n            'x',\r\n            'number'\r\n        ]]);\r\n    defineFunction('GAMMA.DIST', GAMMA_DIST).args([\r\n        [\r\n            'x',\r\n            'number+'\r\n        ],\r\n        [\r\n            'alpha',\r\n            'number++'\r\n        ],\r\n        [\r\n            'beta',\r\n            'number++'\r\n        ],\r\n        [\r\n            'cumulative',\r\n            'logical'\r\n        ]\r\n    ]);\r\n    defineFunction('GAMMA.INV', GAMMA_INV).args([\r\n        [\r\n            'p',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '[between]',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'alpha',\r\n            'number++'\r\n        ],\r\n        [\r\n            'beta',\r\n            'number++'\r\n        ]\r\n    ]);\r\n    defineFunction('NORM.S.DIST', NORM_S_DIST).args([\r\n        [\r\n            'z',\r\n            'number'\r\n        ],\r\n        [\r\n            'cumulative',\r\n            'logical'\r\n        ]\r\n    ]);\r\n    defineFunction('NORM.S.INV', NORM_S_INV).args([[\r\n            'p',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '[between]',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ]]);\r\n    defineFunction('NORM.DIST', NORM_DIST).args([\r\n        [\r\n            'x',\r\n            'number'\r\n        ],\r\n        [\r\n            'mean',\r\n            'number'\r\n        ],\r\n        [\r\n            'stddev',\r\n            'number++'\r\n        ],\r\n        [\r\n            'cumulative',\r\n            'logical'\r\n        ]\r\n    ]);\r\n    defineFunction('NORM.INV', NORM_INV).args([\r\n        [\r\n            'p',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '[between]',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'mean',\r\n            'number'\r\n        ],\r\n        [\r\n            'stddev',\r\n            'number++'\r\n        ]\r\n    ]);\r\n    defineFunction('BETADIST', BETADIST).args([\r\n        [\r\n            'x',\r\n            'number'\r\n        ],\r\n        [\r\n            'alpha',\r\n            'number++'\r\n        ],\r\n        [\r\n            'beta',\r\n            'number++'\r\n        ],\r\n        [\r\n            'A',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'B',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$x >= $A',\r\n                'NUM'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$x <= $B',\r\n                'NUM'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$A < $B',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('BETA.DIST', BETA_DIST).args([\r\n        [\r\n            'x',\r\n            'number'\r\n        ],\r\n        [\r\n            'alpha',\r\n            'number++'\r\n        ],\r\n        [\r\n            'beta',\r\n            'number++'\r\n        ],\r\n        [\r\n            'cumulative',\r\n            'logical'\r\n        ],\r\n        [\r\n            'A',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'B',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$x >= $A',\r\n                'NUM'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$x <= $B',\r\n                'NUM'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$A < $B',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('BETA.INV', BETA_INV).args([\r\n        [\r\n            'p',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '[between]',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'alpha',\r\n            'number++'\r\n        ],\r\n        [\r\n            'beta',\r\n            'number++'\r\n        ],\r\n        [\r\n            'A',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'B',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    1\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('CHISQ.DIST', chisq_left).args([\r\n        [\r\n            'x',\r\n            'number+'\r\n        ],\r\n        [\r\n            'deg_freedom',\r\n            'integer++'\r\n        ],\r\n        [\r\n            'cumulative',\r\n            'logical'\r\n        ]\r\n    ]);\r\n    defineFunction('CHISQ.DIST.RT', chisq_right).args([\r\n        [\r\n            'x',\r\n            'number+'\r\n        ],\r\n        [\r\n            'deg_freedom',\r\n            'integer++'\r\n        ]\r\n    ]);\r\n    defineFunction('CHISQ.INV', chisq_left_inv).args([\r\n        [\r\n            'p',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '[between]',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'deg_freedom',\r\n            'integer++'\r\n        ]\r\n    ]);\r\n    defineFunction('CHISQ.INV.RT', chisq_right_inv).args([\r\n        [\r\n            'p',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '[between]',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'deg_freedom',\r\n            'integer++'\r\n        ]\r\n    ]);\r\n    defineFunction('CHISQ.TEST', function (ac, ex) {\r\n        return chisq_test(ac.data, ex.data);\r\n    }).args([\r\n        [\r\n            'actual_range',\r\n            'matrix'\r\n        ],\r\n        [\r\n            'expected_range',\r\n            'matrix'\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$actual_range.width == $expected_range.width'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$actual_range.height == $expected_range.height'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('EXPON.DIST', expon).args([\r\n        [\r\n            'x',\r\n            'number+'\r\n        ],\r\n        [\r\n            'lambda',\r\n            'number++'\r\n        ],\r\n        [\r\n            'cumulative',\r\n            'logical'\r\n        ]\r\n    ]);\r\n    defineFunction('POISSON.DIST', poisson).args([\r\n        [\r\n            'x',\r\n            'integer+'\r\n        ],\r\n        [\r\n            'mean',\r\n            'number+'\r\n        ],\r\n        [\r\n            'cumulative',\r\n            'logical'\r\n        ]\r\n    ]);\r\n    defineFunction('F.DIST', Fdist).args([\r\n        [\r\n            'x',\r\n            'number+'\r\n        ],\r\n        [\r\n            'deg_freedom1',\r\n            'integer++'\r\n        ],\r\n        [\r\n            'deg_freedom2',\r\n            'integer++'\r\n        ],\r\n        [\r\n            'cumulative',\r\n            'logical'\r\n        ]\r\n    ]);\r\n    defineFunction('F.DIST.RT', Fdist_right).args([\r\n        [\r\n            'x',\r\n            'number+'\r\n        ],\r\n        [\r\n            'deg_freedom1',\r\n            'integer++'\r\n        ],\r\n        [\r\n            'deg_freedom2',\r\n            'integer++'\r\n        ]\r\n    ]);\r\n    defineFunction('F.INV', Finv).args([\r\n        [\r\n            'p',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '[between]',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'deg_freedom1',\r\n            'integer++'\r\n        ],\r\n        [\r\n            'deg_freedom2',\r\n            'integer++'\r\n        ]\r\n    ]);\r\n    defineFunction('F.INV.RT', Finv_right).args([\r\n        [\r\n            'p',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '[between]',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'deg_freedom1',\r\n            'integer++'\r\n        ],\r\n        [\r\n            'deg_freedom2',\r\n            'integer++'\r\n        ]\r\n    ]);\r\n    defineFunction('F.TEST', Ftest).args([\r\n        [\r\n            'array1',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'array2',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$array1.length >= 2',\r\n                'DIV/0'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$array2.length >= 2',\r\n                'DIV/0'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('FISHER', fisher).args([[\r\n            'x',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '(between)',\r\n                    -1,\r\n                    1\r\n                ]\r\n            ]\r\n        ]]);\r\n    defineFunction('FISHERINV', fisherinv).args([[\r\n            'y',\r\n            'number'\r\n        ]]);\r\n    defineFunction('T.DIST', Tdist).args([\r\n        [\r\n            'x',\r\n            'number'\r\n        ],\r\n        [\r\n            'deg_freedom',\r\n            'integer++'\r\n        ],\r\n        [\r\n            'cumulative',\r\n            'logical'\r\n        ]\r\n    ]);\r\n    defineFunction('T.DIST.RT', Tdist_right).args([\r\n        [\r\n            'x',\r\n            'number'\r\n        ],\r\n        [\r\n            'deg_freedom',\r\n            'integer++'\r\n        ]\r\n    ]);\r\n    defineFunction('T.DIST.2T', Tdist_2tail).args([\r\n        [\r\n            'x',\r\n            'number+'\r\n        ],\r\n        [\r\n            'deg_freedom',\r\n            'integer++'\r\n        ]\r\n    ]);\r\n    defineFunction('T.INV', Tdist_inv).args([\r\n        [\r\n            'p',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '(between]',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'deg_freedom',\r\n            'integer++'\r\n        ]\r\n    ]);\r\n    defineFunction('T.INV.2T', Tdist_2tail_inv).args([\r\n        [\r\n            'p',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '(between]',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'deg_freedom',\r\n            'integer++'\r\n        ]\r\n    ]);\r\n    defineFunction('T.TEST', Tdist_test).args([\r\n        [\r\n            'array1',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'array2',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'tails',\r\n            [\r\n                'and',\r\n                'integer',\r\n                [\r\n                    'values',\r\n                    1,\r\n                    2\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'type',\r\n            [\r\n                'and',\r\n                'integer',\r\n                [\r\n                    'values',\r\n                    1,\r\n                    2,\r\n                    3\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$type != 1 || $array1.length == $array2.length',\r\n                'N/A'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$array1.length >= 2',\r\n                'DIV/0'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$array2.length >= 2',\r\n                'DIV/0'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('CONFIDENCE.T', confidence_t).args([\r\n        [\r\n            'alpha',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '(between)',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'standard_dev',\r\n            'number++'\r\n        ],\r\n        [\r\n            'size',\r\n            [\r\n                'and',\r\n                'integer++',\r\n                [\r\n                    'assert',\r\n                    '$size != 1',\r\n                    'DIV/0'\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('CONFIDENCE.NORM', confidence_norm).args([\r\n        [\r\n            'alpha',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '(between)',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'standard_dev',\r\n            'number++'\r\n        ],\r\n        [\r\n            'size',\r\n            [\r\n                'and',\r\n                'integer++'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('GAUSS', gauss).args([[\r\n            'z',\r\n            'number'\r\n        ]]);\r\n    defineFunction('PHI', phi).args([[\r\n            'x',\r\n            'number'\r\n        ]]);\r\n    defineFunction('LOGNORM.DIST', lognorm_dist).args([\r\n        [\r\n            'x',\r\n            'number++'\r\n        ],\r\n        [\r\n            'mean',\r\n            'number'\r\n        ],\r\n        [\r\n            'standard_dev',\r\n            'number++'\r\n        ],\r\n        [\r\n            'cumulative',\r\n            'logical'\r\n        ]\r\n    ]);\r\n    defineFunction('LOGNORM.INV', lognorm_inv).args([\r\n        [\r\n            'probability',\r\n            [\r\n                'and',\r\n                'number',\r\n                [\r\n                    '(between)',\r\n                    0,\r\n                    1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'mean',\r\n            'number'\r\n        ],\r\n        [\r\n            'standard_dev',\r\n            'number++'\r\n        ]\r\n    ]);\r\n    defineFunction('PROB', prob).args([\r\n        [\r\n            'x_range',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'prob_range',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'lower_limit',\r\n            'number'\r\n        ],\r\n        [\r\n            'upper_limit',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    '$lower_limit'\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$prob_range.length == $x_range.length',\r\n                'N/A'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('SLOPE', slope).args([\r\n        [\r\n            'known_y',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'known_x',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$known_x.length == $known_y.length',\r\n                'N/A'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$known_x.length > 0 && $known_y.length > 0',\r\n                'N/A'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('INTERCEPT', intercept).args([\r\n        [\r\n            'known_y',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'known_x',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$known_x.length == $known_y.length',\r\n                'N/A'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$known_x.length > 0 && $known_y.length > 0',\r\n                'N/A'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('PEARSON', pearson).args([\r\n        [\r\n            'array1',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'array2',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$array2.length == $array1.length',\r\n                'N/A'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$array2.length > 0 && $array1.length > 0',\r\n                'N/A'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('RSQ', rsq).args([\r\n        [\r\n            'known_y',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'known_x',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$known_x.length == $known_y.length',\r\n                'N/A'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$known_x.length > 0 && $known_y.length > 0',\r\n                'N/A'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$known_x.length != 1 && $known_y.length != 1',\r\n                'N/A'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('STEYX', steyx).args([\r\n        [\r\n            'known_y',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'known_x',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$known_x.length == $known_y.length',\r\n                'N/A'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$known_x.length >= 3 && $known_y.length >= 3',\r\n                'DIV/0'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('FORECAST', forecast).args([\r\n        [\r\n            'x',\r\n            'number'\r\n        ],\r\n        [\r\n            'known_y',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'known_x',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$known_x.length == $known_y.length',\r\n                'N/A'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$known_x.length > 0 && $known_y.length > 0',\r\n                'N/A'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('LINEST', linest).args([\r\n        [\r\n            'known_y',\r\n            'matrix'\r\n        ],\r\n        [\r\n            'known_x',\r\n            [\r\n                'or',\r\n                'matrix',\r\n                'null'\r\n            ]\r\n        ],\r\n        [\r\n            'const',\r\n            [\r\n                'or',\r\n                'logical',\r\n                [\r\n                    'null',\r\n                    true\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'stats',\r\n            [\r\n                'or',\r\n                'logical',\r\n                [\r\n                    'null',\r\n                    false\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('LOGEST', logest).args([\r\n        [\r\n            'known_y',\r\n            'matrix'\r\n        ],\r\n        [\r\n            'known_x',\r\n            [\r\n                'or',\r\n                'matrix',\r\n                'null'\r\n            ]\r\n        ],\r\n        [\r\n            'const',\r\n            [\r\n                'or',\r\n                'logical',\r\n                [\r\n                    'null',\r\n                    true\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'stats',\r\n            [\r\n                'or',\r\n                'logical',\r\n                [\r\n                    'null',\r\n                    false\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('TREND', trend).args([\r\n        [\r\n            'known_y',\r\n            'matrix'\r\n        ],\r\n        [\r\n            'known_x',\r\n            [\r\n                'or',\r\n                'matrix',\r\n                'null'\r\n            ]\r\n        ],\r\n        [\r\n            'new_x',\r\n            [\r\n                'or',\r\n                'matrix',\r\n                'null'\r\n            ]\r\n        ],\r\n        [\r\n            'const',\r\n            [\r\n                'or',\r\n                'logical',\r\n                [\r\n                    'null',\r\n                    true\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('GROWTH', growth).args([\r\n        [\r\n            'known_y',\r\n            'matrix'\r\n        ],\r\n        [\r\n            'known_x',\r\n            [\r\n                'or',\r\n                'matrix',\r\n                'null'\r\n            ]\r\n        ],\r\n        [\r\n            'new_x',\r\n            [\r\n                'or',\r\n                'matrix',\r\n                'null'\r\n            ]\r\n        ],\r\n        [\r\n            'const',\r\n            [\r\n                'or',\r\n                'logical',\r\n                [\r\n                    'null',\r\n                    true\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('FV', FV).args([\r\n        [\r\n            'rate',\r\n            'number'\r\n        ],\r\n        [\r\n            'nper',\r\n            'number'\r\n        ],\r\n        [\r\n            'pmt',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'pv',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'type',\r\n            [\r\n                'or',\r\n                [\r\n                    'values',\r\n                    0,\r\n                    1\r\n                ],\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$pmt || $pv'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('PV', PV).args([\r\n        [\r\n            'rate',\r\n            'number'\r\n        ],\r\n        [\r\n            'nper',\r\n            'number'\r\n        ],\r\n        [\r\n            'pmt',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'fv',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'type',\r\n            [\r\n                'or',\r\n                [\r\n                    'values',\r\n                    0,\r\n                    1\r\n                ],\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$pmt || $fv'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('PMT', PMT).args([\r\n        [\r\n            'rate',\r\n            'number'\r\n        ],\r\n        [\r\n            'nper',\r\n            'number'\r\n        ],\r\n        [\r\n            'pmt',\r\n            'number'\r\n        ],\r\n        [\r\n            'fv',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'type',\r\n            [\r\n                'or',\r\n                [\r\n                    'values',\r\n                    0,\r\n                    1\r\n                ],\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('NPER', NPER).args([\r\n        [\r\n            'rate',\r\n            'number'\r\n        ],\r\n        [\r\n            'pmt',\r\n            'number'\r\n        ],\r\n        [\r\n            'pv',\r\n            'number'\r\n        ],\r\n        [\r\n            'fv',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'type',\r\n            [\r\n                'or',\r\n                [\r\n                    'values',\r\n                    0,\r\n                    1\r\n                ],\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('RATE', RATE).args([\r\n        [\r\n            'nper',\r\n            'number'\r\n        ],\r\n        [\r\n            'pmt',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'pv',\r\n            'number'\r\n        ],\r\n        [\r\n            'fv',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'type',\r\n            [\r\n                'or',\r\n                [\r\n                    'values',\r\n                    0,\r\n                    1\r\n                ],\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'guess',\r\n            [\r\n                'or',\r\n                'number++',\r\n                [\r\n                    'null',\r\n                    0.01\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$pmt || $fv'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('IPMT', IPMT).args([\r\n        [\r\n            'rate',\r\n            'number'\r\n        ],\r\n        [\r\n            'per',\r\n            'number++'\r\n        ],\r\n        [\r\n            'nper',\r\n            'number++'\r\n        ],\r\n        [\r\n            'pv',\r\n            'number'\r\n        ],\r\n        [\r\n            'fv',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'type',\r\n            [\r\n                'or',\r\n                [\r\n                    'values',\r\n                    0,\r\n                    1\r\n                ],\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$per >= 1 && $per <= $nper'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('PPMT', PPMT).args([\r\n        [\r\n            'rate',\r\n            'number'\r\n        ],\r\n        [\r\n            'per',\r\n            'number++'\r\n        ],\r\n        [\r\n            'nper',\r\n            'number++'\r\n        ],\r\n        [\r\n            'pv',\r\n            'number'\r\n        ],\r\n        [\r\n            'fv',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'type',\r\n            [\r\n                'or',\r\n                [\r\n                    'values',\r\n                    0,\r\n                    1\r\n                ],\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$per >= 1 && $per <= $nper'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('CUMPRINC', CUMPRINC).args([\r\n        [\r\n            'rate',\r\n            'number++'\r\n        ],\r\n        [\r\n            'nper',\r\n            'number++'\r\n        ],\r\n        [\r\n            'pv',\r\n            'number++'\r\n        ],\r\n        [\r\n            'start_period',\r\n            'number++'\r\n        ],\r\n        [\r\n            'end_period',\r\n            'number++'\r\n        ],\r\n        [\r\n            'type',\r\n            [\r\n                'or',\r\n                [\r\n                    'values',\r\n                    0,\r\n                    1\r\n                ],\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$end_period >= $start_period',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('CUMIPMT', CUMIPMT).args([\r\n        [\r\n            'rate',\r\n            'number++'\r\n        ],\r\n        [\r\n            'nper',\r\n            'number++'\r\n        ],\r\n        [\r\n            'pv',\r\n            'number++'\r\n        ],\r\n        [\r\n            'start_period',\r\n            'number++'\r\n        ],\r\n        [\r\n            'end_period',\r\n            'number++'\r\n        ],\r\n        [\r\n            'type',\r\n            [\r\n                'or',\r\n                [\r\n                    'values',\r\n                    0,\r\n                    1\r\n                ],\r\n                [\r\n                    'null',\r\n                    0\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$end_period >= $start_period',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('NPV', NPV).args([\r\n        [\r\n            'rate',\r\n            'number'\r\n        ],\r\n        [\r\n            'values',\r\n            [\r\n                'collect',\r\n                'number'\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$values.length > 0',\r\n                'N/A'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('IRR', IRR).args([\r\n        [\r\n            'values',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'guess',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    0.1\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('EFFECT', EFFECT).args([\r\n        [\r\n            'nominal_rate',\r\n            'number++'\r\n        ],\r\n        [\r\n            'npery',\r\n            'integer++'\r\n        ]\r\n    ]);\r\n    defineFunction('NOMINAL', NOMINAL).args([\r\n        [\r\n            'effect_rate',\r\n            'number++'\r\n        ],\r\n        [\r\n            'npery',\r\n            'integer++'\r\n        ]\r\n    ]);\r\n    defineFunction('XNPV', XNPV).args([\r\n        [\r\n            'rate',\r\n            'number'\r\n        ],\r\n        [\r\n            'values',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'dates',\r\n            [\r\n                'collect',\r\n                'date',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$values.length == $dates.length',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('XIRR', XIRR).args([\r\n        [\r\n            'values',\r\n            [\r\n                'collect',\r\n                'number',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'dates',\r\n            [\r\n                'collect',\r\n                'date',\r\n                1\r\n            ]\r\n        ],\r\n        [\r\n            'guess',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    0.1\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$values.length == $dates.length',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('ISPMT', ISPMT).args([\r\n        [\r\n            'rate',\r\n            'number'\r\n        ],\r\n        [\r\n            'per',\r\n            'number++'\r\n        ],\r\n        [\r\n            'nper',\r\n            'number++'\r\n        ],\r\n        [\r\n            'pv',\r\n            'number'\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$per >= 1 && $per <= $nper'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('DB', DB).args([\r\n        [\r\n            'cost',\r\n            'number'\r\n        ],\r\n        [\r\n            'salvage',\r\n            'number'\r\n        ],\r\n        [\r\n            'life',\r\n            'number++'\r\n        ],\r\n        [\r\n            'period',\r\n            'number++'\r\n        ],\r\n        [\r\n            'month',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    12\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('DDB', DDB).args([\r\n        [\r\n            'cost',\r\n            'number'\r\n        ],\r\n        [\r\n            'salvage',\r\n            'number'\r\n        ],\r\n        [\r\n            'life',\r\n            'number++'\r\n        ],\r\n        [\r\n            'period',\r\n            'number++'\r\n        ],\r\n        [\r\n            'factor',\r\n            [\r\n                'or',\r\n                'number',\r\n                [\r\n                    'null',\r\n                    2\r\n                ]\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('SLN', SLN).args([\r\n        [\r\n            'cost',\r\n            'number'\r\n        ],\r\n        [\r\n            'salvage',\r\n            'number'\r\n        ],\r\n        [\r\n            'life',\r\n            'number++'\r\n        ]\r\n    ]);\r\n    defineFunction('SYD', SYD).args([\r\n        [\r\n            'cost',\r\n            'number'\r\n        ],\r\n        [\r\n            'salvage',\r\n            'number'\r\n        ],\r\n        [\r\n            'life',\r\n            'number++'\r\n        ],\r\n        [\r\n            'per',\r\n            'number++'\r\n        ]\r\n    ]);\r\n    defineFunction('VDB', VDB).args([\r\n        [\r\n            'cost',\r\n            'number+'\r\n        ],\r\n        [\r\n            'salvage',\r\n            'number+'\r\n        ],\r\n        [\r\n            'life',\r\n            'number++'\r\n        ],\r\n        [\r\n            'start_period',\r\n            'number+'\r\n        ],\r\n        [\r\n            'end_period',\r\n            'number+'\r\n        ],\r\n        [\r\n            'factor',\r\n            [\r\n                'or',\r\n                'number+',\r\n                [\r\n                    'null',\r\n                    2\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'no_switch',\r\n            [\r\n                'or',\r\n                'logical',\r\n                [\r\n                    'null',\r\n                    false\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$end_period >= $start_period',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    var COUPS_ARGS = [\r\n        [\r\n            'settlement',\r\n            'date'\r\n        ],\r\n        [\r\n            'maturity',\r\n            'date'\r\n        ],\r\n        [\r\n            'frequency',\r\n            [\r\n                'and',\r\n                'integer',\r\n                [\r\n                    'values',\r\n                    1,\r\n                    2,\r\n                    4\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'basis',\r\n            [\r\n                'or',\r\n                [\r\n                    'null',\r\n                    0\r\n                ],\r\n                [\r\n                    'and',\r\n                    'integer',\r\n                    [\r\n                        'values',\r\n                        0,\r\n                        1,\r\n                        2,\r\n                        3,\r\n                        4\r\n                    ]\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$settlement < $maturity',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ];\r\n    defineFunction('COUPDAYBS', COUPDAYBS).args(COUPS_ARGS);\r\n    defineFunction('COUPDAYS', COUPDAYS).args(COUPS_ARGS);\r\n    defineFunction('COUPDAYSNC', COUPDAYSNC).args(COUPS_ARGS);\r\n    defineFunction('COUPPCD', COUPPCD).args(COUPS_ARGS);\r\n    defineFunction('COUPNCD', COUPNCD).args(COUPS_ARGS);\r\n    defineFunction('COUPNUM', COUPNUM).args(COUPS_ARGS);\r\n    defineFunction('ACCRINTM', ACCRINTM).args([\r\n        [\r\n            'issue',\r\n            'date'\r\n        ],\r\n        [\r\n            'settlement',\r\n            'date'\r\n        ],\r\n        [\r\n            'rate',\r\n            'number++'\r\n        ],\r\n        [\r\n            'par',\r\n            [\r\n                'or',\r\n                [\r\n                    'null',\r\n                    1000\r\n                ],\r\n                'number++'\r\n            ]\r\n        ],\r\n        [\r\n            'basis',\r\n            [\r\n                'or',\r\n                [\r\n                    'null',\r\n                    0\r\n                ],\r\n                [\r\n                    'and',\r\n                    'integer',\r\n                    [\r\n                        'values',\r\n                        0,\r\n                        1,\r\n                        2,\r\n                        3,\r\n                        4\r\n                    ]\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$issue < $settlement',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('ACCRINT', ACCRINT).args([\r\n        [\r\n            'issue',\r\n            'date'\r\n        ],\r\n        [\r\n            'first_interest',\r\n            'date'\r\n        ],\r\n        [\r\n            'settlement',\r\n            'date'\r\n        ],\r\n        [\r\n            'rate',\r\n            'number++'\r\n        ],\r\n        [\r\n            'par',\r\n            [\r\n                'or',\r\n                [\r\n                    'null',\r\n                    1000\r\n                ],\r\n                'number++'\r\n            ]\r\n        ],\r\n        [\r\n            'frequency',\r\n            [\r\n                'and',\r\n                'integer',\r\n                [\r\n                    'values',\r\n                    1,\r\n                    2,\r\n                    4\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'basis',\r\n            [\r\n                'or',\r\n                [\r\n                    'null',\r\n                    0\r\n                ],\r\n                [\r\n                    'and',\r\n                    'integer',\r\n                    [\r\n                        'values',\r\n                        0,\r\n                        1,\r\n                        2,\r\n                        3,\r\n                        4\r\n                    ]\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'calc_method',\r\n            [\r\n                'or',\r\n                'logical',\r\n                [\r\n                    'null',\r\n                    true\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$issue < $settlement',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('DISC', DISC).args([\r\n        [\r\n            'settlement',\r\n            'date'\r\n        ],\r\n        [\r\n            'maturity',\r\n            'date'\r\n        ],\r\n        [\r\n            'pr',\r\n            'number++'\r\n        ],\r\n        [\r\n            'redemption',\r\n            'number++'\r\n        ],\r\n        [\r\n            'basis',\r\n            [\r\n                'or',\r\n                [\r\n                    'null',\r\n                    0\r\n                ],\r\n                [\r\n                    'and',\r\n                    'integer',\r\n                    [\r\n                        'values',\r\n                        0,\r\n                        1,\r\n                        2,\r\n                        3,\r\n                        4\r\n                    ]\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$settlement < $maturity',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('INTRATE', INTRATE).args([\r\n        [\r\n            'settlement',\r\n            'date'\r\n        ],\r\n        [\r\n            'maturity',\r\n            'date'\r\n        ],\r\n        [\r\n            'investment',\r\n            'number++'\r\n        ],\r\n        [\r\n            'redemption',\r\n            'number++'\r\n        ],\r\n        [\r\n            'basis',\r\n            [\r\n                'or',\r\n                [\r\n                    'null',\r\n                    0\r\n                ],\r\n                [\r\n                    'and',\r\n                    'integer',\r\n                    [\r\n                        'values',\r\n                        0,\r\n                        1,\r\n                        2,\r\n                        3,\r\n                        4\r\n                    ]\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$settlement < $maturity',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('RECEIVED', RECEIVED).args([\r\n        [\r\n            'settlement',\r\n            'date'\r\n        ],\r\n        [\r\n            'maturity',\r\n            'date'\r\n        ],\r\n        [\r\n            'investment',\r\n            'number++'\r\n        ],\r\n        [\r\n            'discount',\r\n            'number++'\r\n        ],\r\n        [\r\n            'basis',\r\n            [\r\n                'or',\r\n                [\r\n                    'null',\r\n                    0\r\n                ],\r\n                [\r\n                    'and',\r\n                    'integer',\r\n                    [\r\n                        'values',\r\n                        0,\r\n                        1,\r\n                        2,\r\n                        3,\r\n                        4\r\n                    ]\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$settlement < $maturity',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('PRICE', PRICE).args([\r\n        [\r\n            'settlement',\r\n            'date'\r\n        ],\r\n        [\r\n            'maturity',\r\n            'date'\r\n        ],\r\n        [\r\n            'rate',\r\n            'number++'\r\n        ],\r\n        [\r\n            'yld',\r\n            'number++'\r\n        ],\r\n        [\r\n            'redemption',\r\n            'number++'\r\n        ],\r\n        [\r\n            'frequency',\r\n            [\r\n                'and',\r\n                'integer',\r\n                [\r\n                    'values',\r\n                    1,\r\n                    2,\r\n                    4\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            'basis',\r\n            [\r\n                'or',\r\n                [\r\n                    'null',\r\n                    0\r\n                ],\r\n                [\r\n                    'and',\r\n                    'integer',\r\n                    [\r\n                        'values',\r\n                        0,\r\n                        1,\r\n                        2,\r\n                        3,\r\n                        4\r\n                    ]\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$settlement < $maturity',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    defineFunction('PRICEDISC', PRICEDISC).args([\r\n        [\r\n            'settlement',\r\n            'date'\r\n        ],\r\n        [\r\n            'maturity',\r\n            'date'\r\n        ],\r\n        [\r\n            'discount',\r\n            'number++'\r\n        ],\r\n        [\r\n            'redemption',\r\n            'number++'\r\n        ],\r\n        [\r\n            'basis',\r\n            [\r\n                'or',\r\n                [\r\n                    'null',\r\n                    0\r\n                ],\r\n                [\r\n                    'and',\r\n                    'integer',\r\n                    [\r\n                        'values',\r\n                        0,\r\n                        1,\r\n                        2,\r\n                        3,\r\n                        4\r\n                    ]\r\n                ]\r\n            ]\r\n        ],\r\n        [\r\n            '?',\r\n            [\r\n                'assert',\r\n                '$settlement < $maturity',\r\n                'NUM'\r\n            ]\r\n        ]\r\n    ]);\r\n    var MAX_IT = 300, EPS = 2.2204e-16, FP_MIN = 1e-30, f_abs = Math.abs;\r\n    function ERF(x) {\r\n        if (f_abs(x) >= 3.3) {\r\n            return 1 - ERFC(x);\r\n        }\r\n        var S = x > 0 ? 1 : -1;\r\n        if (S == -1) {\r\n            x = -x;\r\n        }\r\n        var m = 0, an = 1;\r\n        for (var n = 1; n < 100; n++) {\r\n            m += an;\r\n            an *= 2 * x * x / (2 * n + 1);\r\n        }\r\n        return S * 2 / Math.sqrt(Math.PI) * x * Math.exp(-x * x) * m;\r\n    }\r\n    function ERFC(x) {\r\n        if (f_abs(x) < 3.3) {\r\n            return 1 - ERF(x);\r\n        }\r\n        var s = 1;\r\n        if (x < 0) {\r\n            s = -1;\r\n            x = -x;\r\n        }\r\n        var frac = x;\r\n        for (var n = 8; n >= 1; n -= 0.5) {\r\n            frac = x + n / frac;\r\n        }\r\n        frac = 1 / (x + frac);\r\n        return s == 1 ? Math.exp(-x * x) / Math.sqrt(Math.PI) * frac : 2 - Math.exp(-x * x) / Math.sqrt(Math.PI) * frac;\r\n    }\r\n    function GAMMALN(x) {\r\n        var cof = [\r\n            1.000000000190015,\r\n            76.18009172947146,\r\n            -86.50532032941678,\r\n            24.01409824083091,\r\n            -1.231739572450155,\r\n            0.001208650973866179,\r\n            -0.000005395239384953\r\n        ];\r\n        var y = x, tmp = x + 5.5, ser = cof[0];\r\n        tmp -= (x + 0.5) * Math.log(tmp);\r\n        for (var j = 1; j <= 6; j++) {\r\n            y += 1;\r\n            ser += cof[j] / y;\r\n        }\r\n        return -tmp + Math.log(Math.sqrt(2 * Math.PI) * ser / x);\r\n    }\r\n    function GAMMA(x) {\r\n        if (x > 0) {\r\n            return Math.exp(GAMMALN(x));\r\n        }\r\n        var pi = Math.PI, y = -x;\r\n        return -pi / (y * GAMMA(y) * Math.sin(pi * y));\r\n    }\r\n    function BETALN(a, b) {\r\n        return GAMMALN(a) + GAMMALN(b) - GAMMALN(a + b);\r\n    }\r\n    function BETA(a, b) {\r\n        return Math.exp(BETALN(a, b));\r\n    }\r\n    function gamma_inc(a, x) {\r\n        return x < a + 1 ? g_series(a, x) : 1 - g_contfrac(a, x);\r\n    }\r\n    function g_series(a, x) {\r\n        var sum = 1 / a, frac = sum, ap = a;\r\n        var gln = GAMMALN(a), n;\r\n        for (n = 1; n <= MAX_IT; n++) {\r\n            ap++;\r\n            frac *= x / ap;\r\n            sum += frac;\r\n            if (f_abs(frac) < f_abs(sum) * EPS) {\r\n                break;\r\n            }\r\n        }\r\n        return sum * Math.exp(-x + a * Math.log(x) - gln);\r\n    }\r\n    function g_contfrac(a, x) {\r\n        var f = FP_MIN, c = f, d = 0, aj = 1, bj = x + 1 - a;\r\n        var gln = GAMMALN(a);\r\n        for (var i = 1; i <= MAX_IT; i++) {\r\n            d = bj + aj * d;\r\n            if (f_abs(d) < FP_MIN) {\r\n                d = FP_MIN;\r\n            }\r\n            c = bj + aj / c;\r\n            if (f_abs(c) < FP_MIN) {\r\n                c = FP_MIN;\r\n            }\r\n            d = 1 / d;\r\n            var delta = c * d;\r\n            f *= delta;\r\n            if (f_abs(delta - 1) < EPS) {\r\n                break;\r\n            }\r\n            bj += 2;\r\n            aj = -i * (i - a);\r\n        }\r\n        return f * Math.exp(-x - gln + a * Math.log(x));\r\n    }\r\n    function GAMMA_DIST(x, a, b, cumulative) {\r\n        if (!cumulative) {\r\n            return Math.pow(x / b, a - 1) * Math.exp(-x / b) / (b * GAMMA(a));\r\n        }\r\n        return gamma_inc(a, x / b);\r\n    }\r\n    function GAMMA_INV(p, a, b) {\r\n        if (p === 0) {\r\n            return 0;\r\n        }\r\n        if (p == 1) {\r\n            return Infinity;\r\n        }\r\n        var m = 0, M = 10, x = 0, ab = a * b;\r\n        if (ab > 1) {\r\n            M *= ab;\r\n        }\r\n        for (var i = 0; i < MAX_IT; i++) {\r\n            x = 0.5 * (m + M);\r\n            var q = GAMMA_DIST(x, a, b, true);\r\n            if (f_abs(p - q) < 1e-16) {\r\n                break;\r\n            }\r\n            if (q > p) {\r\n                M = x;\r\n            } else {\r\n                m = x;\r\n            }\r\n        }\r\n        return x;\r\n    }\r\n    function NORM_S_DIST(x, cumulative) {\r\n        if (!cumulative) {\r\n            return Math.exp(-x * x / 2) / Math.sqrt(2 * Math.PI);\r\n        }\r\n        return 0.5 + 0.5 * ERF(x / Math.sqrt(2));\r\n    }\r\n    function NORM_S_INV(p) {\r\n        var a = [\r\n                -39.69683028665376,\r\n                220.9460984245205,\r\n                -275.9285104469687,\r\n                138.357751867269,\r\n                -30.66479806614716,\r\n                2.506628277459239\r\n            ], b = [\r\n                -54.47609879822406,\r\n                161.5858368580409,\r\n                -155.6989798598866,\r\n                66.80131188771972,\r\n                -13.28068155288572\r\n            ], c = [\r\n                -0.007784894002430293,\r\n                -0.3223964580411365,\r\n                -2.400758277161838,\r\n                -2.549732539343734,\r\n                4.374664141464968,\r\n                2.938163982698783\r\n            ], d = [\r\n                0.007784695709041462,\r\n                0.3224671290700398,\r\n                2.445134137142996,\r\n                3.754408661907416\r\n            ];\r\n        var plow = 0.02425, phigh = 1 - plow;\r\n        var q, r;\r\n        if (p < plow) {\r\n            q = Math.sqrt(-2 * Math.log(p));\r\n            return (((((c[0] * q + c[1]) * q + c[2]) * q + c[3]) * q + c[4]) * q + c[5]) / ((((d[0] * q + d[1]) * q + d[2]) * q + d[3]) * q + 1);\r\n        }\r\n        if (phigh < p) {\r\n            q = Math.sqrt(-2 * Math.log(1 - p));\r\n            return -(((((c[0] * q + c[1]) * q + c[2]) * q + c[3]) * q + c[4]) * q + c[5]) / ((((d[0] * q + d[1]) * q + d[2]) * q + d[3]) * q + 1);\r\n        }\r\n        q = p - 0.5;\r\n        r = q * q;\r\n        return (((((a[0] * r + a[1]) * r + a[2]) * r + a[3]) * r + a[4]) * r + a[5]) * q / (((((b[0] * r + b[1]) * r + b[2]) * r + b[3]) * r + b[4]) * r + 1);\r\n    }\r\n    function NORM_DIST(x, m, s, cumulative) {\r\n        if (!cumulative) {\r\n            return Math.exp(-(x - m) * (x - m) / (2 * s * s)) / (s * Math.sqrt(2 * Math.PI));\r\n        }\r\n        return NORM_S_DIST((x - m) / s, true);\r\n    }\r\n    function NORM_INV(p, m, s) {\r\n        return m + s * NORM_S_INV(p);\r\n    }\r\n    function betastd_pdf(x, a, b) {\r\n        return Math.exp((a - 1) * Math.log(x) + (b - 1) * Math.log(1 - x) - BETALN(a, b));\r\n    }\r\n    function betastd_cdf(x, a, b) {\r\n        var k = Math.exp(a * Math.log(x) + b * Math.log(1 - x) - BETALN(a, b));\r\n        return x < (a + 1) / (a + b + 2) ? k * beta_lentz(a, b, x) / a : 1 - k * beta_lentz(b, a, 1 - x) / b;\r\n    }\r\n    function beta_lentz(a, b, x) {\r\n        var m, m2;\r\n        var aa, c, d, del, h, qab, qam, qap;\r\n        qab = a + b;\r\n        qap = a + 1;\r\n        qam = a - 1;\r\n        c = 1;\r\n        d = 1 - qab * x / qap;\r\n        if (f_abs(d) < FP_MIN) {\r\n            d = FP_MIN;\r\n        }\r\n        d = 1 / d;\r\n        h = d;\r\n        for (m = 1; m <= MAX_IT; m++) {\r\n            m2 = 2 * m;\r\n            aa = m * (b - m) * x / ((qam + m2) * (a + m2));\r\n            d = 1 + aa * d;\r\n            if (f_abs(d) < FP_MIN) {\r\n                d = FP_MIN;\r\n            }\r\n            c = 1 + aa / c;\r\n            if (f_abs(c) < FP_MIN) {\r\n                c = FP_MIN;\r\n            }\r\n            d = 1 / d;\r\n            h *= d * c;\r\n            aa = -(a + m) * (qab + m) * x / ((a + m2) * (qap + m2));\r\n            d = 1 + aa * d;\r\n            if (f_abs(d) < FP_MIN) {\r\n                d = FP_MIN;\r\n            }\r\n            c = 1 + aa / c;\r\n            if (f_abs(c) < FP_MIN) {\r\n                c = FP_MIN;\r\n            }\r\n            d = 1 / d;\r\n            del = d * c;\r\n            h *= del;\r\n            if (f_abs(del - 1) < EPS) {\r\n                break;\r\n            }\r\n        }\r\n        return h;\r\n    }\r\n    function betastd_inv(p, a, b) {\r\n        var m = 0, M = 1, x = 0;\r\n        for (var i = 0; i < MAX_IT; i++) {\r\n            x = 0.5 * (m + M);\r\n            var q = betastd_cdf(x, a, b);\r\n            if (f_abs(p - q) < EPS) {\r\n                break;\r\n            }\r\n            if (q > p) {\r\n                M = x;\r\n            } else {\r\n                m = x;\r\n            }\r\n        }\r\n        return x;\r\n    }\r\n    function BETADIST(x, a, b, m, M) {\r\n        return betastd_cdf((x - m) / (M - m), a, b);\r\n    }\r\n    function BETA_DIST(x, a, b, cdf, m, M) {\r\n        if (cdf) {\r\n            return betastd_cdf((x - m) / (M - m), a, b);\r\n        }\r\n        return betastd_pdf((x - m) / (M - m), a, b) / (M - m);\r\n    }\r\n    function BETA_INV(p, a, b, m, M) {\r\n        return m + (M - m) * betastd_inv(p, a, b);\r\n    }\r\n    function chisq_left(x, n, cds) {\r\n        return GAMMA_DIST(x, n / 2, 2, cds);\r\n    }\r\n    function chisq_right(x, n) {\r\n        return 1 - chisq_left(x, n, true);\r\n    }\r\n    function chisq_left_inv(p, n) {\r\n        return GAMMA_INV(p, n / 2, 2);\r\n    }\r\n    function chisq_right_inv(p, n) {\r\n        return chisq_left_inv(1 - p, n);\r\n    }\r\n    function chisq_test(obsv, expect) {\r\n        var rows = obsv.length, cols = obsv[0].length;\r\n        var x = 0, i, j;\r\n        for (i = 0; i < rows; i++) {\r\n            for (j = 0; j < cols; j++) {\r\n                var eij = expect[i][j];\r\n                var delta = obsv[i][j] - eij;\r\n                delta *= delta;\r\n                x += delta / eij;\r\n            }\r\n        }\r\n        var n = (rows - 1) * (cols - 1);\r\n        return chisq_right(x, n);\r\n    }\r\n    function expon(x, r, cdf) {\r\n        if (cdf) {\r\n            return 1 - Math.exp(-r * x);\r\n        }\r\n        return r * Math.exp(-r * x);\r\n    }\r\n    function poisson(k, m, cdf) {\r\n        if (cdf) {\r\n            return 1 - chisq_left(2 * m, 2 * (k + 1), true);\r\n        }\r\n        var lnf = 0;\r\n        for (var i = 2; i <= k; i++) {\r\n            lnf += Math.log(i);\r\n        }\r\n        return Math.exp(k * Math.log(m) - m - lnf);\r\n    }\r\n    function Fdist(x, n, d, cdf) {\r\n        if (cdf) {\r\n            return betastd_cdf(n * x / (d + n * x), n / 2, d / 2);\r\n        }\r\n        var u = n / d;\r\n        n /= 2;\r\n        d /= 2;\r\n        return u / BETA(n, d) * Math.pow(u * x, n - 1) / Math.pow(1 + u * x, n + d);\r\n    }\r\n    function Fdist_right(x, n, d) {\r\n        return 1 - Fdist(x, n, d, true);\r\n    }\r\n    function Finv_right(p, n, d) {\r\n        return d / n * (1 / BETA_INV(p, d / 2, n / 2, 0, 1) - 1);\r\n    }\r\n    function Finv(p, n, d) {\r\n        return d / n * (1 / BETA_INV(1 - p, d / 2, n / 2, 0, 1) - 1);\r\n    }\r\n    function _mean(arr) {\r\n        var me = 0, n = arr.length;\r\n        for (var i = 0; i < n; i++) {\r\n            me += arr[i];\r\n        }\r\n        return me / n;\r\n    }\r\n    function _var_sq(arr, m) {\r\n        var v = 0, n = arr.length;\r\n        for (var i = 0; i < n; i++) {\r\n            var delta = arr[i] - m;\r\n            v += delta * delta;\r\n        }\r\n        return v / (n - 1);\r\n    }\r\n    function Ftest(arr1, arr2) {\r\n        var n1 = arr1.length - 1, n2 = arr2.length - 1;\r\n        var va1 = _var_sq(arr1, _mean(arr1)), va2 = _var_sq(arr2, _mean(arr2));\r\n        if (!va1 || !va2) {\r\n            throw new CalcError('DIV/0');\r\n        }\r\n        return 2 * Fdist(va1 / va2, n1, n2, true);\r\n    }\r\n    function fisher(x) {\r\n        return 0.5 * Math.log((1 + x) / (1 - x));\r\n    }\r\n    function fisherinv(x) {\r\n        var e2 = Math.exp(2 * x);\r\n        return (e2 - 1) / (e2 + 1);\r\n    }\r\n    function Tdist(x, n, cdf) {\r\n        if (cdf) {\r\n            return 1 - 0.5 * betastd_cdf(n / (x * x + n), n / 2, 0.5);\r\n        }\r\n        return 1 / (Math.sqrt(n) * BETA(0.5, n / 2)) * Math.pow(1 + x * x / n, -(n + 1) / 2);\r\n    }\r\n    function Tdist_right(x, n) {\r\n        return 1 - Tdist(x, n, true);\r\n    }\r\n    function Tdist_2tail(x, n) {\r\n        if (x < 0) {\r\n            x = -x;\r\n        }\r\n        return 2 * Tdist_right(x, n);\r\n    }\r\n    function Tdist_inv(p, n) {\r\n        var x = betastd_inv(2 * Math.min(p, 1 - p), n / 2, 0.5);\r\n        x = Math.sqrt(n * (1 - x) / x);\r\n        return p > 0.5 ? x : -x;\r\n    }\r\n    function Tdist_2tail_inv(p, n) {\r\n        return Tdist_inv(1 - p / 2, n);\r\n    }\r\n    function Tdist_test(gr1, gr2, tail, type) {\r\n        var n1 = gr1.length, n2 = gr2.length;\r\n        var t_st, df;\r\n        if (type == 1) {\r\n            var d = 0, d2 = 0;\r\n            for (var i = 0; i < n1; i++) {\r\n                var delta = gr1[i] - gr2[i];\r\n                d += delta;\r\n                d2 += delta * delta;\r\n            }\r\n            var md = d / n1;\r\n            t_st = md / Math.sqrt((d2 - d * md) / (n1 * (n1 - 1)));\r\n            return tail == 1 ? Tdist_right(t_st, n1 - 1) : Tdist_2tail(t_st, n1 - 1);\r\n        }\r\n        var m1 = _mean(gr1), m2 = _mean(gr2), v1 = _var_sq(gr1, m1), v2 = _var_sq(gr2, m2);\r\n        if (type == 3) {\r\n            var u1 = v1 / n1, u2 = v2 / n2, u = u1 + u2;\r\n            var q1 = u1 / u, q2 = u2 / u;\r\n            df = 1 / (q1 * q1 / (n1 - 1) + q2 * q2 / (n2 - 1));\r\n            t_st = f_abs(m1 - m2) / Math.sqrt(u);\r\n            return tail == 1 ? Tdist_right(t_st, df) : Tdist_2tail(t_st, df);\r\n        } else {\r\n            df = n1 + n2 - 2;\r\n            t_st = f_abs(m1 - m2) * Math.sqrt(df * n1 * n2 / ((n1 + n2) * ((n1 - 1) * v1 + (n2 - 1) * v2)));\r\n            return tail == 1 ? Tdist_right(t_st, df) : Tdist_2tail(t_st, df);\r\n        }\r\n    }\r\n    function confidence_t(alpha, stddev, size) {\r\n        return -Tdist_inv(alpha / 2, size - 1) * stddev / Math.sqrt(size);\r\n    }\r\n    function confidence_norm(alpha, stddev, size) {\r\n        return -NORM_S_INV(alpha / 2) * stddev / Math.sqrt(size);\r\n    }\r\n    function gauss(z) {\r\n        return NORM_S_DIST(z, true) - 0.5;\r\n    }\r\n    function phi(x) {\r\n        return NORM_S_DIST(x);\r\n    }\r\n    function lognorm_dist(x, m, s, cumulative) {\r\n        if (cumulative) {\r\n            return 0.5 + 0.5 * ERF((Math.log(x) - m) / (s * Math.sqrt(2)));\r\n        }\r\n        var t = Math.log(x) - m;\r\n        return Math.exp(-t * t / (2 * s * s)) / (x * s * Math.sqrt(2 * Math.PI));\r\n    }\r\n    function lognorm_inv(p, m, s) {\r\n        return Math.exp(NORM_INV(p, m, s));\r\n    }\r\n    function prob(x_, p_, lw, up) {\r\n        var n = x_.length;\r\n        var s = 0, i;\r\n        for (i = 0; i < n; i++) {\r\n            if (p_[i] <= 0 || p_[i] > 1) {\r\n                throw new CalcError('NUM');\r\n            }\r\n            s += p_[i];\r\n        }\r\n        if (s != 1) {\r\n            throw new CalcError('NUM');\r\n        }\r\n        var res = 0;\r\n        for (i = 0; i < n; i++) {\r\n            var x = x_[i];\r\n            if (x >= lw && x <= up) {\r\n                res += p_[i];\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    function slope(y_, x_) {\r\n        var mx = _mean(x_), my = _mean(y_), b1 = 0, b2 = 0;\r\n        for (var i = 0, n = y_.length; i < n; i++) {\r\n            var t = x_[i] - mx;\r\n            b1 += t * (y_[i] - my);\r\n            b2 += t * t;\r\n        }\r\n        return b1 / b2;\r\n    }\r\n    function intercept(y_, x_) {\r\n        var mx = _mean(x_), my = _mean(y_);\r\n        var b1 = 0, b2 = 0;\r\n        for (var i = 0, n = y_.length; i < n; i++) {\r\n            var t = x_[i] - mx;\r\n            b1 += t * (y_[i] - my);\r\n            b2 += t * t;\r\n        }\r\n        return my - b1 * mx / b2;\r\n    }\r\n    function pearson(x_, y_) {\r\n        var mx = _mean(x_), my = _mean(y_);\r\n        var s1 = 0, s2 = 0, s3 = 0;\r\n        for (var i = 0, n = x_.length; i < n; i++) {\r\n            var t1 = x_[i] - mx, t2 = y_[i] - my;\r\n            s1 += t1 * t2;\r\n            s2 += t1 * t1;\r\n            s3 += t2 * t2;\r\n        }\r\n        return s1 / Math.sqrt(s2 * s3);\r\n    }\r\n    function rsq(x_, y_) {\r\n        var r = pearson(x_, y_);\r\n        return r * r;\r\n    }\r\n    function steyx(y_, x_) {\r\n        var n = x_.length;\r\n        var mx = _mean(x_), my = _mean(y_);\r\n        var s1 = 0, s2 = 0, s3 = 0;\r\n        for (var i = 0; i < n; i++) {\r\n            var t1 = x_[i] - mx, t2 = y_[i] - my;\r\n            s1 += t2 * t2;\r\n            s2 += t1 * t2;\r\n            s3 += t1 * t1;\r\n        }\r\n        return Math.sqrt((s1 - s2 * s2 / s3) / (n - 2));\r\n    }\r\n    function forecast(x, y_, x_) {\r\n        var mx = _mean(x_), my = _mean(y_);\r\n        var s1 = 0, s2 = 0;\r\n        for (var i = 0, n = x_.length; i < n; i++) {\r\n            var t1 = x_[i] - mx, t2 = y_[i] - my;\r\n            s1 += t1 * t2;\r\n            s2 += t1 * t1;\r\n        }\r\n        if (s2 === 0) {\r\n            throw new CalcError('N/A');\r\n        }\r\n        var b = s1 / s2, a = my - b * mx;\r\n        return a + b * x;\r\n    }\r\n    function _mat_mean(Mat) {\r\n        var n = Mat.height, sum = 0;\r\n        for (var i = 0; i < n; i++) {\r\n            sum += Mat.data[i][0];\r\n        }\r\n        return sum / n;\r\n    }\r\n    function _mat_devsq(Mat, mean) {\r\n        var n = Mat.height, sq = 0;\r\n        for (var i = 0; i < n; i++) {\r\n            var x = Mat.data[i][0] - mean;\r\n            sq += x * x;\r\n        }\r\n        return sq;\r\n    }\r\n    function linest(Y, X, konst, stats) {\r\n        var i = 0;\r\n        if (!X) {\r\n            X = Y.map(function () {\r\n                return ++i;\r\n            });\r\n        }\r\n        if (konst) {\r\n            X = X.clone();\r\n            X.eachRow(function (row) {\r\n                X.data[row].unshift(1);\r\n            });\r\n            ++X.width;\r\n        }\r\n        var Xt = X.transpose();\r\n        var B = Xt.multiply(X).inverse().multiply(Xt).multiply(Y);\r\n        var line_1 = [];\r\n        for (i = B.height - 1; i >= 0; i--) {\r\n            line_1.push(B.data[i][0]);\r\n        }\r\n        if (!konst) {\r\n            line_1.push(0);\r\n        }\r\n        if (!stats) {\r\n            return this.asMatrix([line_1]);\r\n        }\r\n        var Y1 = X.multiply(B);\r\n        var y_y1 = Y.adds(Y1, true);\r\n        var mp = !konst ? 0 : _mat_mean(Y1);\r\n        var SSreg = _mat_devsq(Y1, mp);\r\n        var me = !konst ? 0 : _mat_mean(y_y1);\r\n        var SSresid = _mat_devsq(y_y1, me);\r\n        var line_5 = [];\r\n        line_5.push(SSreg, SSresid);\r\n        var R2 = SSreg / (SSreg + SSresid);\r\n        var degfre = Y.height - X.width;\r\n        var err_est = Math.sqrt(SSresid / degfre);\r\n        var line_3 = [];\r\n        line_3.push(R2, err_est);\r\n        var F_sta = !konst ? R2 / X.width / ((1 - R2) / degfre) : SSreg / (X.width - 1) / (SSresid / degfre);\r\n        var line_4 = [];\r\n        line_4.push(F_sta, degfre);\r\n        var SCP = Xt.multiply(X).inverse();\r\n        var line_2 = [];\r\n        for (i = SCP.height - 1; i >= 0; i--) {\r\n            line_2.push(Math.sqrt(SCP.data[i][i] * SSresid / degfre));\r\n        }\r\n        return this.asMatrix([\r\n            line_1,\r\n            line_2,\r\n            line_3,\r\n            line_4,\r\n            line_5\r\n        ]);\r\n    }\r\n    function logest(Y, X, konst, stats) {\r\n        return linest.call(this, Y.map(Math.log), X, konst, stats).map(Math.exp);\r\n    }\r\n    function trend(Y, X, W, konst) {\r\n        var i = 0;\r\n        if (!X) {\r\n            X = Y.map(function () {\r\n                return ++i;\r\n            });\r\n        }\r\n        if (konst) {\r\n            X = X.clone();\r\n            X.eachRow(function (row) {\r\n                X.data[row].unshift(1);\r\n            });\r\n            ++X.width;\r\n        }\r\n        var Xt = X.transpose();\r\n        var B = Xt.multiply(X).inverse().multiply(Xt).multiply(Y);\r\n        if (!W) {\r\n            W = X;\r\n        } else {\r\n            if (konst) {\r\n                W = W.clone();\r\n                W.eachRow(function (row) {\r\n                    W.data[row].unshift(1);\r\n                });\r\n                ++W.width;\r\n            }\r\n        }\r\n        return W.multiply(B);\r\n    }\r\n    function growth(Y, X, new_X, konst) {\r\n        return trend.call(this, Y.map(Math.log), X, new_X, konst).map(Math.exp);\r\n    }\r\n    function root_newton(func, guess, max_it, eps) {\r\n        var MAX_IT = max_it || 20, EPS = eps || 1e-7;\r\n        var root = guess;\r\n        for (var j = 1; j <= MAX_IT; j++) {\r\n            var f_d = func(root), f = f_d[0], df = f_d[1];\r\n            var dx = f / df;\r\n            root -= dx;\r\n            if (Math.abs(dx) < EPS) {\r\n                return root;\r\n            }\r\n        }\r\n        return new CalcError('NUM');\r\n    }\r\n    function FV(rate, nper, pmt, pv, type) {\r\n        var h1 = Math.pow(1 + rate, nper);\r\n        var h2 = rate ? (h1 - 1) / rate : nper;\r\n        return -(pv * h1 + pmt * h2 * (1 + rate * type));\r\n    }\r\n    function PV(rate, nper, pmt, fv, type) {\r\n        if (!rate) {\r\n            return -fv - pmt * nper;\r\n        }\r\n        var h1 = Math.pow(1 + rate, nper);\r\n        return -(fv + pmt * (h1 - 1) / rate * (1 + rate * type)) / h1;\r\n    }\r\n    function PMT(rate, nper, pv, fv, type) {\r\n        if (!rate) {\r\n            return -(fv + pv) / nper;\r\n        }\r\n        var h1 = Math.pow(1 + rate, nper);\r\n        return -rate * (fv + pv * h1) / ((1 + rate * type) * (h1 - 1));\r\n    }\r\n    function NPER(rate, pmt, pv, fv, type) {\r\n        if (!rate) {\r\n            return -(fv + pv) / pmt;\r\n        }\r\n        var h1 = pmt * (1 + rate * type);\r\n        return Math.log((h1 - fv * rate) / (h1 + pv * rate)) / Math.log(1 + rate);\r\n    }\r\n    function RATE(nper, pmt, pv, fv, type, guess) {\r\n        function xfd(x) {\r\n            var h2 = Math.pow(1 + x, nper - 1), h1 = h2 * (1 + x);\r\n            return [\r\n                pv * h1 + pmt * (1 / x + type) * (h1 - 1) + fv,\r\n                nper * pv * h2 + pmt * (-(h1 - 1) / (x * x) + (1 / x + type) * nper * h2)\r\n            ];\r\n        }\r\n        return root_newton(xfd, guess);\r\n    }\r\n    function IPMT(rate, per, nper, pv, fv, type) {\r\n        if (type == 1 && per == 1) {\r\n            return 0;\r\n        }\r\n        var pmt = PMT(rate, nper, pv, fv, type);\r\n        var ipmt = FV(rate, per - 1, pmt, pv, type) * rate;\r\n        return type ? ipmt / (1 + rate) : ipmt;\r\n    }\r\n    function PPMT(rate, per, nper, pv, fv, type) {\r\n        var pmt = PMT(rate, nper, pv, fv, type);\r\n        return pmt - IPMT(rate, per, nper, pv, fv, type);\r\n    }\r\n    function CUMPRINC(rate, nper, pv, start, end, type) {\r\n        if (type == 1) {\r\n            start--;\r\n            end--;\r\n        }\r\n        var tn = Math.pow(1 + rate, nper), ts = Math.pow(1 + rate, start - 1), te = Math.pow(1 + rate, end);\r\n        var monthlyPayment = rate * pv * tn / (tn - 1);\r\n        var remainingBalanceAtStart = ts * pv - (ts - 1) / rate * monthlyPayment;\r\n        var remainingBalanceAtEnd = te * pv - (te - 1) / rate * monthlyPayment;\r\n        return remainingBalanceAtEnd - remainingBalanceAtStart;\r\n    }\r\n    function CUMIPMT(rate, nper, pv, start, end, type) {\r\n        var cip = 0;\r\n        for (var i = start; i <= end; i++) {\r\n            cip += IPMT(rate, i, nper, pv, 0, type);\r\n        }\r\n        return cip;\r\n    }\r\n    function NPV(rate, flows) {\r\n        var npv = 0;\r\n        for (var i = 0, n = flows.length; i < n; i++) {\r\n            npv += flows[i] * Math.pow(1 + rate, -i - 1);\r\n        }\r\n        return npv;\r\n    }\r\n    function IRR(flows, guess) {\r\n        function xfd(x) {\r\n            var npv = 0, npv1 = 0;\r\n            for (var j = 0, n = flows.length; j < n; j++) {\r\n                npv += flows[j] * Math.pow(1 + x, -j - 1);\r\n                npv1 += -j * flows[j] * Math.pow(1 + x, -j - 2);\r\n            }\r\n            return [\r\n                npv,\r\n                npv1\r\n            ];\r\n        }\r\n        return root_newton(xfd, guess);\r\n    }\r\n    function EFFECT(nominal_rate, npery) {\r\n        return Math.pow(1 + nominal_rate / npery, npery) - 1;\r\n    }\r\n    function NOMINAL(effect_rate, npery) {\r\n        return npery * (Math.pow(effect_rate + 1, 1 / npery) - 1);\r\n    }\r\n    function XNPV(rate, values, dates) {\r\n        var npv = 0;\r\n        for (var i = 0, n = values.length; i < n; i++) {\r\n            npv += values[i] * Math.pow(1 + rate, (dates[0] - dates[i]) / 365);\r\n        }\r\n        return npv;\r\n    }\r\n    function XIRR(values, dates, guess) {\r\n        function xfd(x) {\r\n            var npv = values[0], npv1 = 0;\r\n            for (var j = 1, n = values.length; j < n; j++) {\r\n                var delta = (dates[0] - dates[j]) / 365;\r\n                npv += values[j] * Math.pow(1 + x, delta);\r\n                npv1 += delta * values[j] * Math.pow(1 + x, delta - 1);\r\n            }\r\n            return [\r\n                npv,\r\n                npv1\r\n            ];\r\n        }\r\n        return root_newton(xfd, guess);\r\n    }\r\n    function ISPMT(rate, per, nper, pv) {\r\n        var tmp = -pv * rate;\r\n        return tmp * (1 - per / nper);\r\n    }\r\n    function DB(cost, salvage, life, period, month) {\r\n        var rate = 1 - Math.pow(salvage / cost, 1 / life);\r\n        rate = Math.floor(rate * 1000 + 0.5) / 1000;\r\n        var db = cost * rate * month / 12;\r\n        if (period == 1) {\r\n            return db;\r\n        }\r\n        for (var i = 1; i < life; i++) {\r\n            if (i == period - 1) {\r\n                return (cost - db) * rate;\r\n            }\r\n            db += (cost - db) * rate;\r\n        }\r\n        return (cost - db) * rate * (12 - month) / 12;\r\n    }\r\n    function DDB(cost, salvage, life, period, factor) {\r\n        var f = factor / life;\r\n        var prior = -cost * (Math.pow(1 - f, period - 1) - 1);\r\n        var dep = (cost - prior) * f;\r\n        dep = Math.min(dep, Math.max(0, cost - prior - salvage));\r\n        return dep;\r\n    }\r\n    function SLN(cost, salvage, life) {\r\n        return (cost - salvage) / life;\r\n    }\r\n    function SYD(cost, salvage, life, per) {\r\n        return (cost - salvage) * (life - per + 1) * 2 / (life * (life + 1));\r\n    }\r\n    function VDB(cost, salvage, life, start, end, factor, no_switch) {\r\n        var interest = factor >= life ? 1 : factor / life;\r\n        function _getGDA(value, period) {\r\n            var gda, oldValue, newValue;\r\n            if (interest == 1) {\r\n                oldValue = period == 1 ? value : 0;\r\n            } else {\r\n                oldValue = value * Math.pow(1 - interest, period - 1);\r\n            }\r\n            newValue = value * Math.pow(1 - interest, period);\r\n            gda = newValue < salvage ? oldValue - salvage : oldValue - newValue;\r\n            return gda < 0 ? 0 : gda;\r\n        }\r\n        function _interVDB(cost, life1, period) {\r\n            var remValue = cost - salvage;\r\n            var intEnd = Math.ceil(period);\r\n            var term, lia = 0, vdb = 0, nowLia = false;\r\n            for (var i = 1; i <= intEnd; i++) {\r\n                if (!nowLia) {\r\n                    var gda = _getGDA(cost, i);\r\n                    lia = remValue / (life1 - i + 1);\r\n                    if (lia > gda) {\r\n                        term = lia;\r\n                        nowLia = true;\r\n                    } else {\r\n                        term = gda;\r\n                        remValue -= gda;\r\n                    }\r\n                } else {\r\n                    term = lia;\r\n                }\r\n                if (i == intEnd) {\r\n                    term *= period + 1 - intEnd;\r\n                }\r\n                vdb += term;\r\n            }\r\n            return vdb;\r\n        }\r\n        var intStart = Math.floor(start), intEnd = Math.ceil(end);\r\n        var vdb = 0;\r\n        if (no_switch) {\r\n            for (var i = intStart + 1; i <= intEnd; i++) {\r\n                var term = _getGDA(cost, i);\r\n                if (i == intStart + 1) {\r\n                    term *= Math.min(end, intStart + 1) - start;\r\n                } else {\r\n                    if (i == intEnd) {\r\n                        term *= end + 1 - intEnd;\r\n                    }\r\n                }\r\n                vdb += term;\r\n            }\r\n        } else {\r\n            var life1 = life;\r\n            if (start != Math.floor(start)) {\r\n                if (factor > 1) {\r\n                    if (start >= life / 2) {\r\n                        var part = start - life / 2;\r\n                        start = life / 2;\r\n                        end -= part;\r\n                        life1 += 1;\r\n                    }\r\n                }\r\n            }\r\n            cost -= _interVDB(cost, life1, start);\r\n            vdb = _interVDB(cost, life - start, end - start);\r\n        }\r\n        return vdb;\r\n    }\r\n    function _edate(base, months) {\r\n        var d = unpackDate(base);\r\n        var m = d.month + months;\r\n        var y = d.year + Math.floor(m / 12);\r\n        m %= 12;\r\n        if (m < 0) {\r\n            m += 12;\r\n        }\r\n        d = Math.min(d.date, daysInMonth(y, m));\r\n        return packDate(y, m, d);\r\n    }\r\n    function _daysBetween(from, to, basis) {\r\n        if (basis == 1 || basis == 2 || basis == 3) {\r\n            return to - from;\r\n        }\r\n        return _days_360(from, to, basis);\r\n    }\r\n    function _borderCoupons(settlement, maturity, freq) {\r\n        var sett = unpackDate(settlement), base = unpackDate(maturity);\r\n        var periods = base.year - sett.year;\r\n        if (periods > 0) {\r\n            periods = (periods - 1) * freq;\r\n        }\r\n        var prev, next, months = 12 / freq;\r\n        do {\r\n            periods++;\r\n            prev = _edate(maturity, -periods * months);\r\n        } while (settlement < prev);\r\n        periods--;\r\n        next = _edate(maturity, -periods * months);\r\n        return [\r\n            prev,\r\n            next\r\n        ];\r\n    }\r\n    function _borderCoupons_fw(first, settlement, freq) {\r\n        var sett = unpackDate(settlement), base = unpackDate(first);\r\n        var periods = sett.year - base.year;\r\n        if (periods > 0) {\r\n            periods = (periods - 1) * freq;\r\n        }\r\n        var prev = first, next, months = 12 / freq;\r\n        while (settlement > prev) {\r\n            next = prev;\r\n            periods++;\r\n            prev = _edate(first, periods * months);\r\n        }\r\n        return [\r\n            next,\r\n            prev\r\n        ];\r\n    }\r\n    function COUPDAYBS(settlement, maturity, frequency, basis) {\r\n        var prev = _borderCoupons(settlement, maturity, frequency)[0];\r\n        return _daysBetween(prev, settlement, basis);\r\n    }\r\n    function COUPDAYS(settl, matur, freq, basis) {\r\n        if (basis == 1) {\r\n            var borders = _borderCoupons(settl, matur, freq);\r\n            return _daysBetween(borders[0], borders[1], 1);\r\n        }\r\n        if (basis == 3) {\r\n            return 365 / freq;\r\n        }\r\n        return 360 / freq;\r\n    }\r\n    function COUPDAYSNC(settl, matur, freq, basis) {\r\n        var next = _borderCoupons(settl, matur, freq)[1];\r\n        return _daysBetween(settl, next, basis);\r\n    }\r\n    function COUPPCD(settl, matur, freq) {\r\n        return _borderCoupons(settl, matur, freq)[0];\r\n    }\r\n    function COUPNCD(settl, matur, freq) {\r\n        return _borderCoupons(settl, matur, freq)[1];\r\n    }\r\n    function COUPNUM(settl, matur, freq) {\r\n        var sett = unpackDate(settl), mat = unpackDate(matur);\r\n        var months = 12 * (mat.year - sett.year) + mat.month - sett.month;\r\n        return 1 + (months * freq / 12 | 0);\r\n    }\r\n    function daysInYear(yr, basis) {\r\n        if (basis == 3) {\r\n            return 365;\r\n        }\r\n        if (basis == 1) {\r\n            return isLeapYear(yr) ? 366 : 365;\r\n        }\r\n        return 360;\r\n    }\r\n    function ACCRINTM(issue, maturity, rate, par, basis) {\r\n        var year_days = daysInYear(unpackDate(maturity).year, basis);\r\n        return rate * par * _daysBetween(issue, maturity, basis) / year_days;\r\n    }\r\n    function ACCRINT(issue, first, settl, rate, par, freq, basis, calc) {\r\n        var accr = 0, cost = par * rate / freq;\r\n        var brace, prev, next, prev1, next1, nrc;\r\n        var annual = basis % 2 === 0 ? 360 : 365;\r\n        function _numCoupons(from, to) {\r\n            return (to - from) * freq / annual | 0;\r\n        }\r\n        if (settl <= first) {\r\n            brace = _borderCoupons(settl, first, freq);\r\n            prev = brace[0];\r\n            next = brace[1];\r\n            if (prev <= issue) {\r\n                return cost * _daysBetween(issue, settl, basis) / _daysBetween(prev, next, basis);\r\n            }\r\n            brace = _borderCoupons(issue, prev, freq);\r\n            prev1 = brace[0];\r\n            next1 = brace[1];\r\n            nrc = _numCoupons(next1, settl);\r\n            return cost * (nrc + _daysBetween(issue, next1, basis) / _daysBetween(prev1, next1, basis) + (settl < next ? _daysBetween(prev, settl, basis) / _daysBetween(prev, next, basis) : 0));\r\n        } else {\r\n            brace = _borderCoupons_fw(first, settl, freq);\r\n            prev = brace[0];\r\n            next = brace[1];\r\n            nrc = _numCoupons(first, settl);\r\n            if (next == settl) {\r\n                accr = cost * nrc;\r\n            } else {\r\n                accr = cost * (nrc + _daysBetween(prev, settl, basis) / _daysBetween(prev, next, basis));\r\n            }\r\n            if (!calc) {\r\n                return accr;\r\n            }\r\n            brace = _borderCoupons(issue, first, freq);\r\n            prev = brace[0];\r\n            next = brace[1];\r\n            nrc = _numCoupons(issue, first);\r\n            accr += cost * (nrc + _daysBetween(issue, next, basis) / _daysBetween(prev, next, basis));\r\n            return accr;\r\n        }\r\n    }\r\n    function DISC(settl, matur, pr, redemption, basis) {\r\n        var annual = basis % 2 === 0 ? 360 : isLeapYear(unpackDate(settl).year) ? 366 : 365;\r\n        return (redemption - pr) / redemption * annual / _daysBetween(settl, matur, basis);\r\n    }\r\n    function INTRATE(settl, matur, investment, redemption, basis) {\r\n        var annual = basis % 2 === 0 ? 360 : isLeapYear(unpackDate(settl).year) ? 366 : 365;\r\n        return (redemption - investment) / investment * annual / _daysBetween(settl, matur, basis);\r\n    }\r\n    function RECEIVED(settl, matur, investment, discount, basis) {\r\n        var annual = basis % 2 === 0 ? 360 : isLeapYear(unpackDate(settl).year) ? 366 : 365;\r\n        return investment / (1 - discount * _daysBetween(settl, matur, basis) / annual);\r\n    }\r\n    function PRICE(settl, matur, rate, yld, redemption, freq, basis) {\r\n        var N = 1 + ((matur - settl) * freq / (basis % 2 === 0 ? 360 : 365) | 0);\r\n        var brace = _borderCoupons(settl, matur, freq), prev = brace[0], next = brace[1];\r\n        var beg_settl = _daysBetween(prev, settl, basis), settl_end = _daysBetween(settl, next, basis), beg_end = _daysBetween(prev, next, basis);\r\n        var den = 100 * rate / freq, yf = yld / freq, frac = settl_end / beg_end;\r\n        if (N == 1) {\r\n            return (redemption + den) / (1 + frac * yf) - beg_settl / beg_end * den;\r\n        }\r\n        return redemption / Math.pow(1 + yf, N - 1 + frac) + den * Math.pow(1 + yf, 1 - N - frac) * (Math.pow(1 + yf, N) - 1) / yf - beg_settl / beg_end * den;\r\n    }\r\n    function PRICEDISC(settl, matur, discount, redemption, basis) {\r\n        var dsm = _daysBetween(settl, matur, basis), dy = daysInYear(unpackDate(matur).year, basis);\r\n        return redemption - discount * redemption * dsm / dy;\r\n    }\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/borderpalette', [\r\n        'kendo.core',\r\n        'kendo.colorpicker',\r\n        'kendo.popup'\r\n    ], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var $ = kendo.jQuery;\r\n        var BORDER_TYPES = [\r\n            'allBorders',\r\n            'insideBorders',\r\n            'insideHorizontalBorders',\r\n            'insideVerticalBorders',\r\n            'outsideBorders',\r\n            'leftBorder',\r\n            'topBorder',\r\n            'rightBorder',\r\n            'bottomBorder',\r\n            'noBorders'\r\n        ];\r\n        var BORDER_PALETTE_MESSAGES = kendo.spreadsheet.messages.borderPalette = {\r\n            allBorders: 'All borders',\r\n            insideBorders: 'Inside borders',\r\n            insideHorizontalBorders: 'Inside horizontal borders',\r\n            insideVerticalBorders: 'Inside vertical borders',\r\n            outsideBorders: 'Outside borders',\r\n            leftBorder: 'Left border',\r\n            topBorder: 'Top border',\r\n            rightBorder: 'Right border',\r\n            bottomBorder: 'Bottom border',\r\n            noBorders: 'No border',\r\n            reset: 'Reset color',\r\n            customColor: 'Custom color...',\r\n            apply: 'Apply',\r\n            cancel: 'Cancel'\r\n        };\r\n        function withPreventDefault(f) {\r\n            return function (e) {\r\n                e.preventDefault();\r\n                return f.apply(this, arguments);\r\n            };\r\n        }\r\n        var ColorChooser = kendo.ui.Widget.extend({\r\n            init: function (element, options) {\r\n                kendo.ui.Widget.call(this, element, options);\r\n                this.element = element;\r\n                this.color = options.color;\r\n                this._resetButton();\r\n                this._colorPalette();\r\n                this._customColorPalette();\r\n                this._customColorButton();\r\n                this.resetButton.on('click', withPreventDefault(this.resetColor.bind(this)));\r\n                this.customColorButton.on('click', withPreventDefault(this.customColor.bind(this)));\r\n            },\r\n            options: { name: 'ColorChooser' },\r\n            events: ['change'],\r\n            destroy: function () {\r\n                kendo.unbind(this.dialog.element.find('.k-action-buttons'));\r\n                this.dialog.destroy();\r\n                this.colorPalette.destroy();\r\n                this.resetButton.off('click');\r\n                this.customColorButton.off('click');\r\n            },\r\n            value: function (value) {\r\n                if (value !== undefined) {\r\n                    this.color = value;\r\n                    this.customColorButton.find('.k-icon').css('background-color', this.color);\r\n                    this.colorPalette.value(null);\r\n                    this.flatColorPicker.value(this.color);\r\n                } else {\r\n                    return this.color;\r\n                }\r\n            },\r\n            _change: function (value) {\r\n                this.color = value;\r\n                this.trigger('change', { value: value });\r\n            },\r\n            _colorPalette: function () {\r\n                var element = $('<div />', { 'class': 'k-spreadsheet-color-palette' });\r\n                var colorPalette = this.colorPalette = $('<div />').kendoColorPalette({\r\n                    palette: [\r\n                        '#ffffff',\r\n                        '#000000',\r\n                        '#d6ecff',\r\n                        '#4e5b6f',\r\n                        '#7fd13b',\r\n                        '#ea157a',\r\n                        '#feb80a',\r\n                        '#00addc',\r\n                        '#738ac8',\r\n                        '#1ab39f',\r\n                        '#f2f2f2',\r\n                        '#7f7f7f',\r\n                        '#a7d6ff',\r\n                        '#d9dde4',\r\n                        '#e5f5d7',\r\n                        '#fad0e4',\r\n                        '#fef0cd',\r\n                        '#c5f2ff',\r\n                        '#e2e7f4',\r\n                        '#c9f7f1',\r\n                        '#d8d8d8',\r\n                        '#595959',\r\n                        '#60b5ff',\r\n                        '#b3bcca',\r\n                        '#cbecb0',\r\n                        '#f6a1c9',\r\n                        '#fee29c',\r\n                        '#8be6ff',\r\n                        '#c7d0e9',\r\n                        '#94efe3',\r\n                        '#bfbfbf',\r\n                        '#3f3f3f',\r\n                        '#007dea',\r\n                        '#8d9baf',\r\n                        '#b2e389',\r\n                        '#f272af',\r\n                        '#fed46b',\r\n                        '#51d9ff',\r\n                        '#aab8de',\r\n                        '#5fe7d5',\r\n                        '#a5a5a5',\r\n                        '#262626',\r\n                        '#003e75',\r\n                        '#3a4453',\r\n                        '#5ea226',\r\n                        '#af0f5b',\r\n                        '#c58c00',\r\n                        '#0081a5',\r\n                        '#425ea9',\r\n                        '#138677',\r\n                        '#7f7f7f',\r\n                        '#0c0c0c',\r\n                        '#00192e',\r\n                        '#272d37',\r\n                        '#3f6c19',\r\n                        '#750a3d',\r\n                        '#835d00',\r\n                        '#00566e',\r\n                        '#2c3f71',\r\n                        '#0c594f'\r\n                    ],\r\n                    value: this.color,\r\n                    change: function (e) {\r\n                        this.customColorButton.find('.k-icon').css('background-color', 'transparent');\r\n                        this.flatColorPicker.value(null);\r\n                        this._change(e.value);\r\n                    }.bind(this)\r\n                }).data('kendoColorPalette');\r\n                element.append(colorPalette.wrapper).appendTo(this.element);\r\n            },\r\n            _customColorPalette: function () {\r\n                var element = $('<div />', {\r\n                    'class': 'k-spreadsheet-window',\r\n                    'html': '<div></div>' + '<div class=\\'k-action-buttons\\'>' + '<button class=\\'k-button k-primary\\' data-bind=\\'click: apply\\'>' + BORDER_PALETTE_MESSAGES.apply + '</button>' + '<button class=\\'k-button\\' data-bind=\\'click: close\\'>' + BORDER_PALETTE_MESSAGES.cancel + '</button>' + '</div>'\r\n                });\r\n                var dialog = this.dialog = element.appendTo(document.body).kendoWindow({\r\n                    animation: false,\r\n                    scrollable: false,\r\n                    resizable: false,\r\n                    maximizable: false,\r\n                    modal: true,\r\n                    visible: false,\r\n                    width: 268,\r\n                    open: function () {\r\n                        this.center();\r\n                    }\r\n                }).data('kendoWindow');\r\n                dialog.one('activate', function () {\r\n                    this.element.find('[data-role=flatcolorpicker]').data('kendoFlatColorPicker')._hueSlider.resize();\r\n                });\r\n                var flatColorPicker = this.flatColorPicker = dialog.element.children().first().kendoFlatColorPicker().data('kendoFlatColorPicker');\r\n                var viewModel = kendo.observable({\r\n                    apply: function () {\r\n                        this.customColorButton.find('.k-icon').css('background-color', flatColorPicker.value());\r\n                        this.colorPalette.value(null);\r\n                        this._change(flatColorPicker.value());\r\n                        dialog.close();\r\n                    }.bind(this),\r\n                    close: function () {\r\n                        flatColorPicker.value(null);\r\n                        dialog.close();\r\n                    }\r\n                });\r\n                kendo.bind(dialog.element.find('.k-action-buttons'), viewModel);\r\n            },\r\n            _resetButton: function () {\r\n                this.resetButton = $('<a class=\\'k-button k-reset-color\\' href=\\'#\\'>' + '<span class=\\'k-icon k-font-icon k-i-reset-color\\'></span>' + BORDER_PALETTE_MESSAGES.reset + '</a>').appendTo(this.element);\r\n            },\r\n            _customColorButton: function () {\r\n                this.customColorButton = $('<a class=\\'k-button k-custom-color\\' href=\\'#\\'>' + '<span class=\\'k-icon\\'></span>' + BORDER_PALETTE_MESSAGES.customColor + '</a>').appendTo(this.element);\r\n            },\r\n            resetColor: function () {\r\n                this.colorPalette.value(null);\r\n                this.flatColorPicker.value(null);\r\n                this._change(null);\r\n            },\r\n            customColor: function () {\r\n                this.dialog.open();\r\n            }\r\n        });\r\n        var BorderPalette = kendo.ui.Widget.extend({\r\n            init: function (element, options) {\r\n                kendo.ui.Widget.call(this, element, options);\r\n                this.element = element;\r\n                this.color = '#000';\r\n                this.element.addClass('k-spreadsheet-border-palette');\r\n                this._borderTypePalette();\r\n                this._borderColorPalette();\r\n                this.element.on('click', '.k-spreadsheet-border-type-palette .k-button', withPreventDefault(this._click.bind(this)));\r\n            },\r\n            options: { name: 'BorderPalette' },\r\n            events: ['change'],\r\n            destroy: function () {\r\n                this.colorChooser.destroy();\r\n                this.element.off('click');\r\n            },\r\n            _borderTypePalette: function () {\r\n                var messages = BORDER_PALETTE_MESSAGES;\r\n                var buttons = BORDER_TYPES.map(function (type) {\r\n                    return '<a title=\"' + messages[type] + '\" href=\"#\" data-border-type=\"' + type + '\" class=\"k-button k-button-icon\">' + '<span class=\"k-sprite k-font-icon k-icon k-i-' + kendo.toHyphens(type) + '\"></span>' + '</a>';\r\n                }).join('');\r\n                var element = $('<div />', {\r\n                    'class': 'k-spreadsheet-border-type-palette',\r\n                    'html': buttons\r\n                });\r\n                element.appendTo(this.element);\r\n            },\r\n            _borderColorPalette: function () {\r\n                var element = $('<div />', { 'class': 'k-spreadsheet-border-color-palette' });\r\n                element.appendTo(this.element);\r\n                this.colorChooser = new ColorChooser(element, {\r\n                    color: this.color,\r\n                    change: this._colorChange.bind(this)\r\n                });\r\n            },\r\n            _click: function (e) {\r\n                this.type = $(e.currentTarget).data('borderType');\r\n                this.trigger('change', {\r\n                    type: this.type,\r\n                    color: this.color\r\n                });\r\n            },\r\n            _colorChange: function (e) {\r\n                this.color = e.value;\r\n                if (this.type) {\r\n                    this.trigger('change', {\r\n                        type: this.type,\r\n                        color: this.color\r\n                    });\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.ColorChooser = ColorChooser;\r\n        kendo.spreadsheet.BorderPalette = BorderPalette;\r\n    }(window.kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/toolbar', [\r\n        'kendo.toolbar',\r\n        'kendo.colorpicker',\r\n        'kendo.combobox',\r\n        'kendo.dropdownlist',\r\n        'kendo.popup',\r\n        'spreadsheet/borderpalette'\r\n    ], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var $ = kendo.jQuery;\r\n        var ToolBar = kendo.ui.ToolBar;\r\n        var MESSAGES = kendo.spreadsheet.messages.toolbar = {\r\n            addColumnLeft: 'Add column left',\r\n            addColumnRight: 'Add column right',\r\n            addRowAbove: 'Add row above',\r\n            addRowBelow: 'Add row below',\r\n            alignment: 'Alignment',\r\n            alignmentButtons: {\r\n                justtifyLeft: 'Align left',\r\n                justifyCenter: 'Center',\r\n                justifyRight: 'Align right',\r\n                justifyFull: 'Justify',\r\n                alignTop: 'Align top',\r\n                alignMiddle: 'Align middle',\r\n                alignBottom: 'Align bottom'\r\n            },\r\n            backgroundColor: 'Background',\r\n            bold: 'Bold',\r\n            borders: 'Borders',\r\n            colorPicker: {\r\n                reset: 'Reset color',\r\n                customColor: 'Custom color...'\r\n            },\r\n            copy: 'Copy',\r\n            cut: 'Cut',\r\n            deleteColumn: 'Delete column',\r\n            deleteRow: 'Delete row',\r\n            filter: 'Filter',\r\n            fontFamily: 'Font',\r\n            fontSize: 'Font size',\r\n            format: 'Custom format...',\r\n            formatTypes: {\r\n                automatic: 'Automatic',\r\n                number: 'Number',\r\n                percent: 'Percent',\r\n                financial: 'Financial',\r\n                currency: 'Currency',\r\n                date: 'Date',\r\n                time: 'Time',\r\n                dateTime: 'Date time',\r\n                duration: 'Duration',\r\n                moreFormats: 'More formats...'\r\n            },\r\n            formatDecreaseDecimal: 'Decrease decimal',\r\n            formatIncreaseDecimal: 'Increase decimal',\r\n            freeze: 'Freeze panes',\r\n            freezeButtons: {\r\n                freezePanes: 'Freeze panes',\r\n                freezeRows: 'Freeze rows',\r\n                freezeColumns: 'Freeze columns',\r\n                unfreeze: 'Unfreeze panes'\r\n            },\r\n            italic: 'Italic',\r\n            merge: 'Merge cells',\r\n            mergeButtons: {\r\n                mergeCells: 'Merge all',\r\n                mergeHorizontally: 'Merge horizontally',\r\n                mergeVertically: 'Merge vertically',\r\n                unmerge: 'Unmerge'\r\n            },\r\n            open: 'Open...',\r\n            paste: 'Paste',\r\n            quickAccess: {\r\n                redo: 'Redo',\r\n                undo: 'Undo'\r\n            },\r\n            exportAs: 'Export...',\r\n            toggleGridlines: 'Toggle gridlines',\r\n            sortAsc: 'Sort ascending',\r\n            sortDesc: 'Sort descending',\r\n            sortButtons: {\r\n                sortSheetAsc: 'Sort sheet A to Z',\r\n                sortSheetDesc: 'Sort sheet Z to A',\r\n                sortRangeAsc: 'Sort range A to Z',\r\n                sortRangeDesc: 'Sort range Z to A'\r\n            },\r\n            textColor: 'Text Color',\r\n            textWrap: 'Wrap text',\r\n            underline: 'Underline',\r\n            validation: 'Data validation...',\r\n            hyperlink: 'Link'\r\n        };\r\n        var defaultTools = {\r\n            home: [\r\n                'open',\r\n                'exportAs',\r\n                [\r\n                    'cut',\r\n                    'copy',\r\n                    'paste'\r\n                ],\r\n                [\r\n                    'bold',\r\n                    'italic',\r\n                    'underline'\r\n                ],\r\n                'hyperlink',\r\n                'backgroundColor',\r\n                'textColor',\r\n                'borders',\r\n                'fontSize',\r\n                'fontFamily',\r\n                'alignment',\r\n                'textWrap',\r\n                [\r\n                    'formatDecreaseDecimal',\r\n                    'formatIncreaseDecimal'\r\n                ],\r\n                'format',\r\n                'merge',\r\n                'freeze',\r\n                'filter',\r\n                'toggleGridlines'\r\n            ],\r\n            insert: [\r\n                [\r\n                    'addColumnLeft',\r\n                    'addColumnRight',\r\n                    'addRowBelow',\r\n                    'addRowAbove'\r\n                ],\r\n                [\r\n                    'deleteColumn',\r\n                    'deleteRow'\r\n                ]\r\n            ],\r\n            data: [\r\n                'sort',\r\n                'filter',\r\n                'validation'\r\n            ]\r\n        };\r\n        var toolDefaults = {\r\n            open: {\r\n                type: 'open',\r\n                overflow: 'never',\r\n                iconClass: 'xlsa'\r\n            },\r\n            exportAs: {\r\n                type: 'exportAsDialog',\r\n                dialogName: 'exportAs',\r\n                overflow: 'never',\r\n                text: '',\r\n                iconClass: 'xlsa'\r\n            },\r\n            bold: {\r\n                type: 'button',\r\n                command: 'PropertyChangeCommand',\r\n                property: 'bold',\r\n                value: true,\r\n                iconClass: 'bold',\r\n                togglable: true\r\n            },\r\n            italic: {\r\n                type: 'button',\r\n                command: 'PropertyChangeCommand',\r\n                property: 'italic',\r\n                value: true,\r\n                iconClass: 'italic',\r\n                togglable: true\r\n            },\r\n            underline: {\r\n                type: 'button',\r\n                command: 'PropertyChangeCommand',\r\n                property: 'underline',\r\n                value: true,\r\n                iconClass: 'underline',\r\n                togglable: true\r\n            },\r\n            formatDecreaseDecimal: {\r\n                type: 'button',\r\n                command: 'AdjustDecimalsCommand',\r\n                value: -1,\r\n                iconClass: 'decrease-decimal'\r\n            },\r\n            formatIncreaseDecimal: {\r\n                type: 'button',\r\n                command: 'AdjustDecimalsCommand',\r\n                value: +1,\r\n                iconClass: 'increase-decimal'\r\n            },\r\n            textWrap: {\r\n                type: 'button',\r\n                command: 'TextWrapCommand',\r\n                property: 'wrap',\r\n                value: true,\r\n                iconClass: 'text-wrap',\r\n                togglable: true\r\n            },\r\n            cut: {\r\n                type: 'button',\r\n                command: 'ToolbarCutCommand',\r\n                iconClass: 'cut'\r\n            },\r\n            copy: {\r\n                type: 'button',\r\n                command: 'ToolbarCopyCommand',\r\n                iconClass: 'copy'\r\n            },\r\n            paste: {\r\n                type: 'button',\r\n                command: 'ToolbarPasteCommand',\r\n                iconClass: 'paste'\r\n            },\r\n            separator: { type: 'separator' },\r\n            alignment: {\r\n                type: 'alignment',\r\n                iconClass: 'justify-left'\r\n            },\r\n            backgroundColor: {\r\n                type: 'colorPicker',\r\n                property: 'background',\r\n                iconClass: 'background'\r\n            },\r\n            textColor: {\r\n                type: 'colorPicker',\r\n                property: 'color',\r\n                iconClass: 'text'\r\n            },\r\n            fontFamily: {\r\n                type: 'fontFamily',\r\n                property: 'fontFamily',\r\n                iconClass: 'text'\r\n            },\r\n            fontSize: {\r\n                type: 'fontSize',\r\n                property: 'fontSize',\r\n                iconClass: 'font-size'\r\n            },\r\n            format: {\r\n                type: 'format',\r\n                property: 'format',\r\n                iconClass: 'format-number'\r\n            },\r\n            filter: {\r\n                type: 'filter',\r\n                property: 'hasFilter',\r\n                iconClass: 'filter'\r\n            },\r\n            merge: {\r\n                type: 'merge',\r\n                iconClass: 'merge-cells'\r\n            },\r\n            freeze: {\r\n                type: 'freeze',\r\n                iconClass: 'freeze-panes'\r\n            },\r\n            borders: {\r\n                type: 'borders',\r\n                iconClass: 'all-borders'\r\n            },\r\n            formatCells: {\r\n                type: 'dialog',\r\n                dialogName: 'formatCells',\r\n                overflow: 'never'\r\n            },\r\n            hyperlink: {\r\n                type: 'dialog',\r\n                dialogName: 'hyperlink',\r\n                iconClass: 'hyperlink',\r\n                overflow: 'never',\r\n                text: ''\r\n            },\r\n            toggleGridlines: {\r\n                type: 'button',\r\n                command: 'GridLinesChangeCommand',\r\n                property: 'gridLines',\r\n                value: true,\r\n                iconClass: 'no-borders',\r\n                togglable: true\r\n            },\r\n            addColumnLeft: {\r\n                type: 'button',\r\n                command: 'AddColumnCommand',\r\n                value: 'left',\r\n                iconClass: 'add-column-left'\r\n            },\r\n            addColumnRight: {\r\n                type: 'button',\r\n                command: 'AddColumnCommand',\r\n                value: 'right',\r\n                iconClass: 'add-column-right'\r\n            },\r\n            addRowBelow: {\r\n                type: 'button',\r\n                command: 'AddRowCommand',\r\n                value: 'below',\r\n                iconClass: 'add-row-below'\r\n            },\r\n            addRowAbove: {\r\n                type: 'button',\r\n                command: 'AddRowCommand',\r\n                value: 'above',\r\n                iconClass: 'add-row-above'\r\n            },\r\n            deleteColumn: {\r\n                type: 'button',\r\n                command: 'DeleteColumnCommand',\r\n                iconClass: 'delete-column'\r\n            },\r\n            deleteRow: {\r\n                type: 'button',\r\n                command: 'DeleteRowCommand',\r\n                iconClass: 'delete-row'\r\n            },\r\n            sort: {\r\n                type: 'sort',\r\n                iconClass: 'sort-desc'\r\n            },\r\n            validation: {\r\n                type: 'dialog',\r\n                dialogName: 'validation',\r\n                iconClass: 'exception',\r\n                overflow: 'never'\r\n            }\r\n        };\r\n        var SpreadsheetToolBar = ToolBar.extend({\r\n            init: function (element, options) {\r\n                options.items = this._expandTools(options.tools || SpreadsheetToolBar.prototype.options.tools[options.toolbarName]);\r\n                ToolBar.fn.init.call(this, element, options);\r\n                var handleClick = this._click.bind(this);\r\n                this.element.addClass('k-spreadsheet-toolbar');\r\n                this._addSeparators(this.element);\r\n                this.bind({\r\n                    click: handleClick,\r\n                    toggle: handleClick\r\n                });\r\n            },\r\n            _addSeparators: function (element) {\r\n                var groups = element.children('.k-widget, a.k-button, .k-button-group');\r\n                groups.before('<span class=\\'k-separator\\' />');\r\n            },\r\n            _expandTools: function (tools) {\r\n                function expandTool(toolName) {\r\n                    var options = $.isPlainObject(toolName) ? toolName : toolDefaults[toolName] || {};\r\n                    var spriteCssClass = 'k-icon k-font-icon k-i-' + options.iconClass;\r\n                    var type = options.type;\r\n                    var typeDefaults = {\r\n                        splitButton: { spriteCssClass: spriteCssClass },\r\n                        button: { showText: 'overflow' },\r\n                        colorPicker: { toolIcon: spriteCssClass }\r\n                    };\r\n                    var tool = $.extend({\r\n                        name: options.name || toolName,\r\n                        text: MESSAGES[options.name || toolName],\r\n                        spriteCssClass: spriteCssClass,\r\n                        attributes: { title: MESSAGES[options.name || toolName] }\r\n                    }, typeDefaults[type], options);\r\n                    if (type == 'splitButton') {\r\n                        tool.menuButtons = tool.menuButtons.map(expandTool);\r\n                    }\r\n                    tool.attributes['data-tool'] = toolName;\r\n                    if (options.property) {\r\n                        tool.attributes['data-property'] = options.property;\r\n                    }\r\n                    return tool;\r\n                }\r\n                return tools.reduce(function (tools, tool) {\r\n                    if ($.isArray(tool)) {\r\n                        tools.push({\r\n                            type: 'buttonGroup',\r\n                            buttons: tool.map(expandTool)\r\n                        });\r\n                    } else {\r\n                        tools.push(expandTool.call(this, tool));\r\n                    }\r\n                    return tools;\r\n                }, []);\r\n            },\r\n            _click: function (e) {\r\n                var toolName = e.target.attr('data-tool');\r\n                var tool = toolDefaults[toolName] || {};\r\n                var commandType = tool.command;\r\n                if (!commandType) {\r\n                    return;\r\n                }\r\n                var args = {\r\n                    command: commandType,\r\n                    options: {\r\n                        property: tool.property || null,\r\n                        value: tool.value || null\r\n                    }\r\n                };\r\n                if (typeof args.options.value === 'boolean') {\r\n                    args.options.value = e.checked ? true : null;\r\n                }\r\n                this.action(args);\r\n            },\r\n            events: [\r\n                'click',\r\n                'toggle',\r\n                'open',\r\n                'close',\r\n                'overflowOpen',\r\n                'overflowClose',\r\n                'action',\r\n                'dialog'\r\n            ],\r\n            options: {\r\n                name: 'SpreadsheetToolBar',\r\n                resizable: true,\r\n                tools: defaultTools\r\n            },\r\n            action: function (args) {\r\n                this.trigger('action', args);\r\n            },\r\n            dialog: function (args) {\r\n                this.trigger('dialog', args);\r\n            },\r\n            refresh: function (activeCell) {\r\n                var range = activeCell;\r\n                var tools = this._tools();\r\n                function setToggle(tool, value) {\r\n                    var toolbar = tool.toolbar;\r\n                    var overflow = tool.overflow;\r\n                    var togglable = toolbar && toolbar.options.togglable || overflow && overflow.options.togglable;\r\n                    if (!togglable) {\r\n                        return;\r\n                    }\r\n                    var toggle = false;\r\n                    if (typeof value === 'boolean') {\r\n                        toggle = value;\r\n                    } else if (typeof value === 'string') {\r\n                        toggle = toolbar.options.value === value;\r\n                    }\r\n                    toolbar.toggle(toggle);\r\n                    if (overflow) {\r\n                        overflow.toggle(toggle);\r\n                    }\r\n                }\r\n                function update(tool, value) {\r\n                    var toolbar = tool.toolbar;\r\n                    var overflow = tool.overflow;\r\n                    if (toolbar && toolbar.update) {\r\n                        toolbar.update(value);\r\n                    }\r\n                    if (overflow && overflow.update) {\r\n                        overflow.update(value);\r\n                    }\r\n                }\r\n                for (var i = 0; i < tools.length; i++) {\r\n                    var property = tools[i].property;\r\n                    var tool = tools[i].tool;\r\n                    var value = kendo.isFunction(range[property]) ? range[property]() : range;\r\n                    if (property == 'gridLines') {\r\n                        value = range.sheet().showGridLines();\r\n                    }\r\n                    if (tool.type === 'button') {\r\n                        setToggle(tool, value);\r\n                    } else {\r\n                        update(tool, value);\r\n                    }\r\n                }\r\n            },\r\n            _tools: function () {\r\n                return this.element.find('[data-property]').toArray().map(function (element) {\r\n                    element = $(element);\r\n                    return {\r\n                        property: element.attr('data-property'),\r\n                        tool: this._getItem(element)\r\n                    };\r\n                }.bind(this));\r\n            },\r\n            destroy: function () {\r\n                this.element.find('[data-command],.k-button').each(function () {\r\n                    var element = $(this);\r\n                    var instance = element.data('instance');\r\n                    if (instance && instance.destroy) {\r\n                        instance.destroy();\r\n                    }\r\n                });\r\n                ToolBar.fn.destroy.call(this);\r\n            }\r\n        });\r\n        kendo.spreadsheet.ToolBar = SpreadsheetToolBar;\r\n        var DropDownTool = kendo.toolbar.Item.extend({\r\n            init: function (options, toolbar) {\r\n                var dropDownList = $('<select />').kendoDropDownList({ height: 'auto' }).data('kendoDropDownList');\r\n                this.dropDownList = dropDownList;\r\n                this.element = dropDownList.wrapper;\r\n                this.options = options;\r\n                this.toolbar = toolbar;\r\n                this.attributes();\r\n                this.addUidAttr();\r\n                this.addOverflowAttr();\r\n                dropDownList.bind('open', this._open.bind(this));\r\n                dropDownList.bind('change', this._change.bind(this));\r\n                this.element.width(options.width).attr({\r\n                    'data-command': 'PropertyChangeCommand',\r\n                    'data-property': options.property\r\n                });\r\n            },\r\n            _open: function () {\r\n                var ddl = this.dropDownList;\r\n                var list = ddl.list;\r\n                var listWidth;\r\n                list.css({\r\n                    whiteSpace: 'nowrap',\r\n                    width: 'auto'\r\n                });\r\n                listWidth = list.width();\r\n                if (listWidth) {\r\n                    listWidth += 20;\r\n                } else {\r\n                    listWidth = ddl._listWidth;\r\n                }\r\n                list.css('width', listWidth + kendo.support.scrollbar());\r\n                ddl._listWidth = listWidth;\r\n            },\r\n            _change: function (e) {\r\n                var instance = e.sender;\r\n                var value = instance.value();\r\n                var dataItem = instance.dataItem();\r\n                var popupName = dataItem ? dataItem.popup : undefined;\r\n                if (popupName) {\r\n                    this.toolbar.dialog({ name: popupName });\r\n                } else {\r\n                    this.toolbar.action({\r\n                        command: 'PropertyChangeCommand',\r\n                        options: {\r\n                            property: this.options.property,\r\n                            value: value == 'null' ? null : value\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n            value: function (value) {\r\n                if (value !== undefined) {\r\n                    this.dropDownList.value(value);\r\n                } else {\r\n                    return this.dropDownList.value();\r\n                }\r\n            }\r\n        });\r\n        var PopupTool = kendo.toolbar.Item.extend({\r\n            init: function (options, toolbar) {\r\n                this.element = $('<a href=\\'#\\' class=\\'k-button k-button-icon\\'>' + '<span class=\\'' + options.spriteCssClass + '\\'>' + '</span><span class=\\'k-icon k-i-arrow-s\\'></span>' + '</a>');\r\n                this.element.on('click', this.open.bind(this)).attr('data-command', options.command);\r\n                this.options = options;\r\n                this.toolbar = toolbar;\r\n                this.attributes();\r\n                this.addUidAttr();\r\n                this.addOverflowAttr();\r\n                this._popup();\r\n            },\r\n            destroy: function () {\r\n                this.popup.destroy();\r\n            },\r\n            open: function (ev) {\r\n                ev.preventDefault();\r\n                this.popup.toggle();\r\n            },\r\n            _popup: function () {\r\n                var element = this.element;\r\n                this.popup = $('<div class=\\'k-spreadsheet-popup\\' />').appendTo(element).kendoPopup({ anchor: element }).data('kendoPopup');\r\n            }\r\n        });\r\n        kendo.toolbar.registerComponent('dialog', kendo.toolbar.ToolBarButton.extend({\r\n            init: function (options, toolbar) {\r\n                kendo.toolbar.ToolBarButton.fn.init.call(this, options, toolbar);\r\n                this._dialogName = options.dialogName;\r\n                this.element.bind('click', this.open.bind(this)).data('instance', this);\r\n            },\r\n            open: function () {\r\n                this.toolbar.dialog({ name: this._dialogName });\r\n            }\r\n        }));\r\n        kendo.toolbar.registerComponent('exportAsDialog', kendo.toolbar.Item.extend({\r\n            init: function (options, toolbar) {\r\n                this._dialogName = options.dialogName;\r\n                this.toolbar = toolbar;\r\n                this.element = $('<button class=\\'k-button k-button-icon\\' title=\\'' + options.attributes.title + '\\'>' + '<span class=\\'k-icon k-font-icon k-i-xls\\' />' + '</button>').data('instance', this);\r\n                this.element.bind('click', this.open.bind(this)).data('instance', this);\r\n            },\r\n            open: function () {\r\n                this.toolbar.dialog({ name: this._dialogName });\r\n            }\r\n        }));\r\n        var OverflowDialogButton = kendo.toolbar.OverflowButton.extend({\r\n            init: function (options, toolbar) {\r\n                kendo.toolbar.OverflowButton.fn.init.call(this, options, toolbar);\r\n                this.element.on('click', this._click.bind(this));\r\n                this.message = this.options.text;\r\n                var instance = this.element.data('button');\r\n                this.element.data(this.options.type, instance);\r\n            },\r\n            _click: $.noop\r\n        });\r\n        var ColorPicker = PopupTool.extend({\r\n            init: function (options, toolbar) {\r\n                PopupTool.fn.init.call(this, options, toolbar);\r\n                this.popup.element.addClass('k-spreadsheet-colorpicker');\r\n                this.colorChooser = new kendo.spreadsheet.ColorChooser(this.popup.element, { change: this._colorChange.bind(this) });\r\n                this.element.attr({ 'data-property': options.property });\r\n                this.element.data({\r\n                    type: 'colorPicker',\r\n                    colorPicker: this,\r\n                    instance: this\r\n                });\r\n            },\r\n            destroy: function () {\r\n                this.colorChooser.destroy();\r\n                PopupTool.fn.destroy.call(this);\r\n            },\r\n            update: function (value) {\r\n                this.value(value);\r\n            },\r\n            value: function (value) {\r\n                this.colorChooser.value(value);\r\n            },\r\n            _colorChange: function (e) {\r\n                this.toolbar.action({\r\n                    command: 'PropertyChangeCommand',\r\n                    options: {\r\n                        property: this.options.property,\r\n                        value: e.sender.value()\r\n                    }\r\n                });\r\n                this.popup.close();\r\n            }\r\n        });\r\n        var ColorPickerButton = OverflowDialogButton.extend({\r\n            init: function (options, toolbar) {\r\n                options.iconName = 'text';\r\n                OverflowDialogButton.fn.init.call(this, options, toolbar);\r\n            },\r\n            _click: function () {\r\n                this.toolbar.dialog({\r\n                    name: 'colorPicker',\r\n                    options: {\r\n                        title: this.options.property,\r\n                        property: this.options.property\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        kendo.toolbar.registerComponent('colorPicker', ColorPicker, ColorPickerButton);\r\n        var FONT_SIZES = [\r\n            8,\r\n            9,\r\n            10,\r\n            11,\r\n            12,\r\n            13,\r\n            14,\r\n            16,\r\n            18,\r\n            20,\r\n            22,\r\n            24,\r\n            26,\r\n            28,\r\n            36,\r\n            48,\r\n            72\r\n        ];\r\n        var DEFAULT_FONT_SIZE = 12;\r\n        var FontSize = kendo.toolbar.Item.extend({\r\n            init: function (options, toolbar) {\r\n                var comboBox = $('<input />').kendoComboBox({\r\n                    change: this._valueChange.bind(this),\r\n                    dataSource: options.fontSizes || FONT_SIZES,\r\n                    value: DEFAULT_FONT_SIZE\r\n                }).data('kendoComboBox');\r\n                this.comboBox = comboBox;\r\n                this.element = comboBox.wrapper;\r\n                this.options = options;\r\n                this.toolbar = toolbar;\r\n                this.attributes();\r\n                this.addUidAttr();\r\n                this.addOverflowAttr();\r\n                this.element.width(options.width).attr({\r\n                    'data-command': 'PropertyChangeCommand',\r\n                    'data-property': options.property\r\n                });\r\n                this.element.data({\r\n                    type: 'fontSize',\r\n                    fontSize: this\r\n                });\r\n            },\r\n            _valueChange: function (e) {\r\n                this.toolbar.action({\r\n                    command: 'PropertyChangeCommand',\r\n                    options: {\r\n                        property: this.options.property,\r\n                        value: kendo.parseInt(e.sender.value())\r\n                    }\r\n                });\r\n            },\r\n            update: function (value) {\r\n                this.value(kendo.parseInt(value) || DEFAULT_FONT_SIZE);\r\n            },\r\n            value: function (value) {\r\n                if (value !== undefined) {\r\n                    this.comboBox.value(value);\r\n                } else {\r\n                    return this.comboBox.value();\r\n                }\r\n            }\r\n        });\r\n        var FontSizeButton = OverflowDialogButton.extend({\r\n            _click: function () {\r\n                this.toolbar.dialog({\r\n                    name: 'fontSize',\r\n                    options: {\r\n                        sizes: FONT_SIZES,\r\n                        defaultSize: DEFAULT_FONT_SIZE\r\n                    }\r\n                });\r\n            },\r\n            update: function (value) {\r\n                this._value = value || DEFAULT_FONT_SIZE;\r\n                this.element.find('.k-text').text(this.message + ' (' + this._value + ') ...');\r\n            }\r\n        });\r\n        kendo.toolbar.registerComponent('fontSize', FontSize, FontSizeButton);\r\n        var FONT_FAMILIES = [\r\n            'Arial',\r\n            'Courier New',\r\n            'Georgia',\r\n            'Times New Roman',\r\n            'Trebuchet MS',\r\n            'Verdana'\r\n        ];\r\n        var DEFAULT_FONT_FAMILY = 'Arial';\r\n        var FontFamily = DropDownTool.extend({\r\n            init: function (options, toolbar) {\r\n                DropDownTool.fn.init.call(this, options, toolbar);\r\n                var ddl = this.dropDownList;\r\n                ddl.setDataSource(options.fontFamilies || FONT_FAMILIES);\r\n                ddl.value(DEFAULT_FONT_FAMILY);\r\n                this.element.data({\r\n                    type: 'fontFamily',\r\n                    fontFamily: this\r\n                });\r\n            },\r\n            update: function (value) {\r\n                this.value(value || DEFAULT_FONT_FAMILY);\r\n            }\r\n        });\r\n        var FontFamilyButton = OverflowDialogButton.extend({\r\n            _click: function () {\r\n                this.toolbar.dialog({\r\n                    name: 'fontFamily',\r\n                    options: {\r\n                        fonts: FONT_FAMILIES,\r\n                        defaultFont: DEFAULT_FONT_FAMILY\r\n                    }\r\n                });\r\n            },\r\n            update: function (value) {\r\n                this._value = value || DEFAULT_FONT_FAMILY;\r\n                this.element.find('.k-text').text(this.message + ' (' + this._value + ') ...');\r\n            }\r\n        });\r\n        kendo.toolbar.registerComponent('fontFamily', FontFamily, FontFamilyButton);\r\n        var defaultFormats = kendo.spreadsheet.formats = {\r\n            automatic: null,\r\n            number: '#,0.00',\r\n            percent: '0.00%',\r\n            financial: '_(\"$\"* #,##0.00_);_(\"$\"* (#,##0.00);_(\"$\"* \"-\"??_);_(@_)',\r\n            currency: '$#,##0.00;[Red]$#,##0.00',\r\n            date: 'm/d/yyyy',\r\n            time: 'h:mm:ss AM/PM',\r\n            dateTime: 'm/d/yyyy h:mm',\r\n            duration: '[h]:mm:ss'\r\n        };\r\n        var Format = DropDownTool.extend({\r\n            _revertTitle: function (e) {\r\n                e.sender.value('');\r\n                e.sender.wrapper.width('auto');\r\n            },\r\n            init: function (options, toolbar) {\r\n                DropDownTool.fn.init.call(this, options, toolbar);\r\n                var ddl = this.dropDownList;\r\n                var icon = '<span class=\\'k-icon k-font-icon k-i-' + options.iconClass + '\\' style=\\'line-height: 1em; width: 1.35em;\\'></span>';\r\n                ddl.bind('change', this._revertTitle.bind(this));\r\n                ddl.bind('dataBound', this._revertTitle.bind(this));\r\n                ddl.setOptions({\r\n                    dataValueField: 'format',\r\n                    dataTextField: 'name',\r\n                    dataValuePrimitive: true,\r\n                    valueTemplate: icon,\r\n                    template: '# if (data.sample) { #' + '<span class=\\'k-spreadsheet-sample\\'>#: data.sample #</span>' + '# } #' + '#: data.name #'\r\n                });\r\n                ddl.text(icon);\r\n                ddl.setDataSource([\r\n                    {\r\n                        format: defaultFormats.automatic,\r\n                        name: MESSAGES.formatTypes.automatic\r\n                    },\r\n                    {\r\n                        format: defaultFormats.number,\r\n                        name: MESSAGES.formatTypes.number,\r\n                        sample: '1,499.99'\r\n                    },\r\n                    {\r\n                        format: defaultFormats.percent,\r\n                        name: MESSAGES.formatTypes.percent,\r\n                        sample: '14.50%'\r\n                    },\r\n                    {\r\n                        format: defaultFormats.financial,\r\n                        name: MESSAGES.formatTypes.financial,\r\n                        sample: '(1,000.12)'\r\n                    },\r\n                    {\r\n                        format: defaultFormats.currency,\r\n                        name: MESSAGES.formatTypes.currency,\r\n                        sample: '$1,499.99'\r\n                    },\r\n                    {\r\n                        format: defaultFormats.date,\r\n                        name: MESSAGES.formatTypes.date,\r\n                        sample: '4/21/2012'\r\n                    },\r\n                    {\r\n                        format: defaultFormats.time,\r\n                        name: MESSAGES.formatTypes.time,\r\n                        sample: '5:49:00 PM'\r\n                    },\r\n                    {\r\n                        format: defaultFormats.dateTime,\r\n                        name: MESSAGES.formatTypes.dateTime,\r\n                        sample: '4/21/2012 5:49:00'\r\n                    },\r\n                    {\r\n                        format: defaultFormats.duration,\r\n                        name: MESSAGES.formatTypes.duration,\r\n                        sample: '168:05:00'\r\n                    },\r\n                    {\r\n                        popup: 'formatCells',\r\n                        name: MESSAGES.formatTypes.moreFormats\r\n                    }\r\n                ]);\r\n                this.element.data({\r\n                    type: 'format',\r\n                    format: this\r\n                });\r\n            }\r\n        });\r\n        var FormatButton = OverflowDialogButton.extend({\r\n            _click: function () {\r\n                this.toolbar.dialog({ name: 'formatCells' });\r\n            }\r\n        });\r\n        kendo.toolbar.registerComponent('format', Format, FormatButton);\r\n        var BorderChangeTool = PopupTool.extend({\r\n            init: function (options, toolbar) {\r\n                PopupTool.fn.init.call(this, options, toolbar);\r\n                this._borderPalette();\r\n                this.element.data({\r\n                    type: 'borders',\r\n                    instance: this\r\n                });\r\n            },\r\n            destroy: function () {\r\n                this.borderPalette.destroy();\r\n                PopupTool.fn.destroy.call(this);\r\n            },\r\n            _borderPalette: function () {\r\n                var element = $('<div />').appendTo(this.popup.element);\r\n                this.borderPalette = new kendo.spreadsheet.BorderPalette(element, { change: this._action.bind(this) });\r\n            },\r\n            _action: function (e) {\r\n                this.toolbar.action({\r\n                    command: 'BorderChangeCommand',\r\n                    options: {\r\n                        border: e.type,\r\n                        style: {\r\n                            size: 1,\r\n                            color: e.color\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        var BorderChangeButton = OverflowDialogButton.extend({\r\n            _click: function () {\r\n                this.toolbar.dialog({ name: 'borders' });\r\n            }\r\n        });\r\n        kendo.toolbar.registerComponent('borders', BorderChangeTool, BorderChangeButton);\r\n        var AlignmentTool = PopupTool.extend({\r\n            init: function (options, toolbar) {\r\n                PopupTool.fn.init.call(this, options, toolbar);\r\n                this.element.attr({ 'data-property': 'alignment' });\r\n                this._commandPalette();\r\n                this.popup.element.on('click', '.k-button', function (e) {\r\n                    this._action($(e.currentTarget));\r\n                }.bind(this));\r\n                this.element.data({\r\n                    type: 'alignment',\r\n                    alignment: this,\r\n                    instance: this\r\n                });\r\n            },\r\n            buttons: [\r\n                {\r\n                    property: 'textAlign',\r\n                    value: 'left',\r\n                    iconClass: 'justify-left',\r\n                    text: MESSAGES.alignmentButtons.justtifyLeft\r\n                },\r\n                {\r\n                    property: 'textAlign',\r\n                    value: 'center',\r\n                    iconClass: 'justify-center',\r\n                    text: MESSAGES.alignmentButtons.justifyCenter\r\n                },\r\n                {\r\n                    property: 'textAlign',\r\n                    value: 'right',\r\n                    iconClass: 'justify-right',\r\n                    text: MESSAGES.alignmentButtons.justifyRight\r\n                },\r\n                {\r\n                    property: 'textAlign',\r\n                    value: 'justify',\r\n                    iconClass: 'justify-full',\r\n                    text: MESSAGES.alignmentButtons.justifyFull\r\n                },\r\n                {\r\n                    property: 'verticalAlign',\r\n                    value: 'top',\r\n                    iconClass: 'align-top',\r\n                    text: MESSAGES.alignmentButtons.alignTop\r\n                },\r\n                {\r\n                    property: 'verticalAlign',\r\n                    value: 'center',\r\n                    iconClass: 'align-middle',\r\n                    text: MESSAGES.alignmentButtons.alignMiddle\r\n                },\r\n                {\r\n                    property: 'verticalAlign',\r\n                    value: 'bottom',\r\n                    iconClass: 'align-bottom',\r\n                    text: MESSAGES.alignmentButtons.alignBottom\r\n                }\r\n            ],\r\n            destroy: function () {\r\n                this.popup.element.off();\r\n                PopupTool.fn.destroy.call(this);\r\n            },\r\n            update: function (range) {\r\n                var textAlign = range.textAlign();\r\n                var verticalAlign = range.verticalAlign();\r\n                var element = this.popup.element;\r\n                element.find('.k-button').removeClass('k-state-active');\r\n                if (textAlign) {\r\n                    element.find('[data-property=textAlign][data-value=' + textAlign + ']').addClass('k-state-active');\r\n                }\r\n                if (verticalAlign) {\r\n                    element.find('[data-property=verticalAlign][data-value=' + verticalAlign + ']').addClass('k-state-active');\r\n                }\r\n            },\r\n            _commandPalette: function () {\r\n                var buttons = this.buttons;\r\n                var element = $('<div />').appendTo(this.popup.element);\r\n                buttons.forEach(function (options, index) {\r\n                    var button = '<a title=\\'' + options.text + '\\' data-property=\\'' + options.property + '\\' data-value=\\'' + options.value + '\\' class=\\'k-button k-button-icon\\'>' + '<span class=\\'k-icon k-font-icon k-i-' + options.iconClass + '\\'></span>' + '</a>';\r\n                    if (index !== 0 && buttons[index - 1].property !== options.property) {\r\n                        element.append($('<span class=\\'k-separator\\' />'));\r\n                    }\r\n                    element.append(button);\r\n                });\r\n            },\r\n            _action: function (button) {\r\n                var property = button.attr('data-property');\r\n                var value = button.attr('data-value');\r\n                this.toolbar.action({\r\n                    command: 'PropertyChangeCommand',\r\n                    options: {\r\n                        property: property,\r\n                        value: value\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        var AlignmentButton = OverflowDialogButton.extend({\r\n            _click: function () {\r\n                this.toolbar.dialog({ name: 'alignment' });\r\n            }\r\n        });\r\n        kendo.toolbar.registerComponent('alignment', AlignmentTool, AlignmentButton);\r\n        var MergeTool = PopupTool.extend({\r\n            init: function (options, toolbar) {\r\n                PopupTool.fn.init.call(this, options, toolbar);\r\n                this._commandPalette();\r\n                this.popup.element.on('click', '.k-button', function (e) {\r\n                    this._action($(e.currentTarget));\r\n                }.bind(this));\r\n                this.element.data({\r\n                    type: 'merge',\r\n                    merge: this,\r\n                    instance: this\r\n                });\r\n            },\r\n            buttons: [\r\n                {\r\n                    value: 'cells',\r\n                    iconClass: 'merge-cells',\r\n                    text: MESSAGES.mergeButtons.mergeCells\r\n                },\r\n                {\r\n                    value: 'horizontally',\r\n                    iconClass: 'merge-horizontally',\r\n                    text: MESSAGES.mergeButtons.mergeHorizontally\r\n                },\r\n                {\r\n                    value: 'vertically',\r\n                    iconClass: 'merge-vertically',\r\n                    text: MESSAGES.mergeButtons.mergeVertically\r\n                },\r\n                {\r\n                    value: 'unmerge',\r\n                    iconClass: 'normal-layout',\r\n                    text: MESSAGES.mergeButtons.unmerge\r\n                }\r\n            ],\r\n            destroy: function () {\r\n                this.popup.element.off();\r\n                PopupTool.fn.destroy.call(this);\r\n            },\r\n            _commandPalette: function () {\r\n                var element = $('<div />').appendTo(this.popup.element);\r\n                this.buttons.forEach(function (options) {\r\n                    var button = '<a title=\\'' + options.text + '\\' data-value=\\'' + options.value + '\\' class=\\'k-button k-button-icontext\\'>' + '<span class=\\'k-icon k-font-icon k-i-' + options.iconClass + '\\'></span>' + options.text + '</a>';\r\n                    element.append(button);\r\n                });\r\n            },\r\n            _action: function (button) {\r\n                var value = button.attr('data-value');\r\n                this.toolbar.action({\r\n                    command: 'MergeCellCommand',\r\n                    options: { value: value }\r\n                });\r\n            }\r\n        });\r\n        var MergeButton = OverflowDialogButton.extend({\r\n            _click: function () {\r\n                this.toolbar.dialog({ name: 'merge' });\r\n            }\r\n        });\r\n        kendo.toolbar.registerComponent('merge', MergeTool, MergeButton);\r\n        var FreezeTool = PopupTool.extend({\r\n            init: function (options, toolbar) {\r\n                PopupTool.fn.init.call(this, options, toolbar);\r\n                this._commandPalette();\r\n                this.popup.element.on('click', '.k-button', function (e) {\r\n                    this._action($(e.currentTarget));\r\n                }.bind(this));\r\n                this.element.data({\r\n                    type: 'freeze',\r\n                    freeze: this,\r\n                    instance: this\r\n                });\r\n            },\r\n            buttons: [\r\n                {\r\n                    value: 'panes',\r\n                    iconClass: 'freeze-panes',\r\n                    text: MESSAGES.freezeButtons.freezePanes\r\n                },\r\n                {\r\n                    value: 'rows',\r\n                    iconClass: 'freeze-row',\r\n                    text: MESSAGES.freezeButtons.freezeRows\r\n                },\r\n                {\r\n                    value: 'columns',\r\n                    iconClass: 'freeze-col',\r\n                    text: MESSAGES.freezeButtons.freezeColumns\r\n                },\r\n                {\r\n                    value: 'unfreeze',\r\n                    iconClass: 'normal-layout',\r\n                    text: MESSAGES.freezeButtons.unfreeze\r\n                }\r\n            ],\r\n            destroy: function () {\r\n                this.popup.element.off();\r\n                PopupTool.fn.destroy.call(this);\r\n            },\r\n            _commandPalette: function () {\r\n                var element = $('<div />').appendTo(this.popup.element);\r\n                this.buttons.forEach(function (options) {\r\n                    var button = '<a title=\\'' + options.text + '\\' data-value=\\'' + options.value + '\\' class=\\'k-button k-button-icontext\\'>' + '<span class=\\'k-icon k-font-icon k-i-' + options.iconClass + '\\'></span>' + options.text + '</a>';\r\n                    element.append(button);\r\n                });\r\n            },\r\n            _action: function (button) {\r\n                var value = button.attr('data-value');\r\n                this.toolbar.action({\r\n                    command: 'FreezePanesCommand',\r\n                    options: { value: value }\r\n                });\r\n            }\r\n        });\r\n        var FreezeButton = OverflowDialogButton.extend({\r\n            _click: function () {\r\n                this.toolbar.dialog({ name: 'freeze' });\r\n            }\r\n        });\r\n        kendo.toolbar.registerComponent('freeze', FreezeTool, FreezeButton);\r\n        var Sort = DropDownTool.extend({\r\n            _revertTitle: function (e) {\r\n                e.sender.value('');\r\n                e.sender.wrapper.width('auto');\r\n            },\r\n            init: function (options, toolbar) {\r\n                DropDownTool.fn.init.call(this, options, toolbar);\r\n                var ddl = this.dropDownList;\r\n                ddl.bind('change', this._revertTitle.bind(this));\r\n                ddl.bind('dataBound', this._revertTitle.bind(this));\r\n                ddl.setOptions({\r\n                    valueTemplate: '<span class=\\'k-icon k-font-icon k-i-' + options.iconClass + '\\' style=\\'line-height: 1em; width: 1.35em;\\'></span>',\r\n                    template: '<span class=\\'k-icon k-font-icon k-i-#= iconClass #\\' style=\\'line-height: 1em; width: 1.35em;\\'></span>#=text#',\r\n                    dataTextField: 'text',\r\n                    dataValueField: 'value'\r\n                });\r\n                ddl.setDataSource([\r\n                    {\r\n                        value: 'asc',\r\n                        sheet: false,\r\n                        text: MESSAGES.sortButtons.sortRangeAsc,\r\n                        iconClass: 'sort-asc'\r\n                    },\r\n                    {\r\n                        value: 'desc',\r\n                        sheet: false,\r\n                        text: MESSAGES.sortButtons.sortRangeDesc,\r\n                        iconClass: 'sort-desc'\r\n                    }\r\n                ]);\r\n                ddl.select(0);\r\n                this.element.data({\r\n                    type: 'sort',\r\n                    sort: this\r\n                });\r\n            },\r\n            _change: function (e) {\r\n                var instance = e.sender;\r\n                var dataItem = instance.dataItem();\r\n                if (dataItem) {\r\n                    this.toolbar.action({\r\n                        command: 'SortCommand',\r\n                        options: {\r\n                            value: dataItem.value,\r\n                            sheet: dataItem.sheet\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n            value: $.noop\r\n        });\r\n        var SortButton = OverflowDialogButton.extend({\r\n            _click: function () {\r\n                this.toolbar.dialog({ name: 'sort' });\r\n            }\r\n        });\r\n        kendo.toolbar.registerComponent('sort', Sort, SortButton);\r\n        var Filter = kendo.toolbar.ToolBarButton.extend({\r\n            init: function (options, toolbar) {\r\n                options.showText = 'overflow';\r\n                kendo.toolbar.ToolBarButton.fn.init.call(this, options, toolbar);\r\n                this.element.on('click', this._click.bind(this));\r\n                this.element.data({\r\n                    type: 'filter',\r\n                    filter: this\r\n                });\r\n            },\r\n            _click: function () {\r\n                this.toolbar.action({ command: 'FilterCommand' });\r\n            },\r\n            update: function (value) {\r\n                this.toggle(value);\r\n            }\r\n        });\r\n        var FilterButton = OverflowDialogButton.extend({\r\n            init: function (options, toolbar) {\r\n                OverflowDialogButton.fn.init.call(this, options, toolbar);\r\n                this.element.data({\r\n                    type: 'filter',\r\n                    filter: this\r\n                });\r\n            },\r\n            _click: function () {\r\n                this.toolbar.action({ command: 'FilterCommand' });\r\n            },\r\n            update: function (value) {\r\n                this.toggle(value);\r\n            }\r\n        });\r\n        kendo.toolbar.registerComponent('filter', Filter, FilterButton);\r\n        var Open = kendo.toolbar.Item.extend({\r\n            init: function (options, toolbar) {\r\n                this.toolbar = toolbar;\r\n                this.element = $('<div class=\\'k-button k-upload-button k-button-icon\\'>' + '<span class=\\'k-icon k-font-icon k-i-folder-open\\' />' + '</div>').data('instance', this);\r\n                this._title = options.attributes.title;\r\n                this._reset();\r\n            },\r\n            _reset: function () {\r\n                this.element.remove('input');\r\n                $('<input type=\\'file\\' autocomplete=\\'off\\' accept=\\'.xlsx\\'/>').attr('title', this._title).one('change', this._change.bind(this)).appendTo(this.element);\r\n            },\r\n            _change: function (e) {\r\n                this.toolbar.action({\r\n                    command: 'OpenCommand',\r\n                    options: { file: e.target.files[0] }\r\n                });\r\n                this._reset();\r\n            }\r\n        });\r\n        kendo.toolbar.registerComponent('open', Open);\r\n        kendo.spreadsheet.TabStrip = kendo.ui.TabStrip.extend({\r\n            init: function (element, options) {\r\n                kendo.ui.TabStrip.fn.init.call(this, element, options);\r\n                element.addClass('k-spreadsheet-tabstrip');\r\n                this._quickAccessButtons();\r\n                this.quickAccessToolBar.on('click', '.k-button', function (e) {\r\n                    var action = $(e.currentTarget).attr('title').toLowerCase();\r\n                    this.trigger('action', { action: action });\r\n                }.bind(this));\r\n                this.toolbars = {};\r\n                var tabs = options.dataSource;\r\n                this.contentElements.each(function (idx, element) {\r\n                    this._toolbar($(element), tabs[idx].id, options.toolbarOptions[tabs[idx].id]);\r\n                }.bind(this));\r\n                this.one('activate', function () {\r\n                    this.toolbars[this.options.dataSource[0].id].resize();\r\n                });\r\n            },\r\n            events: kendo.ui.TabStrip.fn.events.concat([\r\n                'action',\r\n                'dialog'\r\n            ]),\r\n            destroy: function () {\r\n                this.quickAccessToolBar.off('click');\r\n                kendo.ui.TabStrip.fn.destroy.call(this);\r\n                for (var name in this.toolbars) {\r\n                    this.toolbars[name].destroy();\r\n                }\r\n            },\r\n            action: function (args) {\r\n                this.trigger('action', args);\r\n            },\r\n            dialog: function (args) {\r\n                this.trigger('dialog', args);\r\n            },\r\n            refreshTools: function (range) {\r\n                var toolbars = this.toolbars;\r\n                for (var name in toolbars) {\r\n                    if (toolbars.hasOwnProperty(name)) {\r\n                        toolbars[name].refresh(range);\r\n                    }\r\n                }\r\n            },\r\n            _quickAccessButtons: function () {\r\n                var buttons = [\r\n                    {\r\n                        title: MESSAGES.quickAccess.undo,\r\n                        iconClass: 'undo-large',\r\n                        action: 'undo'\r\n                    },\r\n                    {\r\n                        title: MESSAGES.quickAccess.redo,\r\n                        iconClass: 'redo-large',\r\n                        action: 'redo'\r\n                    }\r\n                ];\r\n                var buttonTemplate = kendo.template('<a href=\\'\\\\#\\' title=\\'#= title #\\' data-action=\\'#= action #\\' class=\\'k-button k-button-icon\\'><span class=\\'k-icon k-font-icon k-i-#=iconClass#\\'></span></a>');\r\n                this.quickAccessToolBar = $('<div />', {\r\n                    'class': 'k-spreadsheet-quick-access-toolbar',\r\n                    'html': kendo.render(buttonTemplate, buttons)\r\n                }).insertBefore(this.wrapper);\r\n                this.quickAccessToolBar.on('click', '.k-button', function (e) {\r\n                    e.preventDefault();\r\n                    var action = $(e.currentTarget).attr('title').toLowerCase();\r\n                    this.action({ action: action });\r\n                }.bind(this));\r\n                this.quickAccessAdjust();\r\n            },\r\n            quickAccessAdjust: function () {\r\n                this.tabGroup.css('padding-left', this.quickAccessToolBar.outerWidth());\r\n            },\r\n            _toolbar: function (container, name, tools) {\r\n                var element;\r\n                var options;\r\n                if (this.toolbars[name]) {\r\n                    this.toolbars[name].destroy();\r\n                    container.children('.k-toolbar').remove();\r\n                }\r\n                if (tools) {\r\n                    element = container.html('<div />').children('div');\r\n                    options = {\r\n                        tools: typeof tools === 'boolean' ? undefined : tools,\r\n                        toolbarName: name,\r\n                        action: this.action.bind(this),\r\n                        dialog: this.dialog.bind(this)\r\n                    };\r\n                    this.toolbars[name] = new kendo.spreadsheet.ToolBar(element, options);\r\n                }\r\n            }\r\n        });\r\n    }(window.kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/dialogs', [\r\n        'kendo.core',\r\n        'kendo.binder',\r\n        'kendo.validator'\r\n    ], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var $ = kendo.jQuery;\r\n        var ObservableObject = kendo.data.ObservableObject;\r\n        var MESSAGES = kendo.spreadsheet.messages.dialogs = {\r\n            apply: 'Apply',\r\n            save: 'Save',\r\n            cancel: 'Cancel',\r\n            remove: 'Remove',\r\n            okText: 'OK',\r\n            formatCellsDialog: {\r\n                title: 'Format',\r\n                categories: {\r\n                    number: 'Number',\r\n                    currency: 'Currency',\r\n                    date: 'Date'\r\n                }\r\n            },\r\n            fontFamilyDialog: { title: 'Font' },\r\n            fontSizeDialog: { title: 'Font size' },\r\n            bordersDialog: { title: 'Borders' },\r\n            alignmentDialog: {\r\n                title: 'Alignment',\r\n                buttons: {\r\n                    justtifyLeft: 'Align left',\r\n                    justifyCenter: 'Center',\r\n                    justifyRight: 'Align right',\r\n                    justifyFull: 'Justify',\r\n                    alignTop: 'Align top',\r\n                    alignMiddle: 'Align middle',\r\n                    alignBottom: 'Align bottom'\r\n                }\r\n            },\r\n            mergeDialog: {\r\n                title: 'Merge cells',\r\n                buttons: {\r\n                    mergeCells: 'Merge all',\r\n                    mergeHorizontally: 'Merge horizontally',\r\n                    mergeVertically: 'Merge vertically',\r\n                    unmerge: 'Unmerge'\r\n                }\r\n            },\r\n            freezeDialog: {\r\n                title: 'Freeze panes',\r\n                buttons: {\r\n                    freezePanes: 'Freeze panes',\r\n                    freezeRows: 'Freeze rows',\r\n                    freezeColumns: 'Freeze columns',\r\n                    unfreeze: 'Unfreeze panes'\r\n                }\r\n            },\r\n            validationDialog: {\r\n                title: 'Data Validation',\r\n                hintMessage: 'Please enter a valid {0} value {1}.',\r\n                hintTitle: 'Validation {0}',\r\n                criteria: {\r\n                    any: 'Any value',\r\n                    number: 'Number',\r\n                    text: 'Text',\r\n                    date: 'Date',\r\n                    custom: 'Custom Formula',\r\n                    list: 'List'\r\n                },\r\n                comparers: {\r\n                    greaterThan: 'greater than',\r\n                    lessThan: 'less than',\r\n                    between: 'between',\r\n                    notBetween: 'not between',\r\n                    equalTo: 'equal to',\r\n                    notEqualTo: 'not equal to',\r\n                    greaterThanOrEqualTo: 'greater than or equal to',\r\n                    lessThanOrEqualTo: 'less than or equal to'\r\n                },\r\n                comparerMessages: {\r\n                    greaterThan: 'greater than {0}',\r\n                    lessThan: 'less than {0}',\r\n                    between: 'between {0} and {1}',\r\n                    notBetween: 'not between {0} and {1}',\r\n                    equalTo: 'equal to {0}',\r\n                    notEqualTo: 'not equal to {0}',\r\n                    greaterThanOrEqualTo: 'greater than or equal to {0}',\r\n                    lessThanOrEqualTo: 'less than or equal to {0}',\r\n                    custom: 'that satisfies the formula: {0}'\r\n                },\r\n                labels: {\r\n                    criteria: 'Criteria',\r\n                    comparer: 'Comparer',\r\n                    min: 'Min',\r\n                    max: 'Max',\r\n                    value: 'Value',\r\n                    start: 'Start',\r\n                    end: 'End',\r\n                    onInvalidData: 'On invalid data',\r\n                    rejectInput: 'Reject input',\r\n                    showWarning: 'Show warning',\r\n                    showHint: 'Show hint',\r\n                    hintTitle: 'Hint title',\r\n                    hintMessage: 'Hint message',\r\n                    ignoreBlank: 'Ignore blank'\r\n                },\r\n                placeholders: {\r\n                    typeTitle: 'Type title',\r\n                    typeMessage: 'Type message'\r\n                }\r\n            },\r\n            exportAsDialog: {\r\n                title: 'Export...',\r\n                labels: {\r\n                    scale: 'Scale',\r\n                    fit: 'Fit to page',\r\n                    fileName: 'File name',\r\n                    saveAsType: 'Save as type',\r\n                    exportArea: 'Export',\r\n                    paperSize: 'Paper size',\r\n                    margins: 'Margins',\r\n                    orientation: 'Orientation',\r\n                    print: 'Print',\r\n                    guidelines: 'Guidelines',\r\n                    center: 'Center',\r\n                    horizontally: 'Horizontally',\r\n                    vertically: 'Vertically'\r\n                }\r\n            },\r\n            modifyMergedDialog: { errorMessage: 'Cannot change part of a merged cell.' },\r\n            overflowDialog: { errorMessage: 'Cannot paste, because the copy area and the paste area are not the same size and shape.' },\r\n            useKeyboardDialog: {\r\n                title: 'Copying and pasting',\r\n                errorMessage: 'These actions cannot be invoked through the menu. Please use the keyboard shortcuts instead:',\r\n                labels: {\r\n                    forCopy: 'for copy',\r\n                    forCut: 'for cut',\r\n                    forPaste: 'for paste'\r\n                }\r\n            },\r\n            unsupportedSelectionDialog: { errorMessage: 'That action cannot be performed on multiple selection.' },\r\n            linkDialog: {\r\n                title: 'Hyperlink',\r\n                labels: {\r\n                    text: 'Text',\r\n                    url: 'Address',\r\n                    removeLink: 'Remove link'\r\n                }\r\n            }\r\n        };\r\n        var registry = {};\r\n        kendo.spreadsheet.dialogs = {\r\n            register: function (name, dialogClass) {\r\n                registry[name] = dialogClass;\r\n            },\r\n            registered: function (name) {\r\n                return !!registry[name];\r\n            },\r\n            create: function (name, options) {\r\n                var dialogClass = registry[name];\r\n                if (dialogClass) {\r\n                    return new dialogClass(options);\r\n                }\r\n            }\r\n        };\r\n        var SpreadsheetDialog = kendo.spreadsheet.SpreadsheetDialog = kendo.Observable.extend({\r\n            init: function (options) {\r\n                kendo.Observable.fn.init.call(this, options);\r\n                this.options = $.extend(true, {}, this.options, options);\r\n                this.bind(this.events, options);\r\n            },\r\n            events: [\r\n                'close',\r\n                'activate'\r\n            ],\r\n            options: { autoFocus: true },\r\n            dialog: function () {\r\n                if (!this._dialog) {\r\n                    this._dialog = $('<div class=\\'k-spreadsheet-window k-action-window\\' />').addClass(this.options.className || '').append(kendo.template(this.options.template)({ messages: kendo.spreadsheet.messages.dialogs || MESSAGES })).appendTo(document.body).kendoWindow({\r\n                        autoFocus: this.options.autoFocus,\r\n                        scrollable: false,\r\n                        resizable: false,\r\n                        modal: true,\r\n                        visible: false,\r\n                        width: this.options.width || 320,\r\n                        title: this.options.title,\r\n                        open: function () {\r\n                            this.center();\r\n                        },\r\n                        close: this._onDialogClose.bind(this),\r\n                        activate: this._onDialogActivate.bind(this),\r\n                        deactivate: this._onDialogDeactivate.bind(this)\r\n                    }).data('kendoWindow');\r\n                }\r\n                return this._dialog;\r\n            },\r\n            _onDialogClose: function () {\r\n                this.trigger('close');\r\n            },\r\n            _onDialogActivate: function () {\r\n                this.trigger('activate');\r\n            },\r\n            _onDialogDeactivate: function () {\r\n                this.trigger('deactivate');\r\n                this.destroy();\r\n            },\r\n            destroy: function () {\r\n                if (this._dialog) {\r\n                    this._dialog.destroy();\r\n                    this._dialog = null;\r\n                }\r\n            },\r\n            open: function () {\r\n                this.dialog().open();\r\n            },\r\n            apply: function () {\r\n                this.close();\r\n            },\r\n            close: function () {\r\n                this.dialog().close();\r\n            }\r\n        });\r\n        function formattedValue(value, format) {\r\n            return kendo.spreadsheet.formatting.text(value, format);\r\n        }\r\n        var FormatCellsViewModel = kendo.spreadsheet.FormatCellsViewModel = ObservableObject.extend({\r\n            init: function (options) {\r\n                ObservableObject.fn.init.call(this, options);\r\n                this.useCategory(this.category);\r\n            },\r\n            useCategory: function (category) {\r\n                var type = category && category.type || 'number';\r\n                var formatCurrency = type == 'currency';\r\n                this.category = category;\r\n                this.set('showCurrencyFilter', formatCurrency && this.currencies.length > 1);\r\n                if (!formatCurrency) {\r\n                    this.set('formats', this.allFormats[type + 'Formats']);\r\n                } else {\r\n                    this.currency(this.currencies[0]);\r\n                }\r\n                this.useFirstFormat();\r\n            },\r\n            useFirstFormat: function () {\r\n                if (this.formats.length) {\r\n                    this.set('format', this.formats[0].value);\r\n                }\r\n            },\r\n            currency: function (currency) {\r\n                if (currency !== undefined) {\r\n                    this._currency = currency;\r\n                    var info = currency.value;\r\n                    var formats = [\r\n                        {\r\n                            currency: info,\r\n                            decimals: true\r\n                        },\r\n                        {\r\n                            currency: info,\r\n                            decimals: true,\r\n                            iso: true\r\n                        },\r\n                        {\r\n                            currency: info,\r\n                            decimals: false\r\n                        }\r\n                    ];\r\n                    formats = formats.map(function (format) {\r\n                        format = FormatCellsViewModel.convert.currency(format);\r\n                        return {\r\n                            value: format,\r\n                            name: formattedValue(1000, format)\r\n                        };\r\n                    });\r\n                    this.set('formats', formats);\r\n                    this.useFirstFormat();\r\n                }\r\n                return this._currency || this.currencies[0];\r\n            },\r\n            categoryFilter: function (category) {\r\n                if (category !== undefined) {\r\n                    this.useCategory(category);\r\n                }\r\n                return this.category;\r\n            },\r\n            preview: function () {\r\n                var format = this.get('format');\r\n                var value = this.value || 0;\r\n                if (format && format.length) {\r\n                    return formattedValue(value, format);\r\n                } else {\r\n                    return value;\r\n                }\r\n            }\r\n        });\r\n        FormatCellsViewModel.convert = {\r\n            currency: function (options) {\r\n                function repeat(token, n) {\r\n                    return new Array(n + 1).join(token);\r\n                }\r\n                var info = options.currency;\r\n                var format = info.pattern[1];\r\n                if (options.decimals) {\r\n                    format = format.replace(/n/g, 'n' + info['.'] + repeat('0', info.decimals));\r\n                }\r\n                if (options.iso) {\r\n                    format = '\"' + info.abbr + '\" ' + format.replace(/\\s*\\$\\s*/g, '');\r\n                } else {\r\n                    format = format.replace(/\\$/g, info.symbol);\r\n                }\r\n                format = format.replace(/n/g, '?');\r\n                return format;\r\n            },\r\n            date: function (format) {\r\n                if (/T|Z/.test(format)) {\r\n                    return '';\r\n                }\r\n                return format.toLowerCase().replace(/tt/g, 'AM/PM').replace(/'/g, '\"');\r\n            }\r\n        };\r\n        function uniqueBy(field, array) {\r\n            var result = [];\r\n            var values = [];\r\n            for (var i = 0; i < array.length; i++) {\r\n                if ($.inArray(array[i][field], values) == -1) {\r\n                    result.push(array[i]);\r\n                    values.push(array[i][field]);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        var FormatCellsDialog = SpreadsheetDialog.extend({\r\n            init: function (options) {\r\n                var messages = kendo.spreadsheet.messages.dialogs.formatCellsDialog || MESSAGES;\r\n                var defaultOptions = {\r\n                    title: messages.title,\r\n                    categories: [\r\n                        {\r\n                            type: 'number',\r\n                            name: messages.categories.number\r\n                        },\r\n                        {\r\n                            type: 'currency',\r\n                            name: messages.categories.currency\r\n                        },\r\n                        {\r\n                            type: 'date',\r\n                            name: messages.categories.date\r\n                        }\r\n                    ]\r\n                };\r\n                SpreadsheetDialog.fn.init.call(this, $.extend(defaultOptions, options));\r\n                this._generateFormats();\r\n            },\r\n            options: {\r\n                className: 'k-spreadsheet-format-cells',\r\n                template: '<div class=\\'k-root-tabs\\' data-role=\\'tabstrip\\' ' + 'data-text-field=\\'name\\' ' + 'data-bind=\\'source: categories, value: categoryFilter\\' ' + 'data-animation=\\'false\\' />' + '<div class=\\'k-spreadsheet-preview\\' data-bind=\\'text: preview\\' />' + '<script type=\\'text/x-kendo-template\\' id=\\'format-item-template\\'>' + '\\\\#: data.name \\\\#' + '</script>' + '<select data-role=\\'dropdownlist\\' class=\\'k-format-filter\\' ' + 'data-text-field=\\'description\\' ' + 'data-value-field=\\'value.name\\' ' + 'data-bind=\\'visible: showCurrencyFilter, value: currency, source: currencies\\' />' + '<ul data-role=\\'staticlist\\' tabindex=\\'0\\' ' + 'class=\\'k-list k-reset\\' ' + 'data-template=\\'format-item-template\\' ' + 'data-value-primitive=\\'true\\' ' + 'data-value-field=\\'value\\' ' + 'data-bind=\\'source: formats, value: format\\' />' + '<div class=\\'k-action-buttons\\'>' + '<button class=\\'k-button k-primary\\' data-bind=\\'click: apply\\'>#: messages.apply #</button>' + '<button class=\\'k-button\\' data-bind=\\'click: close\\'>#: messages.cancel #</button>' + '</div>'\r\n            },\r\n            _generateFormats: function () {\r\n                var options = this.options;\r\n                if (!options.currencies) {\r\n                    options.currencies = FormatCellsDialog.currenciesFrom(kendo.cultures);\r\n                }\r\n                if (!options.numberFormats) {\r\n                    options.numberFormats = [\r\n                        {\r\n                            value: '#.00%',\r\n                            name: '100.00%'\r\n                        },\r\n                        {\r\n                            value: '#%',\r\n                            name: '100%'\r\n                        },\r\n                        {\r\n                            value: '#.00',\r\n                            name: '1024.00'\r\n                        },\r\n                        {\r\n                            value: '#,###.00',\r\n                            name: '1,024.00'\r\n                        }\r\n                    ];\r\n                }\r\n                if (!options.dateFormats) {\r\n                    var calendarPatterns = kendo.cultures.current.calendars.standard.patterns;\r\n                    options.dateFormats = uniqueBy('value', $.map(calendarPatterns, function (format) {\r\n                        format = FormatCellsViewModel.convert.date(format);\r\n                        if (!format) {\r\n                            return;\r\n                        }\r\n                        return {\r\n                            value: format,\r\n                            name: formattedValue(34567.7678, format)\r\n                        };\r\n                    }));\r\n                }\r\n            },\r\n            open: function (range) {\r\n                var options = this.options;\r\n                var value = range.value();\r\n                var categories = options.categories.slice(0);\r\n                var element;\r\n                this.viewModel = new FormatCellsViewModel({\r\n                    currencies: options.currencies.slice(0),\r\n                    allFormats: {\r\n                        numberFormats: options.numberFormats.slice(0),\r\n                        dateFormats: options.dateFormats.slice(0)\r\n                    },\r\n                    categories: categories,\r\n                    format: range.format(),\r\n                    category: value instanceof Date ? categories[2] : categories[0],\r\n                    apply: this.apply.bind(this),\r\n                    close: this.close.bind(this),\r\n                    value: value\r\n                });\r\n                SpreadsheetDialog.fn.open.call(this);\r\n                element = this.dialog().element;\r\n                kendo.bind(element, this.viewModel);\r\n                var currencyFilter = element.find('select.k-format-filter').data('kendoDropDownList');\r\n                if (options.currencies.length > 10) {\r\n                    currencyFilter.setOptions({ filter: 'contains' });\r\n                }\r\n                element.find(kendo.roleSelector('staticlist')).parent().addClass('k-list-wrapper');\r\n            },\r\n            apply: function () {\r\n                var format = this.viewModel.format;\r\n                SpreadsheetDialog.fn.apply.call(this);\r\n                this.trigger('action', {\r\n                    command: 'PropertyChangeCommand',\r\n                    options: {\r\n                        property: 'format',\r\n                        value: format\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        FormatCellsDialog.currenciesFrom = function (cultures) {\r\n            return uniqueBy('description', $.map(cultures, function (culture, name) {\r\n                if (!/-/.test(name)) {\r\n                    return;\r\n                }\r\n                var currency = culture.numberFormat.currency;\r\n                var description = kendo.format('{0} ({1}, {2})', currency.name, currency.abbr, currency.symbol);\r\n                return {\r\n                    description: description,\r\n                    value: currency\r\n                };\r\n            }));\r\n        };\r\n        kendo.spreadsheet.dialogs.register('formatCells', FormatCellsDialog);\r\n        kendo.spreadsheet.dialogs.FormatCellsDialog = FormatCellsDialog;\r\n        var MessageDialog = SpreadsheetDialog.extend({\r\n            options: {\r\n                className: 'k-spreadsheet-message',\r\n                title: '',\r\n                messageId: '',\r\n                text: '',\r\n                template: '<div class=\\'k-spreadsheet-message-content\\' data-bind=\\'text: text\\' />' + '<div class=\\'k-action-buttons\\'>' + '<button class=\\'k-button k-primary\\' data-bind=\\'click: close\\'>' + '#= messages.okText #' + '</button>' + '</div>'\r\n            },\r\n            open: function () {\r\n                SpreadsheetDialog.fn.open.call(this);\r\n                var options = this.options;\r\n                var text = options.text;\r\n                if (options.messageId) {\r\n                    text = kendo.getter(options.messageId, true)(kendo.spreadsheet.messages.dialogs);\r\n                }\r\n                kendo.bind(this.dialog().element, {\r\n                    text: text,\r\n                    close: this.close.bind(this)\r\n                });\r\n            }\r\n        });\r\n        kendo.spreadsheet.dialogs.register('message', MessageDialog);\r\n        var FontFamilyDialog = SpreadsheetDialog.extend({\r\n            init: function (options) {\r\n                var messages = kendo.spreadsheet.messages.dialogs.fontFamilyDialog || MESSAGES;\r\n                SpreadsheetDialog.fn.init.call(this, $.extend({ title: messages.title }, options));\r\n                this._list();\r\n            },\r\n            options: { template: '<ul class=\\'k-list k-reset\\'></ul>' },\r\n            _list: function () {\r\n                var ul = this.dialog().element.find('ul');\r\n                var fonts = this.options.fonts;\r\n                var defaultFont = this.options.defaultFont;\r\n                this.list = new kendo.ui.StaticList(ul, {\r\n                    dataSource: new kendo.data.DataSource({ data: fonts }),\r\n                    template: '#: data #',\r\n                    value: defaultFont,\r\n                    change: this.apply.bind(this)\r\n                });\r\n                this.list.dataSource.fetch();\r\n            },\r\n            apply: function (e) {\r\n                SpreadsheetDialog.fn.apply.call(this);\r\n                this.trigger('action', {\r\n                    command: 'PropertyChangeCommand',\r\n                    options: {\r\n                        property: 'fontFamily',\r\n                        value: e.sender.value()[0]\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        kendo.spreadsheet.dialogs.register('fontFamily', FontFamilyDialog);\r\n        var FontSizeDialog = SpreadsheetDialog.extend({\r\n            init: function (options) {\r\n                var messages = kendo.spreadsheet.messages.dialogs.fontSizeDialog || MESSAGES;\r\n                SpreadsheetDialog.fn.init.call(this, $.extend({ title: messages.title }, options));\r\n                this._list();\r\n            },\r\n            options: { template: '<ul class=\\'k-list k-reset\\'></ul>' },\r\n            _list: function () {\r\n                var ul = this.dialog().element.find('ul');\r\n                var sizes = this.options.sizes;\r\n                var defaultSize = this.options.defaultSize;\r\n                this.list = new kendo.ui.StaticList(ul, {\r\n                    dataSource: new kendo.data.DataSource({ data: sizes }),\r\n                    template: '#: data #',\r\n                    value: defaultSize,\r\n                    change: this.apply.bind(this)\r\n                });\r\n                this.list.dataSource.fetch();\r\n            },\r\n            apply: function (e) {\r\n                SpreadsheetDialog.fn.apply.call(this);\r\n                this.trigger('action', {\r\n                    command: 'PropertyChangeCommand',\r\n                    options: {\r\n                        property: 'fontSize',\r\n                        value: kendo.parseInt(e.sender.value()[0])\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        kendo.spreadsheet.dialogs.register('fontSize', FontSizeDialog);\r\n        var BordersDialog = SpreadsheetDialog.extend({\r\n            init: function (options) {\r\n                var messages = kendo.spreadsheet.messages.dialogs.bordersDialog || MESSAGES;\r\n                SpreadsheetDialog.fn.init.call(this, $.extend({ title: messages.title }, options));\r\n                this.element = this.dialog().element;\r\n                this._borderPalette();\r\n                this.viewModel = kendo.observable({\r\n                    apply: this.apply.bind(this),\r\n                    close: this.close.bind(this)\r\n                });\r\n                kendo.bind(this.element.find('.k-action-buttons'), this.viewModel);\r\n            },\r\n            options: {\r\n                width: 177,\r\n                template: '<div></div>' + '<div class=\\'k-action-buttons\\'>' + '<button class=\\'k-button k-primary\\' data-bind=\\'click: apply\\'>#: messages.apply #</button>' + '<button class=\\'k-button\\' data-bind=\\'click: close\\'>#: messages.cancel #</button>' + '</div>'\r\n            },\r\n            apply: function () {\r\n                SpreadsheetDialog.fn.apply.call(this);\r\n                var state = this.value();\r\n                this.trigger('action', {\r\n                    command: 'BorderChangeCommand',\r\n                    options: {\r\n                        border: state.type,\r\n                        style: {\r\n                            size: 1,\r\n                            color: state.color\r\n                        }\r\n                    }\r\n                });\r\n            },\r\n            _borderPalette: function () {\r\n                var element = this.dialog().element.find('div:first');\r\n                this.borderPalette = new kendo.spreadsheet.BorderPalette(element, { change: this.value.bind(this) });\r\n            },\r\n            value: function (state) {\r\n                if (state === undefined) {\r\n                    return this._state;\r\n                } else {\r\n                    this._state = state;\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.dialogs.register('borders', BordersDialog);\r\n        var ColorChooser = SpreadsheetDialog.extend({\r\n            init: function (options) {\r\n                SpreadsheetDialog.fn.init.call(this, options);\r\n                this.element = this.dialog().element;\r\n                this.property = options.property;\r\n                this.options.title = options.title;\r\n                this.viewModel = kendo.observable({\r\n                    apply: this.apply.bind(this),\r\n                    close: this.close.bind(this)\r\n                });\r\n                kendo.bind(this.element.find('.k-action-buttons'), this.viewModel);\r\n            },\r\n            options: { template: '<div></div>' + '<div class=\\'k-action-buttons\\'>' + '<button class=\\'k-button k-primary\\' data-bind=\\'click: apply\\'>#: messages.apply #</button>' + '<button class=\\'k-button\\' data-bind=\\'click: close\\'>#: messages.cancel #</button>' + '</div>' },\r\n            apply: function () {\r\n                SpreadsheetDialog.fn.apply.call(this);\r\n                this.trigger('action', {\r\n                    command: 'PropertyChangeCommand',\r\n                    options: {\r\n                        property: this.property,\r\n                        value: this.value()\r\n                    }\r\n                });\r\n            },\r\n            value: function (e) {\r\n                if (e === undefined) {\r\n                    return this._value;\r\n                } else {\r\n                    this._value = e.value;\r\n                }\r\n            }\r\n        });\r\n        var ColorPickerDialog = ColorChooser.extend({\r\n            init: function (options) {\r\n                options.width = 177;\r\n                ColorChooser.fn.init.call(this, options);\r\n                this._colorPalette();\r\n            },\r\n            _colorPalette: function () {\r\n                var element = this.dialog().element.find('div:first');\r\n                this.colorPalette = element.kendoColorPalette({\r\n                    palette: [\r\n                        '#ffffff',\r\n                        '#000000',\r\n                        '#d6ecff',\r\n                        '#4e5b6f',\r\n                        '#7fd13b',\r\n                        '#ea157a',\r\n                        '#feb80a',\r\n                        '#00addc',\r\n                        '#738ac8',\r\n                        '#1ab39f',\r\n                        '#f2f2f2',\r\n                        '#7f7f7f',\r\n                        '#a7d6ff',\r\n                        '#d9dde4',\r\n                        '#e5f5d7',\r\n                        '#fad0e4',\r\n                        '#fef0cd',\r\n                        '#c5f2ff',\r\n                        '#e2e7f4',\r\n                        '#c9f7f1',\r\n                        '#d8d8d8',\r\n                        '#595959',\r\n                        '#60b5ff',\r\n                        '#b3bcca',\r\n                        '#cbecb0',\r\n                        '#f6a1c9',\r\n                        '#fee29c',\r\n                        '#8be6ff',\r\n                        '#c7d0e9',\r\n                        '#94efe3',\r\n                        '#bfbfbf',\r\n                        '#3f3f3f',\r\n                        '#007dea',\r\n                        '#8d9baf',\r\n                        '#b2e389',\r\n                        '#f272af',\r\n                        '#fed46b',\r\n                        '#51d9ff',\r\n                        '#aab8de',\r\n                        '#5fe7d5',\r\n                        '#a5a5a5',\r\n                        '#262626',\r\n                        '#003e75',\r\n                        '#3a4453',\r\n                        '#5ea226',\r\n                        '#af0f5b',\r\n                        '#c58c00',\r\n                        '#0081a5',\r\n                        '#425ea9',\r\n                        '#138677',\r\n                        '#7f7f7f',\r\n                        '#0c0c0c',\r\n                        '#00192e',\r\n                        '#272d37',\r\n                        '#3f6c19',\r\n                        '#750a3d',\r\n                        '#835d00',\r\n                        '#00566e',\r\n                        '#2c3f71',\r\n                        '#0c594f'\r\n                    ],\r\n                    change: this.value.bind(this)\r\n                }).data('kendoColorPalette');\r\n            }\r\n        });\r\n        kendo.spreadsheet.dialogs.register('colorPicker', ColorPickerDialog);\r\n        var CustomColorDialog = ColorChooser.extend({\r\n            init: function (options) {\r\n                options.width = 268;\r\n                ColorChooser.fn.init.call(this, options);\r\n                this.dialog().setOptions({ animation: false });\r\n                this.dialog().one('activate', this._colorPicker.bind(this));\r\n            },\r\n            _colorPicker: function () {\r\n                var element = this.dialog().element.find('div:first');\r\n                this.colorPicker = element.kendoFlatColorPicker({ change: this.value.bind(this) }).data('kendoFlatColorPicker');\r\n            }\r\n        });\r\n        kendo.spreadsheet.dialogs.register('customColor', CustomColorDialog);\r\n        var AlignmentDialog = SpreadsheetDialog.extend({\r\n            init: function (options) {\r\n                var messages = kendo.spreadsheet.messages.dialogs.alignmentDialog || MESSAGES;\r\n                var defaultOptions = {\r\n                    title: messages.title,\r\n                    buttons: [\r\n                        {\r\n                            property: 'textAlign',\r\n                            value: 'left',\r\n                            iconClass: 'justify-left',\r\n                            text: messages.buttons.justtifyLeft\r\n                        },\r\n                        {\r\n                            property: 'textAlign',\r\n                            value: 'center',\r\n                            iconClass: 'justify-center',\r\n                            text: messages.buttons.justifyCenter\r\n                        },\r\n                        {\r\n                            property: 'textAlign',\r\n                            value: 'right',\r\n                            iconClass: 'justify-right',\r\n                            text: messages.buttons.justifyRight\r\n                        },\r\n                        {\r\n                            property: 'textAlign',\r\n                            value: 'justify',\r\n                            iconClass: 'justify-full',\r\n                            text: messages.buttons.justifyFull\r\n                        },\r\n                        {\r\n                            property: 'verticalAlign',\r\n                            value: 'top',\r\n                            iconClass: 'align-top',\r\n                            text: messages.buttons.alignTop\r\n                        },\r\n                        {\r\n                            property: 'verticalAlign',\r\n                            value: 'center',\r\n                            iconClass: 'align-middle',\r\n                            text: messages.buttons.alignMiddle\r\n                        },\r\n                        {\r\n                            property: 'verticalAlign',\r\n                            value: 'bottom',\r\n                            iconClass: 'align-bottom',\r\n                            text: messages.buttons.alignBottom\r\n                        }\r\n                    ]\r\n                };\r\n                SpreadsheetDialog.fn.init.call(this, $.extend(defaultOptions, options));\r\n                this._list();\r\n            },\r\n            options: { template: '<ul class=\\'k-list k-reset\\'></ul>' },\r\n            _list: function () {\r\n                var ul = this.dialog().element.find('ul');\r\n                this.list = new kendo.ui.StaticList(ul, {\r\n                    dataSource: new kendo.data.DataSource({ data: this.options.buttons }),\r\n                    template: '<a title=\\'#=text#\\' data-property=\\'#=property#\\' data-value=\\'#=value#\\'>' + '<span class=\\'k-icon k-font-icon k-i-#=iconClass#\\'></span>' + '#=text#' + '</a>',\r\n                    change: this.apply.bind(this)\r\n                });\r\n                this.list.dataSource.fetch();\r\n            },\r\n            apply: function (e) {\r\n                var dataItem = e.sender.value()[0];\r\n                SpreadsheetDialog.fn.apply.call(this);\r\n                this.trigger('action', {\r\n                    command: 'PropertyChangeCommand',\r\n                    options: {\r\n                        property: dataItem.property,\r\n                        value: dataItem.value\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        kendo.spreadsheet.dialogs.register('alignment', AlignmentDialog);\r\n        var MergeDialog = SpreadsheetDialog.extend({\r\n            init: function (options) {\r\n                var messages = kendo.spreadsheet.messages.dialogs.mergeDialog || MESSAGES;\r\n                var defaultOptions = {\r\n                    title: messages.title,\r\n                    buttons: [\r\n                        {\r\n                            value: 'cells',\r\n                            iconClass: 'merge-cells',\r\n                            text: messages.buttons.mergeCells\r\n                        },\r\n                        {\r\n                            value: 'horizontally',\r\n                            iconClass: 'merge-horizontally',\r\n                            text: messages.buttons.mergeHorizontally\r\n                        },\r\n                        {\r\n                            value: 'vertically',\r\n                            iconClass: 'merge-vertically',\r\n                            text: messages.buttons.mergeVertically\r\n                        },\r\n                        {\r\n                            value: 'unmerge',\r\n                            iconClass: 'normal-layout',\r\n                            text: messages.buttons.unmerge\r\n                        }\r\n                    ]\r\n                };\r\n                SpreadsheetDialog.fn.init.call(this, $.extend(defaultOptions, options));\r\n                this._list();\r\n            },\r\n            options: { template: '<ul class=\\'k-list k-reset\\'></ul>' },\r\n            _list: function () {\r\n                var ul = this.dialog().element.find('ul');\r\n                this.list = new kendo.ui.StaticList(ul, {\r\n                    dataSource: new kendo.data.DataSource({ data: this.options.buttons }),\r\n                    template: '<a title=\\'#=text#\\' data-value=\\'#=value#\\'>' + '<span class=\\'k-icon k-font-icon k-i-#=iconClass#\\'></span>#=text#' + '</a>',\r\n                    change: this.apply.bind(this)\r\n                });\r\n                this.list.dataSource.fetch();\r\n            },\r\n            apply: function (e) {\r\n                var dataItem = e.sender.value()[0];\r\n                SpreadsheetDialog.fn.apply.call(this);\r\n                this.trigger('action', {\r\n                    command: 'MergeCellCommand',\r\n                    options: { value: dataItem.value }\r\n                });\r\n            }\r\n        });\r\n        kendo.spreadsheet.dialogs.register('merge', MergeDialog);\r\n        var FreezeDialog = SpreadsheetDialog.extend({\r\n            init: function (options) {\r\n                var messages = kendo.spreadsheet.messages.dialogs.freezeDialog || MESSAGES;\r\n                var defaultOptions = {\r\n                    title: messages.title,\r\n                    buttons: [\r\n                        {\r\n                            value: 'panes',\r\n                            iconClass: 'freeze-panes',\r\n                            text: messages.buttons.freezePanes\r\n                        },\r\n                        {\r\n                            value: 'rows',\r\n                            iconClass: 'freeze-row',\r\n                            text: messages.buttons.freezeRows\r\n                        },\r\n                        {\r\n                            value: 'columns',\r\n                            iconClass: 'freeze-col',\r\n                            text: messages.buttons.freezeColumns\r\n                        },\r\n                        {\r\n                            value: 'unfreeze',\r\n                            iconClass: 'normal-layout',\r\n                            text: messages.buttons.unfreeze\r\n                        }\r\n                    ]\r\n                };\r\n                SpreadsheetDialog.fn.init.call(this, $.extend(defaultOptions, options));\r\n                this._list();\r\n            },\r\n            options: { template: '<ul class=\\'k-list k-reset\\'></ul>' },\r\n            _list: function () {\r\n                var ul = this.dialog().element.find('ul');\r\n                this.list = new kendo.ui.StaticList(ul, {\r\n                    dataSource: new kendo.data.DataSource({ data: this.options.buttons }),\r\n                    template: '<a title=\\'#=text#\\' data-value=\\'#=value#\\'>' + '<span class=\\'k-icon k-font-icon k-i-#=iconClass#\\'></span>#=text#' + '</a>',\r\n                    change: this.apply.bind(this)\r\n                });\r\n                this.list.dataSource.fetch();\r\n            },\r\n            apply: function (e) {\r\n                var dataItem = e.sender.value()[0];\r\n                SpreadsheetDialog.fn.apply.call(this);\r\n                this.trigger('action', {\r\n                    command: 'FreezePanesCommand',\r\n                    options: { value: dataItem.value }\r\n                });\r\n            }\r\n        });\r\n        kendo.spreadsheet.dialogs.register('freeze', FreezeDialog);\r\n        var ValidationViewModel = kendo.spreadsheet.ValidationCellsViewModel = ObservableObject.extend({\r\n            init: function (options) {\r\n                ObservableObject.fn.init.call(this, options);\r\n                this.bind('change', function (e) {\r\n                    if (e.field === 'criterion') {\r\n                        this.reset();\r\n                        if (this.criterion === 'custom' || this.criterion === 'list') {\r\n                            this.setHintMessageTemplate();\r\n                        }\r\n                    }\r\n                    if (e.field === 'comparer') {\r\n                        this.setHintMessageTemplate();\r\n                    }\r\n                    if ((e.field == 'hintMessage' || e.field == 'hintTitle') && !this._mute) {\r\n                        this.shouldBuild = false;\r\n                    }\r\n                    if ((e.field == 'from' || e.field == 'to' || e.field == 'hintMessageTemplate' || e.field == 'type') && this.shouldBuild) {\r\n                        this.buildMessages();\r\n                    }\r\n                }.bind(this));\r\n                this.reset();\r\n            },\r\n            buildMessages: function () {\r\n                this._mute = true;\r\n                this.set('hintTitle', this.hintTitleTemplate ? kendo.format(this.hintTitleTemplate, this.type) : '');\r\n                this.set('hintMessage', this.hintMessageTemplate ? kendo.format(this.hintMessageTemplate, this.from, this.to) : '');\r\n                this._mute = false;\r\n            },\r\n            reset: function () {\r\n                this.setComparers();\r\n                this.set('comparer', this.comparers[0].type);\r\n                this.set('from', null);\r\n                this.set('to', null);\r\n                this.set('useCustomMessages', false);\r\n                this.shouldBuild = true;\r\n                this.hintTitleTemplate = this.defaultHintTitle;\r\n                this.buildMessages();\r\n            },\r\n            setComparers: function () {\r\n                var all = this.defaultComparers;\r\n                var comparers = [];\r\n                if (this.criterion === 'text') {\r\n                    var text_comparers = [\r\n                        'equalTo',\r\n                        'notEqualTo'\r\n                    ];\r\n                    for (var idx = 0; idx < all.length; idx++) {\r\n                        if (text_comparers[0] == all[idx].type) {\r\n                            comparers.push(all[idx]);\r\n                            text_comparers.shift();\r\n                        }\r\n                    }\r\n                } else {\r\n                    comparers = all.slice();\r\n                }\r\n                this.set('comparers', comparers);\r\n            },\r\n            setHintMessageTemplate: function () {\r\n                if (this.criterion !== 'custom' && this.criterion !== 'list') {\r\n                    this.set('hintMessageTemplate', kendo.format(this.defaultHintMessage, this.criterion, this.comparerMessages[this.comparer]));\r\n                } else {\r\n                    this.set('hintMessageTemplate', '');\r\n                    this.set('hintMessage', '');\r\n                }\r\n            },\r\n            isAny: function () {\r\n                return this.get('criterion') === 'any';\r\n            },\r\n            isNumber: function () {\r\n                return this.get('criterion') === 'number';\r\n            },\r\n            showToForNumber: function () {\r\n                return this.showTo() && this.isNumber();\r\n            },\r\n            showToForDate: function () {\r\n                return this.showTo() && this.isDate();\r\n            },\r\n            isText: function () {\r\n                return this.get('criterion') === 'text';\r\n            },\r\n            isDate: function () {\r\n                return this.get('criterion') === 'date';\r\n            },\r\n            isList: function () {\r\n                return this.get('criterion') === 'list';\r\n            },\r\n            isCustom: function () {\r\n                return this.get('criterion') === 'custom';\r\n            },\r\n            showRemove: function () {\r\n                return this.get('hasValidation');\r\n            },\r\n            showTo: function () {\r\n                return this.get('comparer') == 'between' || this.get('comparer') == 'notBetween';\r\n            },\r\n            update: function (validation) {\r\n                this.set('hasValidation', !!validation);\r\n                if (validation) {\r\n                    this.fromValidationObject(validation);\r\n                }\r\n            },\r\n            fromValidationObject: function (validation) {\r\n                this.set('criterion', validation.dataType);\r\n                this.set('comparer', validation.comparerType);\r\n                this.set('from', validation.from);\r\n                this.set('to', validation.to);\r\n                this.set('type', validation.type);\r\n                this.set('ignoreBlank', validation.allowNulls);\r\n                if (validation.messageTemplate || validation.titleTemplate) {\r\n                    this.hintMessageTemplate = validation.messageTemplate;\r\n                    this.hintMessage = validation.messageTemplate;\r\n                    this.hintTitleTemplate = validation.titleTemplate;\r\n                    this.hintTitle = validation.titleTemplate;\r\n                    this.useCustomMessages = true;\r\n                    this.buildMessages();\r\n                } else {\r\n                    this.useCustomMessages = false;\r\n                }\r\n            },\r\n            toValidationObject: function () {\r\n                if (this.criterion === 'any') {\r\n                    return null;\r\n                }\r\n                var options = {\r\n                    type: this.type,\r\n                    dataType: this.criterion,\r\n                    comparerType: this.comparer,\r\n                    from: this.from,\r\n                    to: this.to,\r\n                    allowNulls: this.ignoreBlank\r\n                };\r\n                if (this.useCustomMessages) {\r\n                    options.messageTemplate = this.shouldBuild ? this.hintMessageTemplate : this.hintMessage;\r\n                    options.titleTemplate = this.hintTitle;\r\n                }\r\n                return options;\r\n            }\r\n        });\r\n        var ValidationDialog = SpreadsheetDialog.extend({\r\n            init: function (options) {\r\n                var messages = kendo.spreadsheet.messages.dialogs.validationDialog || MESSAGES;\r\n                var defaultOptions = {\r\n                    title: messages.title,\r\n                    hintMessage: messages.hintMessage,\r\n                    hintTitle: messages.hintTitle,\r\n                    criteria: [\r\n                        {\r\n                            type: 'any',\r\n                            name: messages.criteria.any\r\n                        },\r\n                        {\r\n                            type: 'number',\r\n                            name: messages.criteria.number\r\n                        },\r\n                        {\r\n                            type: 'text',\r\n                            name: messages.criteria.text\r\n                        },\r\n                        {\r\n                            type: 'date',\r\n                            name: messages.criteria.date\r\n                        },\r\n                        {\r\n                            type: 'custom',\r\n                            name: messages.criteria.custom\r\n                        },\r\n                        {\r\n                            type: 'list',\r\n                            name: messages.criteria.list\r\n                        }\r\n                    ],\r\n                    comparers: [\r\n                        {\r\n                            type: 'greaterThan',\r\n                            name: messages.comparers.greaterThan\r\n                        },\r\n                        {\r\n                            type: 'lessThan',\r\n                            name: messages.comparers.lessThan\r\n                        },\r\n                        {\r\n                            type: 'between',\r\n                            name: messages.comparers.between\r\n                        },\r\n                        {\r\n                            type: 'notBetween',\r\n                            name: messages.comparers.notBetween\r\n                        },\r\n                        {\r\n                            type: 'equalTo',\r\n                            name: messages.comparers.equalTo\r\n                        },\r\n                        {\r\n                            type: 'notEqualTo',\r\n                            name: messages.comparers.notEqualTo\r\n                        },\r\n                        {\r\n                            type: 'greaterThanOrEqualTo',\r\n                            name: messages.comparers.greaterThanOrEqualTo\r\n                        },\r\n                        {\r\n                            type: 'lessThanOrEqualTo',\r\n                            name: messages.comparers.lessThanOrEqualTo\r\n                        }\r\n                    ],\r\n                    comparerMessages: messages.comparerMessages\r\n                };\r\n                SpreadsheetDialog.fn.init.call(this, $.extend(defaultOptions, options));\r\n            },\r\n            options: {\r\n                width: 420,\r\n                criterion: 'any',\r\n                type: 'reject',\r\n                ignoreBlank: true,\r\n                useCustomMessages: false,\r\n                errorTemplate: '<div class=\"k-widget k-tooltip k-tooltip-validation\" style=\"margin:0.5em\"><span class=\"k-icon k-warning\"> </span>' + '#= message #<div class=\"k-callout k-callout-n\"></div></div>',\r\n                template: '<div class=\"k-edit-form-container\">' + '<div class=\"k-edit-label\"><label>#: messages.validationDialog.labels.criteria #:</label></div>' + '<div class=\"k-edit-field\">' + '<select data-role=\"dropdownlist\" ' + 'data-text-field=\"name\" ' + 'data-value-field=\"type\" ' + 'data-bind=\"value: criterion, source: criteria\" />' + '</div>' + '<div data-bind=\"visible: isNumber\">' + '<div class=\"k-edit-label\"><label>#: messages.validationDialog.labels.comparer #:</label></div>' + '<div class=\"k-edit-field\">' + '<select data-role=\"dropdownlist\" ' + 'data-text-field=\"name\" ' + 'data-value-field=\"type\" ' + 'data-bind=\"value: comparer, source: comparers\" />' + '</div>' + '<div class=\"k-edit-label\"><label>#: messages.validationDialog.labels.min #:</label></div>' + '<div class=\"k-edit-field\">' + '<input name=\"#: messages.validationDialog.labels.min #\" placeholder=\"e.g. 10\" class=\"k-textbox\" data-bind=\"value: from, enabled: isNumber\" required=\"required\" />' + '</div>' + '<div data-bind=\"visible: showTo\">' + '<div class=\"k-edit-label\"><label>#: messages.validationDialog.labels.max #:</label></div>' + '<div class=\"k-edit-field\">' + '<input name=\"#: messages.validationDialog.labels.max #\" placeholder=\"e.g. 100\" class=\"k-textbox\" data-bind=\"value: to, enabled: showToForNumber\" required=\"required\" />' + '</div>' + '</div>' + '</div>' + '<div data-bind=\"visible: isText\">' + '<div class=\"k-edit-label\"><label>#: messages.validationDialog.labels.comparer #:</label></div>' + '<div class=\"k-edit-field\">' + '<select data-role=\"dropdownlist\" ' + 'data-text-field=\"name\" ' + 'data-value-field=\"type\" ' + 'data-bind=\"value: comparer, source: comparers\" />' + '</div>' + '<div class=\"k-edit-label\"><label>#: messages.validationDialog.labels.value #:</label></div>' + '<div class=\"k-edit-field\">' + '<input name=\"#: messages.validationDialog.labels.value #\" class=\"k-textbox\" data-bind=\"value: from, enabled: isText\" required=\"required\" />' + '</div>' + '</div>' + '<div data-bind=\"visible: isDate\">' + '<div class=\"k-edit-label\"><label>#: messages.validationDialog.labels.comparer #:</label></div>' + '<div class=\"k-edit-field\">' + '<select data-role=\"dropdownlist\" ' + 'data-text-field=\"name\" ' + 'data-value-field=\"type\" ' + 'data-bind=\"value: comparer, source: comparers\" />' + '</div>' + '<div class=\"k-edit-label\"><label>#: messages.validationDialog.labels.start #:</label></div>' + '<div class=\"k-edit-field\">' + '<input name=\"#: messages.validationDialog.labels.start #\" class=\"k-textbox\" data-bind=\"value: from, enabled: isDate\" required=\"required\" />' + '</div>' + '<div data-bind=\"visible: showTo\">' + '<div class=\"k-edit-label\"><label>#: messages.validationDialog.labels.end #:</label></div>' + '<div class=\"k-edit-field\">' + '<input name=\"#: messages.validationDialog.labels.end #\" class=\"k-textbox\" data-bind=\"value: to, enabled: showToForDate\" required=\"required\" />' + '</div>' + '</div>' + '</div>' + '<div data-bind=\"visible: isCustom\">' + '<div class=\"k-edit-label\"><label>#: messages.validationDialog.labels.value #:</label></div>' + '<div class=\"k-edit-field\">' + '<input name=\"#: messages.validationDialog.labels.value #\" class=\"k-textbox\" data-bind=\"value: from, enabled: isCustom\" required=\"required\" />' + '</div>' + '</div>' + '<div data-bind=\"visible: isList\">' + '<div class=\"k-edit-label\"><label>#: messages.validationDialog.labels.value #:</label></div>' + '<div class=\"k-edit-field\">' + '<input name=\"#: messages.validationDialog.labels.value #\" class=\"k-textbox\" data-bind=\"value: from, enabled: isList\" required=\"required\" />' + '</div>' + '</div>' + '<div data-bind=\"invisible: isAny\">' + '<div class=\"k-edit-label\"><label>#: messages.validationDialog.labels.ignoreBlank #:</label></div>' + '<div class=\"k-edit-field\">' + '<input type=\"checkbox\" name=\"ignoreBlank\" id=\"ignoreBlank\" class=\"k-checkbox\" data-bind=\"checked: ignoreBlank\"/>' + '<label class=\"k-checkbox-label\" for=\"ignoreBlank\"></label>' + '</div>' + '</div>' + '<div data-bind=\"invisible: isAny\">' + '<div class=\"k-action-buttons\"></div>' + '<div class=\"k-edit-label\"><label>#: messages.validationDialog.labels.onInvalidData #:</label></div>' + '<div class=\"k-edit-field\">' + '<input type=\"radio\" id=\"validationTypeReject\" name=\"validationType\" value=\"reject\" data-bind=\"checked: type\" class=\"k-radio\" />' + '<label for=\"validationTypeReject\" class=\"k-radio-label\">' + '#: messages.validationDialog.labels.rejectInput #' + '</label> ' + '<input type=\"radio\" id=\"validationTypeWarning\" name=\"validationType\" value=\"warning\" data-bind=\"checked: type\" class=\"k-radio\" />' + '<label for=\"validationTypeWarning\" class=\"k-radio-label\">' + '#: messages.validationDialog.labels.showWarning #' + '</label>' + '</div>' + '</div>' + '<div data-bind=\"invisible: isAny\">' + '<div class=\"k-edit-label\"><label>#: messages.validationDialog.labels.showHint #:</label></div>' + '<div class=\"k-edit-field\">' + '<input type=\"checkbox\" name=\"useCustomMessages\" id=\"useCustomMessages\" class=\"k-checkbox\" data-bind=\"checked: useCustomMessages\" />' + '<label class=\"k-checkbox-label\" for=\"useCustomMessages\"></label>' + '</div>' + '<div data-bind=\"visible: useCustomMessages\">' + '<div class=\"k-edit-label\"><label>#: messages.validationDialog.labels.hintTitle #:</label></div>' + '<div class=\"k-edit-field\">' + '<input class=\"k-textbox\" placeholder=\"#: messages.validationDialog.placeholders.typeTitle #\" data-bind=\"value: hintTitle\" />' + '</div>' + '<div class=\"k-edit-label\"><label>#: messages.validationDialog.labels.hintMessage #:</label></div>' + '<div class=\"k-edit-field\">' + '<input class=\"k-textbox\" placeholder=\"#: messages.validationDialog.placeholders.typeMessage #\" data-bind=\"value: hintMessage\" />' + '</div>' + '</div>' + '</div>' + '<div class=\"k-action-buttons\">' + '<button class=\"k-button\" data-bind=\"visible: showRemove, click: remove\">#: messages.remove #</button>' + '<button class=\"k-button k-primary\" data-bind=\"click: apply\">#: messages.apply #</button>' + '<button class=\"k-button\" data-bind=\"click: close\">#: messages.cancel #</button>' + '</div>' + '</div>'\r\n            },\r\n            open: function (range) {\r\n                var options = this.options;\r\n                var element;\r\n                this.viewModel = new ValidationViewModel({\r\n                    type: options.type,\r\n                    defaultHintMessage: options.hintMessage,\r\n                    defaultHintTitle: options.hintTitle,\r\n                    defaultComparers: options.comparers.slice(0),\r\n                    comparerMessages: options.comparerMessages,\r\n                    criteria: options.criteria.slice(0),\r\n                    criterion: options.criterion,\r\n                    ignoreBlank: options.ignoreBlank,\r\n                    apply: this.apply.bind(this),\r\n                    close: this.close.bind(this),\r\n                    remove: this.remove.bind(this)\r\n                });\r\n                this.viewModel.update(range.validation());\r\n                SpreadsheetDialog.fn.open.call(this);\r\n                element = this.dialog().element;\r\n                if (this.validatable) {\r\n                    this.validatable.destroy();\r\n                }\r\n                kendo.bind(element, this.viewModel);\r\n                this.validatable = new kendo.ui.Validator(element.find('.k-edit-form-container'), {\r\n                    validateOnBlur: false,\r\n                    errorTemplate: this.options.errorTemplate || undefined\r\n                });\r\n            },\r\n            apply: function () {\r\n                if (this.validatable.validate()) {\r\n                    SpreadsheetDialog.fn.apply.call(this);\r\n                    this.trigger('action', {\r\n                        command: 'EditValidationCommand',\r\n                        options: { value: this.viewModel.toValidationObject() }\r\n                    });\r\n                }\r\n            },\r\n            remove: function () {\r\n                this.viewModel.set('criterion', 'any');\r\n                this.apply();\r\n            }\r\n        });\r\n        kendo.spreadsheet.dialogs.register('validation', ValidationDialog);\r\n        kendo.spreadsheet.dialogs.ValidationDialog = ValidationDialog;\r\n        var ExportAsDialog = SpreadsheetDialog.extend({\r\n            init: function (options) {\r\n                var messages = kendo.spreadsheet.messages.dialogs.exportAsDialog || MESSAGES;\r\n                SpreadsheetDialog.fn.init.call(this, $.extend({ title: messages.title }, options));\r\n                this.viewModel = kendo.observable({\r\n                    title: this.options.title,\r\n                    name: this.options.name,\r\n                    extension: this.options.extension,\r\n                    fileFormats: this.options.fileFormats,\r\n                    excel: options.excelExport,\r\n                    pdf: {\r\n                        proxyURL: options.pdfExport.proxyURL,\r\n                        forceProxy: options.pdfExport.forceProxy,\r\n                        title: options.pdfExport.title,\r\n                        author: options.pdfExport.author,\r\n                        subject: options.pdfExport.subject,\r\n                        keywords: options.pdfExport.keywords,\r\n                        creator: options.pdfExport.creator,\r\n                        date: options.pdfExport.date,\r\n                        fitWidth: this.options.pdf.fitWidth,\r\n                        area: this.options.pdf.area,\r\n                        areas: this.options.pdf.areas,\r\n                        paperSize: this.options.pdf.paperSize,\r\n                        paperSizes: this.options.pdf.paperSizes,\r\n                        margin: this.options.pdf.margin,\r\n                        margins: this.options.pdf.margins,\r\n                        landscape: this.options.pdf.landscape,\r\n                        guidelines: this.options.pdf.guidelines,\r\n                        hCenter: this.options.pdf.hCenter,\r\n                        vCenter: this.options.pdf.vCenter\r\n                    },\r\n                    apply: this.apply.bind(this),\r\n                    close: this.close.bind(this)\r\n                });\r\n                this.viewModel.bind('change', function (e) {\r\n                    if (e.field === 'extension') {\r\n                        this.set('showPdfOptions', this.extension === '.pdf' ? true : false);\r\n                    }\r\n                });\r\n                kendo.bind(this.dialog().element, this.viewModel);\r\n            },\r\n            options: {\r\n                name: 'Workbook',\r\n                extension: '.xlsx',\r\n                fileFormats: [\r\n                    {\r\n                        description: 'Excel Workbook (.xlsx)',\r\n                        extension: '.xlsx'\r\n                    },\r\n                    {\r\n                        description: 'Portable Document Format(.pdf)',\r\n                        extension: '.pdf'\r\n                    }\r\n                ],\r\n                pdf: {\r\n                    fitWidth: true,\r\n                    area: 'workbook',\r\n                    areas: [\r\n                        {\r\n                            area: 'workbook',\r\n                            text: 'Entire Workbook'\r\n                        },\r\n                        {\r\n                            area: 'sheet',\r\n                            text: 'Active Sheet'\r\n                        },\r\n                        {\r\n                            area: 'selection',\r\n                            text: 'Selection'\r\n                        }\r\n                    ],\r\n                    paperSize: 'a4',\r\n                    paperSizes: [\r\n                        {\r\n                            value: 'a2',\r\n                            text: 'A2 (420 mm \\xD7 594 mm)     '\r\n                        },\r\n                        {\r\n                            value: 'a3',\r\n                            text: 'A3 (297 mm x 420 mm)     '\r\n                        },\r\n                        {\r\n                            value: 'a4',\r\n                            text: 'A4 (210 mm x 297 mm)     '\r\n                        },\r\n                        {\r\n                            value: 'a5',\r\n                            text: 'A5 (148 mm x 210 mm)     '\r\n                        },\r\n                        {\r\n                            value: 'b3',\r\n                            text: 'B3 (353 mm \\xD7 500 mm)     '\r\n                        },\r\n                        {\r\n                            value: 'b4',\r\n                            text: 'B4 (250 mm x 353 mm)     '\r\n                        },\r\n                        {\r\n                            value: 'b5',\r\n                            text: 'B5 (176 mm x 250 mm)     '\r\n                        },\r\n                        {\r\n                            value: 'folio',\r\n                            text: 'Folio (8.5\" x 13\")       '\r\n                        },\r\n                        {\r\n                            value: 'legal',\r\n                            text: 'Legal (8.5\" x 14\")       '\r\n                        },\r\n                        {\r\n                            value: 'letter',\r\n                            text: 'Letter (8.5\" x 11\")      '\r\n                        },\r\n                        {\r\n                            value: 'tabloid',\r\n                            text: 'Tabloid (11\" x 17\")      '\r\n                        },\r\n                        {\r\n                            value: 'executive',\r\n                            text: 'Executive (7.25\" x 10.5\")'\r\n                        }\r\n                    ],\r\n                    margin: {\r\n                        bottom: '0.75in',\r\n                        left: '0.7in',\r\n                        right: '0.7in',\r\n                        top: '0.75in'\r\n                    },\r\n                    margins: [\r\n                        {\r\n                            value: {\r\n                                bottom: '0.75in',\r\n                                left: '0.7in',\r\n                                right: '0.7in',\r\n                                top: '0.75in'\r\n                            },\r\n                            text: 'Normal'\r\n                        },\r\n                        {\r\n                            value: {\r\n                                bottom: '0.75in',\r\n                                left: '0.25in',\r\n                                right: '0.25in',\r\n                                top: '0.75in'\r\n                            },\r\n                            text: 'Narrow'\r\n                        },\r\n                        {\r\n                            value: {\r\n                                bottom: '1in',\r\n                                left: '1in',\r\n                                right: '1in',\r\n                                top: '1in'\r\n                            },\r\n                            text: 'Wide'\r\n                        }\r\n                    ],\r\n                    landscape: true,\r\n                    guidelines: true,\r\n                    hCenter: true,\r\n                    vCenter: true\r\n                },\r\n                width: 520,\r\n                template: '<div class=\\'k-edit-label\\'><label>#: messages.exportAsDialog.labels.fileName #:</label></div>' + '<div class=\\'k-edit-field\\'>' + '<input class=\\'k-textbox\\' data-bind=\\'value: name\\' />' + '</div>' + '<div >' + '<div class=\\'k-edit-label\\'><label>#: messages.exportAsDialog.labels.saveAsType #:</label></div>' + '<div class=\\'k-edit-field\\'>' + '<select data-role=\\'dropdownlist\\' class=\\'k-file-format\\' ' + 'data-text-field=\\'description\\' ' + 'data-value-field=\\'extension\\' ' + 'data-bind=\\'value: extension, source: fileFormats\\' />' + '</div>' + '</div>' + '<div class=\\'export-config\\' data-bind=\\'visible: showPdfOptions\\'>' + '<div class=\\'k-edit-label\\'><label>#: messages.exportAsDialog.labels.exportArea #:</label></div>' + '<div class=\\'k-edit-field\\'>' + '<select data-role=\\'dropdownlist\\' class=\\'k-file-format\\' ' + 'data-text-field=\\'text\\' ' + 'data-value-field=\\'area\\' ' + 'data-bind=\\'value: pdf.area, source: pdf.areas\\' />' + '</div>' + '<div class=\\'k-edit-label\\'><label>#: messages.exportAsDialog.labels.paperSize#:</label></div>' + '<div class=\\'k-edit-field\\'>' + '<select data-role=\\'dropdownlist\\' class=\\'k-file-format\\' ' + 'data-text-field=\\'text\\' ' + 'data-value-field=\\'value\\' ' + 'data-bind=\\'value: pdf.paperSize, source: pdf.paperSizes\\' />' + '</div>' + '<div class=\\'k-edit-label\\'><label>#: messages.exportAsDialog.labels.margins #:</label></div>' + '<div class=\\'k-edit-field\\'>' + '<select data-role=\\'dropdownlist\\' class=\\'k-file-format\\' ' + 'data-value-primitive=\\'true\\'' + 'data-text-field=\\'text\\' ' + 'data-value-field=\\'value\\' ' + 'data-bind=\\'value: pdf.margin, source: pdf.margins\\' />' + '</div>' + '<div class=\\'k-edit-label\\'><label>#: messages.exportAsDialog.labels.orientation #:</label></div>' + '<div class=\\'k-edit-field\\'>' + '<input type=\\'radio\\' id=\\'k-orientation-portrait\\' name=\\'orientation\\' data-type=\\'boolean\\' data-bind=\\'checked: pdf.landscape\\' value=\\'false\\' /><label class=\\'k-orientation-label k-orientation-portrait-label\\' for=\\'k-orientation-portrait\\'></label>' + '<input type=\\'radio\\' id=\\'k-orientation-landscape\\' name=\\'orientation\\' data-type=\\'boolean\\' data-bind=\\'checked: pdf.landscape\\' value=\\'true\\' /><label class=\\'k-orientation-label k-orientation-landscape-label\\' for=\\'k-orientation-landscape\\'></label>' + '</div>' + '<div class=\\'k-edit-label\\'><label>#: messages.exportAsDialog.labels.print #:</label></div>' + '<div class=\\'k-edit-field\\'>' + '<input class=\\'k-checkbox\\' id=\\'guidelines\\' type=\\'checkbox\\' data-bind=\\'checked: pdf.guidelines\\'/><label class=\\'k-checkbox-label\\' for=\\'guidelines\\'>#: messages.exportAsDialog.labels.guidelines#</label>' + '</div>' + '<div class=\\'k-edit-label\\'><label>#: messages.exportAsDialog.labels.scale #:</label></div>' + '<div class=\\'k-edit-field\\'>' + '<input class=\\'k-checkbox\\' id=\\'fitWidth\\' type=\\'checkbox\\' data-bind=\\'checked: pdf.fitWidth\\'/><label class=\\'k-checkbox-label\\' for=\\'fitWidth\\'>#: messages.exportAsDialog.labels.fit #</label>' + '</div>' + '<div class=\\'k-edit-label\\'><label>#: messages.exportAsDialog.labels.center #:</label></div>' + '<div class=\\'k-edit-field\\'>' + '<input class=\\'k-checkbox\\' id=\\'hCenter\\' type=\\'checkbox\\' data-bind=\\'checked: pdf.hCenter\\'/><label class=\\'k-checkbox-label\\' for=\\'hCenter\\'>#: messages.exportAsDialog.labels.horizontally #</label>' + '<input class=\\'k-checkbox\\' id=\\'vCenter\\' type=\\'checkbox\\' data-bind=\\'checked: pdf.vCenter\\'/><label class=\\'k-checkbox-label\\' for=\\'vCenter\\'>#: messages.exportAsDialog.labels.vertically #</label>' + '</div>' + '<div class=\\'k-page-orientation\\' data-bind=\\'css: {k-page-landscape: pdf.landscape}\\'>' + '<div class=\\'k-margins-horizontal\\'></div>' + '<div class=\\'k-margins-vertical\\'></div>' + '</div>' + '</div>' + '<div class=\\'k-action-buttons\\'>' + '<button class=\\'k-button k-primary\\' data-bind=\\'click: apply\\'>#: messages.save #</button>' + '<button class=\\'k-button\\' data-bind=\\'click: close\\'>#: messages.cancel #</button>' + '</div>'\r\n            },\r\n            apply: function () {\r\n                SpreadsheetDialog.fn.apply.call(this);\r\n                this.trigger('action', {\r\n                    command: 'SaveAsCommand',\r\n                    options: this.viewModel\r\n                });\r\n            }\r\n        });\r\n        kendo.spreadsheet.dialogs.register('exportAs', ExportAsDialog);\r\n        var ModifyMergedDialog = MessageDialog.extend({ options: { messageId: 'modifyMergedDialog.errorMessage' } });\r\n        kendo.spreadsheet.dialogs.register('modifyMerged', ModifyMergedDialog);\r\n        var OverflowDialog = MessageDialog.extend({ options: { messageId: 'overflowDialog.errorMessage' } });\r\n        kendo.spreadsheet.dialogs.register('overflow', OverflowDialog);\r\n        var UseKeyboardDialog = MessageDialog.extend({\r\n            init: function (options) {\r\n                var messages = kendo.spreadsheet.messages.dialogs.useKeyboardDialog || MESSAGES;\r\n                SpreadsheetDialog.fn.init.call(this, $.extend({ title: messages.title }, options));\r\n            },\r\n            options: { template: '#: messages.useKeyboardDialog.errorMessage #' + '<div>Ctrl+C #: messages.useKeyboardDialog.labels.forCopy #</div>' + '<div>Ctrl+X #: messages.useKeyboardDialog.labels.forCut #</div>' + '<div>Ctrl+V #: messages.useKeyboardDialog.labels.forPaste #</div>' + '<div class=\"k-action-buttons\">' + '<button class=\\'k-button k-primary\\' data-bind=\\'click: close\\'>' + '#= messages.okText #' + '</button>' + '</div>' }\r\n        });\r\n        kendo.spreadsheet.dialogs.register('useKeyboard', UseKeyboardDialog);\r\n        var UnsupportedSelectionDialog = MessageDialog.extend({ options: { messageId: 'unsupportedSelectionDialog.errorMessage' } });\r\n        kendo.spreadsheet.dialogs.register('unsupportedSelection', UnsupportedSelectionDialog);\r\n        var HyperlinkDialog = SpreadsheetDialog.extend({\r\n            options: {\r\n                template: '<div class=\\'k-edit-label\\'><label>#: messages.linkDialog.labels.url #:</label></div>' + '<div class=\\'k-edit-field\\'><input class=\\'k-textbox\\' data-bind=\\'value: url\\' /></div>' + '<div class=\\'k-action-buttons\\'>' + ('<button style=\\'float: left\\' class=\\'k-button\\' data-bind=\\'click: remove\\'>#= messages.linkDialog.labels.removeLink #</button>' + '<button class=\\'k-button k-primary\\' data-bind=\\'click: apply\\'>#= messages.okText #</button>' + '<button class=\\'k-button\\' data-bind=\\'click: cancel\\'>#= messages.cancel #</button>') + '</div>',\r\n                title: MESSAGES.linkDialog.title,\r\n                autoFocus: false\r\n            },\r\n            open: function (range) {\r\n                var self = this;\r\n                SpreadsheetDialog.fn.open.apply(self, arguments);\r\n                var element = self.dialog().element;\r\n                var model = kendo.observable({\r\n                    url: range.link(),\r\n                    apply: function () {\r\n                        if (!/\\S/.test(model.url)) {\r\n                            model.url = null;\r\n                        }\r\n                        self.trigger('action', {\r\n                            command: 'HyperlinkCommand',\r\n                            options: { link: model.url }\r\n                        });\r\n                        self.close();\r\n                    },\r\n                    remove: function () {\r\n                        model.url = null;\r\n                        model.apply();\r\n                    },\r\n                    cancel: self.close.bind(self)\r\n                });\r\n                kendo.bind(element, model);\r\n                element.find('input').focus().on('keydown', function (ev) {\r\n                    if (ev.keyCode == 13) {\r\n                        model.url = $(this).val();\r\n                        ev.stopPropagation();\r\n                        ev.preventDefault();\r\n                        model.apply();\r\n                    } else if (ev.keyCode == 27) {\r\n                        ev.stopPropagation();\r\n                        ev.preventDefault();\r\n                        model.cancel();\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        kendo.spreadsheet.dialogs.register('hyperlink', HyperlinkDialog);\r\n    }(window.kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/sheetbinder', [\r\n        'kendo.core',\r\n        'kendo.data',\r\n        'spreadsheet/sheet'\r\n    ], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var identity = function (o) {\r\n            return o;\r\n        };\r\n        var SheetDataSourceBinder = kendo.Class.extend({\r\n            init: function (options) {\r\n                this.options = $.extend({}, this.options, options);\r\n                this.columns = this._normalizeColumns(this.options.columns);\r\n                this._sheet();\r\n                this._dataSource();\r\n                this._header();\r\n                this._boundRowsCount = 0;\r\n                this.dataSource.fetch();\r\n            },\r\n            _sheet: function () {\r\n                this.sheet = this.options.sheet;\r\n                this._sheetChangeHandler = this._sheetChange.bind(this);\r\n                this.sheet.bind('change', this._sheetChangeHandler);\r\n            },\r\n            _sheetInsertRow: function (e) {\r\n                if (e.index !== undefined) {\r\n                    this.dataSource.insert(Math.max(e.index - 1, 0), {});\r\n                }\r\n            },\r\n            _sheetDeleteRow: function (e) {\r\n                if (e.index !== undefined) {\r\n                    var dataSource = this.dataSource;\r\n                    var model = dataSource.view()[e.index - 1];\r\n                    if (model) {\r\n                        dataSource.remove(model);\r\n                    }\r\n                }\r\n            },\r\n            _header: function () {\r\n                this.sheet.batch(function () {\r\n                    this.columns.forEach(function (column, index) {\r\n                        this.sheet.range(0, index).value(column.title);\r\n                    }.bind(this));\r\n                }.bind(this));\r\n            },\r\n            _sheetChange: function (e) {\r\n                if (e.insertRow) {\r\n                    this._sheetInsertRow(e.insertRow);\r\n                } else if (e.deleteRow) {\r\n                    this._sheetDeleteRow(e.deleteRow);\r\n                } else if (e.recalc && e.ref) {\r\n                    var dataSource = this.dataSource;\r\n                    var data = dataSource.view();\r\n                    var columns = this.columns;\r\n                    var fields;\r\n                    if (dataSource.reader.model) {\r\n                        fields = dataSource.reader.model.fields;\r\n                    }\r\n                    if (!columns.length && data.length) {\r\n                        columns = Object.keys(data[0].toJSON());\r\n                    }\r\n                    var getters = columns.map(function (column) {\r\n                        var field = column.field;\r\n                        if (field && fields && fields[field] && fields[field].type == 'date') {\r\n                            return kendo.spreadsheet.numberToDate;\r\n                        }\r\n                        return identity;\r\n                    });\r\n                    this._skipRebind = true;\r\n                    var values = this.sheet.range(e.ref).values();\r\n                    e.ref.forEach(function (ref) {\r\n                        ref = ref.toRangeRef();\r\n                        var record;\r\n                        var valueIndex = 0;\r\n                        for (var ri = ref.topLeft.row; ri <= ref.bottomRight.row; ri++) {\r\n                            record = data[ri - 1];\r\n                            if (!record) {\r\n                                record = dataSource.insert(ri - 1, {});\r\n                                data = dataSource.view();\r\n                            }\r\n                            var colValueIndex = 0;\r\n                            for (var ci = ref.topLeft.col; ci <= ref.bottomRight.col && ci < columns.length; ci++) {\r\n                                record.set(columns[ci].field, getters[ci](values[valueIndex][colValueIndex++]));\r\n                            }\r\n                            valueIndex++;\r\n                        }\r\n                    });\r\n                    this._boundRowsCount = dataSource.view().length;\r\n                    this._skipRebind = false;\r\n                }\r\n            },\r\n            _normalizeColumns: function (columns) {\r\n                return columns.map(function (column) {\r\n                    var field = column.field || column;\r\n                    return {\r\n                        field: field,\r\n                        title: column.title || field\r\n                    };\r\n                });\r\n            },\r\n            _dataSource: function () {\r\n                var options = this.options;\r\n                var dataSource = options.dataSource;\r\n                dataSource = Array.isArray(dataSource) ? { data: dataSource } : dataSource;\r\n                if (this.dataSource && this._changeHandler) {\r\n                    this.dataSource.unbind('change', this._changeHandler);\r\n                } else {\r\n                    this._changeHandler = this._change.bind(this);\r\n                }\r\n                this.dataSource = kendo.data.DataSource.create(dataSource).bind('change', this._changeHandler);\r\n            },\r\n            _change: function () {\r\n                if (this._skipRebind) {\r\n                    return;\r\n                }\r\n                var data = this.dataSource.view();\r\n                var columns = this.columns;\r\n                if (!columns.length && data.length) {\r\n                    this.columns = columns = this._normalizeColumns(Object.keys(data[0].toJSON()));\r\n                    this._header();\r\n                }\r\n                var getters = columns.map(function (column) {\r\n                    return kendo.getter(column.field);\r\n                });\r\n                this.sheet.batch(function () {\r\n                    var length = Math.max(data.length, this._boundRowsCount);\r\n                    for (var idx = 0; idx < length; idx++) {\r\n                        for (var getterIdx = 0; getterIdx < getters.length; getterIdx++) {\r\n                            var value = data[idx] ? getters[getterIdx](data[idx]) : null;\r\n                            this.sheet.range(idx + 1, getterIdx).value(value);\r\n                        }\r\n                    }\r\n                }.bind(this));\r\n                this._boundRowsCount = data.length;\r\n            },\r\n            destroy: function () {\r\n                this.dataSource.unbind('change', this._changeHandler);\r\n                this.sheet.unbind('change', this._sheetChangeHandler);\r\n            },\r\n            options: { columns: [] }\r\n        });\r\n        kendo.spreadsheet.SheetDataSourceBinder = SheetDataSourceBinder;\r\n    }(kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/filtermenu', [\r\n        'kendo.core',\r\n        'kendo.popup',\r\n        'kendo.treeview',\r\n        'kendo.numerictextbox',\r\n        'kendo.datepicker',\r\n        'kendo.datetimepicker'\r\n    ], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var $ = kendo.jQuery;\r\n        var Widget = kendo.ui.Widget;\r\n        var classNames = {\r\n            details: 'k-details',\r\n            button: 'k-button',\r\n            detailsSummary: 'k-details-summary',\r\n            detailsContent: 'k-details-content',\r\n            icon: 'k-icon k-font-icon',\r\n            iconCollapse: 'k-i-collapse-se',\r\n            iconExpand: 'k-i-expand-e',\r\n            iconSearch: 'k-i-search',\r\n            textbox: 'k-textbox',\r\n            wrapper: 'k-spreadsheet-filter-menu',\r\n            filterByCondition: 'k-spreadsheet-condition-filter',\r\n            filterByValue: 'k-spreadsheet-value-filter',\r\n            valuesTreeViewWrapper: 'k-spreadsheet-value-treeview-wrapper',\r\n            actionButtons: 'k-action-buttons'\r\n        };\r\n        var Details = Widget.extend({\r\n            init: function (element, options) {\r\n                Widget.fn.init.call(this, element, options);\r\n                this.element.addClass(FilterMenu.classNames.details);\r\n                this._summary = this.element.find('.' + FilterMenu.classNames.detailsSummary).on('click', this._toggle.bind(this));\r\n                var iconClass = options.expanded ? FilterMenu.classNames.iconCollapse : FilterMenu.classNames.iconExpand;\r\n                this._icon = $('<span />', { 'class': FilterMenu.classNames.icon + ' ' + iconClass }).prependTo(this._summary);\r\n                this._container = kendo.wrap(this._summary.next(), true);\r\n                if (!options.expanded) {\r\n                    this._container.hide();\r\n                }\r\n            },\r\n            options: { name: 'Details' },\r\n            events: ['toggle'],\r\n            visible: function () {\r\n                return this.options.expanded;\r\n            },\r\n            toggle: function (show) {\r\n                var animation = kendo.fx(this._container).expand('vertical');\r\n                animation.stop()[show ? 'reverse' : 'play']();\r\n                this._icon.toggleClass(FilterMenu.classNames.iconExpand, show).toggleClass(FilterMenu.classNames.iconCollapse, !show);\r\n                this.options.expanded = !show;\r\n            },\r\n            _toggle: function () {\r\n                var show = this.visible();\r\n                this.toggle(show);\r\n                this.trigger('toggle', { show: show });\r\n            }\r\n        });\r\n        var FILTERMENU_MESSAGES = kendo.spreadsheet.messages.filterMenu = {\r\n            sortAscending: 'Sort range A to Z',\r\n            sortDescending: 'Sort range Z to A',\r\n            filterByValue: 'Filter by value',\r\n            filterByCondition: 'Filter by condition',\r\n            apply: 'Apply',\r\n            search: 'Search',\r\n            addToCurrent: 'Add to current selection',\r\n            clear: 'Clear',\r\n            blanks: '(Blanks)',\r\n            operatorNone: 'None',\r\n            and: 'AND',\r\n            or: 'OR',\r\n            operators: {\r\n                string: {\r\n                    contains: 'Text contains',\r\n                    doesnotcontain: 'Text does not contain',\r\n                    startswith: 'Text starts with',\r\n                    endswith: 'Text ends with'\r\n                },\r\n                date: {\r\n                    eq: 'Date is',\r\n                    neq: 'Date is not',\r\n                    lt: 'Date is before',\r\n                    gt: 'Date is after'\r\n                },\r\n                number: {\r\n                    eq: 'Is equal to',\r\n                    neq: 'Is not equal to',\r\n                    gte: 'Is greater than or equal to',\r\n                    gt: 'Is greater than',\r\n                    lte: 'Is less than or equal to',\r\n                    lt: 'Is less than'\r\n                }\r\n            }\r\n        };\r\n        kendo.data.binders.spreadsheetFilterValue = kendo.data.Binder.extend({\r\n            init: function (element, bindings, options) {\r\n                kendo.data.Binder.fn.init.call(this, element, bindings, options);\r\n                this._change = $.proxy(this.change, this);\r\n                $(this.element).on('change', this._change);\r\n            },\r\n            refresh: function () {\r\n                var that = this, value = that.bindings.spreadsheetFilterValue.get();\r\n                $(that.element).val(value instanceof Date ? '' : value);\r\n            },\r\n            change: function () {\r\n                var value = this.element.value;\r\n                this.bindings.spreadsheetFilterValue.set(value);\r\n            }\r\n        });\r\n        kendo.data.binders.widget.spreadsheetFilterValue = kendo.data.Binder.extend({\r\n            init: function (widget, bindings, options) {\r\n                kendo.data.Binder.fn.init.call(this, widget.element[0], bindings, options);\r\n                this.widget = widget;\r\n                this._change = $.proxy(this.change, this);\r\n                this.widget.first('change', this._change);\r\n            },\r\n            refresh: function () {\r\n                var binding = this.bindings.spreadsheetFilterValue, value = binding.get(), type = $(this.widget.element).data('filterType');\r\n                if (type === 'date' && value instanceof Date || type === 'number' && !isNaN(value)) {\r\n                    this.widget.value(value);\r\n                } else {\r\n                    this.widget.value(null);\r\n                }\r\n            },\r\n            change: function () {\r\n                var value = this.widget.value(), binding = this.bindings.spreadsheetFilterValue;\r\n                binding.set(value);\r\n            }\r\n        });\r\n        var templates = {\r\n            filterByValue: '<div class=\\'' + classNames.detailsSummary + '\\'>#= messages.filterByValue #</div>' + '<div class=\\'' + classNames.detailsContent + '\\'>' + '<div class=\\'k-textbox k-space-right\\'>' + '<input placeholder=\\'#= messages.search #\\' data-#=ns#bind=\\'events: { input: filterValues }\\' />' + '<span class=\\'k-icon k-font-icon k-i-search\\' />' + '</div>' + '<div data-#=ns#bind=\\'visible: hasActiveSearch\\'><input class=\\'k-checkbox\\' type=\\'checkbox\\' data-#=ns#bind=\\'checked: appendToSearch\\' id=\\'_#=guid#\\' /><label class=\\'k-checkbox-label\\' for=\\'_#=guid#\\'>#= messages.addToCurrent #</label></div>' + '<div class=\\'' + classNames.valuesTreeViewWrapper + '\\'>' + '<div data-#=ns#role=\\'treeview\\' ' + 'data-#=ns#checkboxes=\\'{ checkChildren: true }\\' ' + 'data-#=ns#bind=\\'source: valuesDataSource, events: { check: valuesChange, select: valueSelect }\\' ' + '/>' + '</div>' + '</div>',\r\n            filterByCondition: '<div class=\\'' + classNames.detailsSummary + '\\'>#= messages.filterByCondition #</div>' + '<div class=\\'' + classNames.detailsContent + '\\'>' + '<div>' + '<select ' + 'data-#=ns#role=\"dropdownlist\"' + 'data-#=ns#bind=\"value: operator, source: operators, events: { change: operatorChange } \"' + 'data-value-primitive=\"false\"' + 'data-option-label=\"#=messages.operatorNone#\"' + 'data-height=\"auto\"' + 'data-text-field=\"text\"' + 'data-value-field=\"unique\">' + '</select>' + '</div>' + '<div data-#=ns#bind=\"visible: isString\">' + '<input data-filter-type=\"string\" data-#=ns#bind=\"spreadsheetFilterValue: customFilter.criteria[0].value\" class=\"k-textbox\" />' + '</div>' + '<div data-#=ns#bind=\"visible: isNumber\">' + '<input data-filter-type=\"number\" data-#=ns#role=\"numerictextbox\" data-#=ns#bind=\"spreadsheetFilterValue: customFilter.criteria[0].value\" />' + '</div>' + '<div data-#=ns#bind=\"visible: isDate\">' + '<input data-filter-type=\"date\" data-#=ns#role=\"datepicker\" data-#=ns#bind=\"spreadsheetFilterValue: customFilter.criteria[0].value\" />' + '</div>' + '</div>',\r\n            menuItem: '<li data-command=\\'#=command#\\' data-dir=\\'#=dir#\\'>' + '<span class=\\'k-icon k-font-icon k-i-#=iconClass#\\'></span>#=text#' + '</li>',\r\n            actionButtons: '<button data-#=ns#bind=\\'click: apply\\' class=\\'k-button k-primary\\'>#=messages.apply#</button>' + '<button data-#=ns#bind=\\'click: clear\\' class=\\'k-button\\'>#=messages.clear#</button>'\r\n        };\r\n        function distinctValues(values) {\r\n            var hash = {};\r\n            var result = [];\r\n            for (var i = 0; i < values.length; i++) {\r\n                if (!hash[values[i].value]) {\r\n                    hash[values[i].value] = values[i];\r\n                    result.push(values[i]);\r\n                } else if (!hash[values[i].value].checked && values[i].checked) {\r\n                    hash[values[i].value].checked = true;\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        function filter(dataSource, query) {\r\n            var hasVisibleChildren = false;\r\n            var data = dataSource instanceof kendo.data.HierarchicalDataSource && dataSource.data();\r\n            for (var i = 0; i < data.length; i++) {\r\n                var item = data[i];\r\n                var text = item.text.toString().toLowerCase();\r\n                var itemVisible = query === true || query === '' || text.indexOf(query) >= 0;\r\n                var anyVisibleChildren = filter(item.children, itemVisible || query);\r\n                hasVisibleChildren = hasVisibleChildren || anyVisibleChildren || itemVisible;\r\n                item.hidden = !itemVisible && !anyVisibleChildren;\r\n                item.checked = !item.hidden;\r\n            }\r\n            if (data) {\r\n                dataSource.filter({\r\n                    field: 'hidden',\r\n                    operator: 'neq',\r\n                    value: true\r\n                });\r\n            }\r\n            return hasVisibleChildren;\r\n        }\r\n        function uncheckAll(dataSource) {\r\n            var data = dataSource instanceof kendo.data.HierarchicalDataSource && dataSource.data();\r\n            for (var i = 0; i < data.length; i++) {\r\n                var item = data[i];\r\n                item.checked = false;\r\n                if (item.hasChildren) {\r\n                    uncheckAll(item.children);\r\n                }\r\n            }\r\n        }\r\n        var FilterMenuViewModel = kendo.spreadsheet.FilterMenuViewModel = kendo.data.ObservableObject.extend({\r\n            valuesChange: function (e) {\r\n                var dataSource = e ? e.sender.dataSource : this.valuesDataSource;\r\n                var checked = function (item) {\r\n                    return item.checked;\r\n                };\r\n                var value = function (item) {\r\n                    return item.dataType === 'date' ? kendo.spreadsheet.dateToNumber(item.value) : item.value;\r\n                };\r\n                var unique = function (value, index, array) {\r\n                    return array.lastIndexOf(value) === index;\r\n                };\r\n                var data = dataSource.data();\r\n                var values = data[0].children.data().toJSON();\r\n                var blanks = values.filter(function (item) {\r\n                    return item.dataType === 'blank';\r\n                });\r\n                blanks = blanks.length ? blanks[0].checked : false;\r\n                values = values.filter(checked).map(value);\r\n                if (this.appendToSearch && this.valueFilter && this.valueFilter.values.length) {\r\n                    values = values.concat(this.valueFilter.values.toJSON()).sort().filter(unique);\r\n                }\r\n                this.set('valueFilter', {\r\n                    values: values,\r\n                    blanks: blanks\r\n                });\r\n            },\r\n            valueSelect: function (e) {\r\n                e.preventDefault();\r\n                var node = e.sender.dataItem(e.node);\r\n                node.set('checked', !node.checked);\r\n            },\r\n            hasActiveSearch: false,\r\n            appendToSearch: false,\r\n            filterValues: function (e) {\r\n                var query = typeof e == 'string' ? e : $(e.target).val().toLowerCase();\r\n                var dataSource = this.valuesDataSource;\r\n                this.set('hasActiveSearch', !!query);\r\n                uncheckAll(dataSource);\r\n                filter(dataSource, query);\r\n            },\r\n            reset: function () {\r\n                this.set('customFilter', {\r\n                    logic: 'and',\r\n                    criteria: [{\r\n                            operator: null,\r\n                            value: null\r\n                        }]\r\n                });\r\n                this.set('valueFilter', { values: [] });\r\n            },\r\n            operatorChange: function (e) {\r\n                var dataItem = e.sender.dataItem();\r\n                this.set('operatorType', dataItem.type);\r\n                this.set('customFilter.criteria[0].operator', dataItem.value);\r\n            },\r\n            isNone: function () {\r\n                return this.get('operatorType') === undefined;\r\n            },\r\n            isString: function () {\r\n                return this.get('operatorType') === 'string';\r\n            },\r\n            isNumber: function () {\r\n                return this.get('operatorType') === 'number';\r\n            },\r\n            isDate: function () {\r\n                return this.get('operatorType') === 'date';\r\n            }\r\n        });\r\n        function flattenOperators(operators) {\r\n            var messages = FILTERMENU_MESSAGES.operators;\r\n            var result = [];\r\n            for (var type in operators) {\r\n                if (!operators.hasOwnProperty(type)) {\r\n                    continue;\r\n                }\r\n                for (var operator in operators[type]) {\r\n                    if (!operators[type].hasOwnProperty(operator)) {\r\n                        continue;\r\n                    }\r\n                    result.push({\r\n                        text: messages[type][operator],\r\n                        value: operator,\r\n                        unique: type + '_' + operator,\r\n                        type: type\r\n                    });\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        var FilterMenuController = kendo.spreadsheet.FilterMenuController = {\r\n            valuesTree: function (range, column) {\r\n                return [{\r\n                        text: 'All',\r\n                        expanded: true,\r\n                        checked: true,\r\n                        items: this.values(range.resize({ top: 1 }), column)\r\n                    }];\r\n            },\r\n            values: function (range, column) {\r\n                var values = [];\r\n                var messages = FILTERMENU_MESSAGES;\r\n                var columnRange = range.column(column);\r\n                var sheet = range.sheet();\r\n                columnRange.forEachCell(function (row, col, cell) {\r\n                    if (sheet.isHiddenRow(row)) {\r\n                        return;\r\n                    }\r\n                    var value = cell.value;\r\n                    var dataType = cell.dataType;\r\n                    var text = cell.text;\r\n                    if (value === undefined) {\r\n                        dataType = 'blank';\r\n                    } else if (cell.format) {\r\n                        dataType = kendo.spreadsheet.formatting.type(value, cell.format);\r\n                    } else {\r\n                        dataType = typeof value;\r\n                    }\r\n                    if (value !== null && cell.format) {\r\n                        text = kendo.spreadsheet.formatting.text(value, cell.format);\r\n                    } else {\r\n                        text = dataType == 'blank' ? messages.blanks : value;\r\n                    }\r\n                    if (dataType === 'percent') {\r\n                        dataType = 'number';\r\n                    }\r\n                    if (dataType === 'date') {\r\n                        value = kendo.spreadsheet.numberToDate(value);\r\n                    }\r\n                    values.push({\r\n                        dataType: dataType,\r\n                        value: value,\r\n                        text: text,\r\n                        checked: true\r\n                    });\r\n                });\r\n                values = distinctValues(values);\r\n                values.sort(function (a, b) {\r\n                    if (a.dataType === b.dataType) {\r\n                        return 0;\r\n                    }\r\n                    if (a.dataType === 'blank' || b.dataType === 'blank') {\r\n                        return a.dataType === 'blank' ? -1 : 1;\r\n                    }\r\n                    if (a.dataType === 'number' || b.dataType === 'number') {\r\n                        return a.dataType === 'number' ? -1 : 1;\r\n                    }\r\n                    if (a.dataType === 'date' || b.dataType === 'date') {\r\n                        return a.dataType === 'date' ? -1 : 1;\r\n                    }\r\n                    return 0;\r\n                });\r\n                return values;\r\n            },\r\n            filterType: function (range, column) {\r\n                var sheet = range.sheet();\r\n                var filter = this.filterForColumn(column, sheet);\r\n                var type;\r\n                filter = filter && filter.filter.toJSON();\r\n                if (filter && filter.filter == 'custom') {\r\n                    var value = filter.criteria[0].value;\r\n                    if (value instanceof Date) {\r\n                        type = 'date';\r\n                    } else if (typeof value == 'string') {\r\n                        type = 'string';\r\n                    } else if (typeof value == 'number') {\r\n                        type = 'number';\r\n                    }\r\n                }\r\n                if (!type) {\r\n                    var topValue = this.values(range.row(1), column)[0];\r\n                    type = topValue && topValue.dataType;\r\n                    if (type == 'blank') {\r\n                        type = null;\r\n                    }\r\n                }\r\n                return type;\r\n            },\r\n            filterForColumn: function (column, sheet) {\r\n                var allFilters = sheet.filter();\r\n                var filters;\r\n                if (allFilters) {\r\n                    filters = allFilters.columns.filter(function (item) {\r\n                        return item.index === column;\r\n                    })[0];\r\n                }\r\n                return filters;\r\n            },\r\n            filter: function (column, sheet) {\r\n                var columnFilters = this.filterForColumn(column, sheet);\r\n                if (!columnFilters) {\r\n                    return;\r\n                }\r\n                var options = columnFilters.filter.toJSON();\r\n                var type = options.filter;\r\n                delete options.filter;\r\n                var result = {\r\n                    type: type,\r\n                    options: options\r\n                };\r\n                var criteria = options.criteria;\r\n                if (criteria && criteria.length) {\r\n                    result.operator = criteria[0].operator;\r\n                }\r\n                return result;\r\n            }\r\n        };\r\n        var FilterMenu = Widget.extend({\r\n            init: function (element, options) {\r\n                Widget.call(this, element, options);\r\n                this.element.addClass(FilterMenu.classNames.wrapper);\r\n                this.viewModel = new FilterMenuViewModel({\r\n                    active: 'value',\r\n                    operator: null,\r\n                    operators: flattenOperators(this.options.operators),\r\n                    clear: this.clear.bind(this),\r\n                    apply: this.apply.bind(this)\r\n                });\r\n                this._filterInit();\r\n                this._popup();\r\n                this._sort();\r\n                this._filterByCondition();\r\n                this._filterByValue();\r\n                this._actionButtons();\r\n            },\r\n            options: {\r\n                name: 'FilterMenu',\r\n                column: 0,\r\n                range: null,\r\n                operators: {\r\n                    string: {\r\n                        contains: 'Text contains',\r\n                        doesnotcontain: 'Text does not contain',\r\n                        startswith: 'Text starts with',\r\n                        endswith: 'Text ends with'\r\n                    },\r\n                    date: {\r\n                        eq: 'Date is',\r\n                        neq: 'Date is not',\r\n                        lt: 'Date is before',\r\n                        gt: 'Date is after'\r\n                    },\r\n                    number: {\r\n                        eq: 'Is equal to',\r\n                        neq: 'Is not equal to',\r\n                        gte: 'Is greater than or equal to',\r\n                        gt: 'Is greater than',\r\n                        lte: 'Is less than or equal to',\r\n                        lt: 'Is less than'\r\n                    }\r\n                }\r\n            },\r\n            events: ['action'],\r\n            destroy: function () {\r\n                Widget.fn.destroy.call(this);\r\n                this.menu.destroy();\r\n                this.valuesTreeView.destroy();\r\n                this.popup.destroy();\r\n            },\r\n            openFor: function (anchor) {\r\n                this.popup.setOptions({ anchor: anchor });\r\n                this.popup.open();\r\n            },\r\n            close: function () {\r\n                this.popup.close();\r\n            },\r\n            clear: function () {\r\n                this.action({\r\n                    command: 'ClearFilterCommand',\r\n                    options: { column: this.options.column }\r\n                });\r\n                this.viewModel.reset();\r\n                this.close();\r\n            },\r\n            apply: function () {\r\n                this._active();\r\n                var options = {\r\n                    operatingRange: this.options.range,\r\n                    column: this.options.column\r\n                };\r\n                var valueFilter;\r\n                var customFilter;\r\n                if (this.viewModel.active === 'value') {\r\n                    this.viewModel.valuesChange({ sender: this.valuesTreeView });\r\n                    valueFilter = this.viewModel.valueFilter.toJSON();\r\n                    if (valueFilter.blanks || valueFilter.values && valueFilter.values.length) {\r\n                        options.valueFilter = valueFilter;\r\n                    }\r\n                } else if (this.viewModel.active === 'custom') {\r\n                    customFilter = this.viewModel.customFilter.toJSON();\r\n                    if (customFilter.criteria.length && customFilter.criteria[0].value !== null) {\r\n                        options.customFilter = customFilter;\r\n                    }\r\n                }\r\n                if (options.valueFilter || options.customFilter) {\r\n                    this.action({\r\n                        command: 'ApplyFilterCommand',\r\n                        options: options\r\n                    });\r\n                }\r\n            },\r\n            action: function (options) {\r\n                this.trigger('action', $.extend({}, options));\r\n            },\r\n            _filterInit: function () {\r\n                var column = this.options.column;\r\n                var range = this.options.range;\r\n                var sheet = range.sheet();\r\n                var activeFilter = FilterMenuController.filter(column, sheet);\r\n                if (activeFilter) {\r\n                    var filterType = FilterMenuController.filterType(range, column);\r\n                    this.viewModel.set('active', activeFilter.type);\r\n                    this.viewModel.set(activeFilter.type + 'Filter', activeFilter.options);\r\n                    if (activeFilter.type == 'custom') {\r\n                        this.viewModel.set('operator', filterType + '_' + activeFilter.operator);\r\n                        this.viewModel.set('operatorType', filterType);\r\n                    }\r\n                } else {\r\n                    this.viewModel.reset();\r\n                }\r\n            },\r\n            _popup: function () {\r\n                this.popup = this.element.kendoPopup({ copyAnchorStyles: false }).data('kendoPopup');\r\n            },\r\n            _sort: function () {\r\n                var template = kendo.template(FilterMenu.templates.menuItem);\r\n                var messages = FILTERMENU_MESSAGES;\r\n                var items = [\r\n                    {\r\n                        command: 'sort',\r\n                        dir: 'asc',\r\n                        text: messages.sortAscending,\r\n                        iconClass: 'sort-asc'\r\n                    },\r\n                    {\r\n                        command: 'sort',\r\n                        dir: 'desc',\r\n                        text: messages.sortDescending,\r\n                        iconClass: 'sort-desc'\r\n                    }\r\n                ];\r\n                var ul = $('<ul />', { 'html': kendo.render(template, items) }).appendTo(this.element);\r\n                this.menu = ul.kendoMenu({\r\n                    orientation: 'vertical',\r\n                    select: function (e) {\r\n                        var dir = $(e.item).data('dir');\r\n                        var range = this.options.range.resize({ top: 1 });\r\n                        var options = {\r\n                            value: dir,\r\n                            sheet: false,\r\n                            operatingRange: range,\r\n                            column: this.options.column\r\n                        };\r\n                        if (range.isSortable()) {\r\n                            this.action({\r\n                                command: 'SortCommand',\r\n                                options: options\r\n                            });\r\n                        } else {\r\n                            this.close();\r\n                        }\r\n                    }.bind(this)\r\n                }).data('kendoMenu');\r\n            },\r\n            _appendTemplate: function (template, className, details, expanded) {\r\n                var compiledTemplate = kendo.template(template);\r\n                var wrapper = $('<div class=\\'' + className + '\\'/>').html(compiledTemplate({\r\n                    messages: FILTERMENU_MESSAGES,\r\n                    guid: kendo.guid(),\r\n                    ns: kendo.ns\r\n                }));\r\n                this.element.append(wrapper);\r\n                if (details) {\r\n                    details = new Details(wrapper, {\r\n                        expanded: expanded,\r\n                        toggle: this._detailToggle.bind(this)\r\n                    });\r\n                }\r\n                kendo.bind(wrapper, this.viewModel);\r\n                return wrapper;\r\n            },\r\n            _detailToggle: function (e) {\r\n                this.element.find('[data-role=details]').not(e.sender.element).data('kendoDetails').toggle(!e.show);\r\n            },\r\n            _filterByCondition: function () {\r\n                var isExpanded = this.viewModel.active === 'custom';\r\n                this._appendTemplate(FilterMenu.templates.filterByCondition, FilterMenu.classNames.filterByCondition, true, isExpanded);\r\n            },\r\n            _filterByValue: function () {\r\n                var isExpanded = this.viewModel.active === 'value';\r\n                var wrapper = this._appendTemplate(FilterMenu.templates.filterByValue, FilterMenu.classNames.filterByValue, true, isExpanded);\r\n                this.valuesTreeView = wrapper.find('[data-role=treeview]').data('kendoTreeView');\r\n                var values = FilterMenuController.valuesTree(this.options.range, this.options.column);\r\n                this.viewModel.set('valuesDataSource', new kendo.data.HierarchicalDataSource({ data: values }));\r\n            },\r\n            _actionButtons: function () {\r\n                this._appendTemplate(FilterMenu.templates.actionButtons, FilterMenu.classNames.actionButtons, false);\r\n            },\r\n            _active: function () {\r\n                var activeContainer = this.element.find('[data-role=details]').filter(function (index, element) {\r\n                    return $(element).data('kendoDetails').visible();\r\n                });\r\n                if (activeContainer.hasClass(FilterMenu.classNames.filterByValue)) {\r\n                    this.viewModel.set('active', 'value');\r\n                } else if (activeContainer.hasClass(FilterMenu.classNames.filterByCondition)) {\r\n                    this.viewModel.set('active', 'custom');\r\n                }\r\n            }\r\n        });\r\n        kendo.spreadsheet.FilterMenu = FilterMenu;\r\n        $.extend(true, FilterMenu, {\r\n            classNames: classNames,\r\n            templates: templates\r\n        });\r\n    }(window.kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/editor', ['kendo.core'], f);\r\n}(function () {\r\n    (function (kendo) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var SheetEditor = kendo.Observable.extend({\r\n            init: function (view) {\r\n                kendo.Observable.fn.init.call(this);\r\n                this.view = view;\r\n                this.formulaBar = view.formulaBar;\r\n                this._active = false;\r\n                this.barInput = view.formulaBar.formulaInput;\r\n                this.cellInput = view.formulaInput;\r\n                this.barInput.syncWith(this.cellInput);\r\n                this.cellInput.syncWith(this.barInput);\r\n                this.barInput.bind('keyup', this._triggerUpdate.bind(this));\r\n                this.cellInput.bind('keyup', this._triggerUpdate.bind(this));\r\n                this.barInput.bind('focus', this._focus.bind(this));\r\n                this.cellInput.bind('focus', this._focus.bind(this));\r\n                this.barInput.bind('blur', this._blur.bind(this));\r\n                this.cellInput.bind('blur', this._blur.bind(this));\r\n            },\r\n            events: [\r\n                'activate',\r\n                'deactivate',\r\n                'change',\r\n                'update'\r\n            ],\r\n            _focus: function (e) {\r\n                this.lastActive = e.sender == this.barInput ? 'bar' : 'cell';\r\n            },\r\n            _blur: function () {\r\n            },\r\n            _triggerUpdate: function () {\r\n                this.trigger('update', { value: this.value() });\r\n            },\r\n            activeEditor: function () {\r\n                var editor = null;\r\n                var activeElement = kendo._activeElement();\r\n                if (this.barElement()[0] === activeElement) {\r\n                    editor = this.barInput;\r\n                } else if (this.cellElement()[0] === activeElement) {\r\n                    editor = this.cellInput;\r\n                }\r\n                return editor;\r\n            },\r\n            activate: function (options) {\r\n                this._active = true;\r\n                this._rect = options.rect;\r\n                this.cellInput.position(options.rect);\r\n                this.cellInput.resize(options.rect);\r\n                this.cellInput.tooltip(options.tooltip);\r\n                this.cellInput.activeCell = this.barInput.activeCell = options.range.topLeft;\r\n                this.trigger('activate');\r\n                return this;\r\n            },\r\n            deactivate: function () {\r\n                var cellInput = this.cellInput;\r\n                if (!this._active) {\r\n                    return;\r\n                }\r\n                if (cellInput.value() != this._value) {\r\n                    if (this.trigger('change', { value: cellInput.value() })) {\r\n                        return;\r\n                    }\r\n                }\r\n                this._active = false;\r\n                this._rect = null;\r\n                cellInput.hide();\r\n                this.trigger('deactivate');\r\n            },\r\n            enable: function (enable) {\r\n                this.barInput.enable(enable);\r\n                this.cellInput.enable(enable);\r\n            },\r\n            enableEditing: function (enable) {\r\n                this.barInput.enableEditing(enable);\r\n                this.cellInput.enableEditing(enable);\r\n            },\r\n            barElement: function () {\r\n                return this.barInput.element;\r\n            },\r\n            cellElement: function () {\r\n                return this.cellInput.element;\r\n            },\r\n            focusLastActive: function () {\r\n                this.focus(this.lastActive);\r\n            },\r\n            focus: function (inputType) {\r\n                inputType = inputType || 'cell';\r\n                if (inputType === 'cell') {\r\n                    this.cellInput.element.focus();\r\n                    this.cellInput.end();\r\n                } else {\r\n                    this.barInput.element.focus();\r\n                }\r\n            },\r\n            isActive: function () {\r\n                return this._active;\r\n            },\r\n            isFiltered: function () {\r\n                return this.barInput.popup.visible() || this.cellInput.popup.visible();\r\n            },\r\n            canInsertRef: function (isKeyboardAction) {\r\n                var editor = this.activeEditor();\r\n                return editor && editor.canInsertRef(isKeyboardAction);\r\n            },\r\n            highlightedRefs: function () {\r\n                var editor = this.activeEditor();\r\n                var refs = [];\r\n                if (editor) {\r\n                    refs = editor.highlightedRefs();\r\n                }\r\n                return refs;\r\n            },\r\n            scale: function () {\r\n                this.cellInput.scale();\r\n            },\r\n            toggleTooltip: function (rect) {\r\n                this.cellInput.toggleTooltip(notEqual(this._rect, rect));\r\n            },\r\n            value: function (value) {\r\n                if (value === undefined) {\r\n                    return this.barInput.value();\r\n                }\r\n                if (value === null) {\r\n                    value = '';\r\n                }\r\n                this._value = value;\r\n                this.barInput.value(value);\r\n                this.cellInput.value(value);\r\n            },\r\n            insertNewline: function () {\r\n                this.activeEditor().insertNewline();\r\n                this.scale();\r\n            }\r\n        });\r\n        function notEqual(oldRect, newRect) {\r\n            return oldRect && (oldRect.top !== newRect.top || oldRect.left !== newRect.left);\r\n        }\r\n        kendo.spreadsheet.SheetEditor = SheetEditor;\r\n    }(kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/autofill', [\r\n        'spreadsheet/runtime',\r\n        'spreadsheet/range'\r\n    ], f);\r\n}(function () {\r\n    'use strict';\r\n    if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n        return;\r\n    }\r\n    var spreadsheet = kendo.spreadsheet;\r\n    var Range = spreadsheet.Range;\r\n    var runtime = spreadsheet.calc.runtime;\r\n    var Formula = runtime.Formula;\r\n    var MSG_INCOMPATIBLE = 'Incompatible ranges in fillFrom';\r\n    var MSG_NO_DIRECTION = 'Cannot determine fill direction';\r\n    var MSG_READ_ONLY = 'Destination range contains disabled cells';\r\n    var FillError = Range.FillError = function (msg) {\r\n        this.msg = msg;\r\n    };\r\n    FillError.prototype.toString = function () {\r\n        return this.msg;\r\n    };\r\n    Range.prototype._previewFillFrom = function (srcRange, direction) {\r\n        var destRange = this, sheet = destRange._sheet;\r\n        if (typeof srcRange == 'string') {\r\n            srcRange = sheet.range(srcRange);\r\n        }\r\n        var src = srcRange._ref.toRangeRef();\r\n        var dest = destRange._ref.toRangeRef();\r\n        if (src.intersects(dest)) {\r\n            if (src.eq(dest)) {\r\n                return null;\r\n            }\r\n            dest = dest.clone();\r\n            if (src.topLeft.eq(dest.topLeft)) {\r\n                if (src.width() == dest.width()) {\r\n                    dest.topLeft.row += src.height();\r\n                    direction = 0;\r\n                } else if (src.height() == dest.height()) {\r\n                    dest.topLeft.col += src.width();\r\n                    direction = 1;\r\n                } else {\r\n                    throw new FillError(MSG_INCOMPATIBLE);\r\n                }\r\n            } else if (src.bottomRight.eq(dest.bottomRight)) {\r\n                if (src.width() == dest.width()) {\r\n                    dest.bottomRight.row -= src.height();\r\n                    direction = 2;\r\n                } else if (src.height() == dest.height()) {\r\n                    dest.bottomRight.col -= src.width();\r\n                    direction = 3;\r\n                } else {\r\n                    throw new FillError(MSG_INCOMPATIBLE);\r\n                }\r\n            } else {\r\n                throw new FillError(MSG_INCOMPATIBLE);\r\n            }\r\n            return sheet.range(dest)._previewFillFrom(srcRange, direction);\r\n        }\r\n        if (direction == null) {\r\n            if (src.topLeft.col == dest.topLeft.col) {\r\n                direction = src.topLeft.row < dest.topLeft.row ? 0 : 2;\r\n            } else if (src.topLeft.row == dest.topLeft.row) {\r\n                direction = src.topLeft.col < dest.topLeft.col ? 1 : 3;\r\n            } else {\r\n                throw new FillError(MSG_NO_DIRECTION);\r\n            }\r\n        }\r\n        var horizontal = direction & 1;\r\n        var descending = direction & 2;\r\n        if (horizontal && src.height() != dest.height() || !horizontal && src.width() != dest.width()) {\r\n            throw new FillError(MSG_INCOMPATIBLE);\r\n        }\r\n        var data = srcRange._properties(), n;\r\n        if (!horizontal) {\r\n            data = transpose(data);\r\n            n = dest.height();\r\n        } else {\r\n            n = dest.width();\r\n        }\r\n        var fill = new Array(data.length);\r\n        for (var i = 0; i < data.length; ++i) {\r\n            var s = data[i];\r\n            var f = findSeries(s);\r\n            var a = fill[i] = new Array(n);\r\n            for (var j = 0; j < n; ++j) {\r\n                var idx = descending ? -j - 1 : s.length + j;\r\n                var srcIdx = descending ? s.length - j % s.length - 1 : j % s.length;\r\n                a[descending ? n - j - 1 : j] = f(idx, srcIdx);\r\n            }\r\n        }\r\n        if (!horizontal) {\r\n            fill = transpose(fill);\r\n        }\r\n        return {\r\n            props: fill,\r\n            direction: direction,\r\n            dest: destRange\r\n        };\r\n    };\r\n    Range.prototype.fillFrom = function (srcRange, direction) {\r\n        var x = this._previewFillFrom(srcRange, direction);\r\n        if (!x.dest.enable()) {\r\n            throw new FillError(MSG_READ_ONLY);\r\n        }\r\n        x.dest._properties(x.props);\r\n        return x.dest;\r\n    };\r\n    function linearRegression(data) {\r\n        var N = data.length;\r\n        var mx = (N + 1) / 2, my = data.reduce(function (a, b) {\r\n                return a + b;\r\n            }, 0) / N;\r\n        var s1 = 0, s2 = 0;\r\n        for (var i = 0; i < N; i++) {\r\n            var t1 = i + 1 - mx, t2 = data[i] - my;\r\n            s1 += t1 * t2;\r\n            s2 += t1 * t1;\r\n        }\r\n        if (!s2) {\r\n            return function (N) {\r\n                return data[N % data.length];\r\n            };\r\n        }\r\n        var b = s1 / s2, a = my - b * mx;\r\n        return function (N) {\r\n            return a + b * (N + 1);\r\n        };\r\n    }\r\n    function findSeries(properties) {\r\n        function findStep(a) {\r\n            var diff = a[1] - a[0];\r\n            for (var i = 2; i < a.length; ++i) {\r\n                if (a[i] - a[i - 1] != diff) {\r\n                    return null;\r\n                }\r\n            }\r\n            return diff;\r\n        }\r\n        function getData(a) {\r\n            return a.map(function (v) {\r\n                return v.number;\r\n            });\r\n        }\r\n        var series = [];\r\n        var data = properties.map(function (x) {\r\n            return x.formula || x.value;\r\n        });\r\n        forEachSeries(data, function (begin, end, type, a) {\r\n            var f, values;\r\n            if (type == 'number') {\r\n                values = getData(a);\r\n                if (values.length == 1 && (begin > 0 || end < data.length || formatType(values[0], properties[begin].format) == 'date')) {\r\n                    values.push(values[0] + 1);\r\n                }\r\n                f = linearRegression(values);\r\n            } else if (type == 'string' || type == 'formula' || type == 'boolean') {\r\n                f = function (N, i) {\r\n                    return data[i];\r\n                };\r\n            } else if (Array.isArray(type)) {\r\n                if (a.length == 1) {\r\n                    f = function (N) {\r\n                        return type[(a[0].number + N) % type.length];\r\n                    };\r\n                } else {\r\n                    var diff = findStep(getData(a));\r\n                    if (diff == null) {\r\n                        f = function (N) {\r\n                            return a[N % a.length].value;\r\n                        };\r\n                    } else {\r\n                        f = function (N) {\r\n                            var idx = a[0].number + diff * N;\r\n                            return type[idx % type.length];\r\n                        };\r\n                    }\r\n                }\r\n            } else if (type != 'null') {\r\n                values = getData(a);\r\n                if (values.length == 1) {\r\n                    values.push(values[0] + 1);\r\n                }\r\n                values = linearRegression(values);\r\n                f = function (N, i) {\r\n                    return data[i].replace(/^(.*\\D)\\d+/, '$1' + values(N, i));\r\n                };\r\n            } else {\r\n                f = function () {\r\n                    return null;\r\n                };\r\n            }\r\n            var s = {\r\n                f: f,\r\n                begin: begin,\r\n                end: end,\r\n                len: end - begin\r\n            };\r\n            for (var i = begin; i < end; ++i) {\r\n                series[i] = s;\r\n            }\r\n        });\r\n        return function (N, i) {\r\n            var s = series[i];\r\n            var q = N / data.length | 0;\r\n            var r = N % data.length;\r\n            var n = q * s.len + r - s.begin;\r\n            var value = s.f(n, i);\r\n            var props = clone(properties[i]);\r\n            delete props.enable;\r\n            if (value instanceof Formula) {\r\n                props.formula = value;\r\n            } else {\r\n                props.value = value;\r\n            }\r\n            return props;\r\n        };\r\n    }\r\n    function formatType(value, format) {\r\n        if (format != null) {\r\n            return spreadsheet.formatting.type(value, format);\r\n        }\r\n    }\r\n    function clone(obj) {\r\n        var copy = {};\r\n        Object.keys(obj || {}).forEach(function (key) {\r\n            copy[key] = obj[key];\r\n        });\r\n        return copy;\r\n    }\r\n    function forEachSeries(data, f) {\r\n        var prev = null, start = 0, a = [], type;\r\n        for (var i = 0; i < data.length; ++i) {\r\n            type = getType(data[i]);\r\n            a.push(type);\r\n            if (prev != null && type.type !== prev.type) {\r\n                f(start, i, prev.type, a.slice(start, i));\r\n                start = i;\r\n            }\r\n            prev = type;\r\n        }\r\n        f(start, i, prev.type, a.slice(start, i));\r\n    }\r\n    function getType(el) {\r\n        if (typeof el == 'number') {\r\n            return {\r\n                type: 'number',\r\n                number: el\r\n            };\r\n        }\r\n        if (typeof el == 'string') {\r\n            var lst = findStringList(el);\r\n            if (lst) {\r\n                return lst;\r\n            }\r\n            var m = /^(.*\\D)(\\d+)/.exec(el);\r\n            if (m) {\r\n                el = el.replace(/^(.*\\D)\\d+/, '$1-######');\r\n                return {\r\n                    type: el,\r\n                    match: m,\r\n                    number: parseFloat(m[2])\r\n                };\r\n            }\r\n            return { type: 'string' };\r\n        }\r\n        if (typeof el == 'boolean') {\r\n            return { type: 'boolean' };\r\n        }\r\n        if (el == null) {\r\n            return { type: 'null' };\r\n        }\r\n        if (el instanceof Formula) {\r\n            return { type: 'formula' };\r\n        }\r\n        window.console.error(el);\r\n        throw new Error('Cannot fill data');\r\n    }\r\n    function stringLists() {\r\n        var culture = kendo.culture();\r\n        return [\r\n            culture.calendars.standard.days.namesAbbr,\r\n            culture.calendars.standard.days.names,\r\n            culture.calendars.standard.months.namesAbbr,\r\n            culture.calendars.standard.months.names\r\n        ];\r\n    }\r\n    function findStringList(str) {\r\n        var strl = str.toLowerCase();\r\n        var lists = stringLists();\r\n        for (var i = 0; i < lists.length; ++i) {\r\n            var a = lists[i];\r\n            for (var j = a.length; --j >= 0;) {\r\n                var el = a[j].toLowerCase();\r\n                if (el == strl) {\r\n                    return {\r\n                        type: a,\r\n                        number: j,\r\n                        value: str\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function transpose(a) {\r\n        var height = a.length, width = a[0].length;\r\n        var t = [];\r\n        for (var i = 0; i < width; ++i) {\r\n            t[i] = [];\r\n            for (var j = 0; j < height; ++j) {\r\n                t[i][j] = a[j][i];\r\n            }\r\n        }\r\n        return t;\r\n    }\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('spreadsheet/print', [\r\n        'kendo.pdf',\r\n        'spreadsheet/sheet',\r\n        'spreadsheet/range',\r\n        'spreadsheet/references',\r\n        'spreadsheet/numformat',\r\n        'util/text-metrics'\r\n    ], f);\r\n}(function () {\r\n    'use strict';\r\n    if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n        return;\r\n    }\r\n    var spreadsheet = kendo.spreadsheet;\r\n    var CellRef = spreadsheet.CellRef;\r\n    var drawing = kendo.drawing;\r\n    var formatting = spreadsheet.formatting;\r\n    var geo = kendo.geometry;\r\n    var GUIDELINE_WIDTH = 0.8;\r\n    function distributeCoords(heights, pageHeight) {\r\n        var curr = 0;\r\n        var out = [];\r\n        var threshold = 0.2 * pageHeight;\r\n        var bottom = pageHeight;\r\n        heights.forEach(function (h) {\r\n            if (pageHeight && curr + h > bottom) {\r\n                if (bottom - curr < threshold) {\r\n                    curr = pageHeight * Math.ceil(curr / pageHeight);\r\n                }\r\n                bottom += pageHeight * Math.ceil(h / pageHeight);\r\n            }\r\n            out.push(curr);\r\n            curr += h;\r\n        });\r\n        out.push(curr);\r\n        return out;\r\n    }\r\n    function getMergedCells(sheet, range) {\r\n        var grid = sheet._grid;\r\n        var primary = {};\r\n        var secondary = {};\r\n        sheet.forEachMergedCell(range, function (ref) {\r\n            var topLeft = ref.topLeft;\r\n            grid.forEach(ref, function (cellRef) {\r\n                if (topLeft.eq(cellRef)) {\r\n                    primary[cellRef.print()] = ref;\r\n                } else if (range.contains(cellRef)) {\r\n                    secondary[cellRef.print()] = topLeft;\r\n                }\r\n            });\r\n        });\r\n        return {\r\n            primary: primary,\r\n            secondary: secondary\r\n        };\r\n    }\r\n    function doLayout(sheet, range, options) {\r\n        var cells = [];\r\n        var rowHeights = [];\r\n        var colWidths = [];\r\n        var mergedCells = getMergedCells(sheet, range);\r\n        var maxRow = -1, maxCol = -1;\r\n        sheet.forEach(range, function (row, col, cell) {\r\n            var relrow = row - range.topLeft.row;\r\n            var relcol = col - range.topLeft.col;\r\n            var rh = sheet.rowHeight(row);\r\n            var cw = sheet.columnWidth(col);\r\n            if (!relcol) {\r\n                rowHeights.push(rh);\r\n            }\r\n            if (!relrow) {\r\n                colWidths.push(cw);\r\n            }\r\n            if (sheet.isHiddenColumn(col) || sheet.isHiddenRow(row) || !rh || !cw) {\r\n                return;\r\n            }\r\n            var nonEmpty = options.forScreen || shouldDrawCell(cell);\r\n            if (!(options.emptyCells || nonEmpty)) {\r\n                return;\r\n            }\r\n            var id = new CellRef(row, col).print();\r\n            if (mergedCells.secondary[id]) {\r\n                return;\r\n            }\r\n            if (nonEmpty) {\r\n                maxRow = Math.max(maxRow, relrow);\r\n                maxCol = Math.max(maxCol, relcol);\r\n            } else {\r\n                cell.empty = true;\r\n            }\r\n            var m = mergedCells.primary[id];\r\n            if (m) {\r\n                delete mergedCells.primary[id];\r\n                cell.merged = true;\r\n                cell.rowspan = m.height();\r\n                cell.colspan = m.width();\r\n                if (options.forScreen) {\r\n                    cell.width = sheet._columns.sum(m.topLeft.col, m.bottomRight.col);\r\n                    cell.height = sheet._rows.sum(m.topLeft.row, m.bottomRight.row);\r\n                }\r\n            } else {\r\n                cell.rowspan = 1;\r\n                cell.colspan = 1;\r\n            }\r\n            cell.row = relrow;\r\n            cell.col = relcol;\r\n            cells.push(cell);\r\n        });\r\n        rowHeights = rowHeights.slice(0, maxRow + 1);\r\n        colWidths = colWidths.slice(0, maxCol + 1);\r\n        var pageWidth = options.pageWidth;\r\n        var pageHeight = options.pageHeight;\r\n        var scaleFactor = 1;\r\n        if (options.fitWidth) {\r\n            var width = colWidths.reduce(sum, 0);\r\n            if (width > pageWidth) {\r\n                scaleFactor = pageWidth / width;\r\n                pageWidth /= scaleFactor;\r\n                pageHeight /= scaleFactor;\r\n            }\r\n        }\r\n        var yCoords = distributeCoords(rowHeights, pageHeight || 0);\r\n        var xCoords = distributeCoords(colWidths, pageWidth || 0);\r\n        var boxWidth = 0;\r\n        var boxHeight = 0;\r\n        cells = cells.filter(function (cell) {\r\n            if (cell.empty && (cell.row > maxRow || cell.col > maxCol)) {\r\n                return false;\r\n            }\r\n            cell.left = xCoords[cell.col];\r\n            cell.top = yCoords[cell.row];\r\n            if (cell.merged) {\r\n                if (!options.forScreen) {\r\n                    cell.right = orlast(xCoords, cell.col + cell.colspan);\r\n                    cell.bottom = orlast(yCoords, cell.row + cell.rowspan);\r\n                    cell.width = cell.right - cell.left;\r\n                    cell.height = cell.bottom - cell.top;\r\n                } else {\r\n                    cell.right = cell.left + cell.width;\r\n                    cell.bottom = cell.top + cell.height;\r\n                }\r\n            } else {\r\n                cell.width = colWidths[cell.col];\r\n                cell.height = rowHeights[cell.row];\r\n                cell.bottom = cell.top + cell.height;\r\n                cell.right = cell.left + cell.width;\r\n            }\r\n            boxWidth = Math.max(boxWidth, cell.right);\r\n            boxHeight = Math.max(boxHeight, cell.bottom);\r\n            return true;\r\n        });\r\n        Object.keys(mergedCells.primary).forEach(function (id) {\r\n            var ref = mergedCells.primary[id];\r\n            sheet.forEach(ref.topLeft.toRangeRef(), function (row, col, cell) {\r\n                var relrow = row - range.topLeft.row;\r\n                var relcol = col - range.topLeft.col;\r\n                cell.merged = true;\r\n                cell.colspan = ref.height();\r\n                cell.rowspan = ref.width();\r\n                if (relrow < 0) {\r\n                    cell.top = -sheet._rows.sum(row, row - relrow - 1);\r\n                } else {\r\n                    cell.top = yCoords[relrow];\r\n                }\r\n                if (relcol < 0) {\r\n                    cell.left = -sheet._columns.sum(col, col - relcol - 1);\r\n                } else {\r\n                    cell.left = xCoords[relcol];\r\n                }\r\n                cell.height = sheet._rows.sum(ref.topLeft.row, ref.bottomRight.row);\r\n                cell.width = sheet._columns.sum(ref.topLeft.col, ref.bottomRight.col);\r\n                if (cell.height > 0 && cell.width > 0) {\r\n                    cell.right = cell.left + cell.width;\r\n                    cell.bottom = cell.top + cell.height;\r\n                    cells.push(cell);\r\n                }\r\n            });\r\n        });\r\n        return {\r\n            width: boxWidth,\r\n            height: boxHeight,\r\n            cells: cells.sort(normalOrder),\r\n            scale: scaleFactor,\r\n            xCoords: xCoords,\r\n            yCoords: yCoords\r\n        };\r\n    }\r\n    function sum(a, b) {\r\n        return a + b;\r\n    }\r\n    function orlast(a, i) {\r\n        return i < a.length ? a[i] : a[a.length - 1];\r\n    }\r\n    function shouldDrawCell(cell) {\r\n        return cell.value != null || cell.merged || cell.background != null || cell.borderTop != null || cell.borderRight != null || cell.borderBottom != null || cell.borderLeft != null;\r\n    }\r\n    function normalOrder(a, b) {\r\n        if (a.top < b.top) {\r\n            return -1;\r\n        } else if (a.top == b.top) {\r\n            if (a.left < b.left) {\r\n                return -1;\r\n            } else if (a.left == b.left) {\r\n                return 0;\r\n            } else {\r\n                return 1;\r\n            }\r\n        } else {\r\n            return 1;\r\n        }\r\n    }\r\n    function drawLayout(layout, group, options) {\r\n        var ncols = Math.ceil(layout.width / options.pageWidth);\r\n        var nrows = Math.ceil(layout.height / options.pageHeight);\r\n        var pageWidth = options.pageWidth / layout.scale;\r\n        var pageHeight = options.pageHeight / layout.scale;\r\n        for (var i = 0; i < ncols; ++i) {\r\n            for (var j = 0; j < nrows; ++j) {\r\n                addPage(j, i);\r\n            }\r\n        }\r\n        function addPage(row, col) {\r\n            var left = col * pageWidth;\r\n            var right = left + pageWidth;\r\n            var top = row * pageHeight;\r\n            var bottom = top + pageHeight;\r\n            var endbottom = 0, endright = 0;\r\n            var cells = layout.cells.filter(function (cell) {\r\n                if (cell.right <= left || cell.left >= right || cell.bottom <= top || cell.top >= bottom) {\r\n                    return false;\r\n                }\r\n                endbottom = Math.max(cell.bottom, endbottom);\r\n                endright = Math.max(cell.right, endright);\r\n                return true;\r\n            });\r\n            if (cells.length > 0) {\r\n                var page = new drawing.Group();\r\n                group.append(page);\r\n                page.clip(drawing.Path.fromRect(new geo.Rect([\r\n                    0,\r\n                    0\r\n                ], [\r\n                    options.pageWidth,\r\n                    options.pageHeight\r\n                ])));\r\n                var content = new drawing.Group();\r\n                page.append(content);\r\n                var matrix = geo.Matrix.scale(layout.scale, layout.scale).multiplyCopy(geo.Matrix.translate(-left, -top));\r\n                if (options.hCenter || options.vCenter) {\r\n                    matrix = matrix.multiplyCopy(geo.Matrix.translate(options.hCenter ? (right - endright) / 2 : 0, options.vCenter ? (bottom - endbottom) / 2 : 0));\r\n                }\r\n                content.transform(matrix);\r\n                if (options.guidelines) {\r\n                    var prev = null;\r\n                    layout.xCoords.forEach(function (x) {\r\n                        x = Math.min(x, endright);\r\n                        if (x !== prev && x >= left && x <= right) {\r\n                            prev = x;\r\n                            content.append(new drawing.Path().moveTo(x, top).lineTo(x, endbottom).close().stroke('#999', GUIDELINE_WIDTH));\r\n                        }\r\n                    });\r\n                    var prev = null;\r\n                    layout.yCoords.forEach(function (y) {\r\n                        y = Math.min(y, endbottom);\r\n                        if (y !== prev && y >= top && y <= bottom) {\r\n                            prev = y;\r\n                            content.append(new drawing.Path().moveTo(left, y).lineTo(endright, y).close().stroke('#999', GUIDELINE_WIDTH));\r\n                        }\r\n                    });\r\n                }\r\n                var borders = new drawing.Group();\r\n                cells.forEach(function (cell) {\r\n                    drawCell(cell, content, borders, options);\r\n                });\r\n                content.append(borders);\r\n            }\r\n        }\r\n    }\r\n    function drawCell(cell, content, borders, options) {\r\n        var g = new drawing.Group();\r\n        content.append(g);\r\n        var rect = new geo.Rect([\r\n            cell.left,\r\n            cell.top\r\n        ], [\r\n            cell.width,\r\n            cell.height\r\n        ]);\r\n        if (cell.background || cell.merged) {\r\n            var r2d2 = rect;\r\n            if (options.guidelines) {\r\n                r2d2 = rect.clone();\r\n                r2d2.origin.x += GUIDELINE_WIDTH / 2;\r\n                r2d2.origin.y += GUIDELINE_WIDTH / 2;\r\n                r2d2.size.width -= GUIDELINE_WIDTH;\r\n                r2d2.size.height -= GUIDELINE_WIDTH;\r\n            }\r\n            g.append(new drawing.Rect(r2d2).fill(cell.background || '#fff').stroke(null));\r\n        }\r\n        if (cell.borderLeft) {\r\n            borders.append(new drawing.Path().moveTo(cell.left, cell.top).lineTo(cell.left, cell.bottom).close().stroke(cell.borderLeft.color, cell.borderLeft.size));\r\n        }\r\n        if (cell.borderTop) {\r\n            borders.append(new drawing.Path().moveTo(cell.left, cell.top).lineTo(cell.right, cell.top).close().stroke(cell.borderTop.color, cell.borderTop.size));\r\n        }\r\n        if (cell.borderRight) {\r\n            borders.append(new drawing.Path().moveTo(cell.right, cell.top).lineTo(cell.right, cell.bottom).close().stroke(cell.borderRight.color, cell.borderRight.size));\r\n        }\r\n        if (cell.borderBottom) {\r\n            borders.append(new drawing.Path().moveTo(cell.left, cell.bottom).lineTo(cell.right, cell.bottom).close().stroke(cell.borderBottom.color, cell.borderBottom.size));\r\n        }\r\n        var val = cell.value;\r\n        if (val != null) {\r\n            var type = typeof val == 'number' ? 'number' : null;\r\n            var clip = new drawing.Group();\r\n            clip.clip(drawing.Path.fromRect(rect));\r\n            g.append(clip);\r\n            var f;\r\n            if (cell.format) {\r\n                f = formatting.textAndColor(val, cell.format);\r\n                val = f.text;\r\n                if (f.type) {\r\n                    type = f.type;\r\n                }\r\n            } else {\r\n                val += '';\r\n            }\r\n            if (!cell.textAlign) {\r\n                switch (type) {\r\n                case 'number':\r\n                case 'date':\r\n                case 'percent':\r\n                    cell.textAlign = 'right';\r\n                    break;\r\n                case 'boolean':\r\n                    cell.textAlign = 'center';\r\n                    break;\r\n                }\r\n            }\r\n            drawText(val, f && f.color || cell.color || '#000', cell, clip);\r\n        }\r\n    }\r\n    function drawText(text, color, cell, group) {\r\n        var rect_left = cell.left + 2;\r\n        var rect_top = cell.top + 2;\r\n        var rect_width = cell.width - 4;\r\n        var rect_height = cell.height - 4;\r\n        var font = makeFontDef(cell);\r\n        var style = { font: font };\r\n        var props = {\r\n            font: font,\r\n            fill: { color: color }\r\n        };\r\n        var lines = [], text_height = 0, top = rect_top;\r\n        if (cell.wrap) {\r\n            lineBreak(text, style, rect_width).forEach(function (line) {\r\n                var tmp = new drawing.Text(line.text, [\r\n                    rect_left,\r\n                    top\r\n                ], props);\r\n                top += line.box.height;\r\n                lines.push({\r\n                    el: tmp,\r\n                    box: line.box\r\n                });\r\n            });\r\n            text_height = top - rect_top;\r\n        } else {\r\n            var tmp = new drawing.Text(text, [\r\n                rect_left,\r\n                top\r\n            ], props);\r\n            var box = kendo.util.measureText(text, style);\r\n            lines.push({\r\n                el: tmp,\r\n                box: box\r\n            });\r\n            text_height = box.height;\r\n        }\r\n        var cont = new drawing.Group();\r\n        group.append(cont);\r\n        var vtrans = 0;\r\n        switch (cell.verticalAlign) {\r\n        case 'center':\r\n            vtrans = rect_height - text_height >> 1;\r\n            break;\r\n        case undefined:\r\n        case null:\r\n        case 'bottom':\r\n            vtrans = rect_height - text_height;\r\n            break;\r\n        }\r\n        if (vtrans < 0) {\r\n            vtrans = 0;\r\n        }\r\n        lines.forEach(function (line) {\r\n            cont.append(line.el);\r\n            var htrans = 0;\r\n            switch (cell.textAlign) {\r\n            case 'center':\r\n                htrans = rect_width - line.box.width >> 1;\r\n                break;\r\n            case 'right':\r\n                htrans = rect_width - line.box.width;\r\n                break;\r\n            }\r\n            if (htrans < 0) {\r\n                htrans = 0;\r\n            }\r\n            if (htrans || vtrans) {\r\n                line.el.transform(geo.Matrix.translate(htrans, vtrans));\r\n            }\r\n        });\r\n    }\r\n    function lineBreak(text, style, width) {\r\n        var lines = [];\r\n        var len = text.length;\r\n        var start = 0;\r\n        while (start < len) {\r\n            split(start, len, len);\r\n        }\r\n        return lines;\r\n        function split(min, eol, max) {\r\n            var sub = text.substring(start, eol).trim();\r\n            var box = kendo.util.measureText(sub, style);\r\n            if (box.width <= width) {\r\n                if (eol < max - 1) {\r\n                    split(eol, eol + max >> 1, max);\r\n                } else {\r\n                    lines.push({\r\n                        text: sub,\r\n                        box: box\r\n                    });\r\n                    start = eol;\r\n                }\r\n            } else if (min < eol) {\r\n                split(min, min + eol >> 1, eol);\r\n            }\r\n        }\r\n    }\r\n    function makeFontDef(cell) {\r\n        var font = [];\r\n        if (cell.italic) {\r\n            font.push('italic');\r\n        }\r\n        if (cell.bold) {\r\n            font.push('bold');\r\n        }\r\n        font.push((cell.fontSize || 12) + 'px');\r\n        font.push(cell.fontFamily || 'Arial');\r\n        return font.join(' ');\r\n    }\r\n    function draw(sheet, range, options, callback) {\r\n        if (options == null && callback == null) {\r\n            callback = range;\r\n            options = {};\r\n            range = spreadsheet.SHEETREF;\r\n        }\r\n        if (callback == null) {\r\n            callback = options;\r\n            if (range instanceof spreadsheet.Range || range instanceof spreadsheet.Ref || typeof range == 'string') {\r\n                options = {};\r\n            } else {\r\n                options = range;\r\n                range = spreadsheet.SHEETREF;\r\n            }\r\n        }\r\n        options = kendo.jQuery.extend({\r\n            paperSize: 'A4',\r\n            landscape: true,\r\n            margin: '1cm',\r\n            guidelines: true,\r\n            emptyCells: true,\r\n            fitWidth: false,\r\n            center: false\r\n        }, options);\r\n        var group = new drawing.Group();\r\n        var paper = kendo.pdf.getPaperOptions(options);\r\n        group.options.set('pdf', {\r\n            author: options.author,\r\n            creator: options.creator,\r\n            date: options.date,\r\n            keywords: options.keywords,\r\n            margin: paper.margin,\r\n            multiPage: true,\r\n            paperSize: paper.paperSize,\r\n            subject: options.subject,\r\n            title: options.title\r\n        });\r\n        var pageWidth = paper.paperSize[0];\r\n        var pageHeight = paper.paperSize[1];\r\n        if (paper.margin) {\r\n            pageWidth -= paper.margin.left + paper.margin.right;\r\n            pageHeight -= paper.margin.top + paper.margin.bottom;\r\n        }\r\n        options.pageWidth = pageWidth;\r\n        options.pageHeight = pageHeight;\r\n        var layout = doLayout(sheet, sheet._ref(range), options);\r\n        drawLayout(layout, group, options);\r\n        callback(group);\r\n    }\r\n    spreadsheet.Sheet.prototype.draw = function (range, options, callback) {\r\n        var sheet = this;\r\n        if (sheet._workbook) {\r\n            sheet.recalc(sheet._workbook._context, function () {\r\n                draw(sheet, range, options, callback);\r\n            });\r\n        } else {\r\n            draw(sheet, range, options, callback);\r\n        }\r\n    };\r\n    spreadsheet.draw = {\r\n        doLayout: doLayout,\r\n        drawLayout: drawLayout,\r\n        shouldDrawCell: shouldDrawCell\r\n    };\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));\r\n(function (f, define) {\r\n    define('kendo.spreadsheet', [\r\n        'util/undoredostack',\r\n        'util/text-metrics',\r\n        'util/parse-xml',\r\n        'kendo.excel',\r\n        'kendo.progressbar',\r\n        'kendo.pdf',\r\n        'spreadsheet/commands',\r\n        'spreadsheet/formulabar',\r\n        'spreadsheet/formulainput',\r\n        'spreadsheet/eventlistener',\r\n        'spreadsheet/rangelist',\r\n        'spreadsheet/propertybag',\r\n        'spreadsheet/references',\r\n        'spreadsheet/navigator',\r\n        'spreadsheet/axismanager',\r\n        'spreadsheet/clipboard',\r\n        'spreadsheet/range',\r\n        'spreadsheet/sheet',\r\n        'spreadsheet/sheetsbar',\r\n        'spreadsheet/excel-reader',\r\n        'spreadsheet/workbook',\r\n        'spreadsheet/formulacontext',\r\n        'spreadsheet/controller',\r\n        'spreadsheet/view',\r\n        'spreadsheet/grid',\r\n        'spreadsheet/axis',\r\n        'spreadsheet/filter',\r\n        'spreadsheet/sorter',\r\n        'spreadsheet/runtime',\r\n        'spreadsheet/calc',\r\n        'spreadsheet/numformat',\r\n        'spreadsheet/runtime.functions',\r\n        'spreadsheet/runtime.functions.2',\r\n        'spreadsheet/toolbar',\r\n        'spreadsheet/dialogs',\r\n        'spreadsheet/sheetbinder',\r\n        'spreadsheet/filtermenu',\r\n        'spreadsheet/editor',\r\n        'spreadsheet/autofill',\r\n        'spreadsheet/print'\r\n    ], f);\r\n}(function () {\r\n    var __meta__ = {\r\n        id: 'spreadsheet',\r\n        name: 'Spreadsheet',\r\n        category: 'web',\r\n        description: 'Spreadsheet component',\r\n        depends: [\r\n            'core',\r\n            'binder',\r\n            'colorpicker',\r\n            'combobox',\r\n            'data',\r\n            'dom',\r\n            'dropdownlist',\r\n            'menu',\r\n            'ooxml',\r\n            'popup',\r\n            'sortable',\r\n            'tabstrip',\r\n            'toolbar',\r\n            'treeview',\r\n            'window',\r\n            'validator',\r\n            'excel',\r\n            'pdf',\r\n            'drawing'\r\n        ]\r\n    };\r\n    (function (kendo, undefined) {\r\n        if (kendo.support.browser.msie && kendo.support.browser.version < 9) {\r\n            return;\r\n        }\r\n        var $ = kendo.jQuery;\r\n        var Widget = kendo.ui.Widget;\r\n        var Workbook = kendo.spreadsheet.Workbook;\r\n        var Controller = kendo.spreadsheet.Controller;\r\n        var View = kendo.spreadsheet.View;\r\n        var NS = '.kendoSpreadsheet';\r\n        var ALL_REASONS = {\r\n            recalc: true,\r\n            selection: true,\r\n            activeCell: true,\r\n            layout: true,\r\n            sheetSelection: true,\r\n            resize: true,\r\n            editorChange: false,\r\n            editorClose: false\r\n        };\r\n        var classNames = { wrapper: 'k-widget k-spreadsheet' };\r\n        var Spreadsheet = kendo.ui.Widget.extend({\r\n            init: function (element, options) {\r\n                Widget.fn.init.call(this, element, options);\r\n                this.element.addClass(Spreadsheet.classNames.wrapper);\r\n                this._view = new View(this.element, {\r\n                    messages: this.options.messages.view,\r\n                    toolbar: this.options.toolbar,\r\n                    sheetsbar: this.options.sheetsbar\r\n                });\r\n                this._workbook = new Workbook(this.options, this._view);\r\n                this._controller = new Controller(this._view, this._workbook);\r\n                this._autoRefresh = true;\r\n                this._bindWorkbookEvents();\r\n                this._view.workbook(this._workbook);\r\n                this.refresh();\r\n                this._resizeHandler = function () {\r\n                    this.resize();\r\n                }.bind(this);\r\n                $(window).on('resize' + NS, this._resizeHandler);\r\n            },\r\n            _resize: function () {\r\n                this.refresh({ layout: true });\r\n            },\r\n            _workbookChange: function (e) {\r\n                if (this._autoRefresh) {\r\n                    this.refresh(e);\r\n                }\r\n                if (e.recalc && e.ref) {\r\n                    var range = new kendo.spreadsheet.Range(e.ref, this.activeSheet());\r\n                    this.trigger('change', { range: range });\r\n                }\r\n            },\r\n            activeSheet: function (sheet) {\r\n                return this._workbook.activeSheet(sheet);\r\n            },\r\n            moveSheetToIndex: function (sheet, index) {\r\n                return this._workbook.moveSheetToIndex(sheet, index);\r\n            },\r\n            insertSheet: function (options) {\r\n                return this._workbook.insertSheet(options);\r\n            },\r\n            sheets: function () {\r\n                return this._workbook.sheets();\r\n            },\r\n            removeSheet: function (sheet) {\r\n                return this._workbook.removeSheet(sheet);\r\n            },\r\n            sheetByName: function (sheetName) {\r\n                return this._workbook.sheetByName(sheetName);\r\n            },\r\n            sheetIndex: function (sheet) {\r\n                return this._workbook.sheetIndex(sheet);\r\n            },\r\n            sheetByIndex: function (index) {\r\n                return this._workbook.sheetByIndex(index);\r\n            },\r\n            renameSheet: function (sheet, newSheetName) {\r\n                return this._workbook.renameSheet(sheet, newSheetName);\r\n            },\r\n            refresh: function (reason) {\r\n                if (!reason) {\r\n                    reason = ALL_REASONS;\r\n                }\r\n                if (!reason.editorClose) {\r\n                    this._view.sheet(this._workbook.activeSheet());\r\n                    this._controller.sheet(this._workbook.activeSheet());\r\n                    this._workbook.refresh(reason);\r\n                }\r\n                if (!reason.editorChange) {\r\n                    this._view.refresh(reason);\r\n                    this._controller.refresh();\r\n                    this._view.render();\r\n                    this.trigger('render');\r\n                }\r\n                return this;\r\n            },\r\n            openDialog: function (name, options) {\r\n                return this._view.openDialog(name, options);\r\n            },\r\n            autoRefresh: function (value) {\r\n                if (value !== undefined) {\r\n                    this._autoRefresh = value;\r\n                    if (value === true) {\r\n                        this.refresh();\r\n                    }\r\n                    return this;\r\n                }\r\n                return this._autoRefresh;\r\n            },\r\n            toJSON: function () {\r\n                return this._workbook.toJSON();\r\n            },\r\n            fromJSON: function (json) {\r\n                if (json.sheets) {\r\n                    this._workbook.destroy();\r\n                    this._workbook = new Workbook($.extend({}, this.options, json));\r\n                    this._bindWorkbookEvents();\r\n                    this._view.workbook(this._workbook);\r\n                    this._controller.workbook(this._workbook);\r\n                    this.activeSheet(this.activeSheet());\r\n                } else {\r\n                    this.refresh();\r\n                }\r\n            },\r\n            fromFile: function (blob, name) {\r\n                return this._workbook.fromFile(blob, name);\r\n            },\r\n            saveAsPDF: function (options) {\r\n                this._workbook.saveAsPDF($.extend({}, this.options.pdf, options, { workbook: this._workbook }));\r\n            },\r\n            saveAsExcel: function (options) {\r\n                this._workbook.saveAsExcel(options);\r\n            },\r\n            draw: function (options, callback) {\r\n                this._workbook.draw(options, callback);\r\n            },\r\n            _workbookExcelExport: function (e) {\r\n                if (this.trigger('excelExport', e)) {\r\n                    e.preventDefault();\r\n                }\r\n            },\r\n            _workbookExcelImport: function (e) {\r\n                if (this.trigger('excelImport', e)) {\r\n                    e.preventDefault();\r\n                } else {\r\n                    this._initProgress(e.promise);\r\n                }\r\n            },\r\n            _initProgress: function (deferred) {\r\n                var loading = $('<div class=\\'k-loading-mask\\' ' + 'style=\\'width: 100%; height: 100%; top: 0;\\'>' + '<div class=\\'k-loading-color\\'/>' + '</div>').appendTo(this.element);\r\n                var pb = $('<div class=\\'k-loading-progress\\'>').appendTo(loading).kendoProgressBar({\r\n                    type: 'chunk',\r\n                    chunkCount: 10,\r\n                    min: 0,\r\n                    max: 1,\r\n                    value: 0\r\n                }).data('kendoProgressBar');\r\n                deferred.progress(function (e) {\r\n                    pb.value(e.progress);\r\n                }).always(function () {\r\n                    kendo.destroy(loading);\r\n                    loading.remove();\r\n                });\r\n            },\r\n            _workbookPdfExport: function (e) {\r\n                if (this.trigger('pdfExport', e)) {\r\n                    e.preventDefault();\r\n                }\r\n            },\r\n            _bindWorkbookEvents: function () {\r\n                this._workbook.bind('change', this._workbookChange.bind(this));\r\n                this._workbook.bind('excelExport', this._workbookExcelExport.bind(this));\r\n                this._workbook.bind('excelImport', this._workbookExcelImport.bind(this));\r\n                this._workbook.bind('pdfExport', this._workbookPdfExport.bind(this));\r\n            },\r\n            destroy: function () {\r\n                kendo.ui.Widget.fn.destroy.call(this);\r\n                this._workbook.destroy();\r\n                this._controller.destroy();\r\n                this._view.destroy();\r\n                if (this._resizeHandler) {\r\n                    $(window).off('resize' + NS, this._resizeHandler);\r\n                }\r\n            },\r\n            options: {\r\n                name: 'Spreadsheet',\r\n                toolbar: true,\r\n                sheetsbar: true,\r\n                rows: 200,\r\n                columns: 50,\r\n                rowHeight: 20,\r\n                columnWidth: 64,\r\n                headerHeight: 20,\r\n                headerWidth: 32,\r\n                excel: {\r\n                    proxyURL: '',\r\n                    fileName: 'Workbook.xlsx'\r\n                },\r\n                messages: {},\r\n                pdf: {\r\n                    area: 'workbook',\r\n                    fileName: 'Workbook.pdf',\r\n                    proxyURL: '',\r\n                    paperSize: 'a4',\r\n                    landscape: true,\r\n                    margin: null,\r\n                    title: null,\r\n                    author: null,\r\n                    subject: null,\r\n                    keywords: null,\r\n                    creator: 'Kendo UI PDF Generator v.' + kendo.version,\r\n                    date: null\r\n                }\r\n            },\r\n            events: [\r\n                'pdfExport',\r\n                'excelExport',\r\n                'excelImport',\r\n                'change',\r\n                'render'\r\n            ]\r\n        });\r\n        kendo.spreadsheet.ALL_REASONS = ALL_REASONS;\r\n        kendo.ui.plugin(Spreadsheet);\r\n        $.extend(true, Spreadsheet, { classNames: classNames });\r\n    }(window.kendo));\r\n}, typeof define == 'function' && define.amd ? define : function (a1, a2, a3) {\r\n    (a3 || a2)();\r\n}));"],"sourceRoot":"/source/"}